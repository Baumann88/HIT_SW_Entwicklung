cscope 16 $HOME\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\pjt"               0000407228
	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenComm.c

1 
	~"CANİ’Comm.h
"

3 
	#SDOCÚŒŞWÜdEÇbË
 0x00000001

	)

4 
	#SDOCÚŒŞWÜdWr™e
 0x00000002

	)

5 
	#SDOCOÁrŞWÜdS’d4By‹
 0x00000010

	)

6 
	#SDOCÚŒŞBusNumMu¡”
 0x0000000c

	)

7 
	#SDOCÚŒŞS’dIDMu¡”
 0x000000e0

	)

10 
C®lback
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, * cÚ¡ 
İv_HªdË
);

11 
sšt16
 
StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
);

12 
sšt16
 
G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
);

13 
SyncIn™
();

14 
NMTIn™
();

15 
NMTMªagem’t
();

16 
sšt16
 
Re£tNode
();

19 * 
	gmpv_Bus
[4];

20 * 
	gİpv_Tim”
;

22 * 
	gSDOS”v”hªdË1
;

23 * 
	gSDOS”v”hªdË2
;

24 * 
	gSDOS”v”hªdË3
;

25 * 
	gSDOS”v”hªdË4
;

27 
SyncTy³
 
	gSyncP¬a1
;

28 
SyncTy³
 
	gSyncP¬a2
;

29 
SyncTy³
 
	gSyncP¬a3
;

30 
SyncTy³
 
	gSyncP¬a4
;

32 
TimeTy³
 
	gCANİ’Tim”
;

34 
NMTTy³
 
	gNodeNMTStus
[
NMTEÁry
];

37 
ušt32
 *
	gSDOCÚŒŞWÜd
;

38 
ušt32
 *
	gSDOCÚ‹Á
;

41 
ušt8
 *
	gCANBusStus
;

50 
	$CANİ’CommIn™
(){

51 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig1
;

52 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig2
;

53 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig3
;

54 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig4
;

55 
ušt32
 
Tim”C®lbackP¬am‘”
=0;

56 
ušt32
 
V®ue
;

57 
ušt16
 
ODMemAdr
;

58 
sšt16
 
”r
;

60 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl1
,
DeçuÉBaud¿‹
);

61 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl2
,
DeçuÉBaud¿‹
);

62 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl3
,
DeçuÉBaud¿‹
);

63 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl4
,
DeçuÉBaud¿‹
);

65 
t_Lib¿ryCÚfig1
.
u16_ChªÃl
 = 
CANO³nBusChªÃl1
;

66 
t_Lib¿ryCÚfig1
.
u16_TxFifo
 = 
CANTxFIFOSize
;

67 
t_Lib¿ryCÚfig1
.
u16_RxFifo
 = 
CANRxFIFOSize
;

69 
t_Lib¿ryCÚfig2
.
u16_ChªÃl
 = 
CANO³nBusChªÃl2
;

70 
t_Lib¿ryCÚfig2
.
u16_TxFifo
 = 
CANTxFIFOSize
;

71 
t_Lib¿ryCÚfig2
.
u16_RxFifo
 = 
CANRxFIFOSize
;

73 
t_Lib¿ryCÚfig3
.
u16_ChªÃl
 = 
CANO³nBusChªÃl3
;

74 
t_Lib¿ryCÚfig3
.
u16_TxFifo
 = 
CANTxFIFOSize
;

75 
t_Lib¿ryCÚfig3
.
u16_RxFifo
 = 
CANRxFIFOSize
;

77 
t_Lib¿ryCÚfig4
.
u16_ChªÃl
 = 
CANO³nBusChªÃl4
;

78 
t_Lib¿ryCÚfig4
.
u16_TxFifo
 = 
CANTxFIFOSize
;

79 
t_Lib¿ryCÚfig4
.
u16_RxFifo
 = 
CANRxFIFOSize
;

81 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig1
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[0]);

82 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig2
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[1]);

83 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig3
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[2]);

84 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig4
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[3]);

86 
	`ODMemIn™
();

88 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[0],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË1
);

89 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[1],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË2
);

90 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[2],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË3
);

91 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[3],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË4
);

93 
	`StÜeLßdOD
(0x0000,0x00,
LßdODFromEEP
);

94 
	`PDOLi¡S‘up
();

96 
CANİ’Tim”
.
tick
=0;

100 
CANİ’Tim”
.
Timeout
=
DeçuÉTimeout
;

103 
	`NMTIn™
();

105 
	`SyncIn™
();

107 
SDOCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚŒŞWÜd
,
Ty³U32
,0); *SDOControlWord=0x00000000;

108 
SDOCÚ‹Á
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚ‹Á
,
Ty³U32
,0); *SDOContent=0x00000000;

109 
CANBusStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,1); *CANBusStatus=0x00;

112 
	`x_tim_š™
 (
X_TIM_PRIO_01
,
Tim”C®lbackP¬am‘”
,
C®lback
,&
İpv_Tim”
);

113 
	`x_tim_£t
(
İpv_Tim”
,
D–ayTime
,
CyşeTime
);

114 
	}
}

122 
	$CANBusChk
(){

123 
T_x_ÿn_bus_¡©us
 
t_Stus
;

125 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_01
,&
t_Stus
);

126 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x01;

127 *
CANBusStus
|=0x01;

129 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_02
,&
t_Stus
);

130 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x02;

131 *
CANBusStus
|=0x02;

133 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_03
,&
t_Stus
);

134 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x04;

135 *
CANBusStus
|=0x04;

137 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_04
,&
t_Stus
);

138 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x08;

139 *
CANBusStus
|=0x08;

140 
	}
}

148 
sšt16
 
	$Re£tNode
(){

149 
sšt16
 
”rÜcode
;

150 
ušt16
 
Addr
;

151 
ušt32
 
‹mp
;

152 
ušt16
 
i
;

153 
ušt32
 
Baud¿‹Code
;

155 
i
=0;i<
ODMemL’gth
;i++){

156 
ODMem
[
i
]=0;

159 
DeçuÉBaud¿‹
){

160 125000: 
Baud¿‹Code
=0;;

161 250000: 
Baud¿‹Code
=1;;

162 500000: 
Baud¿‹Code
=2;;

163 800000: 
Baud¿‹Code
=3;;

164 1000000: 
Baud¿‹Code
=4;;

167 
‹mp
=
NodeHWV”siÚ
;

168 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexHwty³
,&
Addr
,&
‹mp
,
S‘OD
);

169 
‹mp
=
NodeS”ŸlNumm”
;

170 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexS”Nr
,&
Addr
,&
‹mp
,
S‘OD
);

171 
‹mp
=(
ušt32
)
DeçuÉNodeID
+((ušt32)
DeçuÉH—¹b—tTime
<<8)+(
Baud¿‹Code
<<24);

172 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexNodeP¬am
,&
Addr
,&
‹mp
,
S‘OD
);

174  
”rÜcode
;

175 
	}
}

183 
	$CANİ’P¬aUpd©e
(
ušt16
 
šdex
,
ušt8
 
subšdex
){

184 
ušt16
 
ODMemAddr
;

185 
ušt32
 
V®ue
;

188 if((
šdex
>=
DevP¬aS¹Index
)&&(index<(DevParaStartIndex+0x0100))){

189 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

190 
subšdex
){

191 
SubšdexCÚŒŞWÜd
:

192 if(
V®ue
==0x00000001){

193 
V®ue
&=~0x00000001;

194 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

195 
	`StÜeLßdOD
(0x0000,0x00,
StÜeODToEEP
);

197 if(
V®ue
==0x00000002){

198 
V®ue
&=~0x00000002;

199 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

200 
	`Re£tNode
();

201 
	`StÜeLßdOD
(0x0000,0x00,
StÜeODToEEP
);

206 
	}
}

216 
	$SDOHªdË
(){

217 
ušt8
 
D©a
[8];

218 
ušt8
 
L’gth
=8;

219 
sšt16
 
”rcode
;

220 
ušt16
 
šdex
;

221 
ušt8
 
subšdex
;

222 
ušt16
 
ODMemAddr
;

223 
ušt32
 
V®ue
;

224 
ušt16
 
£ndbus
;

225 
ušt16
 
£ndId
;

229 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË1
,&
D©a
[0],&
L’gth
);

230 if(
”rcode
==
C_NO_ERR
){

231 
šdex
=
D©a
[2];

232 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

233 
subšdex
=
D©a
[3];

235 if(
D©a
[0]==0x40){

236 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

237 
D©a
[0]=0x43;

238 
D©a
[4]=
V®ue
&0xff;

239 
D©a
[5]=(
V®ue
>>8)&0xff;

240 
D©a
[6]=(
V®ue
>>16)&0xff;

241 
D©a
[7]=(
V®ue
>>24)&0xff;

244 if(
D©a
[0]==0x23){

245 
V®ue
=
D©a
[7];

246 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

247 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

248 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

249 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

250 
D©a
[0]=0x60;

251 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

253 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[0], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

257 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË2
,&
D©a
[0],&
L’gth
);

258 if(
”rcode
==
C_NO_ERR
){

259 
šdex
=
D©a
[2];

260 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

261 
subšdex
=
D©a
[3];

263 if(
D©a
[0]==0x40){

264 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

265 
D©a
[0]=0x43;

266 
D©a
[4]=
V®ue
&0xff;

267 
D©a
[5]=(
V®ue
>>8)&0xff;

268 
D©a
[6]=(
V®ue
>>16)&0xff;

269 
D©a
[7]=(
V®ue
>>24)&0xff;

272 if(
D©a
[0]==0x23){

273 
V®ue
=
D©a
[7];

274 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

275 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

276 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

277 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

278 
D©a
[0]=0x60;

279 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

281 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[1], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

285 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË3
,&
D©a
[0],&
L’gth
);

286 if(
”rcode
==
C_NO_ERR
){

287 
šdex
=
D©a
[2];

288 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

289 
subšdex
=
D©a
[3];

291 if(
D©a
[0]==0x40){

292 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

293 
D©a
[0]=0x43;

294 
D©a
[4]=
V®ue
&0xff;

295 
D©a
[5]=(
V®ue
>>8)&0xff;

296 
D©a
[6]=(
V®ue
>>16)&0xff;

297 
D©a
[7]=(
V®ue
>>24)&0xff;

300 if(
D©a
[0]==0x23){

301 
V®ue
=
D©a
[7];

302 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

303 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

304 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

305 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

306 
D©a
[0]=0x60;

307 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

309 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[2], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

312 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË4
,&
D©a
[0],&
L’gth
);

313 if(
”rcode
==
C_NO_ERR
){

314 
šdex
=
D©a
[2];

315 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

316 
subšdex
=
D©a
[3];

318 if(
D©a
[0]==0x40){

319 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

320 
D©a
[0]=0x43;

321 
D©a
[4]=
V®ue
&0xff;

322 
D©a
[5]=(
V®ue
>>8)&0xff;

323 
D©a
[6]=(
V®ue
>>16)&0xff;

324 
D©a
[7]=(
V®ue
>>24)&0xff;

327 if(
D©a
[0]==0x23){

328 
V®ue
=
D©a
[7];

329 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

330 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

331 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

332 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

333 
D©a
[0]=0x60;

334 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

336 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[3], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

339 if(*
SDOCÚŒŞWÜd
&
SDOCÚŒŞWÜdEÇbË
){

340 if(*
SDOCÚŒŞWÜd
&
SDOCÚŒŞWÜdWr™e
) {

341 if(*
SDOCÚŒŞWÜd
&
SDOCOÁrŞWÜdS’d4By‹
è
D©a
[0]=0x23;

342 
D©a
[0]=0x2b;

344 
D©a
[0]=0x40;

345 
£ndbus
=(
ušt16
)((*
SDOCÚŒŞWÜd
&
SDOCÚŒŞBusNumMu¡”
)>>2);

346 
£ndId
=(
ušt16
)((*
SDOCÚŒŞWÜd
&
SDOCÚŒŞS’dIDMu¡”
)>>5);

347 
D©a
[1]=(
ušt8
)((*
SDOCÚŒŞWÜd
&0x0000ff00)>>8);

348 
D©a
[2]=(
ušt8
)((*
SDOCÚŒŞWÜd
&0x00ff0000)>>16);

349 
D©a
[3]=(
ušt8
)((*
SDOCÚŒŞWÜd
&0xff000000)>>24);

350 
D©a
[4]=(
ušt8
)(*
SDOCÚ‹Á
&0x000000ff);

351 
D©a
[5]=(
ušt8
)((*
SDOCÚ‹Á
&0x0000ff00)>>8);

352 
D©a
[6]=(
ušt8
)((*
SDOCÚ‹Á
&0x00ff0000)>>16);

353 
D©a
[7]=(
ušt8
)((*
SDOCÚ‹Á
&0xff000000)>>24);

355 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[
£ndbus
],
RxSDO_COB
+
£ndId
,&
D©a
[0],8);

356 *
SDOCÚŒŞWÜd
&=~
SDOCÚŒŞWÜdEÇbË
;

358 
	}
}

366 
sšt16
 
	$PDOHªdË
(){

367 
ušt8
 
PDOL’
;

368 
ušt8
 
D©a
[8];

369 
ušt16
 
iTPDO
,
iRPDO
;

370 
ušt16
 
iD©a
;

371 
sšt16
 
PDOR—dResuÉ
;

372 
sšt16
 
”rÜcode
=0;

374 
PDOL’
=8;

377 
iTPDO
=0;iTPDO<
MaxNrTPDO
;iTPDO++){

378 if(
TPDOLi¡
[
iTPDO
].
’abË
==
Di§bË
) ;

380 if(
TPDOLi¡
[
iTPDO
].
S’dTrigg”
==1){

381 
TPDOLi¡
[
iTPDO
].
S’dTrigg”
=0;

383 if(
TPDOLi¡
[
iTPDO
].
D©aCouÁ
==0) ;

384 
iD©a
=0;iD©a<
PDOL’
;iData++){

385 if(
iD©a
<
TPDOLi¡
[
iTPDO
].
D©aCouÁ
è
D©a
[iData]=*TPDOList[iTPDO].Data[iData];

386 
D©a
[
iD©a
]=0;

388 
”rÜcode
=
	`cŞ2_pdo_wr™e
(
mpv_Bus
[
TPDOLi¡
[
iTPDO
].
BusNumb”
],TPDOLi¡[iTPDO].
COBID
,&
D©a
[0],8);

393 
iRPDO
=0;iRPDO<
MaxNrRPDO
;iRPDO++){

394 if(
RPDOLi¡
[
iRPDO
].
’abË
==
Di§bË
) ;

395 
PDOR—dResuÉ
=
	`cŞ2_pdo_»ad
(
RPDOLi¡
[
iRPDO
].
RPDOHªdË
,&
D©a
[0],&
PDOL’
);

397 if(
PDOR—dResuÉ
==
C_NO_ERR
){

398 if(
RPDOLi¡
[
iRPDO
].
D©aCouÁ
==0) ;

400 
iD©a
=0;iD©a<
RPDOLi¡
[
iRPDO
].
D©aCouÁ
;iData++){

401 *
RPDOLi¡
[
iRPDO
].
D©a
[
iD©a
]=Data[iData];

405  
”rÜcode
;

406 
	}
}

414 
	$TaskCANİ’
(){

415 
	`cŞ2_sk
(
mpv_Bus
[0]);

416 
	`cŞ2_sk
(
mpv_Bus
[1]);

417 
	`cŞ2_sk
(
mpv_Bus
[2]);

418 
	`cŞ2_sk
(
mpv_Bus
[3]);

419 
	`NMTMªagem’t
();

420 
	`SDOHªdË
();

421 
	`PDOHªdË
();

422 
	`CANBusChk
();

423 
	}
}

431 
	$SyncIn™
(){

432 
ušt32
 
v®ue
=0;

433 
ušt16
 
ODMemAddr
;

435 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexCÚfigSync12
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

436 
SyncP¬a1
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

437 
SyncP¬a1
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

438 
SyncP¬a2
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+2;

439 
SyncP¬a2
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+3;

441 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexCÚfigSync34
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

442 
SyncP¬a3
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

443 
SyncP¬a3
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

444 
SyncP¬a4
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+2;

445 
SyncP¬a4
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+3;

446 
	}
}

454 
	$SyncHªdË
(){

455 
ušt8
 
D©a
=0;

458 if((*
SyncP¬a1
.
Stus
)&
SyncEÇbË
){

459 if(
CANİ’Tim”
.
tick
==*
SyncP¬a1
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[0],0x80,&
D©a
,0);

463 if((*
SyncP¬a2
.
Stus
)&
SyncEÇbË
){

464 if(
CANİ’Tim”
.
tick
==*
SyncP¬a2
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[1],0x80,&
D©a
,0);

468 if((*
SyncP¬a3
.
Stus
)&
SyncEÇbË
){

469 if(
CANİ’Tim”
.
tick
==*
SyncP¬a3
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[2],0x80,&
D©a
,0);

473 if((*
SyncP¬a4
.
Stus
)&
SyncEÇbË
){

474 if(
CANİ’Tim”
.
tick
==*
SyncP¬a4
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[3],0x80,&
D©a
,0);

476 
	}
}

485 
	$C®lback
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, * cÚ¡ 
İv_HªdË
){

486 *
Opv
;

487 
ušt32
 
IÅutP¬am‘”
;

488 
ušt16
 
i
;

490 
IÅutP¬am‘”
=
ou32_C®lbackP¬am‘”
;

491 
Opv
=
İv_HªdË
;

494 
	`SyncHªdË
();

497 
CANİ’Tim”
.
tick
++;

498 if(
CANİ’Tim”
.
tick
==CANİ’Tim”.
Timeout
){

499 
CANİ’Tim”
.
tick
=0;

501 
i
=0;i<
MaxNrTPDO
;i++){

502 if(!
TPDOLi¡
[
i
].
’abË
) ;

503 if(
TPDOLi¡
[
i
].
tim”
>=(TPDOLi¡[i].
Ev’tTime
)){

504 
TPDOLi¡
[
i
].
S’dTrigg”
=1;

505 
TPDOLi¡
[
i
].
tim”
=0;

507 
TPDOLi¡
[
i
].
tim”
++;

510 
	}
}

520 
	$NMTIn™
(){

521 
ušt32
 
v®ue
;

522 
ušt16
 
ODMemAddr
;

523 
ušt16
 
iNMT
;

526 
	`G‘S‘OD
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

527 
NodeNMTStus
[0].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

528 
NodeNMTStus
[0].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

529 
	`G‘S‘OD
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

530 
NodeNMTStus
[0].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

532 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

533 
NodeNMTStus
[1].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

534 
NodeNMTStus
[1].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

535 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

536 
NodeNMTStus
[1].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

538 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

539 
NodeNMTStus
[2].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

540 
NodeNMTStus
[2].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

541 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

542 
NodeNMTStus
[2].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

544 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

545 
NodeNMTStus
[3].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

546 
NodeNMTStus
[3].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

547 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

548 
NodeNMTStus
[3].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

550 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

551 
NodeNMTStus
[4].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

552 
NodeNMTStus
[4].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

553 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

554 
NodeNMTStus
[4].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

556 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

557 
NodeNMTStus
[5].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

558 
NodeNMTStus
[5].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

559 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

560 
NodeNMTStus
[5].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

562 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

563 
NodeNMTStus
[6].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

564 
NodeNMTStus
[6].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

565 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

566 
NodeNMTStus
[6].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

568 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

569 
NodeNMTStus
[7].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

570 
NodeNMTStus
[7].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

571 
	`G‘S‘OD
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

572 
NodeNMTStus
[7].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

574 
	`G‘S‘OD
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

575 
NodeNMTStus
[8].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

576 
NodeNMTStus
[8].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

577 
	`G‘S‘OD
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

578 
NodeNMTStus
[8].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

580 
	`G‘S‘OD
(
AutoDriveS¹Index
,
SubšdexCam”a1NodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

581 
NodeNMTStus
[9].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

582 
NodeNMTStus
[9].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

583 
	`G‘S‘OD
(
AutoDriveS¹Index
,
SubšdexCam”a1NMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

584 
NodeNMTStus
[9].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

586 
	`G‘S‘OD
(
AutoDriveS¹Index
,
SubšdexCam”a2NodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

587 
NodeNMTStus
[10].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

588 
NodeNMTStus
[10].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

589 
	`G‘S‘OD
(
AutoDriveS¹Index
,
SubšdexCam”a2NMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

590 
NodeNMTStus
[10].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

592 
NodeNMTStus
[0].
NodeID
=
IDInv”‹r111
;

593 
NodeNMTStus
[1].
NodeID
=
IDInv”‹r112
;

594 
NodeNMTStus
[2].
NodeID
=
IDInv”‹r121
;

595 
NodeNMTStus
[3].
NodeID
=
IDInv”‹r122
;

596 
NodeNMTStus
[4].
NodeID
=
IDInv”‹r211
;

597 
NodeNMTStus
[5].
NodeID
=
IDInv”‹r212
;

598 
NodeNMTStus
[6].
NodeID
=
IDInv”‹r221
;

599 
NodeNMTStus
[7].
NodeID
=
IDInv”‹r222
;

600 
NodeNMTStus
[8].
NodeID
=
IDRemÙeCÚŒŞ
;

601 
NodeNMTStus
[9].
NodeID
=
IDCam”a1
;

602 
NodeNMTStus
[10].
NodeID
=
IDCam”a2
;

604 
NodeNMTStus
[0].
BusChªÃl
=
BusChInv”‹r111
;

605 
NodeNMTStus
[1].
BusChªÃl
=
BusChInv”‹r112
;

606 
NodeNMTStus
[2].
BusChªÃl
=
BusChInv”‹r121
;

607 
NodeNMTStus
[3].
BusChªÃl
=
BusChInv”‹r122
;

608 
NodeNMTStus
[4].
BusChªÃl
=
BusChInv”‹r211
;

609 
NodeNMTStus
[5].
BusChªÃl
=
BusChInv”‹r212
;

610 
NodeNMTStus
[6].
BusChªÃl
=
BusChInv”‹r221
;

611 
NodeNMTStus
[7].
BusChªÃl
=
BusChInv”‹r222
;

612 
NodeNMTStus
[8].
BusChªÃl
=
BusChRemÙeCÚŒŞ
;

613 
NodeNMTStus
[9].
BusChªÃl
=
BusChCam”a1
;

614 
NodeNMTStus
[10].
BusChªÃl
=
BusChCam”a2
;

617 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

618 
	`cŞ2_h—¹b—t_»gi¡”_cÚsum”
(
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
],NodeNMTStus[iNMT].
NodeID
,5000);

620 
	}
}

628 
	$NMTMªagem’t
(){

629 
ušt16
 
tmp
;

630 
ušt8
 
cmdNMT
;

631 
ušt16
 
iNMT
;

634 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

635 
	`cŞ2_nmt_g‘_¦ave_¡©us
(
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
],NodeNMTStus[iNMT].
NodeID
, NodeNMTStus[iNMT].
NMTStus
, NodeNMTStus[iNMT].
NodeStus
);

638 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

639 
tmp
=*
NodeNMTStus
[
iNMT
].
NMTS’d
;

640 ià(
tmp
&0x0001){

641 
cmdNMT
=(
ušt8
)(
tmp
>>8);

642 
	`cŞ2_nmt_£nd
 (
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
], NodeNMTStus[iNMT].
NodeID
,
cmdNMT
);

643 *
NodeNMTStus
[
iNMT
].
NMTS’d
=0x0000;

647 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenComm.h

1 #iâdeà
_CANOPENCOMM_H


2 
	#_CANOPENCOMM_H


	)

3 
	~"¡wty³s.h
"

4 
	~"DeviûOD.h
"

5 
	~"ODCÚ‹Á.h
"

6 
	~"CANİ’DeviûCÚfig.h
"

7 
	~"MESCÚfig.h
"

8 
	~"cŞ2.h
"

9 
	~"x_sys.h
"

10 
	~"x_tim.h
"

15 
	#EÇbË
 0x01

	)

16 
	#Di§bË
 0x00

	)

18 
	#TxPDO
 0x00

	)

19 
	#RxPDO
 0x01

	)

21 
	#DœIn
 0x00

	)

22 
	#DœOut
 0x01

	)

27 *
mpv_Bus
[4];

32 #ifdeà
Ma¡”CPU


33 
	#NMTEÁry
 (
NrOfMÙÜInv”‹r
+
NrOfRemÙeCÚŒŞ
+
NrOfCam”a
)

	)

36 #ifdeà
SÏveCPU


37 
	#NMTEÁry
 (
NrOfHubSys
)

	)

43 
ušt8
 *
	mNMTStus
;

44 
ušt8
 *
	mNodeStus
;

45 
ušt16
 *
	mNMTS’d
;

46 
ušt8
 
	mNodeID
;

47 
ušt16
 
	mBusChªÃl
;

48 }
	tNMTTy³
;

53 
	#NodeHWV”siÚ
 101

	)

54 
	#NodeS”ŸlNumm”
 10

	)

56 #ifdeà
Ma¡”CPU


57 
	#DeçuÉNodeID
 0x002

	)

60 #ifdeà
SÏveCPU


61 
	#DeçuÉNodeID
 0x003

	)

64 
	#DeçuÉWifiModuËID
 0x001

	)

65 
	#DeçuÉSDOTimeOut
 500

	)

66 
	#DeçuÉH—¹b—tTime
 0

	)

71 
	#SyncEÇbË
 0x01

	)

74 
ušt8
 *
	mStus
;

75 
ušt8
 *
	mTimeWnd
;

76 }
	tSyncTy³
;

78 
SyncTy³
 
SyncP¬a1
;

79 
SyncTy³
 
SyncP¬a2
;

80 
SyncTy³
 
SyncP¬a3
;

81 
SyncTy³
 
SyncP¬a4
;

85 
	#TxSDO_COB
 0x580

	)

86 
	#RxSDO_COB
 0x600

	)

88 
	#RemÙeTxSDO_COB
 0x600

	)

89 
	#RemÙeRxSDO_COB
 0x580

	)

95 
	#MaxNrTPDO
 32

	)

96 
	#MaxNrRPDO
 32

	)

98 
	#DeçuÉT¿nsmissiÚTy³
 0x00

	)

99 
	#DeçuÉEv’tTime
 40

100 

	)

102 
ušt16
 
	mCOBID
;

103 
ušt8
 
	m’abË
;

104 
ušt16
 
	mEv’tTime
;

105 
ušt16
 
	mtim”
;

106 
ušt16
 
	mS’dTrigg”
;

107 
ušt16
 
	mD©aCouÁ
;

108 
ušt16
 
	mBusNumb”
;

109 
ušt8
 *
	mD©a
[8];

110 }
	tTPDOTy³
;

113 
ušt16
 
	mCOBID
;

114 
ušt8
 
	m’abË
;

115 
ušt16
 
	mD©aCouÁ
;

116 
ušt16
 
	mBusNumb”
;

117 
ušt8
 *
	mD©a
[8];

118 *
	mRPDOHªdË
;

119 }
	tRPDOTy³
;

121 
TPDOTy³
 
TPDOLi¡
[
MaxNrTPDO
];

122 
RPDOTy³
 
RPDOLi¡
[
MaxNrRPDO
];

128 
	#CyşeTime
 1

	)

129 
	#D–ayTime
 0

	)

131 
	#DeçuÉTimeout
 200

	)

134 
ušt32
 
	mtick
;

135 
ušt32
 
	mTimeout
;

136 }
	tTimeTy³
;

138 
TimeTy³
 
CANİ’Tim”
;

143 
CANİ’CommIn™
();

144 
TaskCANİ’
();

145 
PDOLi¡S‘up
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenDeviceConfig.h

1 #iâdeà
_CANOPENDEVICECONFIG_H


2 
	#_CANOPENDEVICECONFIG_H


	)

4 
	~"x_ÿn.h
"

6 
	#CANTxFIFOSize
 256

	)

7 
	#CANRxFIFOSize
 256

	)

9 
	#CANO³nBusChªÃl1
 
X_CAN_BUS_01


	)

10 
	#CANO³nBusChªÃl2
 
X_CAN_BUS_02


	)

11 
	#CANO³nBusChªÃl3
 
X_CAN_BUS_03


	)

12 
	#CANO³nBusChªÃl4
 
X_CAN_BUS_04


	)

13 
	#DeçuÉBaud¿‹
 250000u

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CommInterface.c

1 
	~"CANİ’Comm.h
"

2 
	~"DeviûOD.h
"

3 
	~"CommIÁ”çû.h
"

4 
	~"AµCÚfig.h
"

6 
	#DeçuÉIÁ”çûEv’tTime
 80

	)

8 
	$In™TaskCommIÁ”çû
(){

9 
	`CANİ’CommIn™
();

10 
	}
}

12 
	$TaskCommIÁ”çû
(){

13 
	`TaskCANİ’
();

14 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CommInterface.h

1 #iâdeà
_COMMINTERFACE_H


2 
	#_COMMINTERFACE_H


	)

3 
	~"¡wty³s.h
"

5 
In™TaskCommIÁ”çû
();

6 
TaskCommIÁ”çû
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\PDOConfig.c

1 
	~"CANİ’Comm.h
"

3 
TPDOTy³
 
	gTPDOLi¡
[
MaxNrTPDO
];

4 
RPDOTy³
 
	gRPDOLi¡
[
MaxNrRPDO
];

6 
	$PDOLi¡S‘up
(){

7 
ušt16
 
ODMemAddr
;

8 
ušt16
 
Index
;

9 
ušt8
 
Subšdex
;

10 
ušt16
 
tmp
;

11 
ušt32
 
V®ue
;

12 
ušt16
 
iBy‹
;

16 
TPDOLi¡
[0].
’abË
=1;

17 
TPDOLi¡
[0].
COBID
=0x182;

18 
TPDOLi¡
[0].
BusNumb”
=0;

19 
TPDOLi¡
[0].
Ev’tTime
=4;

20 
TPDOLi¡
[0].
D©aCouÁ
=0;

22 
V®ue
=0x64000004;

23 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

24 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

25 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

26 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

27 
iBy‹
=0;iBy‹<
tmp
;iByte++){

28 
TPDOLi¡
[0].
D©a
[TPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

29 
TPDOLi¡
[0].
D©aCouÁ
++;}

31 
V®ue
=0x65006104;

32 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

33 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

34 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

35 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

36 
iBy‹
=0;iBy‹<
tmp
;iByte++){

37 
TPDOLi¡
[0].
D©a
[TPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

38 
TPDOLi¡
[0].
D©aCouÁ
++;}

43 
TPDOLi¡
[1].
’abË
=1;

44 
TPDOLi¡
[1].
COBID
=0x192;

45 
TPDOLi¡
[1].
BusNumb”
=0;

46 
TPDOLi¡
[1].
Ev’tTime
=1;

47 
TPDOLi¡
[1].
D©aCouÁ
=0;

49 
V®ue
=0x63001204;

50 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

51 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

52 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

53 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

54 
iBy‹
=0;iBy‹<
tmp
;iByte++){

55 
TPDOLi¡
[1].
D©a
[TPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

56 
TPDOLi¡
[1].
D©aCouÁ
++;}

58 
V®ue
=0x63001304;

59 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

60 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

61 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

62 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

63 
iBy‹
=0;iBy‹<
tmp
;iByte++){

64 
TPDOLi¡
[1].
D©a
[TPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

65 
TPDOLi¡
[1].
D©aCouÁ
++;}

70 
TPDOLi¡
[2].
’abË
=1;

71 
TPDOLi¡
[2].
COBID
=0x202;

72 
TPDOLi¡
[2].
BusNumb”
=0;

73 
TPDOLi¡
[2].
Ev’tTime
=1;

74 
TPDOLi¡
[2].
D©aCouÁ
=0;

76 
V®ue
=0x63001404;

77 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

78 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

79 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

80 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

81 
iBy‹
=0;iBy‹<
tmp
;iByte++){

82 
TPDOLi¡
[2].
D©a
[TPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

83 
TPDOLi¡
[2].
D©aCouÁ
++;}

85 
V®ue
=0x63001504;

86 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

87 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

88 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

89 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

90 
iBy‹
=0;iBy‹<
tmp
;iByte++){

91 
TPDOLi¡
[2].
D©a
[TPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

92 
TPDOLi¡
[2].
D©aCouÁ
++;}

97 
TPDOLi¡
[3].
’abË
=1;

98 
TPDOLi¡
[3].
COBID
=0x209;

99 
TPDOLi¡
[3].
BusNumb”
=1;

100 
TPDOLi¡
[3].
Ev’tTime
=1;

101 
TPDOLi¡
[3].
D©aCouÁ
=0;

103 
V®ue
=0x61000104;

104 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

105 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

106 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

107 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

108 
iBy‹
=0;iBy‹<
tmp
;iByte++){

109 
TPDOLi¡
[3].
D©a
[TPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

110 
TPDOLi¡
[3].
D©aCouÁ
++;}

112 
V®ue
=0x61000204;

113 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

114 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

115 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

116 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

117 
iBy‹
=0;iBy‹<
tmp
;iByte++){

118 
TPDOLi¡
[3].
D©a
[TPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

119 
TPDOLi¡
[3].
D©aCouÁ
++;}

124 
TPDOLi¡
[4].
’abË
=1;

125 
TPDOLi¡
[4].
COBID
=0x20a;

126 
TPDOLi¡
[4].
BusNumb”
=1;

127 
TPDOLi¡
[4].
Ev’tTime
=1;

128 
TPDOLi¡
[4].
D©aCouÁ
=0;

130 
V®ue
=0x61010104;

131 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

132 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

133 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

134 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

135 
iBy‹
=0;iBy‹<
tmp
;iByte++){

136 
TPDOLi¡
[4].
D©a
[TPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

137 
TPDOLi¡
[4].
D©aCouÁ
++;}

139 
V®ue
=0x61010204;

140 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

141 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

142 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

143 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

144 
iBy‹
=0;iBy‹<
tmp
;iByte++){

145 
TPDOLi¡
[4].
D©a
[TPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

146 
TPDOLi¡
[4].
D©aCouÁ
++;}

151 
TPDOLi¡
[5].
’abË
=1;

152 
TPDOLi¡
[5].
COBID
=0x20b;

153 
TPDOLi¡
[5].
BusNumb”
=1;

154 
TPDOLi¡
[5].
Ev’tTime
=1;

155 
TPDOLi¡
[5].
D©aCouÁ
=0;

157 
V®ue
=0x61020104;

158 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

159 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

160 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

161 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

162 
iBy‹
=0;iBy‹<
tmp
;iByte++){

163 
TPDOLi¡
[5].
D©a
[TPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

164 
TPDOLi¡
[5].
D©aCouÁ
++;}

166 
V®ue
=0x61020204;

167 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

168 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

169 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

170 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

171 
iBy‹
=0;iBy‹<
tmp
;iByte++){

172 
TPDOLi¡
[5].
D©a
[TPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

173 
TPDOLi¡
[5].
D©aCouÁ
++;}

178 
TPDOLi¡
[6].
’abË
=1;

179 
TPDOLi¡
[6].
COBID
=0x20c;

180 
TPDOLi¡
[6].
BusNumb”
=1;

181 
TPDOLi¡
[6].
Ev’tTime
=1;

182 
TPDOLi¡
[6].
D©aCouÁ
=0;

184 
V®ue
=0x61030104;

185 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

186 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

187 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

188 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

189 
iBy‹
=0;iBy‹<
tmp
;iByte++){

190 
TPDOLi¡
[6].
D©a
[TPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

191 
TPDOLi¡
[6].
D©aCouÁ
++;}

193 
V®ue
=0x61030204;

194 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

195 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

196 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

197 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

198 
iBy‹
=0;iBy‹<
tmp
;iByte++){

199 
TPDOLi¡
[6].
D©a
[TPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

200 
TPDOLi¡
[6].
D©aCouÁ
++;}

205 
TPDOLi¡
[7].
’abË
=1;

206 
TPDOLi¡
[7].
COBID
=0x210;

207 
TPDOLi¡
[7].
BusNumb”
=1;

208 
TPDOLi¡
[7].
Ev’tTime
=1;

209 
TPDOLi¡
[7].
D©aCouÁ
=0;

211 
V®ue
=0x61040104;

212 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

213 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

214 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

215 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

216 
iBy‹
=0;iBy‹<
tmp
;iByte++){

217 
TPDOLi¡
[7].
D©a
[TPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

218 
TPDOLi¡
[7].
D©aCouÁ
++;}

220 
V®ue
=0x61040204;

221 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

222 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

223 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

224 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

225 
iBy‹
=0;iBy‹<
tmp
;iByte++){

226 
TPDOLi¡
[7].
D©a
[TPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

227 
TPDOLi¡
[7].
D©aCouÁ
++;}

232 
TPDOLi¡
[8].
’abË
=1;

233 
TPDOLi¡
[8].
COBID
=0x20f;

234 
TPDOLi¡
[8].
BusNumb”
=1;

235 
TPDOLi¡
[8].
Ev’tTime
=1;

236 
TPDOLi¡
[8].
D©aCouÁ
=0;

238 
V®ue
=0x61050104;

239 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

240 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

241 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

242 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

243 
iBy‹
=0;iBy‹<
tmp
;iByte++){

244 
TPDOLi¡
[8].
D©a
[TPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

245 
TPDOLi¡
[8].
D©aCouÁ
++;}

247 
V®ue
=0x61050204;

248 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

249 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

250 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

251 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

252 
iBy‹
=0;iBy‹<
tmp
;iByte++){

253 
TPDOLi¡
[8].
D©a
[TPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

254 
TPDOLi¡
[8].
D©aCouÁ
++;}

259 
TPDOLi¡
[9].
’abË
=1;

260 
TPDOLi¡
[9].
COBID
=0x20e;

261 
TPDOLi¡
[9].
BusNumb”
=1;

262 
TPDOLi¡
[9].
Ev’tTime
=1;

263 
TPDOLi¡
[9].
D©aCouÁ
=0;

265 
V®ue
=0x61060104;

266 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

267 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

268 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

269 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

270 
iBy‹
=0;iBy‹<
tmp
;iByte++){

271 
TPDOLi¡
[9].
D©a
[TPDOLi¡[9].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

272 
TPDOLi¡
[9].
D©aCouÁ
++;}

274 
V®ue
=0x61060204;

275 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

276 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

277 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

278 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

279 
iBy‹
=0;iBy‹<
tmp
;iByte++){

280 
TPDOLi¡
[9].
D©a
[TPDOLi¡[9].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

281 
TPDOLi¡
[9].
D©aCouÁ
++;}

286 
TPDOLi¡
[10].
’abË
=1;

287 
TPDOLi¡
[10].
COBID
=0x20d;

288 
TPDOLi¡
[10].
BusNumb”
=1;

289 
TPDOLi¡
[10].
Ev’tTime
=1;

290 
TPDOLi¡
[10].
D©aCouÁ
=0;

292 
V®ue
=0x61070104;

293 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

294 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

295 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

296 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

297 
iBy‹
=0;iBy‹<
tmp
;iByte++){

298 
TPDOLi¡
[10].
D©a
[TPDOLi¡[10].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

299 
TPDOLi¡
[10].
D©aCouÁ
++;}

301 
V®ue
=0x61070204;

302 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

303 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

304 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

305 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

306 
iBy‹
=0;iBy‹<
tmp
;iByte++){

307 
TPDOLi¡
[10].
D©a
[TPDOLi¡[10].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

308 
TPDOLi¡
[10].
D©aCouÁ
++;}

313 
TPDOLi¡
[11].
’abË
=1;

314 
TPDOLi¡
[11].
COBID
=0x205;

315 
TPDOLi¡
[11].
BusNumb”
=3;

316 
TPDOLi¡
[11].
Ev’tTime
=3;

317 
TPDOLi¡
[11].
D©aCouÁ
=0;

319 
V®ue
=0x66001404;

320 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

321 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

322 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

323 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

324 
iBy‹
=0;iBy‹<
tmp
;iByte++){

325 
TPDOLi¡
[11].
D©a
[TPDOLi¡[11].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

326 
TPDOLi¡
[11].
D©aCouÁ
++;}

328 
V®ue
=0x66001504;

329 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

330 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

331 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

332 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

333 
iBy‹
=0;iBy‹<
tmp
;iByte++){

334 
TPDOLi¡
[11].
D©a
[TPDOLi¡[11].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

335 
TPDOLi¡
[11].
D©aCouÁ
++;}

340 
TPDOLi¡
[12].
’abË
=1;

341 
TPDOLi¡
[12].
COBID
=0x206;

342 
TPDOLi¡
[12].
BusNumb”
=3;

343 
TPDOLi¡
[12].
Ev’tTime
=3;

344 
TPDOLi¡
[12].
D©aCouÁ
=0;

346 
V®ue
=0x66001404;

347 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

348 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

349 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

350 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

351 
iBy‹
=0;iBy‹<
tmp
;iByte++){

352 
TPDOLi¡
[12].
D©a
[TPDOLi¡[12].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

353 
TPDOLi¡
[12].
D©aCouÁ
++;}

355 
V®ue
=0x66001504;

356 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

357 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

358 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

359 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

360 
iBy‹
=0;iBy‹<
tmp
;iByte++){

361 
TPDOLi¡
[12].
D©a
[TPDOLi¡[12].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

362 
TPDOLi¡
[12].
D©aCouÁ
++;}

368 
RPDOLi¡
[0].
’abË
=1;

369 
RPDOLi¡
[0].
COBID
=0x184;

370 
RPDOLi¡
[0].
BusNumb”
=0;

371 
RPDOLi¡
[0].
D©aCouÁ
=0;

372 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[0].
BusNumb”
], RPDOLi¡[0].
COBID
, &RPDOLi¡[0].
RPDOHªdË
);

374 
V®ue
=0x63000104;

375 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

376 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

377 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

378 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

379 
iBy‹
=0;iBy‹<
tmp
;iByte++){

380 
RPDOLi¡
[0].
D©a
[RPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

381 
RPDOLi¡
[0].
D©aCouÁ
++;}

383 
V®ue
=0x63000204;

384 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

385 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

386 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

387 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

388 
iBy‹
=0;iBy‹<
tmp
;iByte++){

389 
RPDOLi¡
[0].
D©a
[RPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

390 
RPDOLi¡
[0].
D©aCouÁ
++;}

395 
RPDOLi¡
[1].
’abË
=1;

396 
RPDOLi¡
[1].
COBID
=0x284;

397 
RPDOLi¡
[1].
BusNumb”
=0;

398 
RPDOLi¡
[1].
D©aCouÁ
=0;

399 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[1].
BusNumb”
], RPDOLi¡[1].
COBID
, &RPDOLi¡[1].
RPDOHªdË
);

401 
V®ue
=0x63000304;

402 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

403 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

404 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

405 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

406 
iBy‹
=0;iBy‹<
tmp
;iByte++){

407 
RPDOLi¡
[1].
D©a
[RPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

408 
RPDOLi¡
[1].
D©aCouÁ
++;}

410 
V®ue
=0x63000404;

411 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

412 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

413 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

414 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

415 
iBy‹
=0;iBy‹<
tmp
;iByte++){

416 
RPDOLi¡
[1].
D©a
[RPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

417 
RPDOLi¡
[1].
D©aCouÁ
++;}

422 
RPDOLi¡
[2].
’abË
=1;

423 
RPDOLi¡
[2].
COBID
=0x183;

424 
RPDOLi¡
[2].
BusNumb”
=0;

425 
RPDOLi¡
[2].
D©aCouÁ
=0;

426 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[2].
BusNumb”
], RPDOLi¡[2].
COBID
, &RPDOLi¡[2].
RPDOHªdË
);

428 
V®ue
=0x63001004;

429 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

430 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

431 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

432 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

433 
iBy‹
=0;iBy‹<
tmp
;iByte++){

434 
RPDOLi¡
[2].
D©a
[RPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

435 
RPDOLi¡
[2].
D©aCouÁ
++;}

437 
V®ue
=0x63001104;

438 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

439 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

440 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

441 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

442 
iBy‹
=0;iBy‹<
tmp
;iByte++){

443 
RPDOLi¡
[2].
D©a
[RPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

444 
RPDOLi¡
[2].
D©aCouÁ
++;}

449 
RPDOLi¡
[3].
’abË
=1;

450 
RPDOLi¡
[3].
COBID
=0x189;

451 
RPDOLi¡
[3].
BusNumb”
=1;

452 
RPDOLi¡
[3].
D©aCouÁ
=0;

453 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[3].
BusNumb”
], RPDOLi¡[3].
COBID
, &RPDOLi¡[3].
RPDOHªdË
);

455 
V®ue
=0x61000304;

456 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

457 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

458 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

459 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

460 
iBy‹
=0;iBy‹<
tmp
;iByte++){

461 
RPDOLi¡
[3].
D©a
[RPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

462 
RPDOLi¡
[3].
D©aCouÁ
++;}

464 
V®ue
=0x61000404;

465 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

466 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

467 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

468 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

469 
iBy‹
=0;iBy‹<
tmp
;iByte++){

470 
RPDOLi¡
[3].
D©a
[RPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

471 
RPDOLi¡
[3].
D©aCouÁ
++;}

476 
RPDOLi¡
[4].
’abË
=1;

477 
RPDOLi¡
[4].
COBID
=0x18a;

478 
RPDOLi¡
[4].
BusNumb”
=1;

479 
RPDOLi¡
[4].
D©aCouÁ
=0;

480 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[4].
BusNumb”
], RPDOLi¡[4].
COBID
, &RPDOLi¡[4].
RPDOHªdË
);

482 
V®ue
=0x61010304;

483 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

484 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

485 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

486 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

487 
iBy‹
=0;iBy‹<
tmp
;iByte++){

488 
RPDOLi¡
[4].
D©a
[RPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

489 
RPDOLi¡
[4].
D©aCouÁ
++;}

491 
V®ue
=0x61010404;

492 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

493 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

494 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

495 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

496 
iBy‹
=0;iBy‹<
tmp
;iByte++){

497 
RPDOLi¡
[4].
D©a
[RPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

498 
RPDOLi¡
[4].
D©aCouÁ
++;}

503 
RPDOLi¡
[5].
’abË
=1;

504 
RPDOLi¡
[5].
COBID
=0x18b;

505 
RPDOLi¡
[5].
BusNumb”
=1;

506 
RPDOLi¡
[5].
D©aCouÁ
=0;

507 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[5].
BusNumb”
], RPDOLi¡[5].
COBID
, &RPDOLi¡[5].
RPDOHªdË
);

509 
V®ue
=0x61020304;

510 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

511 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

512 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

513 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

514 
iBy‹
=0;iBy‹<
tmp
;iByte++){

515 
RPDOLi¡
[5].
D©a
[RPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

516 
RPDOLi¡
[5].
D©aCouÁ
++;}

518 
V®ue
=0x61020404;

519 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

520 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

521 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

522 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

523 
iBy‹
=0;iBy‹<
tmp
;iByte++){

524 
RPDOLi¡
[5].
D©a
[RPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

525 
RPDOLi¡
[5].
D©aCouÁ
++;}

530 
RPDOLi¡
[6].
’abË
=1;

531 
RPDOLi¡
[6].
COBID
=0x18c;

532 
RPDOLi¡
[6].
BusNumb”
=1;

533 
RPDOLi¡
[6].
D©aCouÁ
=0;

534 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[6].
BusNumb”
], RPDOLi¡[6].
COBID
, &RPDOLi¡[6].
RPDOHªdË
);

536 
V®ue
=0x61030304;

537 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

538 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

539 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

540 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

541 
iBy‹
=0;iBy‹<
tmp
;iByte++){

542 
RPDOLi¡
[6].
D©a
[RPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

543 
RPDOLi¡
[6].
D©aCouÁ
++;}

545 
V®ue
=0x61030404;

546 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

547 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

548 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

549 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

550 
iBy‹
=0;iBy‹<
tmp
;iByte++){

551 
RPDOLi¡
[6].
D©a
[RPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

552 
RPDOLi¡
[6].
D©aCouÁ
++;}

557 
RPDOLi¡
[7].
’abË
=1;

558 
RPDOLi¡
[7].
COBID
=0x190;

559 
RPDOLi¡
[7].
BusNumb”
=1;

560 
RPDOLi¡
[7].
D©aCouÁ
=0;

561 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[7].
BusNumb”
], RPDOLi¡[7].
COBID
, &RPDOLi¡[7].
RPDOHªdË
);

563 
V®ue
=0x61040304;

564 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

565 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

566 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

567 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

568 
iBy‹
=0;iBy‹<
tmp
;iByte++){

569 
RPDOLi¡
[7].
D©a
[RPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

570 
RPDOLi¡
[7].
D©aCouÁ
++;}

572 
V®ue
=0x61040404;

573 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

574 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

575 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

576 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

577 
iBy‹
=0;iBy‹<
tmp
;iByte++){

578 
RPDOLi¡
[7].
D©a
[RPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

579 
RPDOLi¡
[7].
D©aCouÁ
++;}

584 
RPDOLi¡
[8].
’abË
=1;

585 
RPDOLi¡
[8].
COBID
=0x18f;

586 
RPDOLi¡
[8].
BusNumb”
=1;

587 
RPDOLi¡
[8].
D©aCouÁ
=0;

588 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[8].
BusNumb”
], RPDOLi¡[8].
COBID
, &RPDOLi¡[8].
RPDOHªdË
);

590 
V®ue
=0x61050304;

591 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

592 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

593 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

594 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

595 
iBy‹
=0;iBy‹<
tmp
;iByte++){

596 
RPDOLi¡
[8].
D©a
[RPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

597 
RPDOLi¡
[8].
D©aCouÁ
++;}

599 
V®ue
=0x61050404;

600 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

601 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

602 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

603 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

604 
iBy‹
=0;iBy‹<
tmp
;iByte++){

605 
RPDOLi¡
[8].
D©a
[RPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

606 
RPDOLi¡
[8].
D©aCouÁ
++;}

611 
RPDOLi¡
[9].
’abË
=1;

612 
RPDOLi¡
[9].
COBID
=0x18e;

613 
RPDOLi¡
[9].
BusNumb”
=1;

614 
RPDOLi¡
[9].
D©aCouÁ
=0;

615 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[9].
BusNumb”
], RPDOLi¡[9].
COBID
, &RPDOLi¡[9].
RPDOHªdË
);

617 
V®ue
=0x61060304;

618 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

619 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

620 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

621 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

622 
iBy‹
=0;iBy‹<
tmp
;iByte++){

623 
RPDOLi¡
[9].
D©a
[RPDOLi¡[9].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

624 
RPDOLi¡
[9].
D©aCouÁ
++;}

626 
V®ue
=0x61060404;

627 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

628 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

629 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

630 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

631 
iBy‹
=0;iBy‹<
tmp
;iByte++){

632 
RPDOLi¡
[9].
D©a
[RPDOLi¡[9].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

633 
RPDOLi¡
[9].
D©aCouÁ
++;}

638 
RPDOLi¡
[10].
’abË
=1;

639 
RPDOLi¡
[10].
COBID
=0x18d;

640 
RPDOLi¡
[10].
BusNumb”
=1;

641 
RPDOLi¡
[10].
D©aCouÁ
=0;

642 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[10].
BusNumb”
], RPDOLi¡[10].
COBID
, &RPDOLi¡[10].
RPDOHªdË
);

644 
V®ue
=0x61070304;

645 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

646 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

647 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

648 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

649 
iBy‹
=0;iBy‹<
tmp
;iByte++){

650 
RPDOLi¡
[10].
D©a
[RPDOLi¡[10].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

651 
RPDOLi¡
[10].
D©aCouÁ
++;}

653 
V®ue
=0x61070404;

654 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

655 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

656 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

657 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

658 
iBy‹
=0;iBy‹<
tmp
;iByte++){

659 
RPDOLi¡
[10].
D©a
[RPDOLi¡[10].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

660 
RPDOLi¡
[10].
D©aCouÁ
++;}

665 
RPDOLi¡
[11].
’abË
=1;

666 
RPDOLi¡
[11].
COBID
=0x185;

667 
RPDOLi¡
[11].
BusNumb”
=3;

668 
RPDOLi¡
[11].
D©aCouÁ
=0;

669 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[11].
BusNumb”
], RPDOLi¡[11].
COBID
, &RPDOLi¡[11].
RPDOHªdË
);

671 
V®ue
=0x66000804;

672 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

673 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

674 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

675 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

676 
iBy‹
=0;iBy‹<
tmp
;iByte++){

677 
RPDOLi¡
[11].
D©a
[RPDOLi¡[11].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

678 
RPDOLi¡
[11].
D©aCouÁ
++;}

680 
V®ue
=0x66000904;

681 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

682 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

683 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

684 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

685 
iBy‹
=0;iBy‹<
tmp
;iByte++){

686 
RPDOLi¡
[11].
D©a
[RPDOLi¡[11].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

687 
RPDOLi¡
[11].
D©aCouÁ
++;}

692 
RPDOLi¡
[12].
’abË
=1;

693 
RPDOLi¡
[12].
COBID
=0x285;

694 
RPDOLi¡
[12].
BusNumb”
=3;

695 
RPDOLi¡
[12].
D©aCouÁ
=0;

696 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[12].
BusNumb”
], RPDOLi¡[12].
COBID
, &RPDOLi¡[12].
RPDOHªdË
);

698 
V®ue
=0x66000a04;

699 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

700 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

701 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

702 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

703 
iBy‹
=0;iBy‹<
tmp
;iByte++){

704 
RPDOLi¡
[12].
D©a
[RPDOLi¡[12].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

705 
RPDOLi¡
[12].
D©aCouÁ
++;}

707 
V®ue
=0x66000b04;

708 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

709 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

710 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

711 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

712 
iBy‹
=0;iBy‹<
tmp
;iByte++){

713 
RPDOLi¡
[12].
D©a
[RPDOLi¡[12].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

714 
RPDOLi¡
[12].
D©aCouÁ
++;}

719 
RPDOLi¡
[13].
’abË
=1;

720 
RPDOLi¡
[13].
COBID
=0x385;

721 
RPDOLi¡
[13].
BusNumb”
=3;

722 
RPDOLi¡
[13].
D©aCouÁ
=0;

723 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[13].
BusNumb”
], RPDOLi¡[13].
COBID
, &RPDOLi¡[13].
RPDOHªdË
);

725 
V®ue
=0x66000c04;

726 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

727 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

728 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

729 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

730 
iBy‹
=0;iBy‹<
tmp
;iByte++){

731 
RPDOLi¡
[13].
D©a
[RPDOLi¡[13].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

732 
RPDOLi¡
[13].
D©aCouÁ
++;}

734 
V®ue
=0x66000d04;

735 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

736 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

737 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

738 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

739 
iBy‹
=0;iBy‹<
tmp
;iByte++){

740 
RPDOLi¡
[13].
D©a
[RPDOLi¡[13].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

741 
RPDOLi¡
[13].
D©aCouÁ
++;}

746 
RPDOLi¡
[14].
’abË
=1;

747 
RPDOLi¡
[14].
COBID
=0x186;

748 
RPDOLi¡
[14].
BusNumb”
=3;

749 
RPDOLi¡
[14].
D©aCouÁ
=0;

750 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[14].
BusNumb”
], RPDOLi¡[14].
COBID
, &RPDOLi¡[14].
RPDOHªdË
);

752 
V®ue
=0x66000e04;

753 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

754 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

755 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

756 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

757 
iBy‹
=0;iBy‹<
tmp
;iByte++){

758 
RPDOLi¡
[14].
D©a
[RPDOLi¡[14].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

759 
RPDOLi¡
[14].
D©aCouÁ
++;}

761 
V®ue
=0x66000f04;

762 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

763 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

764 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

765 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

766 
iBy‹
=0;iBy‹<
tmp
;iByte++){

767 
RPDOLi¡
[14].
D©a
[RPDOLi¡[14].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

768 
RPDOLi¡
[14].
D©aCouÁ
++;}

773 
RPDOLi¡
[15].
’abË
=1;

774 
RPDOLi¡
[15].
COBID
=0x286;

775 
RPDOLi¡
[15].
BusNumb”
=3;

776 
RPDOLi¡
[15].
D©aCouÁ
=0;

777 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[15].
BusNumb”
], RPDOLi¡[15].
COBID
, &RPDOLi¡[15].
RPDOHªdË
);

779 
V®ue
=0x66001004;

780 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

781 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

782 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

783 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

784 
iBy‹
=0;iBy‹<
tmp
;iByte++){

785 
RPDOLi¡
[15].
D©a
[RPDOLi¡[15].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

786 
RPDOLi¡
[15].
D©aCouÁ
++;}

788 
V®ue
=0x66001104;

789 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

790 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

791 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

792 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

793 
iBy‹
=0;iBy‹<
tmp
;iByte++){

794 
RPDOLi¡
[15].
D©a
[RPDOLi¡[15].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

795 
RPDOLi¡
[15].
D©aCouÁ
++;}

800 
RPDOLi¡
[16].
’abË
=1;

801 
RPDOLi¡
[16].
COBID
=0x386;

802 
RPDOLi¡
[16].
BusNumb”
=3;

803 
RPDOLi¡
[16].
D©aCouÁ
=0;

804 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[16].
BusNumb”
], RPDOLi¡[16].
COBID
, &RPDOLi¡[16].
RPDOHªdË
);

806 
V®ue
=0x66001204;

807 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

808 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

809 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

810 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

811 
iBy‹
=0;iBy‹<
tmp
;iByte++){

812 
RPDOLi¡
[16].
D©a
[RPDOLi¡[16].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

813 
RPDOLi¡
[16].
D©aCouÁ
++;}

815 
V®ue
=0x66001304;

816 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

817 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

818 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

819 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

820 
iBy‹
=0;iBy‹<
tmp
;iByte++){

821 
RPDOLi¡
[16].
D©a
[RPDOLi¡[16].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

822 
RPDOLi¡
[16].
D©aCouÁ
++;}

826 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2.h

15 #iâdeà
_COL2_H


16 
	#_COL2_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

24 
	~"cŞ2_ba£.h
"

25 
	~"cŞ2_¦.h
"

26 
	~"cŞ2_eb10.h
"

27 
	~"cŞ2_eb10_¦.h
"

30 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

31 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

38 
ušt16
 
u16_ChªÃl
;

39 
ušt16
 
u16_TxFifo
;

40 
ušt16
 
u16_RxFifo
;

41 } 
	tT_cŞ2_cÚfig
;

48 
sšt16
 
cŞ2_š™
(cÚ¡ 
T_cŞ2_cÚfig
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

49 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

55 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_base.h

15 #iâdeà
_COL2_BASE_H


16 
	#_COL2_BASE_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

24 
	~"cŞ2_ty³s.h
"

29 
	#COL2_NMT_CAN_ID
 (0x00u)

30 
	#COL2_SYNC_CAN_ID
 (0x80u)

31 
	#COL2_EMCY_BASE_CAN_ID
 (0x80u)

32 
	#COL2_TIME_STAMP_CAN_ID
 (0x100u)

33 
	#COL2_TPDO1_BASE_CAN_ID
 (0x180u)

34 
	#COL2_RPDO1_BASE_CAN_ID
 (0x200u)

35 
	#COL2_TPD02_BASE_CAN_ID
 (0x280u)

36 
	#COL2_RPDO2_BASE_CAN_ID
 (0x300u)

37 
	#COL2_TPDO3_BASE_CAN_ID
 (0x380u)

38 
	#COL2_RPDO3_BASE_CAN_ID
 (0x400u)

39 
	#COL2_TPDO4_BASE_CAN_ID
 (0x480u)

40 
	#COL2_RPDO4_BASE_CAN_ID
 (0x500u)

41 
	#COL2_TSDO_BASE_CAN_ID
 (0x580u)

42 
	#COL2_RSDO_BASE_CAN_ID
 (0x600u)

43 
	#COL2_NMT_BASE_CAN_ID
 (0x700u)

44 

	)

46 
	#COL2_SDO_ERR_TOGGLE
 (0x05030000UL)

	)

47 
	#COL2_SDO_ERR_SDO_TIMEOUT
 (0x05040000UL)

	)

48 
	#COL2_SDO_ERR_SPECIFIER_INVALID
 (0x05040001UL)

	)

49 
	#COL2_SDO_ERR_INVALID_BLOCKSIZE
 (0x05040002UL)

	)

50 
	#COL2_SDO_ERR_INVALID_SEQUENCE
 (0x05040003UL)

	)

51 
	#COL2_SDO_ERR_CRC
 (0x05040004UL)

	)

52 
	#COL2_SDO_ERR_OUT_OF_MEMORY
 (0x05040005UL)

	)

53 
	#COL2_SDO_ERR_UNSUPP_ACCESS
 (0x06010000UL)

	)

54 
	#COL2_SDO_ERR_READING_WO
 (0x06010001UL)

	)

55 
	#COL2_SDO_ERR_WRITING_RO
 (0x06010002UL)

	)

56 
	#COL2_SDO_ERR_INDEX_INVALID
 (0x06020000UL)

	)

57 
	#COL2_SDO_ERR_NO_MAP
 (0x06040041UL)

	)

58 
	#COL2_SDO_ERR_PDO_TOO_LONG
 (0x06040042UL)

	)

59 
	#COL2_SDO_ERR_GENERAL_INCOMP
 (0x06040047UL)

	)

60 
	#COL2_SDO_ERR_HARDWARE
 (0x06060000UL)

	)

61 
	#COL2_SDO_ERR_DATASIZE
 (0x06070010UL)

	)

62 
	#COL2_SDO_ERR_DATA_TYPE_TOO_HIGH
 (0x06070012UL)

	)

63 
	#COL2_SDO_ERR_DATA_TYPE_TOO_LOW
 (0x06070013UL)

	)

64 
	#COL2_SDO_ERR_SUBINDEX_INVALID
 (0x06090011UL)

	)

65 
	#COL2_SDO_ERR_RANGE_EXCEEDED
 (0x06090030UL)

	)

66 
	#COL2_SDO_ERR_VALUE_TOO_HIGH
 (0x06090031UL)

	)

67 
	#COL2_SDO_ERR_VALUE_TOO_LOW
 (0x06090032UL)

	)

68 
	#COL2_SDO_ERR_MAX_MIN_CONFLICT
 (0x06090036UL)

	)

69 
	#COL2_SDO_ERR_GENERAL_ERROR
 (0x08000000UL)

	)

70 
	#COL2_SDO_ERR_DATA_TRANSFER
 (0x08000020UL)

	)

71 
	#COL2_SDO_ERR_LOCAL_CONTROL
 (0x08000021UL)

	)

72 
	#COL2_SDO_ERR_DEVICE_STATE
 (0x08000022UL)

	)

73 
	#COL2_SDO_ERR_OD_ERROR
 (0x08000023UL)

	)

76 
	#COL2_NMT_NODE_START
 (0x01)

77 
	#COL2_NMT_NODE_STOP
 (0x02)

78 
	#COL2_NMT_NODE_PREOP
 (0x80)

79 
	#COL2_NMT_NODE_RESET_APPL
 (0x81)

80 
	#COL2_NMT_NODE_RESET_COM
 (0x82)

81 

	)

83 
	#COL2_NMT_STATUS_NOT_ACTIVE
 (0)

84 
	#COL2_NMT_STATUS_NOT_STARTED
 (1)

85 
	#COL2_NMT_STATUS_ALIVE
 (2)

86 
	#COL2_NMT_STATUS_DEAD
 (3)

87 

	)

88 
	#COL2_NG_NODE_UNKNOWN
 (0x00)

90 
	#COL2_NG_NODE_DISCONNECTING
 (0x01)

91 
	#COL2_NG_NODE_CONNECTING
 (0x02)

92 
	#COL2_NG_NODE_PREPARING
 (0x03)

93 
	#COL2_NG_NODE_PREPARED
 (0x04)

94 
	#COL2_NG_NODE_OPERATIONAL
 (0x05)

95 
	#COL2_NG_NODE_PRE_OPERATIONAL
 (0x7F)

96 

	)

102 vŞ©cÚ¡ 
ušt8
 
gu8_cŞ2_NumSuµÜ‹dBus£s
;

103 
T_cŞ2_ÃtwÜk
 
g©_cŞ2_N‘wÜks
[];

108 
sšt16
 
cŞ2_şo£
(* cÚ¡ 
İv_BusHªdË
);

109 
sšt16
 
cŞ2_sk
(* cÚ¡ 
İv_BusHªdË
);

112 
sšt16
 
cŞ2_gu¬dšg_»gi¡”_¦ave
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

113 cÚ¡ 
ušt16
 
ou16_Gu¬dTimeMS
, cÚ¡ 
ušt8
 
ou8_LiãTimeFaùÜ
);

114 
sšt16
 
cŞ2_h—¹b—t_š™
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_ProduûrTimeMS
);

115 
sšt16
 
cŞ2_h—¹b—t_»gi¡”_cÚsum”
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

116 cÚ¡ 
ušt16
 
ou16_CÚsum”TimeMS
);

117 
sšt16
 
cŞ2_nmt_g‘_¦ave_¡©us
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

118 
ušt8
 * cÚ¡ 
İu8_NMTStus
, ušt8 * cÚ¡ 
İu8_NodeStus
);

119 
sšt16
 
cŞ2_nmt_£nd
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ ušt8 
ou8_NMTCommªd
);

122 
sšt16
 
cŞ2_emcy_»ad
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, ušt8 * cÚ¡ 
İu8_D©a
,

123 
ušt8
 * cÚ¡ 
İu8_DLC
);

126 
sšt16
 
cŞ2_pdo_»gi¡”
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_COBID
, ** cÚ¡ 
İpv_PDOHªdË
);

127 
sšt16
 
cŞ2_pdo_wr™e
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_COBID
, cÚ¡ 
ušt8
 * cÚ¡ 
İu8_D©a
,

128 cÚ¡ 
ušt8
 
ou8_Dlc
);

129 
sšt16
 
cŞ2_pdo_»ad
(* cÚ¡ 
İv_PDOHªdË
, 
ušt8
 * cÚ¡ 
İu8_D©a
, ušt8 * cÚ¡ 
İu8_Dlc
);

130 #iâdeà
COL2_NO_TIMESTAMPS_AVAILABLE


131 
sšt16
 
cŞ2_pdo_»ad_time¡am³d
(* cÚ¡ 
İv_PDOHªdË
, 
ušt8
 * cÚ¡ 
İu8_D©a
, ušt8 * cÚ¡ 
İu8_Dlc
,

132 
ušt32
 * cÚ¡ 
İu32_TimeSmp
);

136 
sšt16
 
cŞ2_sdo_wr™e
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ 
ušt16
 
ou16_Index
,

137 cÚ¡ 
ušt8
 
ou8_SubIndex
, cÚ¡ 
ušt32
 
ou32_D©a
, cÚ¡ ušt8 
ou8_CouÁ
);

138 
sšt16
 
cŞ2_sdo_»ad
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ 
ušt16
 
ou16_Index
,

139 cÚ¡ 
ušt8
 
ou8_SubIndex
, 
ušt32
 * cÚ¡ 
İu32_D©a
, ušt8 * cÚ¡ 
İu8_CouÁ
);

140 
sšt16
 
cŞ2_sdo_g‘_Ï¡_”rÜ
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

141 
ušt32
 * cÚ¡ 
İu32_E¼ÜCode
);

144 
ušt16
 
cŞ2_lib¿ry_g‘_v”siÚ
();

147 
ušt32
 
cŞ2_uti_g‘_time_ms
(* cÚ¡ 
İv_BusHªdË
);

153 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_eb10.h

15 #iâdeà
_COL2_EB10_H


16 
	#_COL2_EB10_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_SlÙ
;

32 
ušt16
 
u16_ChªÃl
;

33 
ušt16
 
u16_TxFifo
;

34 
ušt16
 
u16_RxFifo
;

35 } 
	tT_cŞ2_cÚfig_eb10
;

42 
sšt16
 
cŞ2_š™_eb10
(cÚ¡ 
T_cŞ2_cÚfig_eb10
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

43 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

49 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_eb10_sl.h

15 #iâdeà
_COL2_EB10SL_H


16 
	#_COL2_EB10SL_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_SlÙ
;

32 
ušt16
 
u16_ChªÃl
;

33 
ušt16
 
u16_TxFifo
;

34 
ušt16
 
u16_RxFifo
;

35 } 
	tT_cŞ2_cÚfig_eb10_¦
;

42 
sšt16
 
cŞ2_š™_eb10_¦
(cÚ¡ 
T_cŞ2_cÚfig_eb10_¦
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

43 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

49 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_sl.h

15 #iâdeà
_COL2_SLAPI_H


16 
	#_COL2_SLAPI_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_ChªÃl
;

32 
ušt16
 
u16_TxFifo
;

33 
ušt16
 
u16_RxFifo
;

34 } 
	tT_cŞ2_cÚfig_¦
;

41 
sšt16
 
cŞ2_š™_¦
(cÚ¡ 
T_cŞ2_cÚfig_¦
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

42 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

48 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_types.h

17 #iâdeà
_COL2_TYPES_H


18 
	#_COL2_TYPES_H


	)

20 #ifdeà
__ılu¥lus


25 
	~"¡wty³s.h
"

30 
	#COL2_MAX_NUM_OF_SLAVES
 (127)

31 
	#COL2_MAX_NUM_OF_RX_PDOS
 (64)

32 
	#COL2_NUM_CAN_IDS
 (0x800)

	)

42 
ušt8
 
u8_NewD©a
;

44 
ušt8
 
u8_DLC
;

45 
ušt16
 
u16_ID
;

46 
ušt8
 
au8_D©a
[8];

47 
ušt32
 
u32_Time
;

48 } 
	tT_cŞ2_cob
;

53 
ušt8
 
u8_SDOS‹
;

54 
ušt8
 
au8_Re¥Ú£
[8];

55 
ušt32
 
u32_SDOReque¡Time
;

56 } 
	tT_cŞ2_sdo_¡©e
;

61 
ušt8
 
u8_S”viû
;

62 
ušt8
 
u8_Index
;

63 } 
	tT_cŞ2_id
;

70 
ušt8
 
u8_Gu¬dMode
;

71 
ušt8
 
u8_NMTStus
;

72 
ušt8
 
u8_NodeStus
;

73 
ušt8
 
u8_Gu¬dStus
;

74 
ušt8
 
u8_LiãTimeFaùÜ
;

75 
ušt16
 
u16_Gu¬dTime
;

76 
ušt32
 
u32_ReXTime
;

77 
ušt32
 
u32_ReqTime1¡
;

80 
T_cŞ2_sdo_¡©e
 
t_SDOS‹
;

83 
T_cŞ2_cob
 
t_EMCY
;

84 } 
	tT_cŞ2_node
;

89 
ušt32
 
u32_Magic
;

90 
T_cŞ2_node
 
©_SÏves
[
COL2_MAX_NUM_OF_SLAVES
];

92 
ušt8
 
u8_OwnNodeID
;

93 
ušt8
 
u8_NumOfRegi¡”edPDOs
;

94 
ušt8
 
u8_NumOfRegi¡”edGu¬dšgs
;

96 
T_cŞ2_cob
 
©_PDOLi¡
[
COL2_MAX_NUM_OF_RX_PDOS
];

98 
ušt8
 
au8_Gu¬dšgs
[
COL2_MAX_NUM_OF_SLAVES
];

100 
ušt32
 
u32_SDOTimeout
;

101 
ušt16
 
u16_H—¹B—tProduûrTime
;

102 
ušt32
 
u32_NextH—¹B—tS’dTime
;

105 
T_cŞ2_id
 
©_IDs
[
COL2_NUM_CAN_IDS
];

107 * 
pv_Driv”
;

108 } 
	tT_cŞ2_ÃtwÜk
;

119 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\templates\col2_config.c

23 
	~"cŞ2_ba£.h
"

27 
	#COL2_NUM_SUPPORTED_CAN_BUSSES
 4

	)

29 #ià
COL2_NUM_SUPPORTED_CAN_BUSSES
 > 255

30 
	gE¼Ü


42 vŞ©cÚ¡ 
ušt8
 
	ggu8_cŞ2_NumSuµÜ‹dBus£s
 = 
COL2_NUM_SUPPORTED_CAN_BUSSES
;

45 
T_cŞ2_ÃtwÜk
 
	gg©_cŞ2_N‘wÜks
[
COL2_NUM_SUPPORTED_CAN_BUSSES
];

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveControl.c

1 
	~"DriveSysD©a.h
"

2 
	~"DriveIÁ”çû.h
"

3 
	~"DriveSys.h
"

9 
	#PICÚŒŞËrD—dZÚe
 (0.3*
pi
/180.0)

	)

11 
æßt32
 
	gšv”£R11
;

12 
æßt32
 
	gšv”£R12
;

13 
æßt32
 
	gšv”£R21
;

14 
æßt32
 
	gšv”£R22
;

22 
	$twoDim’siÚS‹”šg
(){

23 
æßt32
 
LmulOmegaZ
;

24 
æßt32
 
BmulOmegaZ
;

25 
æßt32
 
Vxmul2
;

26 
æßt32
 
Vymul2
;

28 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
){

29 
LmulOmegaZ
=(*
šputDriveSysOmegaZ
)*
L
;

30 
BmulOmegaZ
=(*
šputDriveSysOmegaZ
)*
B
;

31 
Vxmul2
=(*
šputDriveSysS³edX
)*2.0;

32 
Vymul2
=(*
šputDriveSysS³edY
)*2.0;

33 if((
Vxmul2
-
BmulOmegaZ
)==0.0){

34 
DriveModuË11AngË
=0.0;

35 
DriveModuË21AngË
=0.0;

38 
DriveModuË11AngË
=
	`©ªf
((
Vymul2
+
LmulOmegaZ
)/(
Vxmul2
-
BmulOmegaZ
));

39 
DriveModuË21AngË
=
	`©ªf
((
Vymul2
-
LmulOmegaZ
)/(
Vxmul2
-
BmulOmegaZ
));

41 if((
Vxmul2
+
BmulOmegaZ
)==0.0){

42 
DriveModuË12AngË
=0.0;

43 
DriveModuË22AngË
=0.0;

46 
DriveModuË12AngË
=
	`©ªf
((
Vymul2
+
LmulOmegaZ
)/(
Vxmul2
+
BmulOmegaZ
));

47 
DriveModuË22AngË
=
	`©ªf
((
Vymul2
-
LmulOmegaZ
)/(
Vxmul2
+
BmulOmegaZ
));

50 
DriveModuË11S³ed
=(*
šputDriveSysS³edX
)*
	`cosf
(
DriveModuË11AngË
);

51 
DriveModuË11S³ed
+=(*
šputDriveSysS³edY
)*
	`sšf
(
DriveModuË11AngË
);

52 
DriveModuË11S³ed
+=0.5*(
L
*
	`sšf
(
DriveModuË11AngË
)-
B
*
	`cosf
(DriveModuË11AngË))*(*
šputDriveSysOmegaZ
);

53 
DriveModuË12S³ed
=(*
šputDriveSysS³edX
)*
	`cosf
(
DriveModuË12AngË
);

54 
DriveModuË12S³ed
+=(*
šputDriveSysS³edY
)*
	`sšf
(
DriveModuË12AngË
);

55 
DriveModuË12S³ed
+=0.5*(
L
*
	`sšf
(
DriveModuË12AngË
)+
B
*
	`cosf
(DriveModuË12AngË))*(*
šputDriveSysOmegaZ
);

56 
DriveModuË21S³ed
=(*
šputDriveSysS³edX
)*
	`cosf
(
DriveModuË21AngË
);

57 
DriveModuË21S³ed
+=(*
šputDriveSysS³edY
)*
	`sšf
(
DriveModuË21AngË
);

58 
DriveModuË21S³ed
+=-0.5*(
L
*
	`sšf
(
DriveModuË21AngË
)+
B
*
	`cosf
(DriveModuË21AngË))*(*
šputDriveSysOmegaZ
);

59 
DriveModuË22S³ed
=(*
šputDriveSysS³edX
)*
	`cosf
(
DriveModuË22AngË
);

60 
DriveModuË22S³ed
+=(*
šputDriveSysS³edY
)*
	`sšf
(
DriveModuË22AngË
);

61 
DriveModuË22S³ed
+=-0.5*(
L
*
	`sšf
(
DriveModuË22AngË
)-
B
*
	`cosf
(DriveModuË22AngË))*(*
šputDriveSysOmegaZ
);

63 
	}
}

70 
	$DriveModuËRe£t
(){

71 
DriveModuË11S³ed
=0.0;

72 
DriveModuË12S³ed
=0.0;

73 
DriveModuË21S³ed
=0.0;

74 
DriveModuË22S³ed
=0.0;

75 
DriveModuË11AngË
=0.0;

76 
DriveModuË12AngË
=0.0;

77 
DriveModuË21AngË
=0.0;

78 
DriveModuË22AngË
=0.0;

79 
S‘V11
=0.0;

80 
S‘V12
=0.0;

81 
S‘V21
=0.0;

82 
S‘V22
=0.0;

83 
S‘Th‘a11
=0.0;

84 
S‘Th‘a12
=0.0;

85 
S‘Th‘a21
=0.0;

86 
S‘Th‘a22
=0.0;

87 
	}
}

95 
	$CÚŒŞËr11
(){

96 
æßt32
 
D–Yk
;

97 
æßt32
 
D–Yi
;

98 
æßt32
 
OmegaSP
;

99 
æßt32
 
OmegaS‘
;

100 
æßt32
 
E_Omega
;

103 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTe¡Mode
)==0){

104 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysMÙiÚReq
)==0){

105 *
ouutMÙÜ111CÚŒŞWÜd
=0x0000;

106 *
ouutMÙÜ112CÚŒŞWÜd
=0x0000;

110 *
ouutMÙÜ111CÚŒŞWÜd
=0x0005;

111 *
ouutMÙÜ112CÚŒŞWÜd
=0x0005;

113 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
)==0){

114 if(
DriveModuË11AngË
<=(
S‘Th‘a11
-0.02)èDriveModuË11AngË+=(
DriveSysOmega
)*
Ts11
;

115 if(
DriveModuË11AngË
>(
S‘Th‘a11
+0.02)èDriveModuË11AngË-=(
DriveSysOmega
)*
Ts11
;

116 
DriveModuË11AngË
=
S‘Th‘a11
;

117 if(
S‘V11
>0.0){

118 if(
DriveModuË11S³ed
<(
S‘V11
-0.01)èDriveModuË11S³ed+=(
DriveSysAcûl
)*
Ts11
;

119 if(
DriveModuË11S³ed
>(
S‘V11
+0.01)èDriveModuË11S³ed-=(
DriveSysDeş
)*
Ts11
;

120 
DriveModuË11S³ed
=
S‘V11
;

122 if(
S‘V11
<0.0){

123 if(
DriveModuË11S³ed
<(
S‘V11
-0.01)èDriveModuË11S³ed+=(
DriveSysDeş
)*
Ts11
;

124 if(
DriveModuË11S³ed
>(
S‘V11
+0.01)èDriveModuË11S³ed-=(
DriveSysAcûl
)*
Ts11
;

125 
DriveModuË11S³ed
=
S‘V11
;

128 if(
DriveModuË11S³ed
>0.0èDriveModuË11S³ed-=(
DriveSysDeş
)*
Ts11
;

129 if(
DriveModuË11S³ed
<0.0èDriveModuË11S³ed+=(
DriveSysDeş
)*
Ts11
;

130 
DriveModuË11S³ed
=0.0;

135 
DriveModuË11AngË
=(
æßt32
)(*
šputS‘DriveModuË11AngË
)*
G¿d2Rad
;

136 
DriveModuË11S³ed
=0.0;

137 *
ouutMÙÜ111CÚŒŞWÜd
=0x0005;

138 *
ouutMÙÜ112CÚŒŞWÜd
=0x0005;

142 
PICÚŒŞËrD©’11
.
OutLim™
=(
S³edLim™
-
DriveModuË11S³ed
)/
H®f_D
 ;

145 
PICÚŒŞËrD©’11
.
ek
=
DriveModuË11AngË
-
DriveModuË11Aùu®AngË
;

146 if((
PICÚŒŞËrD©’11
.
ek
<
PICÚŒŞËrD—dZÚe
)&&(PIControllerDaten11.ek>(0.0-PIControllerDeadZone)))

147 
PICÚŒŞËrD©’11
.
ek
=0.0;

150 
OmegaSP
=
PICÚŒŞËrD©’11
.
Kp1
*PICÚŒŞËrD©’11.
ek
;

151 
E_Omega
=
OmegaSP
-
DriveModuË11Omega
;

153 
D–Yk
=
PICÚŒŞËrD©’11
.
Kp2
*(
E_Omega
-PICÚŒŞËrD©’11.
ek_1
);

154 
D–Yi
=
E_Omega
*
PICÚŒŞËrD©’11
.
Ki
*
Ts11
;

156 if((
PICÚŒŞËrD©’11
.
yk_1
+
D–Yk
+
D–Yi
)>=PICÚŒŞËrD©’11.
OutLim™
èPICÚŒŞËrD©’11.
yk
=PIControllerDaten11.OutLimit;

157 if((
PICÚŒŞËrD©’11
.
yk_1
+
D–Yk
+
D–Yi
)<=(0.0-PICÚŒŞËrD©’11.
OutLim™
)èPICÚŒŞËrD©’11.
yk
=0.0-PIControllerDaten11.OutLimit;

158 
PICÚŒŞËrD©’11
.
yk
=PICÚŒŞËrD©’11.
yk_1
+
D–Yk
+
D–Yi
;

160 
PICÚŒŞËrD©’11
.
ek_1
=
E_Omega
;

161 
PICÚŒŞËrD©’11
.
yk_1
=PICÚŒŞËrD©’11.
yk
;

164 
OmegaS‘
=
PICÚŒŞËrD©’11
.
yk
+
DriveModuË11OmegaM
;

165 if(
OmegaS‘
>
PICÚŒŞËrD©’11
.
OutLim™
) OmegaSet=PIControllerDaten11.OutLimit;

166 if(
OmegaS‘
<(0.0-
PICÚŒŞËrD©’11
.
OutLim™
)) OmegaSet=0.0-PIControllerDaten11.OutLimit;

168 *
ouutS‘MÙÜ111S³ed
=(
sšt16
)((
DriveModuË11S³ed
-
H®f_D
*
OmegaS‘
)*
FaùV2½m
);

169 *
ouutS‘MÙÜ112S³ed
=(
sšt16
)((
DriveModuË11S³ed
+
H®f_D
*
OmegaS‘
)*
FaùV2½m
);

170 
	}
}

178 
	$CÚŒŞËr12
(){

179 
æßt32
 
D–Yk
;

180 
æßt32
 
D–Yi
;

181 
æßt32
 
OmegaSP
;

182 
æßt32
 
OmegaS‘
;

183 
æßt32
 
E_Omega
;

186 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTe¡Mode
)==0){

187 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysMÙiÚReq
)==0){

188 *
ouutMÙÜ121CÚŒŞWÜd
=0x0000;

189 *
ouutMÙÜ122CÚŒŞWÜd
=0x0000;

193 *
ouutMÙÜ121CÚŒŞWÜd
=0x0005;

194 *
ouutMÙÜ122CÚŒŞWÜd
=0x0005;

196 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
)==0){

197 if(
DriveModuË12AngË
<=(
S‘Th‘a12
-0.02)èDriveModuË12AngË+=(
DriveSysOmega
)*
Ts12
;

198 if(
DriveModuË12AngË
>(
S‘Th‘a12
+0.02)èDriveModuË12AngË-=(
DriveSysOmega
)*
Ts12
;

199 
DriveModuË12AngË
=
S‘Th‘a12
;

200 if(
S‘V12
>0.0){

201 if(
DriveModuË12S³ed
<(
S‘V12
-0.01)èDriveModuË12S³ed+=(
DriveSysAcûl
)*
Ts12
;

202 if(
DriveModuË12S³ed
>(
S‘V12
+0.01)èDriveModuË12S³ed-=(
DriveSysDeş
)*
Ts12
;

203 
DriveModuË12S³ed
=
S‘V12
;

205 if(
S‘V12
<0.0){

206 if(
DriveModuË12S³ed
<(
S‘V12
-0.01)èDriveModuË12S³ed+=(
DriveSysDeş
)*
Ts12
;

207 if(
DriveModuË12S³ed
>(
S‘V12
+0.01)èDriveModuË12S³ed-=(
DriveSysAcûl
)*
Ts12
;

208 
DriveModuË12S³ed
=
S‘V12
;

211 if(
DriveModuË12S³ed
>0.0èDriveModuË12S³ed-=(
DriveSysDeş
)*
Ts12
;

212 if(
DriveModuË12S³ed
<0.0èDriveModuË12S³ed+=(
DriveSysDeş
)*
Ts12
;

213 
DriveModuË12S³ed
=0.0;

218 
DriveModuË12AngË
=(
æßt32
)(*
šputS‘DriveModuË12AngË
)*
G¿d2Rad
;

219 
DriveModuË12S³ed
=0.0;

220 *
ouutMÙÜ121CÚŒŞWÜd
=0x0005;

221 *
ouutMÙÜ122CÚŒŞWÜd
=0x0005;

225 
PICÚŒŞËrD©’12
.
OutLim™
=(
S³edLim™
-
DriveModuË12S³ed
)/
H®f_D
 ;

228 
PICÚŒŞËrD©’12
.
ek
=
DriveModuË12AngË
-
DriveModuË12Aùu®AngË
;

229 if((
PICÚŒŞËrD©’12
.
ek
<
PICÚŒŞËrD—dZÚe
)&&(PIControllerDaten12.ek>(0.0-PIControllerDeadZone)))

230 
PICÚŒŞËrD©’12
.
ek
=0.0;

233 
OmegaSP
=
PICÚŒŞËrD©’12
.
Kp1
*PICÚŒŞËrD©’12.
ek
;

234 
E_Omega
=
OmegaSP
-
DriveModuË12Omega
;

235 
D–Yk
=
PICÚŒŞËrD©’12
.
Kp2
*(
E_Omega
-PICÚŒŞËrD©’12.
ek_1
);

236 
D–Yi
=
E_Omega
*
PICÚŒŞËrD©’12
.
Ki
*
Ts12
;

238 if((
PICÚŒŞËrD©’12
.
yk_1
+
D–Yk
+
D–Yi
)>=PICÚŒŞËrD©’12.
OutLim™
èPICÚŒŞËrD©’12.
yk
=PIControllerDaten12.OutLimit;

239 if((
PICÚŒŞËrD©’12
.
yk_1
+
D–Yk
+
D–Yi
)<=(0.0-PICÚŒŞËrD©’12.
OutLim™
)èPICÚŒŞËrD©’12.
yk
=0.0-PIControllerDaten12.OutLimit;

240 
PICÚŒŞËrD©’12
.
yk
=PICÚŒŞËrD©’12.
yk_1
+
D–Yk
+
D–Yi
;

242 
PICÚŒŞËrD©’12
.
ek_1
=
E_Omega
;

243 
PICÚŒŞËrD©’12
.
yk_1
=PICÚŒŞËrD©’12.
yk
;

246 
OmegaS‘
=
PICÚŒŞËrD©’12
.
yk
+
DriveModuË12OmegaM
;

247 if(
OmegaS‘
>
PICÚŒŞËrD©’12
.
OutLim™
) OmegaSet=PIControllerDaten12.OutLimit;

248 if(
OmegaS‘
<(0.0-
PICÚŒŞËrD©’12
.
OutLim™
)) OmegaSet=0.0-PIControllerDaten12.OutLimit;

249 *
ouutS‘MÙÜ121S³ed
=(
sšt16
)((
DriveModuË12S³ed
-
H®f_D
 *
OmegaS‘
)*
FaùV2½m
);

250 *
ouutS‘MÙÜ122S³ed
=(
sšt16
)((
DriveModuË12S³ed
+
H®f_D
 *
OmegaS‘
)*
FaùV2½m
);

251 
	}
}

259 
	$CÚŒŞËr21
(){

260 
æßt32
 
D–Yk
;

261 
æßt32
 
D–Yi
;

262 
æßt32
 
OmegaSP
;

263 
æßt32
 
OmegaS‘
;

264 
æßt32
 
E_Omega
;

267 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTe¡Mode
)==0){

268 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysMÙiÚReq
)==0){

269 *
ouutMÙÜ211CÚŒŞWÜd
=0x0000;

270 *
ouutMÙÜ212CÚŒŞWÜd
=0x0000;

274 *
ouutMÙÜ211CÚŒŞWÜd
=0x0005;

275 *
ouutMÙÜ212CÚŒŞWÜd
=0x0005;

277 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
)==0){

278 if(
DriveModuË21AngË
<=(
S‘Th‘a21
-0.02)èDriveModuË21AngË+=(
DriveSysOmega
)*
Ts21
;

279 if(
DriveModuË21AngË
>(
S‘Th‘a21
+0.02)èDriveModuË21AngË-=(
DriveSysOmega
)*
Ts21
;

280 
DriveModuË21AngË
=
S‘Th‘a21
;

281 if(
S‘V21
>0.0){

282 if(
DriveModuË21S³ed
<(
S‘V21
-0.01)èDriveModuË21S³ed+=(
DriveSysAcûl
)*
Ts21
;

283 if(
DriveModuË21S³ed
>(
S‘V21
+0.01)èDriveModuË21S³ed-=(
DriveSysDeş
)*
Ts21
;

284 
DriveModuË21S³ed
=
S‘V21
;

286 if(
S‘V21
<0.0){

287 if(
DriveModuË21S³ed
<(
S‘V21
-0.01)èDriveModuË21S³ed+=(
DriveSysDeş
)*
Ts21
;

288 if(
DriveModuË21S³ed
>(
S‘V21
+0.01)èDriveModuË21S³ed-=(
DriveSysAcûl
)*
Ts21
;

289 
DriveModuË21S³ed
=
S‘V21
;

292 if(
DriveModuË21S³ed
>0.0èDriveModuË21S³ed-=(
DriveSysDeş
)*
Ts21
;

293 if(
DriveModuË21S³ed
<0.0èDriveModuË21S³ed+=(
DriveSysDeş
)*
Ts21
;

294 
DriveModuË21S³ed
=0.0;

299 
DriveModuË21AngË
=(
æßt32
)(*
šputS‘DriveModuË21AngË
)*
G¿d2Rad
;

300 
DriveModuË21S³ed
=0.0;

301 *
ouutMÙÜ211CÚŒŞWÜd
=0x0005;

302 *
ouutMÙÜ212CÚŒŞWÜd
=0x0005;

306 
PICÚŒŞËrD©’21
.
OutLim™
=(
S³edLim™
-
DriveModuË21S³ed
)/
H®f_D
 ;

309 
PICÚŒŞËrD©’21
.
ek
=
DriveModuË21AngË
-
DriveModuË21Aùu®AngË
;

310 if((
PICÚŒŞËrD©’21
.
ek
<
PICÚŒŞËrD—dZÚe
)&&(PIControllerDaten21.ek>(0.0-PIControllerDeadZone)))

311 
PICÚŒŞËrD©’21
.
ek
=0.0;

314 
OmegaSP
=
PICÚŒŞËrD©’21
.
Kp1
*PICÚŒŞËrD©’21.
ek
;

315 
E_Omega
=
OmegaSP
-
DriveModuË21Omega
;

316 
D–Yk
=
PICÚŒŞËrD©’21
.
Kp2
*(
E_Omega
-PICÚŒŞËrD©’21.
ek_1
);

317 
D–Yi
=
E_Omega
*
PICÚŒŞËrD©’21
.
Ki
*
Ts21
;

319 if((
PICÚŒŞËrD©’21
.
yk_1
+
D–Yk
+
D–Yi
)>=PICÚŒŞËrD©’21.
OutLim™
èPICÚŒŞËrD©’21.
yk
=PIControllerDaten21.OutLimit;

320 if((
PICÚŒŞËrD©’21
.
yk_1
+
D–Yk
+
D–Yi
)<=(0.0-PICÚŒŞËrD©’21.
OutLim™
)èPICÚŒŞËrD©’21.
yk
=0.0-PIControllerDaten21.OutLimit;

321 
PICÚŒŞËrD©’21
.
yk
=PICÚŒŞËrD©’21.
yk_1
+
D–Yk
+
D–Yi
;

323 
PICÚŒŞËrD©’21
.
ek_1
=
E_Omega
;

324 
PICÚŒŞËrD©’21
.
yk_1
=PICÚŒŞËrD©’21.
yk
;

327 
OmegaS‘
=
PICÚŒŞËrD©’21
.
yk
+
DriveModuË21OmegaM
;

328 if(
OmegaS‘
>
PICÚŒŞËrD©’21
.
OutLim™
) OmegaSet=PIControllerDaten21.OutLimit;

329 if(
OmegaS‘
<(0.0-
PICÚŒŞËrD©’21
.
OutLim™
)) OmegaSet=0.0-PIControllerDaten21.OutLimit;

330 *
ouutS‘MÙÜ211S³ed
=(
sšt16
)((
DriveModuË21S³ed
-
H®f_D
 *
OmegaS‘
)*
FaùV2½m
);

331 *
ouutS‘MÙÜ212S³ed
=(
sšt16
)((
DriveModuË21S³ed
+
H®f_D
 *
OmegaS‘
)*
FaùV2½m
);

332 
	}
}

340 
	$CÚŒŞËr22
(){

341 
æßt32
 
D–Yk
;

342 
æßt32
 
D–Yi
;

343 
æßt32
 
OmegaSP
;

344 
æßt32
 
OmegaS‘
;

345 
æßt32
 
E_Omega
;

348 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTe¡Mode
)==0){

349 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysMÙiÚReq
)==0){

350 *
ouutMÙÜ221CÚŒŞWÜd
=0x0000;

351 *
ouutMÙÜ222CÚŒŞWÜd
=0x0000;

355 *
ouutMÙÜ221CÚŒŞWÜd
=0x0005;

356 *
ouutMÙÜ222CÚŒŞWÜd
=0x0005;

358 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
)==0){

359 if(
DriveModuË22AngË
<=(
S‘Th‘a22
-0.02)èDriveModuË22AngË+=(
DriveSysOmega
)*
Ts22
;

360 if(
DriveModuË22AngË
>(
S‘Th‘a22
+0.02)èDriveModuË22AngË-=(
DriveSysOmega
)*
Ts22
;

361 
DriveModuË22AngË
=
S‘Th‘a22
;

362 if(
S‘V22
>0.0){

363 if(
DriveModuË22S³ed
<(
S‘V22
-0.01)èDriveModuË22S³ed+=
DriveSysAcûl
*
Ts22
;

364 if(
DriveModuË22S³ed
>(
S‘V22
+0.01)èDriveModuË22S³ed-=(
DriveSysDeş
)*
Ts22
;

365 
DriveModuË22S³ed
=
S‘V22
;

367 if(
S‘V22
<0.0){

368 if(
DriveModuË22S³ed
<(
S‘V22
-0.01)èDriveModuË22S³ed+=(
DriveSysDeş
)*
Ts22
;

369 if(
DriveModuË22S³ed
>(
S‘V22
+0.01)èDriveModuË22S³ed-=
DriveSysAcûl
*
Ts22
;

370 
DriveModuË22S³ed
=
S‘V22
;

373 if(
DriveModuË22S³ed
>0.0èDriveModuË22S³ed-=(
DriveSysDeş
)*
Ts22
;

374 if(
DriveModuË22S³ed
<0.0èDriveModuË22S³ed+=(
DriveSysDeş
)*
Ts22
;

375 
DriveModuË22S³ed
=0.0;

380 
DriveModuË22AngË
=(
æßt32
)(*
šputS‘DriveModuË22AngË
)*
G¿d2Rad
;

381 
DriveModuË22S³ed
=0.0;

382 *
ouutMÙÜ221CÚŒŞWÜd
=0x0005;

383 *
ouutMÙÜ222CÚŒŞWÜd
=0x0005;

387 
PICÚŒŞËrD©’22
.
OutLim™
=(
S³edLim™
-
DriveModuË22S³ed
)/
H®f_D
;

390 
PICÚŒŞËrD©’22
.
ek
=
DriveModuË22AngË
-
DriveModuË22Aùu®AngË
;

391 if((
PICÚŒŞËrD©’22
.
ek
<
PICÚŒŞËrD—dZÚe
)&&(PIControllerDaten22.ek>(0.0-PIControllerDeadZone)))

392 
PICÚŒŞËrD©’22
.
ek
=0.0;

395 
OmegaSP
=
PICÚŒŞËrD©’22
.
Kp1
*PICÚŒŞËrD©’22.
ek
;

396 
E_Omega
=
OmegaSP
-
DriveModuË22Omega
;

397 
D–Yk
=
PICÚŒŞËrD©’22
.
Kp2
*(
E_Omega
-PICÚŒŞËrD©’22.
ek_1
);

398 
D–Yi
=
E_Omega
*
PICÚŒŞËrD©’22
.
Ki
*
Ts22
;

400 if((
PICÚŒŞËrD©’22
.
yk_1
+
D–Yk
+
D–Yi
)>=PICÚŒŞËrD©’22.
OutLim™
èPICÚŒŞËrD©’22.
yk
=PIControllerDaten22.OutLimit;

401 if((
PICÚŒŞËrD©’22
.
yk_1
+
D–Yk
+
D–Yi
)<=(0.0-PICÚŒŞËrD©’22.
OutLim™
)èPICÚŒŞËrD©’22.
yk
=0.0-PIControllerDaten22.OutLimit;

402 
PICÚŒŞËrD©’22
.
yk
=PICÚŒŞËrD©’22.
yk_1
+
D–Yk
+
D–Yi
;

404 
PICÚŒŞËrD©’22
.
ek_1
=
E_Omega
;

405 
PICÚŒŞËrD©’22
.
yk_1
=PICÚŒŞËrD©’22.
yk
;

408 
OmegaS‘
=
PICÚŒŞËrD©’22
.
yk
+
DriveModuË22OmegaM
;

409 if(
OmegaS‘
>
PICÚŒŞËrD©’22
.
OutLim™
) OmegaSet=PIControllerDaten22.OutLimit;

410 if(
OmegaS‘
<(0.0-
PICÚŒŞËrD©’22
.
OutLim™
)) OmegaSet=0.0-PIControllerDaten22.OutLimit;

412 *
ouutS‘MÙÜ221S³ed
=(
sšt16
)((
DriveModuË22S³ed
-
H®f_D
*
OmegaS‘
)*
FaùV2½m
);

413 *
ouutS‘MÙÜ222S³ed
=(
sšt16
)((
DriveModuË22S³ed
+
H®f_D
*
OmegaS‘
)*
FaùV2½m
);

414 
	}
}

422 
	$G‘DriveM—su»m’tDriveModuË11
(){

424 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

426 
DriveModuË11Aùu®AngË
=((
æßt32
)(*
šputDriveModuË11Aùu®AngË
)*
AngËS’sÜ11FaùA
+
AngËS’sÜ11FaùB
-90.0)*
G¿d2Rad
;

428 
S³edV®ue11
=0.0-(
æßt32
)(*
šputMÙÜ111Aùu®S³ed
+*
šputMÙÜ112Aùu®S³ed
)/
FaùV2½m
/2.0;

430 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R11
=(
	`nf
(
DriveModuË12Aùu®AngË
)-nf(
DriveModuË11Aùu®AngË
))*
	`cosf
(DriveModuË11Aùu®AngË)/
B
;

431 
šv”£R11
=0.0;

435 
DriveModuË11Aùu®AngË
=((
æßt32
)(*
šputDriveModuË11Aùu®AngË
)*
AngËS’sÜ11FaùA
+
AngËS’sÜ11FaùB
)*
G¿d2Rad
;

437 
S³edV®ue11
=(
æßt32
)(*
šputMÙÜ111Aùu®S³ed
+*
šputMÙÜ112Aùu®S³ed
)/
FaùV2½m
/2.0;

439 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R11
=(
	`nf
(
DriveModuË11Aùu®AngË
)-nf(
DriveModuË21Aùu®AngË
))*
	`cosf
(DriveModuË11Aùu®AngË)/
L
;

440 
šv”£R11
=0.0;

443 
DriveModuË11OmegaM
=
S³edV®ue11
*
šv”£R11
;

445 
DriveModuË11Omega
=(
æßt32
)(*
šputMÙÜ112Aùu®S³ed
-*
šputMÙÜ111Aùu®S³ed
)*
RPM2Omega
-
DriveModuË11OmegaM
;

446 
	}
}

454 
	$G‘DriveM—su»m’tDriveModuË12
(){

455 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

457 
DriveModuË12Aùu®AngË
=((
æßt32
)(*
šputDriveModuË12Aùu®AngË
)*
AngËS’sÜ12FaùA
+
AngËS’sÜ12FaùB
+90.0)*
G¿d2Rad
;

459 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R12
=(
	`nf
(
DriveModuË12Aùu®AngË
)-nf(
DriveModuË11Aùu®AngË
))*
	`cosf
(DriveModuË12Aùu®AngË)/
B
;

460 
šv”£R12
=0.0;

464 
DriveModuË12Aùu®AngË
=((
æßt32
)(*
šputDriveModuË12Aùu®AngË
)*
AngËS’sÜ12FaùA
+
AngËS’sÜ12FaùB
)*
G¿d2Rad
;

466 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R12
=(
	`nf
(
DriveModuË12Aùu®AngË
)-nf(
DriveModuË22Aùu®AngË
))*
	`cosf
(DriveModuË12Aùu®AngË)/
L
;

467 
šv”£R12
=0.0;

471 
S³edV®ue12
=(
æßt32
)(*
šputMÙÜ121Aùu®S³ed
+*
šputMÙÜ122Aùu®S³ed
)/
FaùV2½m
/2.0;

473 
DriveModuË12OmegaM
=
S³edV®ue12
*
šv”£R12
;

475 
DriveModuË12Omega
=(
æßt32
)(*
šputMÙÜ122Aùu®S³ed
-*
šputMÙÜ121Aùu®S³ed
)*
RPM2Omega
-
DriveModuË12OmegaM
;

476 
	}
}

484 
	$G‘DriveM—su»m’tDriveModuË21
(){

486 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

488 
DriveModuË21Aùu®AngË
=((
æßt32
)(*
šputDriveModuË21Aùu®AngË
)*
AngËS’sÜ21FaùA
+
AngËS’sÜ21FaùB
+90.0)*
G¿d2Rad
;

490 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R21
=(
	`nf
(
DriveModuË22Aùu®AngË
)-nf(
DriveModuË21Aùu®AngË
))*
	`cosf
(DriveModuË21Aùu®AngË)/
B
;

491 
šv”£R21
=0.0;

495 
DriveModuË21Aùu®AngË
=((
æßt32
)(*
šputDriveModuË21Aùu®AngË
)*
AngËS’sÜ21FaùA
+
AngËS’sÜ21FaùB
)*
G¿d2Rad
;

497 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R21
=(
	`nf
(
DriveModuË11Aùu®AngË
)-nf(
DriveModuË21Aùu®AngË
))*
	`cosf
(DriveModuË21Aùu®AngË)/
L
;

498 
šv”£R21
=0.0;

502 
S³edV®ue21
=(
æßt32
)(*
šputMÙÜ211Aùu®S³ed
+*
šputMÙÜ212Aùu®S³ed
)/
FaùV2½m
/2.0;

504 
DriveModuË21OmegaM
=
S³edV®ue21
*
šv”£R21
;

506 
DriveModuË21Omega
=(
æßt32
)(*
šputMÙÜ212Aùu®S³ed
-*
šputMÙÜ211Aùu®S³ed
)*
RPM2Omega
-
DriveModuË21OmegaM
;

507 
	}
}

515 
	$G‘DriveM—su»m’tDriveModuË22
(){

517 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

519 
DriveModuË22Aùu®AngË
=((
æßt32
)(*
šputDriveModuË22Aùu®AngË
)*
AngËS’sÜ22FaùA
+
AngËS’sÜ22FaùB
-90.0)*
G¿d2Rad
;

521 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R22
=(
	`nf
(
DriveModuË22Aùu®AngË
)-nf(
DriveModuË21Aùu®AngË
))*
	`cosf
(DriveModuË22Aùu®AngË)/
B
;

522 
šv”£R22
=0.0;

524 
S³edV®ue22
=0.0-(
æßt32
)(*
šputMÙÜ221Aùu®S³ed
+*
šputMÙÜ222Aùu®S³ed
)/
FaùV2½m
/2.0;

528 
DriveModuË22Aùu®AngË
=((
æßt32
)(*
šputDriveModuË22Aùu®AngË
)*
AngËS’sÜ22FaùA
+
AngËS’sÜ22FaùB
)*
G¿d2Rad
;

530 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0è
šv”£R22
=(
	`nf
(
DriveModuË12Aùu®AngË
)-nf(
DriveModuË22Aùu®AngË
))*
	`cosf
(DriveModuË22Aùu®AngË)/
L
;

531 
šv”£R22
=0.0;

533 
S³edV®ue22
=(
æßt32
)(*
šputMÙÜ221Aùu®S³ed
+*
šputMÙÜ222Aùu®S³ed
)/
FaùV2½m
/2.0;

537 
DriveModuË22OmegaM
=
S³edV®ue22
*
šv”£R22
;

539 
DriveModuË22Omega
=(
æßt32
)(*
šputMÙÜ222Aùu®S³ed
-*
šputMÙÜ221Aùu®S³ed
)*
RPM2Omega
-
DriveModuË22OmegaM
;

540 
	}
}

550 
	$DriveB¿ke
(){

551 
ušt16
 
loÿl_tick
;

552 
ušt16
 
CÚŒŞWÜdTmp
;

554 
PICÚŒŞËrD©’11
.
ek
=0.0;

555 
PICÚŒŞËrD©’11
.
ek_1
=0.0;

556 
PICÚŒŞËrD©’11
.
yk
=0.0;

557 
PICÚŒŞËrD©’11
.
yk_1
=0.0;

559 
PICÚŒŞËrD©’12
.
ek
=0.0;

560 
PICÚŒŞËrD©’12
.
ek_1
=0.0;

561 
PICÚŒŞËrD©’12
.
yk
=0.0;

562 
PICÚŒŞËrD©’12
.
yk_1
=0.0;

564 
PICÚŒŞËrD©’21
.
ek
=0.0;

565 
PICÚŒŞËrD©’21
.
ek_1
=0.0;

566 
PICÚŒŞËrD©’21
.
yk
=0.0;

567 
PICÚŒŞËrD©’21
.
yk_1
=0.0;

569 
PICÚŒŞËrD©’22
.
ek
=0.0;

570 
PICÚŒŞËrD©’22
.
ek_1
=0.0;

571 
PICÚŒŞËrD©’22
.
yk
=0.0;

572 
PICÚŒŞËrD©’22
.
yk_1
=0.0;

575 *
ouutS‘MÙÜ111S³ed
=0;

576 *
ouutS‘MÙÜ112S³ed
=0;

577 *
ouutS‘MÙÜ121S³ed
=0;

578 *
ouutS‘MÙÜ122S³ed
=0;

579 *
ouutS‘MÙÜ211S³ed
=0;

580 *
ouutS‘MÙÜ212S³ed
=0;

581 *
ouutS‘MÙÜ221S³ed
=0;

582 *
ouutS‘MÙÜ222S³ed
=0;

584 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysStİ
){

585 if(
loÿl_tick
<100){

586 
CÚŒŞWÜdTmp
=0x0004;

587 *
ouutMÙÜ111CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

588 *
ouutMÙÜ112CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

589 *
ouutMÙÜ121CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

590 *
ouutMÙÜ122CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

591 *
ouutMÙÜ211CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

592 *
ouutMÙÜ212CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

593 *
ouutMÙÜ221CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

594 *
ouutMÙÜ222CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

597 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysNoB¿ke
è
CÚŒŞWÜdTmp
=0x0005;

598 
CÚŒŞWÜdTmp
=0x0000;

599 *
ouutMÙÜ111CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

600 *
ouutMÙÜ112CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

601 *
ouutMÙÜ121CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

602 *
ouutMÙÜ122CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

603 
CÚŒŞWÜdTmp
=0x0000;

604 *
ouutMÙÜ211CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

605 *
ouutMÙÜ212CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

606 *
ouutMÙÜ221CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

607 *
ouutMÙÜ222CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

609 if(
loÿl_tick
<150)†ocal_tick++;

611 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysStİ
)==0){

612 
CÚŒŞWÜdTmp
=0x0004;

613 *
ouutMÙÜ111CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

614 *
ouutMÙÜ112CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

615 *
ouutMÙÜ121CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

616 *
ouutMÙÜ122CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

617 *
ouutMÙÜ211CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

618 *
ouutMÙÜ212CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

619 *
ouutMÙÜ221CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

620 *
ouutMÙÜ222CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

621 
loÿl_tick
=0;

623 
	}
}

631 
	$DriveCÚŒŞ
(){

660 if(
DriveModuËAktiv
&0x01){

661 
	`G‘DriveM—su»m’tDriveModuË11
();

662 
	`G‘DriveM—su»m’tDriveModuË12
();

663 
	`G‘DriveM—su»m’tDriveModuË21
();

664 
	`G‘DriveM—su»m’tDriveModuË22
();

665 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysStİ
)==0){

666 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysEÇbË
){

667 
	`twoDim’siÚS‹”šg
();

668 
	`CÚŒŞËr11
();

669 
	`CÚŒŞËr12
();

670 
	`CÚŒŞËr21
();

671 
	`CÚŒŞËr22
();

674 
DriveModuËAktiv
&=~0x01;

676 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysEÇbË
)==0){

677 
	`DriveModuËRe£t
();

678 
	`DriveB¿ke
();

680 
	}
}

688 
	$Task_DriveSysCÚŒŞ
(* 
¬gv
){

689 
¬gv
=argv;

690 
ušt32
 
u32_Ev’ts
;

692 
	`x_os_£t_ev’t_mask
(
Ev’t_DriveSysCÚŒŞ
);

694 
TRUE
){

695 
	`x_os_wa™_fÜ_ev’ts
();

696 
u32_Ev’ts
 = 
	`x_os_g‘_ev’ts
();

697 if((
u32_Ev’ts
&
Ev’t_DriveSysCÚŒŞ
)!=0){

698 
	`DriveCÚŒŞ
();

701 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveInterface.h

1 #iâdeà
_DRIVEINTERFACE_H


2 
	#_DRIVEINTERFACE_H


	)

12 
In™DriveSys
();

20 
TaskDriveSysAwake
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSys.c

1 
	~"DriveIÁ”çû.h
"

2 
	~"DriveSys.h
"

3 
	~"DriveSysD©a.h
"

11 
	$In™IÁ”çûDriveSys
(){

13 
šputDriveSysCÚŒŞWÜd
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysCÚŒŞWÜd
,
Ty³U32
,0); *inputDriveSysControlWord=0;

15 
šputDriveSysS³edX
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³edX
,
Ty³F32
,0); *inputDriveSysSpeedX=0.0;

16 
šputDriveSysS³edY
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³edY
,
Ty³F32
,0); *inputDriveSysSpeedY=0.0;

17 
šputDriveSysOmegaZ
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘OmegaZ
,
Ty³F32
,0); *inputDriveSysOmegaZ=0.0;

18 
šputDriveSysS³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³ed
,
Ty³F32
,0); *inputDriveSysSpeed=0.0;

19 
šputDriveSysAngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘AngË
,
Ty³F32
,0); *inputDriveSysAngle=0.0;

21 
šputDriveSysOmega
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysOmega
,
Ty³S32
,0);

22 
šputDriveSysAcûl
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysAcûl
,
Ty³S32
,0);

23 
šputDriveSysDeş
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysDeş
,
Ty³S32
,0);

25 
šputDriveModuËMaxS³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexMaxim®S³ed
,
Ty³U32
,0);

27 
šputDriveModuË11AngËFaùA
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ11FaùA
,
Ty³S32
,0);

28 
šputDriveModuË11AngËFaùB
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ11FaùB
,
Ty³S32
,0);

29 
šputDriveModuË12AngËFaùA
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ12FaùA
,
Ty³S32
,0);

30 
šputDriveModuË12AngËFaùB
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ12FaùB
,
Ty³S32
,0);

31 
šputDriveModuË21AngËFaùA
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ21FaùA
,
Ty³S32
,0);

32 
šputDriveModuË21AngËFaùB
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ21FaùB
,
Ty³S32
,0);

33 
šputDriveModuË22AngËFaùA
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ22FaùA
,
Ty³S32
,0);

34 
šputDriveModuË22AngËFaùB
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexAngËS’sÜ22FaùB
,
Ty³S32
,0);

36 
šputDriveModuË11PICÚŒŞKp1
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Kp1
,
Ty³S32
,0);

37 
šputDriveModuË11PICÚŒŞKp2
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Kp1
,
Ty³S32
,0);

38 
šputDriveModuË11PICÚŒŞKi
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Ki
,
Ty³S32
,0);

39 
šputDriveModuË12PICÚŒŞKp1
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Kp1
,
Ty³S32
,0);

40 
šputDriveModuË12PICÚŒŞKp2
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Kp2
,
Ty³S32
,0);

41 
šputDriveModuË12PICÚŒŞKi
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Ki
,
Ty³S32
,0);

42 
šputDriveModuË21PICÚŒŞKp1
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Kp1
,
Ty³S32
,0);

43 
šputDriveModuË21PICÚŒŞKp2
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Kp2
,
Ty³S32
,0);

44 
šputDriveModuË21PICÚŒŞKi
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Ki
,
Ty³S32
,0);

45 
šputDriveModuË22PICÚŒŞKp1
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Kp1
,
Ty³S32
,0);

46 
šputDriveModuË22PICÚŒŞKp2
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Kp2
,
Ty³S32
,0);

47 
šputDriveModuË22PICÚŒŞKi
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Ki
,
Ty³S32
,0);

50 
šputDriveModuË11Aùu®AngË
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut01
,
Ty³U16
,0); *inputDriveModule11ActualAngle=0;

51 
šputDriveModuË12Aùu®AngË
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut02
,
Ty³U16
,0); *inputDriveModule12ActualAngle=0;

52 
šputDriveModuË21Aùu®AngË
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut04
,
Ty³U16
,0); *inputDriveModule21ActualAngle=0;

53 
šputDriveModuË22Aùu®AngË
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut03
,
Ty³U16
,0); *inputDriveModule22ActualAngle=0;

55 
šputS‘DriveModuË11AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË11AngË
,
Ty³S32
,0); *inputSetDriveModule11Angle=0;

56 
šputS‘DriveModuË12AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË12AngË
,
Ty³S32
,0); *inputSetDriveModule12Angle=0;

57 
šputS‘DriveModuË21AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË21AngË
,
Ty³S32
,0); *inputSetDriveModule21Angle=0;

58 
šputS‘DriveModuË22AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË22AngË
,
Ty³S32
,0); *inputSetDriveModule22Angle=0;

60 
šputMÙÜ111StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor111StatusByte=0x00;

61 
šputMÙÜ112StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor112StatusByte=0x00;

62 
šputMÙÜ121StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor121StatusByte=0x00;

63 
šputMÙÜ122StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor122StatusByte=0x00;

64 
šputMÙÜ211StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor211StatusByte=0x00;

65 
šputMÙÜ212StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor212StatusByte=0x00;

66 
šputMÙÜ221StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor221StatusByte=0x00;

67 
šputMÙÜ222StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputMotor222StatusByte=0x00;

69 
šputMÙÜ111Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor111ActualSpeed=0;

70 
šputMÙÜ112Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor112ActualSpeed=0;

71 
šputMÙÜ121Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor121ActualSpeed=0;

72 
šputMÙÜ122Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor122ActualSpeed=0;

73 
šputMÙÜ211Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor211ActualSpeed=0;

74 
šputMÙÜ212Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor212ActualSpeed=0;

75 
šputMÙÜ221Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor221ActualSpeed=0;

76 
šputMÙÜ222Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputMotor222ActualSpeed=0;

78 
šputInv”‹r111NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter111NMTStatus=0x00;

79 
šputInv”‹r112NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter112NMTStatus=0x00;

80 
šputInv”‹r121NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter121NMTStatus=0x00;

81 
šputInv”‹r122NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter122NMTStatus=0x00;

82 
šputInv”‹r211NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter211NMTStatus=0x00;

83 
šputInv”‹r212NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter212NMTStatus=0x00;

84 
šputInv”‹r221NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter221NMTStatus=0x00;

85 
šputInv”‹r222NMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputInverter222NMTStatus=0x00;

87 
šputInv”‹r111NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter111NodeStatus=0x00;

88 
šputInv”‹r112NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter112NodeStatus=0x00;

89 
šputInv”‹r121NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter121NodeStatus=0x00;

90 
šputInv”‹r122NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter122NodeStatus=0x00;

91 
šputInv”‹r211NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter211NodeStatus=0x00;

92 
šputInv”‹r212NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter212NodeStatus=0x00;

93 
šputInv”‹r221NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter221NodeStatus=0x00;

94 
šputInv”‹r222NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputInverter222NodeStatus=0x00;

96 
ouutMÙÜ111CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor111ControlWord=0x0000;

97 
ouutMÙÜ112CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor112ControlWord=0x0000;

98 
ouutMÙÜ121CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor121ControlWord=0x0000;

99 
ouutMÙÜ122CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor122ControlWord=0x0000;

100 
ouutMÙÜ211CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor211ControlWord=0x0000;

101 
ouutMÙÜ212CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor212ControlWord=0x0000;

102 
ouutMÙÜ221CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor221ControlWord=0x0000;

103 
ouutMÙÜ222CÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputMotor222ControlWord=0x0000;

105 
ouutS‘MÙÜ111S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor111Speed=0;

106 
ouutS‘MÙÜ112S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor112Speed=0;

107 
ouutS‘MÙÜ121S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor121Speed=0;

108 
ouutS‘MÙÜ122S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor122Speed=0;

109 
ouutS‘MÙÜ211S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor211Speed=0;

110 
ouutS‘MÙÜ212S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor212Speed=0;

111 
ouutS‘MÙÜ221S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor221Speed=0;

112 
ouutS‘MÙÜ222S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetMotor222Speed=0;

114 
ouutInv”‹r111NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter111NMT=0x0000;

115 
ouutInv”‹r112NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter112NMT=0x0000;

116 
ouutInv”‹r121NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter121NMT=0x0000;

117 
ouutInv”‹r122NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter122NMT=0x0000;

118 
ouutInv”‹r211NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter211NMT=0x0000;

119 
ouutInv”‹r212NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter212NMT=0x0000;

120 
ouutInv”‹r221NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter221NMT=0x0000;

121 
ouutInv”‹r222NMT
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputInverter222NMT=0x0000;

123 
ouutDriveModuË11Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Aùu®AngË
,
Ty³S32
,0); *outputDriveModule11ActualAngle=0;

124 
ouutDriveModuË12Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Aùu®AngË
,
Ty³S32
,0); *outputDriveModule12ActualAngle=0;

125 
ouutDriveModuË21Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Aùu®AngË
,
Ty³S32
,0); *outputDriveModule21ActualAngle=0;

126 
ouutDriveModuË22Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Aùu®AngË
,
Ty³S32
,0); *outputDriveModule22ActualAngle=0;

128 
ouutDriveModuË11Aùu®S³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Aùu®S³ed
,
Ty³S32
,0); *outputDriveModule11ActualSpeed=0;

129 
ouutDriveModuË12Aùu®S³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Aùu®S³ed
,
Ty³S32
,0); *outputDriveModule12ActualSpeed=0;

130 
ouutDriveModuË21Aùu®S³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Aùu®S³ed
,
Ty³S32
,0); *outputDriveModule21ActualSpeed=0;

131 
ouutDriveModuË22Aùu®S³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Aùu®S³ed
,
Ty³S32
,0); *outputDriveModule22ActualSpeed=0;

133 
ouutDriveModuË11Omega
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Aùu®Omega
,
Ty³S32
,0); *outputDriveModule11Omega=0;

134 
ouutDriveModuË12Omega
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Aùu®Omega
,
Ty³S32
,0); *outputDriveModule12Omega=0;

135 
ouutDriveModuË21Omega
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Aùu®Omega
,
Ty³S32
,0); *outputDriveModule21Omega=0;

136 
ouutDriveModuË22Omega
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Aùu®Omega
,
Ty³S32
,0); *outputDriveModule22Omega=0;

138 
ouutRCToSÏveDrv›S³ed
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveHighWÜd
,
Ty³S8
,0); *outputRCToSlaveDrvieSpeed=0;

139 
	}
}

147 
	$In™DriveSys
(){

148 
	`In™IÁ”çûDriveSys
();

149 
	`In™Inv”‹r
();

150 
	`x_os_š¡®l_sk
(
PrioDriveSysMªage
, 500, 10, 
Task_DriveSysMªage
, 128);

151 
	`x_os_š¡®l_sk
(
PrioDrv›SysCÚŒŞ
, 0, 0, 
Task_DriveSysCÚŒŞ
, 256);

152 
	}
}

161 
	$TaskDriveSysAwake
(){

162 
ušt32
 
timeSmp
;

163 
ušt16
 
S‘TaskEv’tFÏg
;

165 
toggËB™
[0][0]=*
šputMÙÜ111StusBy‹
&0x80;

166 if(
toggËB™
[0][0]!ñoggËB™[0][1]è
toggËCouÁ”
[0]++;

167 if(
toggËCouÁ”
[0]>=
MaxToggËCouÁ”
){

168 
DriveModuËAktiv
|=0x01;

169 
toggËCouÁ”
[0]=0;

170 
S‘TaskEv’tFÏg
=1;

172 
toggËB™
[1][0]=*
šputMÙÜ121StusBy‹
&0x80;

173 if(
toggËB™
[1][0]!ñoggËB™[1][1]è
toggËCouÁ”
[1]++;

174 if(
toggËCouÁ”
[1]>=
MaxToggËCouÁ”
){

175 
DriveModuËAktiv
|=0x02;

176 
toggËCouÁ”
[1]=0;

177 
S‘TaskEv’tFÏg
=1;

179 
toggËB™
[2][0]=*
šputMÙÜ211StusBy‹
&0x80;

180 if(
toggËB™
[2][0]!ñoggËB™[2][1]è
toggËCouÁ”
[2]++;

181 if(
toggËCouÁ”
[2]>=
MaxToggËCouÁ”
){

182 
DriveModuËAktiv
|=0x04;

183 
toggËCouÁ”
[2]=0;

184 
S‘TaskEv’tFÏg
=1;

186 
toggËB™
[3][0]=*
šputMÙÜ221StusBy‹
&0x80;

187 if(
toggËB™
[3][0]!ñoggËB™[3][1]è
toggËCouÁ”
[3]++;

188 if(
toggËCouÁ”
[3]>=
MaxToggËCouÁ”
){

189 
DriveModuËAktiv
|=0x08;

190 
toggËCouÁ”
[3]=0;

191 
S‘TaskEv’tFÏg
=1;

194 
toggËB™
[0][1]=toggleBit[0][0];

195 
toggËB™
[1][1]=toggleBit[1][0];

196 
toggËB™
[2][1]=toggleBit[2][0];

197 
toggËB™
[3][1]=toggleBit[3][0];

199 if(
S‘TaskEv’tFÏg
==1è
	`x_os_£t_ev’ts
(
Ev’t_DriveSysCÚŒŞ
);

205 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSys.h

1 #iâdeà
_DRIVESYS_H


2 
	#_DRIVESYS_H


	)

4 
	~"¡wty³s.h
"

5 
	~"MESCÚfig.h
"

6 
	~"AµCÚfig.h
"

7 
	~"DeviûOD.h
"

15 
Task_DriveSysCÚŒŞ
(* 
¬gv
);

23 
Task_DriveSysMªage
(* 
¬gv
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysData.c

1 
	~"DriveSysD©a.h
"

7 
Ty³PICÚŒŞËrD©’
 
	gPICÚŒŞËrD©’11
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f};

8 
Ty³PICÚŒŞËrD©’
 
	gPICÚŒŞËrD©’12
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f};

9 
Ty³PICÚŒŞËrD©’
 
	gPICÚŒŞËrD©’21
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f};

10 
Ty³PICÚŒŞËrD©’
 
	gPICÚŒŞËrD©’22
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f};

13 
ušt16
 
	gDriveSysTick
;

17 
æßt32
 
	gS³edLim™
;

20 
æßt32
 
	gAngËFaùÜ
[4][2];

23 
ušt8
 
	gMode
;

26 
æßt32
 
	gTs11
;

27 
æßt32
 
	gTs12
;

28 
æßt32
 
	gTs21
;

29 
æßt32
 
	gTs22
;

32 
ušt8
 
	gDriveModuËAktiv
;

35 
ušt8
 
	gtoggËB™
[4][2];

36 
ušt16
 
	gtoggËCouÁ”
[4];

39 
æßt32
 
	gS‘V11
;

40 
æßt32
 
	gS‘V12
;

41 
æßt32
 
	gS‘V21
;

42 
æßt32
 
	gS‘V22
;

43 
æßt32
 
	gDriveModuË11S³ed
;

44 
æßt32
 
	gDriveModuË12S³ed
;

45 
æßt32
 
	gDriveModuË21S³ed
;

46 
æßt32
 
	gDriveModuË22S³ed
;

50 
æßt32
 
	gS‘Th‘a11
;

51 
æßt32
 
	gS‘Th‘a12
;

52 
æßt32
 
	gS‘Th‘a21
;

53 
æßt32
 
	gS‘Th‘a22
;

54 
æßt32
 
	gDriveModuË11AngË
;

55 
æßt32
 
	gDriveModuË12AngË
;

56 
æßt32
 
	gDriveModuË21AngË
;

57 
æßt32
 
	gDriveModuË22AngË
;

59 
æßt32
 
	gS³edV®ue11
;

60 
æßt32
 
	gS³edV®ue12
;

61 
æßt32
 
	gS³edV®ue21
;

62 
æßt32
 
	gS³edV®ue22
;

65 
æßt32
 
	gDriveModuË11Aùu®AngË
;

66 
æßt32
 
	gDriveModuË12Aùu®AngË
;

67 
æßt32
 
	gDriveModuË21Aùu®AngË
;

68 
æßt32
 
	gDriveModuË22Aùu®AngË
;

71 
æßt32
 
	gDriveModuË11OmegaM
;

72 
æßt32
 
	gDriveModuË12OmegaM
;

73 
æßt32
 
	gDriveModuË21OmegaM
;

74 
æßt32
 
	gDriveModuË22OmegaM
;

77 
æßt32
 
	gDriveModuË11Omega
;

78 
æßt32
 
	gDriveModuË12Omega
;

79 
æßt32
 
	gDriveModuË21Omega
;

80 
æßt32
 
	gDriveModuË22Omega
;

83 
æßt32
 
	gDriveSysOmega
;

84 
æßt32
 
	gDriveSysAcûl
;

85 
æßt32
 
	gDriveSysDeş
;

88 
æßt32
 
	gAngËS’sÜ11FaùA
;

89 
æßt32
 
	gAngËS’sÜ11FaùB
;

90 
æßt32
 
	gAngËS’sÜ12FaùA
;

91 
æßt32
 
	gAngËS’sÜ12FaùB
;

92 
æßt32
 
	gAngËS’sÜ21FaùA
;

93 
æßt32
 
	gAngËS’sÜ21FaùB
;

94 
æßt32
 
	gAngËS’sÜ22FaùA
;

95 
æßt32
 
	gAngËS’sÜ22FaùB
;

101 
ušt16
 *
	gouutMÙÜ111CÚŒŞWÜd
;

102 
ušt16
 *
	gouutMÙÜ112CÚŒŞWÜd
;

103 
ušt16
 *
	gouutMÙÜ121CÚŒŞWÜd
;

104 
ušt16
 *
	gouutMÙÜ122CÚŒŞWÜd
;

105 
ušt16
 *
	gouutMÙÜ211CÚŒŞWÜd
;

106 
ušt16
 *
	gouutMÙÜ212CÚŒŞWÜd
;

107 
ušt16
 *
	gouutMÙÜ221CÚŒŞWÜd
;

108 
ušt16
 *
	gouutMÙÜ222CÚŒŞWÜd
;

111 
sšt16
 *
	gouutS‘MÙÜ111S³ed
;

112 
sšt16
 *
	gouutS‘MÙÜ112S³ed
;

113 
sšt16
 *
	gouutS‘MÙÜ121S³ed
;

114 
sšt16
 *
	gouutS‘MÙÜ122S³ed
;

115 
sšt16
 *
	gouutS‘MÙÜ211S³ed
;

116 
sšt16
 *
	gouutS‘MÙÜ212S³ed
;

117 
sšt16
 *
	gouutS‘MÙÜ221S³ed
;

118 
sšt16
 *
	gouutS‘MÙÜ222S³ed
;

121 
ušt16
 *
	gouutInv”‹r111NMT
;

122 
ušt16
 *
	gouutInv”‹r112NMT
;

123 
ušt16
 *
	gouutInv”‹r121NMT
;

124 
ušt16
 *
	gouutInv”‹r122NMT
;

125 
ušt16
 *
	gouutInv”‹r211NMT
;

126 
ušt16
 *
	gouutInv”‹r212NMT
;

127 
ušt16
 *
	gouutInv”‹r221NMT
;

128 
ušt16
 *
	gouutInv”‹r222NMT
;

131 
sšt32
 *
	gouutDriveModuË11Aùu®AngË
;

132 
sšt32
 *
	gouutDriveModuË12Aùu®AngË
;

133 
sšt32
 *
	gouutDriveModuË21Aùu®AngË
;

134 
sšt32
 *
	gouutDriveModuË22Aùu®AngË
;

137 
sšt32
 *
	gouutDriveModuË11Omega
;

138 
sšt32
 *
	gouutDriveModuË12Omega
;

139 
sšt32
 *
	gouutDriveModuË21Omega
;

140 
sšt32
 *
	gouutDriveModuË22Omega
;

143 
sšt32
 *
	gouutDriveModuË11Aùu®S³ed
;

144 
sšt32
 *
	gouutDriveModuË12Aùu®S³ed
;

145 
sšt32
 *
	gouutDriveModuË21Aùu®S³ed
;

146 
sšt32
 *
	gouutDriveModuË22Aùu®S³ed
;

149 
sšt8
 *
	gouutRCToSÏveDrv›S³ed
;

155 
ušt32
 *
	gšputDriveSysCÚŒŞWÜd
;

158 
ušt8
 *
	gšputMÙÜ111StusBy‹
;

159 
ušt8
 *
	gšputMÙÜ112StusBy‹
;

160 
ušt8
 *
	gšputMÙÜ121StusBy‹
;

161 
ušt8
 *
	gšputMÙÜ122StusBy‹
;

162 
ušt8
 *
	gšputMÙÜ211StusBy‹
;

163 
ušt8
 *
	gšputMÙÜ212StusBy‹
;

164 
ušt8
 *
	gšputMÙÜ221StusBy‹
;

165 
ušt8
 *
	gšputMÙÜ222StusBy‹
;

168 
sšt32
 *
	gšputS‘DriveModuË11AngË
;

169 
sšt32
 *
	gšputS‘DriveModuË12AngË
;

170 
sšt32
 *
	gšputS‘DriveModuË21AngË
;

171 
sšt32
 *
	gšputS‘DriveModuË22AngË
;

174 
sšt16
 *
	gšputMÙÜ111Aùu®S³ed
;

175 
sšt16
 *
	gšputMÙÜ112Aùu®S³ed
;

176 
sšt16
 *
	gšputMÙÜ121Aùu®S³ed
;

177 
sšt16
 *
	gšputMÙÜ122Aùu®S³ed
;

178 
sšt16
 *
	gšputMÙÜ211Aùu®S³ed
;

179 
sšt16
 *
	gšputMÙÜ212Aùu®S³ed
;

180 
sšt16
 *
	gšputMÙÜ221Aùu®S³ed
;

181 
sšt16
 *
	gšputMÙÜ222Aùu®S³ed
;

184 
ušt8
 *
	gšputInv”‹r111NMTStus
;

185 
ušt8
 *
	gšputInv”‹r112NMTStus
;

186 
ušt8
 *
	gšputInv”‹r121NMTStus
;

187 
ušt8
 *
	gšputInv”‹r122NMTStus
;

188 
ušt8
 *
	gšputInv”‹r211NMTStus
;

189 
ušt8
 *
	gšputInv”‹r212NMTStus
;

190 
ušt8
 *
	gšputInv”‹r221NMTStus
;

191 
ušt8
 *
	gšputInv”‹r222NMTStus
;

194 
ušt8
 *
	gšputInv”‹r111NodeStus
;

195 
ušt8
 *
	gšputInv”‹r112NodeStus
;

196 
ušt8
 *
	gšputInv”‹r121NodeStus
;

197 
ušt8
 *
	gšputInv”‹r122NodeStus
;

198 
ušt8
 *
	gšputInv”‹r211NodeStus
;

199 
ušt8
 *
	gšputInv”‹r212NodeStus
;

200 
ušt8
 *
	gšputInv”‹r221NodeStus
;

201 
ušt8
 *
	gšputInv”‹r222NodeStus
;

204 
ušt16
 *
	gšputDriveModuË11Aùu®AngË
;

205 
ušt16
 *
	gšputDriveModuË12Aùu®AngË
;

206 
ušt16
 *
	gšputDriveModuË21Aùu®AngË
;

207 
ušt16
 *
	gšputDriveModuË22Aùu®AngË
;

210 
sšt32
 *
	gšputDriveModuË11PICÚŒŞKp1
;

211 
sšt32
 *
	gšputDriveModuË11PICÚŒŞKp2
;

212 
sšt32
 *
	gšputDriveModuË11PICÚŒŞKi
;

213 
sšt32
 *
	gšputDriveModuË12PICÚŒŞKp1
;

214 
sšt32
 *
	gšputDriveModuË12PICÚŒŞKp2
;

215 
sšt32
 *
	gšputDriveModuË12PICÚŒŞKi
;

216 
sšt32
 *
	gšputDriveModuË21PICÚŒŞKp1
;

217 
sšt32
 *
	gšputDriveModuË21PICÚŒŞKp2
;

218 
sšt32
 *
	gšputDriveModuË21PICÚŒŞKi
;

219 
sšt32
 *
	gšputDriveModuË22PICÚŒŞKp1
;

220 
sšt32
 *
	gšputDriveModuË22PICÚŒŞKp2
;

221 
sšt32
 *
	gšputDriveModuË22PICÚŒŞKi
;

224 
sšt32
 *
	gšputDriveModuË11AngËFaùA
;

225 
sšt32
 *
	gšputDriveModuË11AngËFaùB
;

226 
sšt32
 *
	gšputDriveModuË12AngËFaùA
;

227 
sšt32
 *
	gšputDriveModuË12AngËFaùB
;

228 
sšt32
 *
	gšputDriveModuË21AngËFaùA
;

229 
sšt32
 *
	gšputDriveModuË21AngËFaùB
;

230 
sšt32
 *
	gšputDriveModuË22AngËFaùA
;

231 
sšt32
 *
	gšputDriveModuË22AngËFaùB
;

236 
æßt32
 *
	gšputDriveSysS³edX
;

237 
æßt32
 *
	gšputDriveSysS³edY
;

238 
æßt32
 *
	gšputDriveSysOmegaZ
;

241 
æßt32
 *
	gšputDriveSysAngË
;

242 
æßt32
 *
	gšputDriveSysS³ed
;

245 
sšt32
 *
	gšputDriveSysOmega
;

246 
sšt32
 *
	gšputDriveSysAcûl
;

247 
sšt32
 *
	gšputDriveSysDeş
;

250 
ušt32
 *
	gšputDriveModuËMaxS³ed
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysData.h

1 #iâdeà
_DATENMEM_H


2 
	#_DATENMEM_H


	)

3 
	~"¡wty³s.h
"

5 
	#ModeIn™
 0x00

	)

6 
	#ModeRun
 0x01

	)

8 
	#KeyDriveSysS¹
 0x00000001

	)

9 
	#KeyDriveSysRe£t
 0x00000002

	)

10 
	#KeyDriveSysStİ
 0x00000004

	)

11 
	#KeyDriveSysEÇbË
 0x00000008

	)

12 
	#KeyDriveSysS¹Inv”‹rDi§bË
 0x00000010

	)

13 
	#KeyDriveSysTe¡Mode
 0x00000020

	)

14 
	#KeyDriveSysTwoDim’siÚDrive
 0x00000040

	)

15 
	#KeyDriveSysCrossDriveReq
 0x00000080

	)

16 
	#KeyDriveSysLªgDriveReq
 0x00000100

	)

17 
	#KeyDriveSysCrossDriveS‘
 0x00000200

	)

18 
	#KeyDriveSysDi§bËReq
 0x00000800

	)

19 
	#KeyDriveSysEÇbËReq
 0x00010000

	)

20 
	#KeyDriveSysIsStİ
 0x00020000

	)

21 
	#KeyDriveSysZ”oS‘
 0x00040000

	)

22 
	#KeyDriveSysMÙiÚReq
 0x00080000

	)

23 
	#KeyDriveSysNoB¿ke
 0x00100000

	)

24 
	#KeyDriveSysIsCrossSw™ch
 0x00200000

	)

27 
	#KeyDriveSysS‹”šgModeP¬k’
 0x00001000

	)

28 
	#KeyDriveSysS‹”šgModeVÜd”¿d
 0x00002000

	)

29 
	#KeyDriveSysS‹”šgModeHš‹¼ad
 0x00003000

	)

30 
	#KeyDriveSysS‹”šgModeAÎ¿d
 0x00004000

	)

31 
	#KeyDriveSysS‹”šgModeK»bsgªg
 0x00005000

	)

32 
	#KeyDriveSysS‹”šgModeRundgªg
 0x00006000

	)

34 
	#MÙÜCÚtÜlWÜdDriveEÇbË
 0x0001

	)

35 
	#MÙÜCÚtÜlWÜdCÚùÜEÇbË
 0x0002

	)

36 
	#MÙÜCÚtÜlWÜdB¿keOn
 0x0004

	)

37 
	#MÙÜCÚtÜlWÜdSaãStİAùive
 0x0040

	)

38 
	#MÙÜCÚŒŞWÜdRe£tFauÉ
 0x8000

	)

40 
	#MaxToggËCouÁ”
 1

	)

47 
æßt32
 
	mek
;

48 
æßt32
 
	myk
;

49 
æßt32
 
	myk_1
;

50 
æßt32
 
	mek_1
;

51 
æßt32
 
	mKp1
;

52 
æßt32
 
	mKp2
;

53 
æßt32
 
	mKi
;

54 
æßt32
 
	mOutLim™
;

55 }
	tTy³PICÚŒŞËrD©’
;

57 
Ty³PICÚŒŞËrD©’
 
PICÚŒŞËrD©’11
;

58 
Ty³PICÚŒŞËrD©’
 
PICÚŒŞËrD©’12
;

59 
Ty³PICÚŒŞËrD©’
 
PICÚŒŞËrD©’21
;

60 
Ty³PICÚŒŞËrD©’
 
PICÚŒŞËrD©’22
;

63 
ušt16
 
DriveSysTick
;

66 
æßt32
 
S³edLim™
;

69 
æßt32
 
AngËFaùÜ
[4][2];

72 
ušt8
 
Mode
;

75 
æßt32
 
Ts11
;

76 
æßt32
 
Ts12
;

77 
æßt32
 
Ts21
;

78 
æßt32
 
Ts22
;

82 
ušt8
 
DriveModuËAktiv
;

85 
ušt8
 
toggËB™
[4][2];

86 
ušt16
 
toggËCouÁ”
[4];

88 
æßt32
 
S‘V11
;

89 
æßt32
 
S‘V12
;

90 
æßt32
 
S‘V21
;

91 
æßt32
 
S‘V22
;

92 
æßt32
 
DriveModuË11S³ed
;

93 
æßt32
 
DriveModuË12S³ed
;

94 
æßt32
 
DriveModuË21S³ed
;

95 
æßt32
 
DriveModuË22S³ed
;

97 
æßt32
 
S‘Th‘a11
;

98 
æßt32
 
S‘Th‘a12
;

99 
æßt32
 
S‘Th‘a21
;

100 
æßt32
 
S‘Th‘a22
;

101 
æßt32
 
DriveModuË11AngË
;

102 
æßt32
 
DriveModuË12AngË
;

103 
æßt32
 
DriveModuË21AngË
;

104 
æßt32
 
DriveModuË22AngË
;

106 
æßt32
 
S³edV®ue11
;

107 
æßt32
 
S³edV®ue12
;

108 
æßt32
 
S³edV®ue21
;

109 
æßt32
 
S³edV®ue22
;

112 
æßt32
 
DriveModuË11Aùu®AngË
;

113 
æßt32
 
DriveModuË12Aùu®AngË
;

114 
æßt32
 
DriveModuË21Aùu®AngË
;

115 
æßt32
 
DriveModuË22Aùu®AngË
;

118 
æßt32
 
DriveModuË11OmegaM
;

119 
æßt32
 
DriveModuË12OmegaM
;

120 
æßt32
 
DriveModuË21OmegaM
;

121 
æßt32
 
DriveModuË22OmegaM
;

123 
æßt32
 
DriveModuË11Omega
;

124 
æßt32
 
DriveModuË12Omega
;

125 
æßt32
 
DriveModuË21Omega
;

126 
æßt32
 
DriveModuË22Omega
;

130 
æßt32
 
DriveSysOmega
;

131 
æßt32
 
DriveSysAcûl
;

132 
æßt32
 
DriveSysDeş
;

135 
æßt32
 
AngËS’sÜ11FaùA
;

136 
æßt32
 
AngËS’sÜ11FaùB
;

137 
æßt32
 
AngËS’sÜ12FaùA
;

138 
æßt32
 
AngËS’sÜ12FaùB
;

139 
æßt32
 
AngËS’sÜ21FaùA
;

140 
æßt32
 
AngËS’sÜ21FaùB
;

141 
æßt32
 
AngËS’sÜ22FaùA
;

142 
æßt32
 
AngËS’sÜ22FaùB
;

148 
ušt16
 *
ouutMÙÜ111CÚŒŞWÜd
;

149 
ušt16
 *
ouutMÙÜ112CÚŒŞWÜd
;

150 
ušt16
 *
ouutMÙÜ121CÚŒŞWÜd
;

151 
ušt16
 *
ouutMÙÜ122CÚŒŞWÜd
;

152 
ušt16
 *
ouutMÙÜ211CÚŒŞWÜd
;

153 
ušt16
 *
ouutMÙÜ212CÚŒŞWÜd
;

154 
ušt16
 *
ouutMÙÜ221CÚŒŞWÜd
;

155 
ušt16
 *
ouutMÙÜ222CÚŒŞWÜd
;

158 
sšt16
 *
ouutS‘MÙÜ111S³ed
;

159 
sšt16
 *
ouutS‘MÙÜ112S³ed
;

160 
sšt16
 *
ouutS‘MÙÜ121S³ed
;

161 
sšt16
 *
ouutS‘MÙÜ122S³ed
;

162 
sšt16
 *
ouutS‘MÙÜ211S³ed
;

163 
sšt16
 *
ouutS‘MÙÜ212S³ed
;

164 
sšt16
 *
ouutS‘MÙÜ221S³ed
;

165 
sšt16
 *
ouutS‘MÙÜ222S³ed
;

167 
ušt8
 *
ouutIOPÜt
;

170 
ušt16
 *
ouutInv”‹r111NMT
;

171 
ušt16
 *
ouutInv”‹r112NMT
;

172 
ušt16
 *
ouutInv”‹r121NMT
;

173 
ušt16
 *
ouutInv”‹r122NMT
;

174 
ušt16
 *
ouutInv”‹r211NMT
;

175 
ušt16
 *
ouutInv”‹r212NMT
;

176 
ušt16
 *
ouutInv”‹r221NMT
;

177 
ušt16
 *
ouutInv”‹r222NMT
;

180 
sšt32
 *
ouutDriveModuË11Aùu®AngË
;

181 
sšt32
 *
ouutDriveModuË12Aùu®AngË
;

182 
sšt32
 *
ouutDriveModuË21Aùu®AngË
;

183 
sšt32
 *
ouutDriveModuË22Aùu®AngË
;

186 
sšt32
 *
ouutDriveModuË11Omega
;

187 
sšt32
 *
ouutDriveModuË12Omega
;

188 
sšt32
 *
ouutDriveModuË21Omega
;

189 
sšt32
 *
ouutDriveModuË22Omega
;

192 
sšt32
 *
ouutDriveModuË11Aùu®S³ed
;

193 
sšt32
 *
ouutDriveModuË12Aùu®S³ed
;

194 
sšt32
 *
ouutDriveModuË21Aùu®S³ed
;

195 
sšt32
 *
ouutDriveModuË22Aùu®S³ed
;

198 
sšt8
 *
ouutRCToSÏveDrv›S³ed
;

204 
ušt32
 *
šputDriveSysCÚŒŞWÜd
;

207 
ušt8
 *
šputMÙÜ111StusBy‹
;

208 
ušt8
 *
šputMÙÜ112StusBy‹
;

209 
ušt8
 *
šputMÙÜ121StusBy‹
;

210 
ušt8
 *
šputMÙÜ122StusBy‹
;

211 
ušt8
 *
šputMÙÜ211StusBy‹
;

212 
ušt8
 *
šputMÙÜ212StusBy‹
;

213 
ušt8
 *
šputMÙÜ221StusBy‹
;

214 
ušt8
 *
šputMÙÜ222StusBy‹
;

217 
sšt32
 *
šputS‘DriveModuË11AngË
;

218 
sšt32
 *
šputS‘DriveModuË12AngË
;

219 
sšt32
 *
šputS‘DriveModuË21AngË
;

220 
sšt32
 *
šputS‘DriveModuË22AngË
;

223 
sšt16
 *
šputMÙÜ111Aùu®S³ed
;

224 
sšt16
 *
šputMÙÜ112Aùu®S³ed
;

225 
sšt16
 *
šputMÙÜ121Aùu®S³ed
;

226 
sšt16
 *
šputMÙÜ122Aùu®S³ed
;

227 
sšt16
 *
šputMÙÜ211Aùu®S³ed
;

228 
sšt16
 *
šputMÙÜ212Aùu®S³ed
;

229 
sšt16
 *
šputMÙÜ221Aùu®S³ed
;

230 
sšt16
 *
šputMÙÜ222Aùu®S³ed
;

233 
ušt8
 *
šputInv”‹r111NMTStus
;

234 
ušt8
 *
šputInv”‹r112NMTStus
;

235 
ušt8
 *
šputInv”‹r121NMTStus
;

236 
ušt8
 *
šputInv”‹r122NMTStus
;

237 
ušt8
 *
šputInv”‹r211NMTStus
;

238 
ušt8
 *
šputInv”‹r212NMTStus
;

239 
ušt8
 *
šputInv”‹r221NMTStus
;

240 
ušt8
 *
šputInv”‹r222NMTStus
;

243 
ušt8
 *
šputInv”‹r111NodeStus
;

244 
ušt8
 *
šputInv”‹r112NodeStus
;

245 
ušt8
 *
šputInv”‹r121NodeStus
;

246 
ušt8
 *
šputInv”‹r122NodeStus
;

247 
ušt8
 *
šputInv”‹r211NodeStus
;

248 
ušt8
 *
šputInv”‹r212NodeStus
;

249 
ušt8
 *
šputInv”‹r221NodeStus
;

250 
ušt8
 *
šputInv”‹r222NodeStus
;

253 
ušt16
 *
šputDriveModuË11Aùu®AngË
;

254 
ušt16
 *
šputDriveModuË12Aùu®AngË
;

255 
ušt16
 *
šputDriveModuË21Aùu®AngË
;

256 
ušt16
 *
šputDriveModuË22Aùu®AngË
;

259 
sšt32
 *
šputDriveModuË11PICÚŒŞKp1
;

260 
sšt32
 *
šputDriveModuË11PICÚŒŞKp2
;

261 
sšt32
 *
šputDriveModuË11PICÚŒŞKi
;

262 
sšt32
 *
šputDriveModuË12PICÚŒŞKp1
;

263 
sšt32
 *
šputDriveModuË12PICÚŒŞKp2
;

264 
sšt32
 *
šputDriveModuË12PICÚŒŞKi
;

265 
sšt32
 *
šputDriveModuË21PICÚŒŞKp1
;

266 
sšt32
 *
šputDriveModuË21PICÚŒŞKp2
;

267 
sšt32
 *
šputDriveModuË21PICÚŒŞKi
;

268 
sšt32
 *
šputDriveModuË22PICÚŒŞKp1
;

269 
sšt32
 *
šputDriveModuË22PICÚŒŞKp2
;

270 
sšt32
 *
šputDriveModuË22PICÚŒŞKi
;

273 
sšt32
 *
šputDriveModuË11AngËFaùA
;

274 
sšt32
 *
šputDriveModuË11AngËFaùB
;

275 
sšt32
 *
šputDriveModuË12AngËFaùA
;

276 
sšt32
 *
šputDriveModuË12AngËFaùB
;

277 
sšt32
 *
šputDriveModuË21AngËFaùA
;

278 
sšt32
 *
šputDriveModuË21AngËFaùB
;

279 
sšt32
 *
šputDriveModuË22AngËFaùA
;

280 
sšt32
 *
šputDriveModuË22AngËFaùB
;

284 
æßt32
 *
šputDriveSysS³edX
;

285 
æßt32
 *
šputDriveSysS³edY
;

286 
æßt32
 *
šputDriveSysOmegaZ
;

289 
æßt32
 *
šputDriveSysAngË
;

290 
æßt32
 *
šputDriveSysS³ed
;

293 
sšt32
 *
šputDriveSysOmega
;

294 
sšt32
 *
šputDriveSysAcûl
;

295 
sšt32
 *
šputDriveSysDeş
;

298 
ušt32
 *
šputDriveModuËMaxS³ed
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysManage.c

1 
	~"DriveSys.h
"

2 
	~"DriveSysD©a.h
"

4 
ušt16
 
	gLªg2Cross
;

12 
	$S‘DriveModuËVÜd”¿d
(){

13 
æßt32
 
r
;

14 
æßt32
 
Vx
;

15 
æßt32
 
tmp
;

16 
æßt32
 
R11
,
R12
,
R21
,
R22
;

18 
tmp
=*
šputDriveSysAngË
;

19 
Vx
=(*
šputDriveSysS³ed
)*
	`cos
(
tmp
);

20 if(
tmp
!=0.0){

21 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

22 
r
=
B
/
	`n
(
tmp
);

23 
R11
=
r
-
L
/2.0;

24 
R21
=
r
+
L
/2.0;

25 
S‘Th‘a12
=
	`©ª
(
B
/
R11
);

26 
S‘Th‘a22
=
	`©ª
(
B
/
R21
);

27 
S‘Th‘a11
=0.0;

28 
S‘Th‘a21
=0.0;

29 
R12
=
B
/
	`sš
(
S‘Th‘a12
);

30 
R22
=
B
/
	`sš
(
S‘Th‘a22
);

31 
S‘V11
=-
Vx
/
r
*
R11
;

32 
S‘V12
=
Vx
/
r
*
R12
;

33 
S‘V21
=
Vx
/
r
*
R21
;

34 
S‘V22
=-
Vx
/
r
*
R22
;

37 
r
=
L
/
	`n
(
tmp
);

38 
R21
=
r
-
B
/2.0;

39 
R22
=
r
+
B
/2.0;

40 
S‘Th‘a11
=
	`©ª
(
L
/
R21
);

41 
S‘Th‘a12
=
	`©ª
(
L
/
R22
);

42 
S‘Th‘a21
=0.0;

43 
S‘Th‘a22
=0.0;

44 
R11
=
L
/
	`sš
(
S‘Th‘a11
);

45 
R12
=
L
/
	`sš
(
S‘Th‘a12
);

46 
S‘V11
=
Vx
/
r
*
R11
;

47 
S‘V12
=
Vx
/
r
*
R12
;

48 
S‘V21
=
Vx
/
r
*
R21
;

49 
S‘V22
=
Vx
/
r
*
R22
;

54 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

55 
S‘V11
=-
Vx
;

56 
S‘V12
=
Vx
;

57 
S‘V21
=
Vx
;

58 
S‘V22
=-
Vx
;

61 
S‘V11
=
Vx
;

62 
S‘V12
=
Vx
;

63 
S‘V21
=
Vx
;

64 
S‘V22
=
Vx
;

66 
S‘Th‘a11
=0.0;

67 
S‘Th‘a12
=0.0;

68 
S‘Th‘a21
=0.0;

69 
S‘Th‘a22
=0.0;

71 
	}
}

79 
	$S‘DriveModuËHš‹¼ad
(){

80 
æßt32
 
r
;

81 
æßt32
 
Vx
;

82 
æßt32
 
tmp
;

83 
æßt32
 
R11
,
R12
,
R21
,
R22
;

85 
tmp
=*
šputDriveSysAngË
;

86 
Vx
=(*
šputDriveSysS³ed
)*
	`cos
(
tmp
);

87 if(
tmp
!=0.0){

88 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

89 
r
=
B
/
	`n
(
tmp
);

90 
R12
=
r
+
L
/2.0;

91 
R22
=
r
-
L
/2.0;

92 
S‘Th‘a12
=0.0;

93 
S‘Th‘a22
=0.0;

94 
S‘Th‘a11
=
	`©ª
(
B
/
R12
);

95 
S‘Th‘a21
=
	`©ª
(
B
/
R22
);

96 
R11
=
B
/
	`sš
(
S‘Th‘a11
);

97 
R21
=
B
/
	`sš
(
S‘Th‘a21
);

98 
S‘V11
=-
Vx
/
r
*
R11
;

99 
S‘V12
=
Vx
/
r
*
R12
;

100 
S‘V21
=
Vx
/
r
*
R21
;

101 
S‘V22
=-
Vx
/
r
*
R22
;

104 
r
=
L
/
	`n
(
tmp
);

105 
R11
=
r
+
B
/2.0;

106 
R12
=
r
-
B
/2.0;

107 
S‘Th‘a11
=0.0;

108 
S‘Th‘a12
=0.0;

109 
S‘Th‘a21
=
	`©ª
(
L
/
R11
);

110 
S‘Th‘a22
=
	`©ª
(
L
/
R12
);

111 
R21
=
L
/
	`sš
(
S‘Th‘a21
);

112 
R22
=
L
/
	`sš
(
S‘Th‘a22
);

113 
S‘V11
=
Vx
/
r
*
R11
;

114 
S‘V12
=
Vx
/
r
*
R12
;

115 
S‘V21
=
Vx
/
r
*
R21
;

116 
S‘V22
=
Vx
/
r
*
R22
;

121 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

122 
S‘V11
=-
Vx
;

123 
S‘V12
=
Vx
;

124 
S‘V21
=
Vx
;

125 
S‘V22
=-
Vx
;

128 
S‘V11
=
Vx
;

129 
S‘V12
=
Vx
;

130 
S‘V21
=
Vx
;

131 
S‘V22
=
Vx
;

133 
S‘Th‘a11
=0.0;

134 
S‘Th‘a12
=0.0;

135 
S‘Th‘a21
=0.0;

136 
S‘Th‘a22
=0.0;

138 
	}
}

145 
	$S‘DriveModuËAÎ¿d
(){

146 
æßt32
 
r
;

147 
æßt32
 
V
;

148 
æßt32
 
tmp
;

149 
æßt32
 
r1
,
r2
;

150 
æßt32
 
R1
,
R2
;

152 
tmp
=*
šputDriveSysAngË
;

153 
V
=*
šputDriveSysS³ed
;

154 if(
tmp
!=0.0){

155 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

156 
r
=
B
/2.0/
	`n
(
tmp
);

157 
r1
=
r
-
L
/2.0;

158 
r2
=
r
+
L
/2.0;

159 
S‘Th‘a12
=
	`©ª
(
B
/2.0/
r1
);

160 
S‘Th‘a22
=
	`©ª
(
B
/2.0/
r2
);

161 
S‘Th‘a11
=0.0-
S‘Th‘a12
;

162 
S‘Th‘a21
=0.0-
S‘Th‘a22
;

163 
R1
=
B
/2.0/
	`sš
(
S‘Th‘a12
);

164 
R2
=
B
/2.0/
	`sš
(
S‘Th‘a22
);

165 
S‘V11
=-
V
/
r
*
R1
;

166 
S‘V12
=
V
/
r
*
R1
;

167 
S‘V21
=
V
/
r
*
R2
;

168 
S‘V22
=-
V
/
r
*
R2
;

171 
r
=
L
/2.0/
	`n
(
tmp
);

172 
r1
=
r
-
B
/2.0;

173 
r2
=
r
+
B
/2.0;

174 
S‘Th‘a11
=
	`©ª
(
L
/2.0/
r1
);

175 
S‘Th‘a12
=
	`©ª
(
L
/2.0/
r2
);

176 
S‘Th‘a21
=0.0-
S‘Th‘a11
;

177 
S‘Th‘a22
=0.0-
S‘Th‘a12
;

178 
R1
=
L
/2.0/
	`sš
(
S‘Th‘a11
);

179 
R2
=
L
/2.0/
	`sš
(
S‘Th‘a12
);

180 
S‘V11
=
V
/
r
*
R1
;

181 
S‘V12
=
V
/
r
*
R2
;

182 
S‘V21
=
V
/
r
*
R1
;

183 
S‘V22
=
V
/
r
*
R2
;

187 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

188 
S‘V11
=-
V
;

189 
S‘V12
=
V
;

190 
S‘V21
=
V
;

191 
S‘V22
=-
V
;

194 
S‘V11
=
V
;

195 
S‘V12
=
V
;

196 
S‘V21
=
V
;

197 
S‘V22
=
V
;

199 
S‘Th‘a11
=0.0;

200 
S‘Th‘a12
=0.0;

201 
S‘Th‘a21
=0.0;

202 
S‘Th‘a22
=0.0;

205 
	}
}

212 
	$S‘DriveModuËK»bsgªg
(){

213 
S‘Th‘a11
=*
šputDriveSysAngË
;

214 
S‘Th‘a12
=*
šputDriveSysAngË
;

215 
S‘Th‘a21
=*
šputDriveSysAngË
;

216 
S‘Th‘a22
=*
šputDriveSysAngË
;

217 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

218 
S‘V11
=-*
šputDriveSysS³ed
;

219 
S‘V12
=*
šputDriveSysS³ed
;

220 
S‘V21
=*
šputDriveSysS³ed
;

221 
S‘V22
=-*
šputDriveSysS³ed
;

224 
S‘V11
=*
šputDriveSysS³ed
;

225 
S‘V12
=*
šputDriveSysS³ed
;

226 
S‘V21
=*
šputDriveSysS³ed
;

227 
S‘V22
=*
šputDriveSysS³ed
;

230 
	}
}

239 
	$S‘DriveModuËRundgªg
(){

240 
ušt8
 
æagS‘V
;

241 
æßt32
 
E¼AngË
;

242 
æßt32
 
MaxE¼AngË
,
MšE¼AngË
;

244 
MaxE¼AngË
=10.0*
G¿d2Rad
;

245 
MšE¼AngË
=-
MaxE¼AngË
;

246 
æagS‘V
=0x00;

247 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

248 
S‘Th‘a11
=
pi
/2.0-
	`asš
(
L
/
S
);

249 
S‘Th‘a12
=
	`asš
(
L
/
S
)-
pi
/2.0;

250 
S‘Th‘a21
=
	`asš
(
L
/
S
)-
pi
/2.0;

251 
S‘Th‘a22
=
pi
/2.0-
	`asš
(
L
/
S
);

252 
E¼AngË
=
S‘Th‘a11
-
DriveModuË11Aùu®AngË
;

253 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x01;

254 
E¼AngË
=
S‘Th‘a12
-
DriveModuË12Aùu®AngË
;

255 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x02;

256 
E¼AngË
=
S‘Th‘a21
-
DriveModuË21Aùu®AngË
;

257 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x04;

258 
E¼AngË
=
S‘Th‘a22
-
DriveModuË22Aùu®AngË
;

259 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x08;

260 if(
æagS‘V
==0x0f){

261 
S‘V11
=0.0-*
šputDriveSysS³ed
;

262 
S‘V12
=*
šputDriveSysS³ed
;

263 
S‘V21
=0.0-*
šputDriveSysS³ed
;

264 
S‘V22
=*
šputDriveSysS³ed
;

267 
S‘V11
=0.0;

268 
S‘V12
=0.0;

269 
S‘V21
=0.0;

270 
S‘V22
=0.0;

274 
S‘Th‘a11
=-
	`asš
(
L
/
S
);

275 
S‘Th‘a12
=
	`asš
(
L
/
S
);

276 
S‘Th‘a21
=
	`asš
(
L
/
S
);

277 
S‘Th‘a22
=-
	`asš
(
L
/
S
);

278 
E¼AngË
=
S‘Th‘a11
-
DriveModuË11Aùu®AngË
;

279 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x01;

280 
E¼AngË
=
S‘Th‘a12
-
DriveModuË12Aùu®AngË
;

281 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x02;

282 
E¼AngË
=
S‘Th‘a21
-
DriveModuË21Aùu®AngË
;

283 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x04;

284 
E¼AngË
=
S‘Th‘a22
-
DriveModuË22Aùu®AngË
;

285 if((
E¼AngË
<
MaxE¼AngË
)&&(E¼AngË>
MšE¼AngË
)è
æagS‘V
+=0x08;

286 if(
æagS‘V
==0x0f){

287 
S‘V11
=*
šputDriveSysS³ed
;

288 
S‘V12
=0.0-*
šputDriveSysS³ed
;

289 
S‘V21
=*
šputDriveSysS³ed
;

290 
S‘V22
=0.0-*
šputDriveSysS³ed
;

293 
S‘V11
=0.0;

294 
S‘V12
=0.0;

295 
S‘V21
=0.0;

296 
S‘V22
=0.0;

299 
	}
}

307 
	$S‘DriveModuËP¬k’
(){

308 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

309 
S‘Th‘a11
=-20.0*
G¿d2Rad
;

310 
S‘Th‘a12
=20.0*
G¿d2Rad
;

311 
S‘Th‘a21
=20.0*
G¿d2Rad
;

312 
S‘Th‘a22
=-20.0*
G¿d2Rad
;

315 
S‘Th‘a11
=20.0*
G¿d2Rad
;

316 
S‘Th‘a12
=-20.0*
G¿d2Rad
;

317 
S‘Th‘a21
=-20.0*
G¿d2Rad
;

318 
S‘Th‘a22
=20.0*
G¿d2Rad
;

320 
S‘V11
=0.0;

321 
S‘V12
=0.0;

322 
S‘V21
=0.0;

323 
S‘V22
=0.0;

324 
	}
}

333 
	$S‘S‹”šg
(){

334 
ušt32
 
¡“ršgWÜd_Tmp
;

335 
ušt32
 
¡“ršgWÜd_Tmp_OldV®ue
;

340 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTwoDim’siÚDrive
){

341 if((*
šputDriveSysS³edX
!=0.0)||(*
šputDriveSysS³edY
!=0.0)||(*
šputDriveSysOmegaZ
!=0.0)è
DriveSysTick
=5;

387 if(*
šputDriveSysS³ed
!=0.0è
DriveSysTick
=17;

388 if(*
šputDriveSysAngË
!=0.0è
DriveSysTick
=50;

389 
¡“ršgWÜd_Tmp
=*
šputDriveSysCÚŒŞWÜd
&0x0000f000;

392 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeVÜd”¿d
è
	`S‘DriveModuËVÜd”¿d
();

394 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeHš‹¼ad
è
	`S‘DriveModuËHš‹¼ad
();

396 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeAÎ¿d
è
	`S‘DriveModuËAÎ¿d
();

398 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeK»bsgªg
è
	`S‘DriveModuËK»bsgªg
();

400 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeRundgªg
è
	`S‘DriveModuËRundgªg
();

402 if(
¡“ršgWÜd_Tmp
==
KeyDriveSysS‹”šgModeP¬k’
è
	`S‘DriveModuËP¬k’
();

404 if(
¡“ršgWÜd_Tmp
!=
¡“ršgWÜd_Tmp_OldV®ue
è
DriveSysTick
=40;

405 
¡“ršgWÜd_Tmp_OldV®ue
=
¡“ršgWÜd_Tmp
;

408 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysZ”oS‘
){

409 
DriveSysTick
=10;

410 
S‘Th‘a11
=0.0;

411 
S‘Th‘a12
=0.0;

412 
S‘Th‘a21
=0.0;

413 
S‘Th‘a22
=0.0;

416 
	}
}

424 
	$In™Inv”‹r
(){

425 *
ouutMÙÜ111CÚŒŞWÜd
=0x0000;

426 *
ouutMÙÜ112CÚŒŞWÜd
=0x0000;

427 *
ouutMÙÜ121CÚŒŞWÜd
=0x0000;

428 *
ouutMÙÜ122CÚŒŞWÜd
=0x0000;

429 *
ouutMÙÜ211CÚŒŞWÜd
=0x0000;

430 *
ouutMÙÜ212CÚŒŞWÜd
=0x0000;

431 *
ouutMÙÜ221CÚŒŞWÜd
=0x0000;

432 *
ouutMÙÜ222CÚŒŞWÜd
=0x0000;

433 
	}
}

440 
	$S¹Inv”‹r
(){

442 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysEÇbË
){

443 ià(*
šputInv”‹r111NodeStus
==
NodeStusPRE_OPERATIONAL
){

444 *
ouutInv”‹r111NMT
=
NODE_START
;

445 *
ouutInv”‹r111NMT
=(*outputInverter111NMT<<8)+0x0001;

447 ià(*
šputInv”‹r112NodeStus
==
NodeStusPRE_OPERATIONAL
){

448 *
ouutInv”‹r112NMT
=
NODE_START
;

449 *
ouutInv”‹r112NMT
=(*outputInverter112NMT<<8)+0x0001;

451 ià(*
šputInv”‹r121NodeStus
==
NodeStusPRE_OPERATIONAL
){

452 *
ouutInv”‹r121NMT
=
NODE_START
;

453 *
ouutInv”‹r121NMT
=(*outputInverter121NMT<<8)+0x0001;

455 ià(*
šputInv”‹r122NodeStus
==
NodeStusPRE_OPERATIONAL
){

456 *
ouutInv”‹r122NMT
=
NODE_START
;

457 *
ouutInv”‹r122NMT
=(*outputInverter122NMT<<8)+0x0001;

459 ià(*
šputInv”‹r211NodeStus
==
NodeStusPRE_OPERATIONAL
){

460 *
ouutInv”‹r211NMT
=
NODE_START
;

461 *
ouutInv”‹r211NMT
=(*outputInverter211NMT<<8)+0x0001;

463 ià(*
šputInv”‹r212NodeStus
==
NodeStusPRE_OPERATIONAL
){

464 *
ouutInv”‹r212NMT
=
NODE_START
;

465 *
ouutInv”‹r212NMT
=(*outputInverter212NMT<<8)+0x0001;

467 ià(*
šputInv”‹r221NodeStus
==
NodeStusPRE_OPERATIONAL
){

468 *
ouutInv”‹r221NMT
=
NODE_START
;

469 *
ouutInv”‹r221NMT
=(*outputInverter221NMT<<8)+0x0001;

471 ià(*
šputInv”‹r222NodeStus
==
NodeStusPRE_OPERATIONAL
){

472 *
ouutInv”‹r222NMT
=
NODE_START
;

473 *
ouutInv”‹r222NMT
=(*outputInverter222NMT<<8)+0x0001;

476 
	}
}

484 
	$Re£tInv”‹r
(){

485 
ušt16
 
CÚŒŞWÜdTmp
;

486 
CÚŒŞWÜdTmp
=0x0000;

487 *
ouutMÙÜ111CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

488 *
ouutMÙÜ112CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

489 *
ouutMÙÜ121CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

490 *
ouutMÙÜ122CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

491 *
ouutMÙÜ211CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

492 *
ouutMÙÜ212CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

493 *
ouutMÙÜ221CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

494 *
ouutMÙÜ222CÚŒŞWÜd
=
CÚŒŞWÜdTmp
;

495 
	}
}

503 
	$DriveSysHªdË
(){

504 
ušt32
 
timeSmpDriveSysEÇbË
;

507 if((*
šputMÙÜ111StusBy‹
&0x01)==0&&(*
šputMÙÜ112StusBy‹
&0x01)==0&&(*
šputMÙÜ121StusBy‹
&0x01)==0&&(*
šputMÙÜ122StusBy‹
&0x01)==0){

508 if((*
šputMÙÜ211StusBy‹
&0x01)==0&&(*
šputMÙÜ212StusBy‹
&0x01)==0&&(*
šputMÙÜ221StusBy‹
&0x01)==0&&(*
šputMÙÜ222StusBy‹
&0x01)==0){

509 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveReq
){

510 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysCrossDriveReq
;

511 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
)==0){

512 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0){

513 
Lªg2Cross
=1;

514 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysIsCrossSw™ch
;

515 
S‘Th‘a11
=
pi
/2.0;

516 
S‘Th‘a22
=
pi
/2.0;

517 
DriveSysTick
=50;

521 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysLªgDriveReq
){

522 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysCrossDriveS‘
){

523 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysLªgDriveReq
;

524 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysIsCrossSw™ch
)==0){

525 
Lªg2Cross
=2;

526 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysIsCrossSw™ch
;

527 
S‘Th‘a11
=-
pi
/2.0;

528 
S‘Th‘a22
=-
pi
/2.0;

529 
DriveSysTick
=50;

537 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysDi§bËReq
){

538 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysDi§bËReq
;

539 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysStİ
;

542 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysEÇbËReq
){

543 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysEÇbËReq
;

544 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysStİ
;

546 
timeSmpDriveSysEÇbË
=
	`x_sys_g‘_time_ms
();

549 if(
Mode
==
ModeRun
){

550 if(((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysStİ
)==0)&&((*šputDriveSysCÚŒŞWÜd&
KeyDriveSysEÇbË
)==0)){

551 if(
	`x_sys_g‘_time_ms
()-
timeSmpDriveSysEÇbË
>100)

552 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysEÇbË
;

554 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysStİ
è*šputDriveSysCÚŒŞWÜd&=~
KeyDriveSysEÇbË
;

557 if((*
ouutDriveModuË11Aùu®S³ed
==0)&&(*
ouutDriveModuË12Aùu®S³ed
==0)&&(*
ouutDriveModuË21Aùu®S³ed
==0)&&(*
ouutDriveModuË22Aùu®S³ed
==0))

558 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysIsStİ
;

560 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysIsStİ
;

563 *
ouutDriveModuË11Aùu®S³ed
=(
sšt32
)(
S³edV®ue11
*1000.0);

564 *
ouutDriveModuË12Aùu®S³ed
=(
sšt32
)(
S³edV®ue12
*1000.0);

565 *
ouutDriveModuË21Aùu®S³ed
=(
sšt32
)(
S³edV®ue21
*1000.0);

566 *
ouutDriveModuË22Aùu®S³ed
=(
sšt32
)(
S³edV®ue22
*1000.0);

569 *
ouutDriveModuË11Omega
=(
sšt32
)(
DriveModuË11Omega
*1000.0);

570 *
ouutDriveModuË12Omega
=(
sšt32
)(
DriveModuË12Omega
*1000.0);

571 *
ouutDriveModuË21Omega
=(
sšt32
)(
DriveModuË21Omega
*1000.0);

572 *
ouutDriveModuË22Omega
=(
sšt32
)(
DriveModuË22Omega
*1000.0);

575 *
ouutDriveModuË11Aùu®AngË
=(
sšt32
)(
DriveModuË11Aùu®AngË
*
Rad2G¿d
);

576 *
ouutDriveModuË12Aùu®AngË
=(
sšt32
)(
DriveModuË12Aùu®AngË
*
Rad2G¿d
);

577 *
ouutDriveModuË21Aùu®AngË
=(
sšt32
)(
DriveModuË21Aùu®AngË
*
Rad2G¿d
);

578 *
ouutDriveModuË22Aùu®AngË
=(
sšt32
)(
DriveModuË22Aùu®AngË
*
Rad2G¿d
);

581 if((*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysTe¡Mode
)==0){

582 *
šputS‘DriveModuË11AngË
=(
sšt32
)(
DriveModuË11AngË
/
G¿d2Rad
);

583 *
šputS‘DriveModuË12AngË
=(
sšt32
)(
DriveModuË12AngË
/
G¿d2Rad
);

584 *
šputS‘DriveModuË21AngË
=(
sšt32
)(
DriveModuË21AngË
/
G¿d2Rad
);

585 *
šputS‘DriveModuË22AngË
=(
sšt32
)(
DriveModuË22AngË
/
G¿d2Rad
);

588 *
ouutRCToSÏveDrv›S³ed
=(
sšt8
)(
S³edV®ue11
*60.0);

589 
	}
}

597 
	$P¬am‘”Upd©e
(){

599 
DriveSysOmega
=(
æßt32
)(*
šputDriveSysOmega
)*0.001;

600 
DriveSysAcûl
=(
æßt32
)(*
šputDriveSysAcûl
)*0.001;

601 
DriveSysDeş
=(
æßt32
)(*
šputDriveSysDeş
)*0.001;

602 
S³edLim™
=(
æßt32
)(*
šputDriveModuËMaxS³ed
)/
FaùV2½m
;

603 
PICÚŒŞËrD©’11
.
Kp1
=(
æßt32
)(*
šputDriveModuË11PICÚŒŞKp1
)*0.001;

604 
PICÚŒŞËrD©’11
.
Kp2
=(
æßt32
)(*
šputDriveModuË11PICÚŒŞKp2
)*0.001;

605 
PICÚŒŞËrD©’11
.
Ki
=(
æßt32
)(*
šputDriveModuË11PICÚŒŞKi
)*0.001;

606 
PICÚŒŞËrD©’12
.
Kp1
=(
æßt32
)(*
šputDriveModuË12PICÚŒŞKp1
)*0.001;

607 
PICÚŒŞËrD©’12
.
Kp2
=(
æßt32
)(*
šputDriveModuË12PICÚŒŞKp2
)*0.001;

608 
PICÚŒŞËrD©’12
.
Ki
=(
æßt32
)(*
šputDriveModuË12PICÚŒŞKi
)*0.001;

609 
PICÚŒŞËrD©’21
.
Kp1
=(
æßt32
)(*
šputDriveModuË21PICÚŒŞKp1
)*0.001;

610 
PICÚŒŞËrD©’21
.
Kp2
=(
æßt32
)(*
šputDriveModuË21PICÚŒŞKp2
)*0.001;

611 
PICÚŒŞËrD©’21
.
Ki
=(
æßt32
)(*
šputDriveModuË21PICÚŒŞKi
)*0.001;

612 
PICÚŒŞËrD©’22
.
Kp1
=(
æßt32
)(*
šputDriveModuË22PICÚŒŞKp1
)*0.001;

613 
PICÚŒŞËrD©’22
.
Kp2
=(
æßt32
)(*
šputDriveModuË22PICÚŒŞKp2
)*0.001;

614 
PICÚŒŞËrD©’22
.
Ki
=(
æßt32
)(*
šputDriveModuË22PICÚŒŞKi
)*0.001;

615 
AngËS’sÜ11FaùA
=(
æßt32
)(*
šputDriveModuË11AngËFaùA
)*0.001;

616 
AngËS’sÜ11FaùB
=(
æßt32
)(*
šputDriveModuË11AngËFaùB
)*0.001;

617 
AngËS’sÜ12FaùA
=(
æßt32
)(*
šputDriveModuË12AngËFaùA
)*0.001;

618 
AngËS’sÜ12FaùB
=(
æßt32
)(*
šputDriveModuË12AngËFaùB
)*0.001;

619 
AngËS’sÜ21FaùA
=(
æßt32
)(*
šputDriveModuË21AngËFaùA
)*0.001;

620 
AngËS’sÜ21FaùB
=(
æßt32
)(*
šputDriveModuË21AngËFaùB
)*0.001;

621 
AngËS’sÜ22FaùA
=(
æßt32
)(*
šputDriveModuË22AngËFaùA
)*0.001;

622 
AngËS’sÜ22FaùB
=(
æßt32
)(*
šputDriveModuË22AngËFaùB
)*0.001;

623 
	}
}

630 
	$Task_DriveSysMªage
(* 
¬gv
){

631 
¬gv
=argv;

632 
ušt16
 
Upd©eFÏg
;

634 
Mode
=
ModeIn™
;

635 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysS¹
;

636 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysRe£t
;

637 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysStİ
;

638 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysEÇbË
;

640 
Ts11
=0.02*1.0;

641 
Ts12
=0.02*1.0;

642 
Ts21
=0.02*1.0;

643 
Ts22
=0.02*1.0;

644 
Lªg2Cross
=0;

645 
TRUE
){

646 
Mode
){

648 
ModeIn™
:

650 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysS¹
){

651 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysS¹
;

652 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysStİ
;

653 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysEÇbË
;

654 
Mode
=
ModeRun
;

658 
ModeRun
:

659 
	`S¹Inv”‹r
();

661 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysRe£t
){

662 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysRe£t
;

663 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysEÇbË
;

664 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysStİ
;

665 
	`Re£tInv”‹r
();

666 
Mode
=
ModeIn™
;

672 if(
Upd©eFÏg
>=50){

673 
	`P¬am‘”Upd©e
();

674 
Upd©eFÏg
=0;

676 
	`DriveSysHªdË
();

677 
Upd©eFÏg
++;

680 if(
Lªg2Cross
==1){

681 if(
DriveSysTick
==0){

682 
DriveSysTick
=50;

683 
Lªg2Cross
=3;

684 
S‘Th‘a12
=-
pi
/2.0;

685 
S‘Th‘a21
=-
pi
/2.0;

688 if(
Lªg2Cross
==3){

689 if(
DriveSysTick
==0){

690 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysStİ
;

691 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysEÇbË
;

692 
Lªg2Cross
=5;

693 
DriveSysTick
=10;

696 if(
Lªg2Cross
==2){

697 if(
DriveSysTick
==0){

698 
S‘Th‘a12
=
pi
/2.0;

699 
S‘Th‘a21
=
pi
/2.0;

700 
DriveSysTick
=50;

701 
Lªg2Cross
=4;

704 if(
Lªg2Cross
==4){

705 if(
DriveSysTick
==0){

706 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysStİ
;

707 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysEÇbË
;

708 
Lªg2Cross
=6;

709 
DriveSysTick
=10;

712 if(
Lªg2Cross
==5){

713 *
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysCrossDriveS‘
;

714 
S‘Th‘a11
=0.0;

715 
DriveModuË11AngË
=0.0;

716 
DriveModuË11Aùu®AngË
=0.0;

717 
S‘Th‘a12
=0.0;

718 
DriveModuË12AngË
=0.0;

719 
DriveModuË12Aùu®AngË
=0.0;

720 
S‘Th‘a21
=0.0;

721 
DriveModuË21AngË
=0.0;

722 
DriveModuË21Aùu®AngË
=0.0;

723 
S‘Th‘a22
=0.0;

724 
DriveModuË22AngË
=0.0;

725 
DriveModuË22Aùu®AngË
=0.0;

726 if(
DriveSysTick
==0) {

727 
Lªg2Cross
=0;

728 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysIsCrossSw™ch
;

729 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysStİ
;

732 if(
Lªg2Cross
==6){

733 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysCrossDriveS‘
;

734 
S‘Th‘a11
=0.0;

735 
DriveModuË11AngË
=0.0;

736 
DriveModuË11Aùu®AngË
=0.0;

737 
S‘Th‘a12
=0.0;

738 
DriveModuË12AngË
=0.0;

739 
DriveModuË12Aùu®AngË
=0.0;

740 
S‘Th‘a21
=0.0;

741 
DriveModuË21AngË
=0.0;

742 
DriveModuË21Aùu®AngË
=0.0;

743 
S‘Th‘a22
=0.0;

744 
DriveModuË22AngË
=0.0;

745 
DriveModuË22Aùu®AngË
=0.0;

746 if(
DriveSysTick
==0) {

747 
Lªg2Cross
=0;

748 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysIsCrossSw™ch
;

749 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysStİ
;

753 if(
DriveSysTick
==0){

754 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysMÙiÚReq
;

757 
DriveSysTick
--;

758 if(
Lªg2Cross
<5è*
šputDriveSysCÚŒŞWÜd
|=
KeyDriveSysMÙiÚReq
;

759 *
šputDriveSysCÚŒŞWÜd
&=~
KeyDriveSysMÙiÚReq
;

762 if(*
šputDriveSysCÚŒŞWÜd
&
KeyDriveSysEÇbË
) {

763 if(
Lªg2Cross
==0è
	`S‘S‹”šg
();

765 
	`x_os_wa™_fÜ_ev’ts
();

767 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_Manage.c

1 
	~"“p_Mªage.h
"

2 
	~"¡wty³s.h
"

3 
	~"x_“p.h
"

5 
sšt16
 
	$EEPD©aStÜe
(
ušt32
 
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
){

6 
i
;

7 
ušt8
 
D©a
[
NBy‹
];

9 
i
=0;i<
NBy‹
;i++){

10 
D©a
[
i
]=(
ušt8
)((
V®ue
>>8*i)&0xff);

12  
	`x_“p_wr™e
(
EEPAddr
,
NBy‹
,&
D©a
[0]);

13 
	}
}

15 
sšt16
 
	$EEPD©aLßd
(
ušt32
 *
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
){

16 
i
;

17 
ušt8
 
D©a
[
NBy‹
];

18 
ušt32
 
tmp
=0;

19 
ušt16
 
”rcode
;

21 
”rcode
=
	`x_“p_»ad
 (
EEPAddr
,
NBy‹
,&
D©a
[0]);

22 
i
=0;i<
NBy‹
;i++){

23 
tmp
ñmp+((
ušt32
)
D©a
[
NBy‹
-1-
i
]<<8*(NByte-1-i));

25 *
V®ue
=
tmp
;

26  
”rcode
;

27 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_Manage.h

1 #iâdeà
_EEP_MANAGE_H


2 
	#_EEP_MANAGE_H


	)

4 
	~"¡wty³s.h
"

5 
	~"x_sys.h
"

7 
sšt16
 
EEPD©aStÜe
(
ušt32
 
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
);

8 
sšt16
 
EEPD©aLßd
(
ušt32
 *
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_memmap.h

1 #iâdeà
_EEP_MEMMAP_H


2 
	#_EEP_MEMMAP_H


	)

5 
	#CANO³nEEPS¹Addr
 8

	)

6 
	#CANO³nEEPMemSize
 2048

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIO.c

1 
	~"MuÉiIO.h
"

3 
	#S’sÜReã»nûVŞt
 10000

	)

7 
ušt32
 *
	gIOPÜtCÚŒŞWÜd
;

8 
ušt32
 *
	gIOPÜtIÅutA¼ay
[
NumOfIÅut
];

9 
ušt32
 *
	gIOPÜtOuutA¼ay
[
NumOfOuut
];

11 
	#IÅutCfgNoCfg
 0x0000

	)

12 
	#IÅutCfgDig™®
 0x0001

	)

13 
	#IÅutCfgVŞge5V
 0x0002

	)

14 
	#IÅutCfgVŞge10V
 0x0003

	)

15 
	#IÅutCfgVŞge40V
 0x0004

	)

16 
	#IÅutCfgCu¼’t
 0x0005

	)

17 
	#IÅutCfgEv’tRisšg
 0x0006

	)

18 
	#IÅutCfgEv’tF®lšg
 0x0007

	)

19 
	#IÅutCfgEv’tBÙh
 0x0008

	)

20 
	#IÅutCfgF»quez
 0x0009

	)

21 
	#IÅutCfgInüem’l
 0x000a

	)

23 
	#OuutCfgNoCfg
 0x0000

	)

24 
	#OuutCfgDig™®
 0x0001

	)

25 
	#OuutCfgPWM
 0x0002

	)

26 
	#OuutCfgCu¼’t
 0x0003

	)

34 
	$MuÉiIOMašBßrdIn™
(){

35 
ušt16
 
iPÜt
;

36 
	`x_sys_£t_£nsÜ_suµly
(
X_SYS_SENSOR_SUPPLY_01
, 
S’sÜReã»nûVŞt
);

38 
iPÜt
=0;

39 
iPÜt
<15){

40 
šputCÚfig
[
iPÜt
][1]){

41 
IÅutCfgDig™®
:

42 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0],
X_IN_TYPE_DIGITAL
,0,(
X_IN_CIRCUIT_ACTIVE_HIGH
|
X_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

43 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

45 
IÅutCfgVŞge10V
:

46 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0], 
X_IN_TYPE_VOLTAGE_10V
, 
šputF‹rCfg
[iPÜt], 0u, 0u, 
NULL
);

47 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgVŞge10V
<<16;

49 
IÅutCfgCu¼’t
:

50 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0], 
X_IN_TYPE_CURRENT
, 0u, 0u, 0u, 
NULL
);

51 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgCu¼’t
<<16;

53 
IÅutCfgNoCfg
:

54 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

57 
iPÜt
++;

59 
iPÜt
=0;

61 
iPÜt
<8){

62 
ouutCÚfig
[
iPÜt
][1]){

63 
OuutCfgDig™®
:

64 
	`x_out_š™
(
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_DIGITAL
, 0u, 0u, 
NULL
);

65 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

67 
OuutCfgPWM
:

68 
	`x_out_š™
(
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_PWM
, 10000u, 0u, 
NULL
);

69 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgPWM
<<16;

71 
OuutCfgNoCfg
:

72 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

75 
iPÜt
++;

77 
	}
}

84 
	$MuÉiIOEB02In™
(){

85 
ušt16
 
iPÜt
;

87 
iPÜt
=15;

88 
iPÜt
<27){

89 if(
šputCÚfig
[
iPÜt
][1]!=
IÅutCfgNoCfg
){

90 
	`x02_š_š™
(
X_EXPBOARD_SLOT_A
,
šputCÚfig
[
iPÜt
][0],
X02_IN_TYPE_DIGITAL
,0,(
X02_IN_CIRCUIT_ACTIVE_HIGH
|
X02_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

91 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

94 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

95 
iPÜt
++;

97 
iPÜt
<39){

98 if(
šputCÚfig
[
iPÜt
][1]!=
IÅutCfgNoCfg
){

99 
	`x02_š_š™
(
X_EXPBOARD_SLOT_B
,
šputCÚfig
[
iPÜt
][0],
X02_IN_TYPE_DIGITAL
,0,(
X02_IN_CIRCUIT_ACTIVE_HIGH
|
X02_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

100 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

103 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

104 
iPÜt
++;

107 
iPÜt
=8;

108 if(
ouutCÚfig
[
iPÜt
][1]!=
OuutCfgNoCfg
){

109 
	`x02_out_š™
(
X_EXPBOARD_SLOT_A
,
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_DIGITAL
, 0u,0u,
NULL
);

110 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

113 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

115 
iPÜt
=9;

116 if(
ouutCÚfig
[
iPÜt
][1]!=
OuutCfgNoCfg
){

117 
	`x02_out_š™
(
X_EXPBOARD_SLOT_B
,
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_DIGITAL
, 0u,0u,
NULL
);

118 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

121 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

123 
	}
}

131 
	$MuÉiIOEB05In™
(){

132 
ušt16
 
iPÜt
;

133 
iPÜt
=39;

134 
	`x05_out_£t_»Ïy
 (
X_EXPBOARD_SLOT_C
, 
X05_OUT_RELAY_01
, 
X05_ON
);

136 
iPÜt
<
NumOfIÅut
){

137 if(
šputCÚfig
[
iPÜt
][1]!=
IÅutCfgNoCfg
){

138 
	`x05_š_š™
(
X_EXPBOARD_SLOT_C
,
šputCÚfig
[
iPÜt
][0],
X05_IN_TYPE_DIGITAL
,0,(
X05_IN_CIRCUIT_ACTIVE_HIGH
|
X05_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

139 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

142 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

143 
iPÜt
++;

146 
iPÜt
=10;

147 
iPÜt
<
NumOfOuut
){

148 if(
ouutCÚfig
[
iPÜt
][1]!=
OuutCfgNoCfg
){

149 
	`x05_out_š™
(
X_EXPBOARD_SLOT_C
,
ouutCÚfig
[
iPÜt
][0],
X05_OUT_TYPE_DIGITAL
,0,0,
NULL
);

150 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

153 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

154 
iPÜt
++;

156 
	}
}

164 
sšt16
 
	$m—nF‹r
(
ušt16
 
šputNum
, 
sšt32
 
V®ue
, sšt32 *
ouutV®ue
){

165 if(
šputNum
>=16)  -1;

166 *
ouutV®ue
=(
šputF‹rCfg
[
šputNum
]+
V®ue
)/2;

167 
šputF‹rCfg
[
šputNum
]=*
ouutV®ue
;

169 
	}
}

177 
	$Task_IOPÜt
(* 
¬gv
){

178 
ušt16
 
æag
;

179 
ušt16
 
iPÜt
;

180 
sšt32
 
DIV®ue
;

181 
sšt32
 
TmpV®ue
;

182 
¬gv
=argv;

183 
ušt16
 
tmpCFGTy³
;

185 
æag
=0;

187 
TRUE
){

188 if(
æag
==0){

189 
iPÜt
=0;iPort<15;iPort++){

190 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

191 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

192 
	`x_š_g‘_v®ue
(
šputCÚfig
[
iPÜt
][0],&
DIV®ue
);

193 
	`m—nF‹r
(
iPÜt
, 
DIV®ue
, &
TmpV®ue
);

194 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

195 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
TmpV®ue
;

197 
iPÜt
=0;iPort<8;iPort++){

198 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

199 
tmpCFGTy³
=
ouutCÚfig
[
iPÜt
][1];

200 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

201 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

202 
	`x_out_£t_v®ue
 (
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

205 if(
æag
==1){

206 
iPÜt
=15;iPort<27;iPort++){

207 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

208 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

209 
	`x02_š_g‘_v®ue
(
X_EXPBOARD_SLOT_A
, 
šputCÚfig
[
iPÜt
][0],&
DIV®ue
);

210 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

211 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
DIV®ue
;

213 
iPÜt
=8;

214 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

215 
tmpCFGTy³
=
ouutCÚfig
[
iPÜt
][1];

216 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

217 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

218 
	`x02_out_£t_v®ue
 (
X_EXPBOARD_SLOT_A
, 
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

220 if(
æag
==2){

221 
iPÜt
=27;iPort<39;iPort++){

222 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

223 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

224 
	`x02_š_g‘_v®ue
(
X_EXPBOARD_SLOT_B
, 
šputCÚfig
[
iPÜt
][0] ,&
DIV®ue
);

225 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

226 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
DIV®ue
;

228 
iPÜt
=9;

229 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

230 
tmpCFGTy³
=
ouutCÚfig
[
iPÜt
][1];

231 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

232 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

233 
	`x02_out_£t_v®ue
 (
X_EXPBOARD_SLOT_B
, 
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

235 if(
æag
==3){

236 
iPÜt
=39;iPÜt<
NumOfIÅut
;iPort++){

237 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

238 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

239 
	`x05_š_g‘_v®ue
(
X_EXPBOARD_SLOT_C
, 
šputCÚfig
[
iPÜt
][0] ,&
DIV®ue
);

240 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

241 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
DIV®ue
;

243 
iPÜt
=10;iPÜt<
NumOfOuut
;iPort++){

244 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

245 
tmpCFGTy³
=
ouutCÚfig
[
iPÜt
][1];

246 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

247 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

248 
	`x05_out_£t_v®ue
 (
X_EXPBOARD_SLOT_C
, 
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

251 
æag
++;

252 if(
æag
==4) flag=0;

254 
	`x_os_wa™_fÜ_ev’ts
();

256 
	}
}

264 
	$In™MuÉiIO
(){

265 
ušt8
 
i
;

266 
ušt8
 
S¹Subšdex
;

267 
IOPÜtCÚŒŞWÜd
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexCÚŒŞWÜd
,
Ty³U32
,0); *IOPortControlWord=0x0000;

270 
S¹Subšdex
=
SubšdexIÅut01
;

271 
i
=0;i<
NumOfIÅut
;i++){

272 
IOPÜtIÅutA¼ay
[
i
]=
	`BšdODMem
(
IOPÜtS¹Index
,
S¹Subšdex
+i,
Ty³U32
,0);

273 *
IOPÜtIÅutA¼ay
[
i
]=0x00000000;

277 
S¹Subšdex
=
SubšdexOuut01
;

278 
i
=0;i<
NumOfOuut
;i++){

279 
IOPÜtOuutA¼ay
[
i
]=
	`BšdODMem
(
IOPÜtS¹Index
,
S¹Subšdex
+i,
Ty³U32
,0);

280 *
IOPÜtOuutA¼ay
[
i
]=0x00000000;

283 
	`MuÉiIOMašBßrdIn™
();

284 
	`MuÉiIOEB02In™
();

285 
	`MuÉiIOEB05In™
();

286 
	`x_os_š¡®l_sk
(
PrioIOPÜt
, 2, 1, 
Task_IOPÜt
, 256);

287 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIO.h

1 #iâdeà
_MULTIIO_H


2 
	#_MULTIIO_H


	)

4 
	~"¡wty³s.h
"

5 
	~"DeviûOD.h
"

6 
	~"AµCÚfig.h
"

7 
	~"x_š.h
"

8 
	~"x_out.h
"

9 
	~"x_sys.h
"

10 
	~"x02_sys.h
"

11 
	~"x02_š.h
"

12 
	~"x02_out.h
"

13 
	~"x05_sys.h
"

14 
	~"x05_š.h
"

15 
	~"x05_out.h
"

17 
	#NumOfIÅut
 43

	)

18 
	#NumOfOuut
 18

	)

20 
	#IÅutCfgNoCfg
 0x0000

	)

21 
	#IÅutCfgDig™®
 0x0001

	)

22 
	#IÅutCfgVŞge5V
 0x0002

	)

23 
	#IÅutCfgVŞge10V
 0x0003

	)

24 
	#IÅutCfgVŞge40V
 0x0004

	)

25 
	#IÅutCfgCu¼’t
 0x0005

	)

26 
	#IÅutCfgEv’tRisšg
 0x0006

	)

27 
	#IÅutCfgEv’tF®lšg
 0x0007

	)

28 
	#IÅutCfgEv’tBÙh
 0x0008

	)

29 
	#IÅutCfgF»quez
 0x0009

	)

30 
	#IÅutCfgInüem’l
 0x000a

	)

32 
	#OuutCfgNoCfg
 0x0000

	)

33 
	#OuutCfgDig™®
 0x0001

	)

34 
	#OuutCfgPWM
 0x0002

	)

35 
	#OuutCfgCu¼’t
 0x0003

	)

37 
ušt16
 
šputCÚfig
[
NumOfIÅut
][2];

38 
sšt32
 
šputF‹rCfg
[15];

39 
ušt16
 
ouutCÚfig
[
NumOfOuut
][2];

41 
MuÉiIOIn™
();

42 
MuÉiIOTask
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIOConfig.c

1 
	~"MuÉiIO.h
"

4 
ušt16
 
	gšputCÚfig
[
NumOfIÅut
][2]={

5 
X_IN_01
,
IÅutCfgVŞge10V
,

6 
X_IN_02
,
IÅutCfgVŞge10V
,

7 
X_IN_03
,
IÅutCfgVŞge10V
,

8 
X_IN_04
,
IÅutCfgVŞge10V
,

9 
X_IN_05
,
IÅutCfgNoCfg
,

10 
X_IN_06
,
IÅutCfgNoCfg
,

11 
X_IN_07
,
IÅutCfgNoCfg
,

12 
X_IN_08
,
IÅutCfgNoCfg
,

13 
X_IN_09
,
IÅutCfgNoCfg
,

14 
X_IN_10
,
IÅutCfgNoCfg
,

15 
X_IN_11
,
IÅutCfgNoCfg
,

16 
X_IN_12
,
IÅutCfgNoCfg
,

17 
X_IN_13
,
IÅutCfgNoCfg
,

18 
X_IN_14
,
IÅutCfgNoCfg
,

19 
X_IN_15
,
IÅutCfgNoCfg
,

20 
X02_IN_01
,
IÅutCfgDig™®
,

21 
X02_IN_02
,
IÅutCfgDig™®
,

22 
X02_IN_03
,
IÅutCfgDig™®
,

23 
X02_IN_04
,
IÅutCfgDig™®
,

24 
X02_IN_05
,
IÅutCfgDig™®
,

25 
X02_IN_06
,
IÅutCfgDig™®
,

26 
X02_IN_07
,
IÅutCfgDig™®
,

27 
X02_IN_08
,
IÅutCfgDig™®
,

28 
X02_IN_09
,
IÅutCfgDig™®
,

29 
X02_IN_10
,
IÅutCfgDig™®
,

30 
X02_IN_11
,
IÅutCfgDig™®
,

31 
X02_IN_12
,
IÅutCfgDig™®
,

32 
X02_IN_01
,
IÅutCfgDig™®
,

33 
X02_IN_02
,
IÅutCfgDig™®
,

34 
X02_IN_03
,
IÅutCfgDig™®
,

35 
X02_IN_04
,
IÅutCfgDig™®
,

36 
X02_IN_05
,
IÅutCfgDig™®
,

37 
X02_IN_06
,
IÅutCfgDig™®
,

38 
X02_IN_07
,
IÅutCfgDig™®
,

39 
X02_IN_08
,
IÅutCfgDig™®
,

40 
X02_IN_09
,
IÅutCfgDig™®
,

41 
X02_IN_10
,
IÅutCfgDig™®
,

42 
X02_IN_11
,
IÅutCfgDig™®
,

43 
X02_IN_12
,
IÅutCfgDig™®
,

44 
X05_IN_01
,
IÅutCfgNoCfg
,

45 
X05_IN_02
,
IÅutCfgNoCfg
,

46 
X05_IN_03
,
IÅutCfgNoCfg
,

47 
X05_IN_04
,
IÅutCfgNoCfg


50 
sšt32
 
	gšputF‹rCfg
[15]={

70 
ušt16
 
	gouutCÚfig
[
NumOfOuut
][2]={

71 
X_OUT_01
,
OuutCfgDig™®
,

72 
X_OUT_02
,
OuutCfgNoCfg
,

73 
X_OUT_03
,
OuutCfgNoCfg
,

74 
X_OUT_04
,
OuutCfgNoCfg
,

75 
X_OUT_05
,
OuutCfgNoCfg
,

76 
X_OUT_06
,
OuutCfgNoCfg
,

77 
X_OUT_07
,
OuutCfgNoCfg
,

78 
X_OUT_08
,
OuutCfgDig™®
,

79 
X02_OUT_01
,
OuutCfgDig™®
,

80 
X02_OUT_01
,
OuutCfgDig™®
,

81 
X05_OUT_01
,
OuutCfgDig™®
,

82 
X05_OUT_02
,
OuutCfgDig™®
,

83 
X05_OUT_03
,
OuutCfgNoCfg
,

84 
X05_OUT_04
,
OuutCfgDig™®
,

85 
X05_OUT_05
,
OuutCfgDig™®
,

86 
X05_OUT_06
,
OuutCfgDig™®
,

87 
X05_OUT_07
,
OuutCfgDig™®
,

88 
X05_OUT_08
,
OuutCfgDig™®


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIOInterface.h

1 #iâdeà
_MULTIIOINTERFACE_H


2 
	#_MULTIIOINTERFACE_H


	)

13 
In™MuÉiIO
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\DeviceOD.c

1 
	~"“p_memm­.h
"

2 
	~"“p_Mªage.h
"

3 
	~"DeviûOD.h
"

7 
ušt32
 
	gODMem
[
ODMemL’gth
];

15 
ušt16
 
	gODMemM­Li¡
[2][
ODMemM­Li¡L’gth
];

22 
	$ODMemIn™
(){

23 
ušt16
 
i
;

24 
ušt16
 
couÁ
=0;

26 
ODMemM­Li¡
[0][0]=
DevP¬aS¹Index
;

27 
ODMemM­Li¡
[1][0]=
NrEÁryDevP¬a
;

28 
couÁ
++;

30 #ifdeà
DriveModuËS¹Index


31 
ODMemM­Li¡
[0][
couÁ
]=
DriveModuËS¹Index
;

32 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryDriveModuË
;

33 
couÁ
++;

36 #ifdeà
Inv”‹rS¹Index


37 
i
=0;i<
NrOfMÙÜInv”‹r
;i++){

38 
ODMemM­Li¡
[0][
couÁ
]=
Inv”‹rS¹Index
+
i
;

39 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryInv”‹r
;

40 
couÁ
++;

44 #ifdeà
IOPÜtS¹Index


45 
ODMemM­Li¡
[0][
couÁ
]=
IOPÜtS¹Index
;

46 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryIOPÜt
;

47 
couÁ
++;

50 #ifdeà
RemÙeCÚŒŞS¹Index


51 
ODMemM­Li¡
[0][
couÁ
]=
RemÙeCÚŒŞS¹Index
;

52 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryRemÙeCÚŒŞ
;

53 
couÁ
++;

56 #ifdeà
HubSy¡emS¹Index


57 
ODMemM­Li¡
[0][
couÁ
]=
HubSy¡emS¹Index
;

58 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryHubSy¡em
;

59 
couÁ
++;

62 #ifdeà
SaãtyS¹Index


63 
ODMemM­Li¡
[0][
couÁ
]=
SaãtyS¹Index
;

64 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁrySaãty
;

65 
couÁ
++;

68 #ifdeà
AutoDriveS¹Index


69 
ODMemM­Li¡
[0][
couÁ
]=
AutoDriveS¹Index
;

70 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryAutoDrive
;

71 
couÁ
++;

74 
i
=0;i<
ODMemL’gth
;i++){

75 
ODMem
[
i
]=0;

77 
	}
}

91 
sšt16
 
	$G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
){

92 
ušt16
 
ODMemAddr
=0;

93 
ušt16
 
SubIdxR–Addr
;

94 
ušt16
 
iODIndex
;

95 
ušt8
 
i
;

97 
SubIdxR–Addr
=(
ušt16
)
subšdex
;

98 
iODIndex
=0;iODIndex<
ODMemM­Li¡L’gth
;iODIndex++){

99 if(
ODMemM­Li¡
[0][
iODIndex
]==
šdex
){

100 
i
=0x00;i<
ODMemM­Li¡
[1][
iODIndex
];i++){

101 if(
i
==
SubIdxR–Addr
){

102 if(
İt
==
G‘OD
)

103 *
v®ue
=
ODMem
[
ODMemAddr
];

104 if(
İt
==
S‘OD
)

105 
ODMem
[
ODMemAddr
]=*
v®ue
;

106 *
Addr
=
ODMemAddr
;

107  
C_NO_ERR
;

109 
ODMemAddr
++;

111  
C_RANGE
;

113 
ODMemAddr
+=
ODMemM­Li¡
[1][
iODIndex
];

115  
C_RANGE
;

116 
	}
}

129 
sšt16
 
	$StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
){

130 
ušt16
 
ODMemAddr
;

131 
ušt16
 
SizeOfD©aTy³
=4;

132 
ušt16
 
i
;

133 
ušt32
 
D©a
;

134 
sšt16
 
”rcode
=0;

135 
ušt16
 
StÜeL’gth
;

137 
StÜeL’gth
=
ODMemL’gth
;

138 if(
šdex
==0){

139 
i
=0;i<
StÜeL’gth
;i++){

140 if(
İt
==
StÜeODToEEP
)

141 
”rcode
=
	`EEPD©aStÜe
(
ODMem
[
i
],
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+i*SizeOfDataType);

142 if(
İt
==
LßdODFromEEP
)

143 
”rcode
=
	`EEPD©aLßd
(&
ODMem
[
i
],
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+i*SizeOfDataType);

144 if(
”rcode
!=
C_NO_ERR
)

145  
”rcode
;

149 if(
İt
==
StÜeODToEEP
){

150 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
G‘OD
);

151 if(
”rcode
!=
C_NO_ERR
)

152  
”rcode
;

153 
”rcode
=
	`EEPD©aStÜe
(
D©a
,
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+
ODMemAddr
*SizeOfDataType);

154 if(
”rcode
!=
C_NO_ERR
)

155  
”rcode
;

157 if(
İt
==
LßdODFromEEP
){

158 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
G‘OD
);

159 if(
”rcode
!=
C_NO_ERR
)

160  
”rcode
;

161 
”rcode
=
	`EEPD©aLßd
(&
D©a
,
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+
ODMemAddr
*SizeOfDataType);

162 if(
”rcode
!=
C_NO_ERR
)

163  
”rcode
;

164 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
S‘OD
);

165 if(
”rcode
!=
C_NO_ERR
)

166  
”rcode
;

170 
	}
}

178 * 
	$BšdODMem
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 
D©aTy³
,ušt16 
Pos
){

179 
ušt32
 
v®ue
;

180 
ušt16
 
ODMemAddr
;

182 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

184 
D©aTy³
){

185 0:  (
sšt8
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

186 1:  (
ušt8
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

187 2:  (
sšt16
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

188 3:  (
ušt16
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

189 4:  &
ODMem
[
ODMemAddr
];

190 5:  (
sšt32
 *)&
ODMem
[
ODMemAddr
];

191 6:  (
æßt32
 *)&
ODMem
[
ODMemAddr
];

194 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\DeviceOD.h

1 #iâdeà
_DEVICEOD_H


2 
	#_DEVICEOD_H


	)

3 
	~"CANİ’Comm.h
"

4 
	~"ODCÚ‹Á.h
"

5 
	~"ODInfo.h
"

10 
	eOD_O±
{

11 
	mG‘OD
,

12 
	mS‘OD
,

13 
	mStÜeODToEEP
,

14 
	mLßdODFromEEP
,

20 
	#Ty³S8
 0

	)

21 
	#Ty³U8
 1

	)

22 
	#Ty³S16
 2

	)

23 
	#Ty³U16
 3

	)

24 
	#Ty³U32
 4

	)

25 
	#Ty³S32
 5

	)

26 
	#Ty³F32
 6

	)

32 
ušt32
 
ODMem
[
ODMemL’gth
];

40 
ušt16
 
ODMemM­Li¡
[2][
ODMemM­Li¡L’gth
];

45 
ODMemIn™
();

46 
sšt16
 
G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
);

47 
sšt16
 
StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
);

48 * 
BšdODMem
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 
D©aTy³
,ušt16 
Pos
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\ODContent.h

1 #iâdeà
_ODCONTENT_H


2 
	#_ODCONTENT_H


	)

8 
	#DevP¬aS¹Index
 0x1000

	)

9 
	#NrEÁryDevP¬a
 15

	)

12 
	#SubšdexHwty³
 0x00

	)

13 
	#SubšdexS”Nr
 0x01

	)

14 
	#SubšdexCÚŒŞWÜd
 0x02

	)

15 
	#SubšdexNodeP¬am
 0x03

16 
	#SubšdexCÚfigSync12
 0x04

17 
	#SubšdexCÚfigSync34
 0x05

18 
	#SubšdexCPUTem³¿tur
 0x06

	)

19 
	#SubšdexCPUVŞgeUb1
 0x07

	)

20 
	#SubšdexCPUCu¼’tUb1
 0x08

	)

21 
	#SubšdexCPUVŞgeExt
 0x09

	)

22 
	#SubšdexCPUVŞgeUC1
 0x0a

	)

23 
	#SubšdexSysStus
 0x0b

24 
	#SubšdexSysCyşeTime
 0x0c

	)

25 
	#SubšdexSysSDOCÚŒŞWÜd
 0x0d

26 
	#SubšdexSysSDOCÚ‹Á
 0x0e

	)

30 
	#DriveModuËS¹Index
 0x6000

	)

31 
	#NrEÁryDriveModuË
 46

	)

34 
	#SubšdexDriveSysCÚŒŞWÜd
 0x00

	)

37 
	#SubšdexDriveModuË11Kp1
 0x01

	)

38 
	#SubšdexDriveModuË11Kp2
 0x02

	)

39 
	#SubšdexDriveModuË11Ki
 0x03

	)

40 
	#SubšdexDriveModuË12Kp1
 0x04

	)

41 
	#SubšdexDriveModuË12Kp2
 0x05

	)

42 
	#SubšdexDriveModuË12Ki
 0x06

	)

43 
	#SubšdexDriveModuË21Kp1
 0x07

	)

44 
	#SubšdexDriveModuË21Kp2
 0x08

	)

45 
	#SubšdexDriveModuË21Ki
 0x09

	)

46 
	#SubšdexDriveModuË22Kp1
 0x0a

	)

47 
	#SubšdexDriveModuË22Kp2
 0x0b

	)

48 
	#SubšdexDriveModuË22Ki
 0x0c

	)

51 
	#SubšdexDriveModuË11Aùu®AngË
 0x0d

	)

52 
	#SubšdexDriveModuË12Aùu®AngË
 0x0e

	)

53 
	#SubšdexDriveModuË21Aùu®AngË
 0x0f

	)

54 
	#SubšdexDriveModuË22Aùu®AngË
 0x10

	)

55 
	#SubšdexAngËS’sÜ11FaùA
 0x11

	)

56 
	#SubšdexAngËS’sÜ11FaùB
 0x12

	)

57 
	#SubšdexAngËS’sÜ12FaùA
 0x13

	)

58 
	#SubšdexAngËS’sÜ12FaùB
 0x14

	)

59 
	#SubšdexAngËS’sÜ21FaùA
 0x15

	)

60 
	#SubšdexAngËS’sÜ21FaùB
 0x16

	)

61 
	#SubšdexAngËS’sÜ22FaùA
 0x17

	)

62 
	#SubšdexAngËS’sÜ22FaùB
 0x18

	)

65 
	#SubšdexMaxim®S³ed
 0x19

66 
	#SubšdexDriveSysOmega
 0x1a

	)

67 
	#SubšdexDriveSysAcûl
 0x1b

	)

68 
	#SubšdexDriveSysDeş
 0x1c

	)

69 
	#SubšdexDriveSysS‘S³edX
 0x1d

	)

70 
	#SubšdexDriveSysS‘S³edY
 0x1e

	)

71 
	#SubšdexDriveSysS‘OmegaZ
 0x1f

	)

72 
	#SubšdexDriveSysS‘S³ed
 0x20

	)

73 
	#SubšdexDriveSysS‘AngË
 0x21

	)

76 
	#SubšdexS‘DriveModuË11AngË
 0x22

	)

77 
	#SubšdexS‘DriveModuË12AngË
 0x23

	)

78 
	#SubšdexS‘DriveModuË21AngË
 0x24

	)

79 
	#SubšdexS‘DriveModuË22AngË
 0x25

	)

80 
	#SubšdexDriveModuË11Aùu®S³ed
 0x26

	)

81 
	#SubšdexDriveModuË12Aùu®S³ed
 0x27

	)

82 
	#SubšdexDriveModuË21Aùu®S³ed
 0x28

	)

83 
	#SubšdexDriveModuË22Aùu®S³ed
 0x29

	)

84 
	#SubšdexDriveModuË11Aùu®Omega
 0x2a

	)

85 
	#SubšdexDriveModuË12Aùu®Omega
 0x2b

	)

86 
	#SubšdexDriveModuË21Aùu®Omega
 0x2c

	)

87 
	#SubšdexDriveModuË22Aùu®Omega
 0x2d

	)

93 
	#Inv”‹rS¹Index
 0x6100

	)

94 
	#NrEÁryInv”‹r
 8

	)

97 
	#SubšdexInv”‹rNodeStus
 0x00

	)

98 
	#SubšdexInv”‹rRPDO1LowDWÜd
 0x01

	)

99 
	#SubšdexInv”‹rRPDO1HighDWÜd
 0x02

	)

100 
	#SubšdexInv”‹rTPDO1LowDWÜd
 0x03

	)

101 
	#SubšdexInv”‹rTPDO1HighDWÜd
 0x04

	)

102 
	#SubšdexInv”‹rTPDO2LowDWÜd
 0x05

	)

103 
	#SubšdexInv”‹rTPDO2HighDWÜd
 0x06

	)

104 
	#SubšdexInv”‹rNMT
 0x07

	)

108 
	#IOPÜtS¹Index
 0x6200

	)

109 
	#NrEÁryIOPÜt
 62

	)

112 
	#SubšdexIOPÜtCÚŒŞWÜd
 0x00

	)

113 
	#SubšdexIÅut01
 0x01

	)

114 
	#SubšdexIÅut02
 0x02

	)

115 
	#SubšdexIÅut03
 0x03

	)

116 
	#SubšdexIÅut04
 0x04

	)

117 
	#SubšdexIÅut05
 0x05

	)

118 
	#SubšdexIÅut06
 0x06

	)

119 
	#SubšdexIÅut07
 0x07

	)

120 
	#SubšdexIÅut08
 0x08

	)

121 
	#SubšdexIÅut09
 0x09

	)

122 
	#SubšdexIÅut10
 0x0a

	)

123 
	#SubšdexIÅut11
 0x0b

	)

124 
	#SubšdexIÅut12
 0x0c

	)

125 
	#SubšdexIÅut13
 0x0d

	)

126 
	#SubšdexIÅut14
 0x0e

	)

127 
	#SubšdexIÅut15
 0x0f

	)

128 
	#SubšdexIÅut28
 0x10

	)

129 
	#SubšdexIÅut29
 0x11

	)

130 
	#SubšdexIÅut30
 0x12

	)

131 
	#SubšdexIÅut31
 0x13

	)

132 
	#SubšdexIÅut32
 0x14

	)

133 
	#SubšdexIÅut33
 0x15

	)

134 
	#SubšdexIÅut34
 0x16

	)

135 
	#SubšdexIÅut35
 0x17

	)

136 
	#SubšdexIÅut36
 0x18

	)

137 
	#SubšdexIÅut37
 0x19

	)

138 
	#SubšdexIÅut38
 0x1a

	)

139 
	#SubšdexIÅut39
 0x1b

	)

140 
	#SubšdexIÅut41
 0x1c

	)

141 
	#SubšdexIÅut42
 0x1d

	)

142 
	#SubšdexIÅut43
 0x1e

	)

143 
	#SubšdexIÅut44
 0x1f

	)

144 
	#SubšdexIÅut45
 0x20

	)

145 
	#SubšdexIÅut46
 0x21

	)

146 
	#SubšdexIÅut47
 0x22

	)

147 
	#SubšdexIÅut48
 0x23

	)

148 
	#SubšdexIÅut49
 0x24

	)

149 
	#SubšdexIÅut50
 0x25

	)

150 
	#SubšdexIÅut51
 0x26

	)

151 
	#SubšdexIÅut52
 0x27

	)

152 
	#SubšdexIÅut62
 0x28

	)

153 
	#SubšdexIÅut63
 0x29

	)

154 
	#SubšdexIÅut64
 0x2a

	)

155 
	#SubšdexIÅut65
 0x2b

	)

158 
	#SubšdexOuut01
 0x2c

	)

159 
	#SubšdexOuut02
 0x2d

	)

160 
	#SubšdexOuut03
 0x2e

	)

161 
	#SubšdexOuut04
 0x2f

	)

162 
	#SubšdexOuut05
 0x30

	)

163 
	#SubšdexOuut06
 0x31

	)

164 
	#SubšdexOuut07
 0x32

	)

165 
	#SubšdexOuut08
 0x33

	)

166 
	#SubšdexOuut36
 0x34

	)

167 
	#SubšdexOuut49
 0x35

	)

168 
	#SubšdexOuut50
 0x36

	)

169 
	#SubšdexOuut51
 0x37

	)

170 
	#SubšdexOuut52
 0x38

	)

171 
	#SubšdexOuut53
 0x39

	)

172 
	#SubšdexOuut54
 0x3a

	)

173 
	#SubšdexOuut55
 0x3b

	)

174 
	#SubšdexOuut56
 0x3c

	)

175 
	#SubšdexOuut57
 0x3d

	)

179 
	#RemÙeCÚŒŞS¹Index
 0x6300

	)

180 
	#NrEÁryRemÙeCÚŒŞ
 24

	)

183 
	#SubšdexRemÙeCŒlNodeStus
 0x00

	)

184 
	#SubšdexRemÙeCŒlTPDO1LowDWÜd
 0x01

185 
	#SubšdexRemÙeCŒlTPDO1HighDWÜd
 0x02

	)

186 
	#SubšdexRemÙeCŒlTPDO2LowDWÜd
 0x03

187 
	#SubšdexRemÙeCŒlTPDO2HighDWÜd
 0x04

	)

188 
	#SubšdexRemÙeCŒlRPDO1LowDWÜd
 0x05

189 
	#SubšdexRemÙeCŒlRPDO1HighDWÜd
 0x06

	)

190 
	#SubšdexRemÙeCŒlRPDO2LowDWÜd
 0x07

191 
	#SubšdexRemÙeCŒlRPDO2HighDWÜd
 0x08

	)

192 
	#SubšdexRemÙeCŒlRPDO4LowDWÜd
 0x09

193 
	#SubšdexRemÙeCŒlRPDO4HighDWÜd
 0x0a

	)

194 
	#SubšdexRemÙeCŒlNMT
 0x0b

	)

197 
	#SubšdexXJoy¡ickCurveP¬aA
 0x0c

	)

198 
	#SubšdexXJoy¡ickCurveP¬aB
 0x0d

	)

199 
	#SubšdexXJoy¡ickCurveP¬aC
 0x0e

	)

200 
	#SubšdexXJoy¡ickCurveP¬aD
 0x0f

	)

201 
	#SubšdexT–eg¿mm1FromSÏveLowWÜd
 0x10

202 
	#SubšdexT–eg¿mm1FromSÏveHighWÜd
 0x11

203 
	#SubšdexT–eg¿mm1ToSÏveLowWÜd
 0x12

204 
	#SubšdexT–eg¿mm1ToSÏveHighWÜd
 0x13

205 
	#SubšdexT–eg¿mm2ToSÏveLowWÜd
 0x14

206 
	#SubšdexT–eg¿mm2ToSÏveHighWÜd
 0x15

207 
	#SubšdexT–eg¿mm3ToSÏveLowWÜd
 0x16

	)

208 
	#SubšdexT–eg¿mm3ToSÏveHighWÜd
 0x17

	)

212 
	#HubSy¡emS¹Index
 0x6400

	)

213 
	#NrEÁryHubSy¡em
 9

	)

216 
	#SubšdexHubSy¡emCÚŒŞWÜd
 0x00

219 

	)

221 
	#SubšdexHeightHubAx–11
 0x01

	)

222 
	#SubšdexHeightHubAx–12
 0x02

	)

223 
	#SubšdexHeightHubAx–21
 0x03

	)

224 
	#SubšdexHeightHubAx–22
 0x04

	)

225 
	#SubšdexP»ssu»S’sÜAx–11
 0x05

	)

226 
	#SubšdexP»ssu»S’sÜAx–12
 0x06

	)

227 
	#SubšdexP»ssu»S’sÜAx–21
 0x07

	)

228 
	#SubšdexP»ssu»S’sÜAx–22
 0x08

	)

231 
	#SaãtyS¹Index
 0x6500

	)

232 
	#NrEÁrySaãty
 100

	)

235 
	#SubšdexNumOfE¼Ü
 0x00

	)

238 
	#SubšdexE¼ÜRegi¡”01
 0x01

	)

239 
	#SubšdexE¼ÜRegi¡”02
 0x02

	)

240 
	#SubšdexE¼ÜRegi¡”03
 0x03

	)

241 
	#SubšdexE¼ÜRegi¡”04
 0x04

	)

242 
	#SubšdexE¼ÜRegi¡”05
 0x05

	)

243 
	#SubšdexE¼ÜRegi¡”06
 0x06

	)

244 
	#SubšdexE¼ÜRegi¡”07
 0x07

	)

245 
	#SubšdexE¼ÜRegi¡”08
 0x08

	)

246 
	#SubšdexE¼ÜRegi¡”09
 0x09

	)

247 
	#SubšdexE¼ÜRegi¡”10
 0x0a

	)

248 
	#SubšdexE¼ÜRegi¡”11
 0x0b

	)

249 
	#SubšdexE¼ÜRegi¡”12
 0x0c

	)

250 
	#SubšdexE¼ÜRegi¡”13
 0x0d

	)

251 
	#SubšdexE¼ÜRegi¡”14
 0x0e

	)

252 
	#SubšdexE¼ÜRegi¡”15
 0x0f

	)

253 
	#SubšdexE¼ÜRegi¡”16
 0x10

	)

254 
	#SubšdexE¼ÜRegi¡”17
 0x11

	)

255 
	#SubšdexE¼ÜRegi¡”18
 0x12

	)

256 
	#SubšdexE¼ÜRegi¡”19
 0x13

	)

257 
	#SubšdexE¼ÜRegi¡”20
 0x14

	)

258 
	#SubšdexE¼ÜRegi¡”21
 0x15

	)

259 
	#SubšdexE¼ÜRegi¡”22
 0x16

	)

260 
	#SubšdexE¼ÜRegi¡”23
 0x17

	)

261 
	#SubšdexE¼ÜRegi¡”24
 0x18

	)

262 
	#SubšdexE¼ÜRegi¡”25
 0x19

	)

263 
	#SubšdexE¼ÜRegi¡”26
 0x1a

	)

264 
	#SubšdexE¼ÜRegi¡”27
 0x1b

	)

265 
	#SubšdexE¼ÜRegi¡”28
 0x1c

	)

266 
	#SubšdexE¼ÜRegi¡”29
 0x1d

	)

267 
	#SubšdexE¼ÜRegi¡”30
 0x1e

	)

268 
	#SubšdexE¼ÜRegi¡”31
 0x1f

	)

269 
	#SubšdexE¼ÜRegi¡”32
 0x20

	)

272 
	#SubšdexE¼ÜRegi¡”01Time¡amp1
 0x21

	)

273 
	#SubšdexE¼ÜRegi¡”01Time¡amp2
 0x22

	)

274 
	#SubšdexE¼ÜRegi¡”02Time¡amp1
 0x23

	)

275 
	#SubšdexE¼ÜRegi¡”02Time¡amp2
 0x24

	)

276 
	#SubšdexE¼ÜRegi¡”03Time¡amp1
 0x25

	)

277 
	#SubšdexE¼ÜRegi¡”03Time¡amp2
 0x26

	)

278 
	#SubšdexE¼ÜRegi¡”04Time¡amp1
 0x27

	)

279 
	#SubšdexE¼ÜRegi¡”04Time¡amp2
 0x28

	)

280 
	#SubšdexE¼ÜRegi¡”05Time¡amp1
 0x29

	)

281 
	#SubšdexE¼ÜRegi¡”05Time¡amp2
 0x2a

	)

282 
	#SubšdexE¼ÜRegi¡”06Time¡amp1
 0x2b

	)

283 
	#SubšdexE¼ÜRegi¡”06Time¡amp2
 0x2c

	)

284 
	#SubšdexE¼ÜRegi¡”07Time¡amp1
 0x2d

	)

285 
	#SubšdexE¼ÜRegi¡”07Time¡amp2
 0x2e

	)

286 
	#SubšdexE¼ÜRegi¡”08Time¡amp1
 0x2f

	)

287 
	#SubšdexE¼ÜRegi¡”08Time¡amp2
 0x30

	)

288 
	#SubšdexE¼ÜRegi¡”09Time¡amp1
 0x31

	)

289 
	#SubšdexE¼ÜRegi¡”09Time¡amp2
 0x32

	)

290 
	#SubšdexE¼ÜRegi¡”10Time¡amp1
 0x33

	)

291 
	#SubšdexE¼ÜRegi¡”10Time¡amp2
 0x34

	)

292 
	#SubšdexE¼ÜRegi¡”11Time¡amp1
 0x35

	)

293 
	#SubšdexE¼ÜRegi¡”11Time¡amp2
 0x36

	)

294 
	#SubšdexE¼ÜRegi¡”12Time¡amp1
 0x37

	)

295 
	#SubšdexE¼ÜRegi¡”12Time¡amp2
 0x38

	)

296 
	#SubšdexE¼ÜRegi¡”13Time¡amp1
 0x39

	)

297 
	#SubšdexE¼ÜRegi¡”13Time¡amp2
 0x3a

	)

298 
	#SubšdexE¼ÜRegi¡”14Time¡amp1
 0x3b

	)

299 
	#SubšdexE¼ÜRegi¡”14Time¡amp2
 0x3c

	)

300 
	#SubšdexE¼ÜRegi¡”15Time¡amp1
 0x3d

	)

301 
	#SubšdexE¼ÜRegi¡”15Time¡amp2
 0x3e

	)

302 
	#SubšdexE¼ÜRegi¡”16Time¡amp1
 0x3f

	)

303 
	#SubšdexE¼ÜRegi¡”16Time¡amp2
 0x40

	)

304 
	#SubšdexE¼ÜRegi¡”17Time¡amp1
 0x41

	)

305 
	#SubšdexE¼ÜRegi¡”17Time¡amp2
 0x42

	)

306 
	#SubšdexE¼ÜRegi¡”18Time¡amp1
 0x43

	)

307 
	#SubšdexE¼ÜRegi¡”18Time¡amp2
 0x44

	)

308 
	#SubšdexE¼ÜRegi¡”19Time¡amp1
 0x45

	)

309 
	#SubšdexE¼ÜRegi¡”19Time¡amp2
 0x46

	)

310 
	#SubšdexE¼ÜRegi¡”20Time¡amp1
 0x47

	)

311 
	#SubšdexE¼ÜRegi¡”20Time¡amp2
 0x48

	)

312 
	#SubšdexE¼ÜRegi¡”21Time¡amp1
 0x49

	)

313 
	#SubšdexE¼ÜRegi¡”21Time¡amp2
 0x4a

	)

314 
	#SubšdexE¼ÜRegi¡”22Time¡amp1
 0x4b

	)

315 
	#SubšdexE¼ÜRegi¡”22Time¡amp2
 0x4c

	)

316 
	#SubšdexE¼ÜRegi¡”23Time¡amp1
 0x4d

	)

317 
	#SubšdexE¼ÜRegi¡”23Time¡amp2
 0x4e

	)

318 
	#SubšdexE¼ÜRegi¡”24Time¡amp1
 0x4f

	)

319 
	#SubšdexE¼ÜRegi¡”24Time¡amp2
 0x50

	)

320 
	#SubšdexE¼ÜRegi¡”25Time¡amp1
 0x51

	)

321 
	#SubšdexE¼ÜRegi¡”25Time¡amp2
 0x52

	)

322 
	#SubšdexE¼ÜRegi¡”26Time¡amp1
 0x53

	)

323 
	#SubšdexE¼ÜRegi¡”26Time¡amp2
 0x54

	)

324 
	#SubšdexE¼ÜRegi¡”27Time¡amp1
 0x55

	)

325 
	#SubšdexE¼ÜRegi¡”27Time¡amp2
 0x56

	)

326 
	#SubšdexE¼ÜRegi¡”28Time¡amp1
 0x57

	)

327 
	#SubšdexE¼ÜRegi¡”28Time¡amp2
 0x58

	)

328 
	#SubšdexE¼ÜRegi¡”29Time¡amp1
 0x59

	)

329 
	#SubšdexE¼ÜRegi¡”29Time¡amp2
 0x5a

	)

330 
	#SubšdexE¼ÜRegi¡”30Time¡amp1
 0x5b

	)

331 
	#SubšdexE¼ÜRegi¡”30Time¡amp2
 0x5c

	)

332 
	#SubšdexE¼ÜRegi¡”31Time¡amp1
 0x5d

	)

333 
	#SubšdexE¼ÜRegi¡”31Time¡amp2
 0x5e

	)

334 
	#SubšdexE¼ÜRegi¡”32Time¡amp1
 0x5f

	)

335 
	#SubšdexE¼ÜRegi¡”32Time¡amp2
 0x60

	)

338 
	#SubšdexSaãtyCÚŒŞWÜd
 0x61

	)

339 
	#SubšdexSaãtyD©eTime1
 0x62

	)

340 
	#SubšdexSaãtyD©eTime2
 0x63

	)

344 
	#AutoDriveS¹Index
 0x6600

	)

345 
	#NrEÁryAutoDrive
 27

	)

348 
	#SubšdexAutoDriveCÚŒŞWÜd
 0x00

	)

349 
	#SubšdexAutoDriveYV®ue
 0x01

	)

350 
	#SubšdexAutoDriveXV®ue
 0x02

	)

351 
	#SubšdexAutoDriveAGV®ue
 0x03

	)

352 
	#SubšdexAutoDriveReãÃrzS³ed
 0x04

	)

353 
	#SubšdexAutoDriveCÚŒŞK1
 0x05

	)

354 
	#SubšdexAutoDriveCÚŒŞK2
 0x06

	)

355 
	#SubšdexAutoDriveCÚŒŞKv
 0x07

	)

358 
	#SubšdexCam”a1RPDO1LowWÜd
 0x08

	)

359 
	#SubšdexCam”a1RPDO1HighWÜd
 0x09

	)

360 
	#SubšdexCam”a1RPDO2LowWÜd
 0x0a

	)

361 
	#SubšdexCam”a1RPDO2HighWÜd
 0x0b

	)

362 
	#SubšdexCam”a1RPDO3LowWÜd
 0x0c

	)

363 
	#SubšdexCam”a1RPDO3HighWÜd
 0x0d

	)

364 
	#SubšdexCam”a2RPDO1LowWÜd
 0x0e

	)

365 
	#SubšdexCam”a2RPDO1HighWÜd
 0x0f

	)

366 
	#SubšdexCam”a2RPDO2LowWÜd
 0x10

	)

367 
	#SubšdexCam”a2RPDO2HighWÜd
 0x11

	)

368 
	#SubšdexCam”a2RPDO3LowWÜd
 0x12

	)

369 
	#SubšdexCam”a2RPDO3HighWÜd
 0x13

	)

370 
	#SubšdexCam”aTPDO1LowWÜd
 0x14

	)

371 
	#SubšdexCam”aTPDO1HighWÜd
 0x15

	)

374 
	#SubšdexCam”a1NodeStus
 0x16

	)

375 
	#SubšdexCam”a2NodeStus
 0x17

	)

376 
	#SubšdexCam”a1NMT
 0x18

	)

377 
	#SubšdexCam”a2NMT
 0x19

	)

380 
	#SubšdexAutoDriveS‹”šgCÜrFaùÜ
 0x1a

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\ODInfo.h

1 #iâdeà
_ODINFO_H


2 
	#_ODINFO_H


	)

8 
	#NrOfDriveSys
 1

	)

9 
	#NrOfMÙÜInv”‹r
 8

	)

10 
	#NrOfIOPÜtGroup
 1

	)

11 
	#NrOfRemÙeCÚŒŞ
 1

	)

12 
	#NrOfHubSys
 1

	)

13 
	#NrOfSaãty
 1

	)

14 
	#NrOfAutoDrive
 1

	)

15 
	#NrOfCam”a
 2

	)

20 
	#ODMemL’gth
 (
NrEÁryDevP¬a
+
NrEÁryDriveModuË
*
NrOfDriveSys
+
NrEÁryInv”‹r
*
NrOfMÙÜInv”‹r
+
NrEÁryIOPÜt
*
NrOfIOPÜtGroup
+
NrEÁryRemÙeCÚŒŞ
*
NrOfRemÙeCÚŒŞ
+
NrEÁryHubSy¡em
*
NrOfHubSys
+
NrEÁrySaãty
*
NrOfSaãty
+
NrEÁryAutoDrive
*
NrOfAutoDrive
)

	)

21 
	#ODMemM­Li¡L’gth
 (1+
NrOfDriveSys
+
NrOfMÙÜInv”‹r
+
NrOfIOPÜtGroup
+
NrOfRemÙeCÚŒŞ
+
NrOfHubSys
+
NrOfSaãty
+
NrOfAutoDrive
)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControl.c

1 
	~"RemÙeCÚŒŞ.h
"

2 
	~"RemÙeCÚŒŞIÁ”çû.h
"

3 
	~"RemÙeCÚŒŞD©a.h
"

5 
	#RCPšCÚŒŞWÜdTe¡Mode
 0x01000000

	)

6 
	#RCPšCÚŒŞWÜdIsU£d
 0x02000000

	)

7 
	#OmegaMÙiÚMode
 0.1

8 

	)

9 
	#KeyDriveModeP¬k
 0

	)

10 
	#KeyDriveModeAÎ¿d
 1

	)

11 
	#KeyDriveModeVÜd”¿d
 2

	)

12 
	#KeyDriveModeHš‹¼ad
 3

	)

13 
	#KeyDriveModeK»bsgªg
 4

	)

14 
	#KeyDriveModeRundgªg
 5

	)

16 
	#MaxRCToggËCouÁ”
 2

	)

19 
æßt32
 
	gXV®ue
;

20 
sšt16
 
	gY1V®ue
;

21 
æßt32
 
	gY2V®ue
;

22 
æßt32
 
	gZV®ue
;

24 
æßt32
 
	gMaxDriveAngË
;

26 
ušt16
 
	gtick
;

29 
ušt8
 
	gDriveMode
;

31 
æßt32
 
	gMaxDriveOmega
;

33 
æßt32
 
	gMaxDriveS³ed
;

35 
ušt8
 
	gOldToggËBy‹
;

37 
ušt16
 
	gRCtoggËcouÁ”
;

39 
ušt32
 
	gtimeSmpRC
;

41 
ušt32
 
	gtimeSmpIn™Fšish
;

43 
ušt32
 
	gŞdDig™®In
;

51 
	$In™IÁ”çûRemÙeCÚŒŞ
(){

52 
šputRemÙeCÚŒŞXV¬
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO1LowDWÜd
,
Ty³U8
,0);

53 
šputRemÙeCÚŒŞY1V¬
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO1LowDWÜd
,
Ty³U8
,1);

54 
šputRemÙeCÚŒŞY2V¬
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO1LowDWÜd
,
Ty³U8
,2);

55 
šputRemÙeCÚŒŞZV¬
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO1HighDWÜd
,
Ty³U8
,0);

56 
šputRemÙeCÚŒŞS³edPÙi
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO1LowDWÜd
,
Ty³U8
,3);

57 
šputRemÙeCÚŒŞDig™®In
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO2LowDWÜd
,
Ty³U32
,0);

58 
šputRemÙeCÚŒŞToggË
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO2HighDWÜd
,
Ty³U8
,2);

60 
ouutRCS‘DriveSysS³ed
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³ed
,
Ty³F32
,0); *outputRCSetDriveSysSpeed=0.0;

61 
ouutRCS‘DriveSysAngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘AngË
,
Ty³F32
,0); *outputRCSetDriveSysAngle=0.0;

63 
šputRCJoy¡ickXFaùA
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexXJoy¡ickCurveP¬aA
,
Ty³S32
,0);

64 
šputRCJoy¡ickXFaùB
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexXJoy¡ickCurveP¬aB
,
Ty³S32
,0);

65 
šputRCJoy¡ickXFaùC
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexXJoy¡ickCurveP¬aC
,
Ty³S32
,0);

66 
šputRCJoy¡ickXFaùD
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexXJoy¡ickCurveP¬aD
,
Ty³S32
,0);

69 
šputHubsy¡emHeight
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1FromSÏveLowWÜd
,
Ty³U8
,1); *inputHubsystemHeight=0x00;

70 
šputHubsy¡emStus
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1FromSÏveLowWÜd
,
Ty³U8
,0); *inputHubsystemStatus=0x00;

72 
ouutRCS‘DriveSysCÚŒŞWÜd
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysCÚŒŞWÜd
,
Ty³U32
,0); *outputRCSetDriveSysControlWord=0;

73 
ouutRCS‘HubSysCÚŒŞWÜd
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emCÚŒŞWÜd
,
Ty³U32
,0); *outputRCSetHubSysControlWord=0;

74 
ouutRCS‘SaãtyCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0); *outputRCSetSafetyControlWord=0;

75 
ouutRCS‘AutoDriveCÚŒŞWÜd
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞWÜd
,
Ty³U32
,0); *outputRCSetAutoDriveControlWord=0;

76 
šputRCG‘SÏveSaãtyCÚŒŞWÜd
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1FromSÏveHighWÜd
,
Ty³U32
,0); *inputRCGetSlaveSafetyControlWord=0;

78 
ouutRemÙeCÚŒŞNMT
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlNMT
,
Ty³U32
,0); *outputRemoteControlNMT=0;

80 
ouutIOPÜtHu³
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut53
,
Ty³U32
,0);

82 
ouutIOPÜtLam³11
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut54
,
Ty³U32
,0);

83 
ouutIOPÜtLam³12
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut55
,
Ty³U32
,0);

84 
ouutIOPÜtLam³21
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut57
,
Ty³U32
,0);

85 
ouutIOPÜtLam³22
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut56
,
Ty³U32
,0);

88 
ouutRCToSÏveDriveSysAngË11
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveLowWÜd
,
Ty³S8
,0); *outputRCToSlaveDriveSysAngle11=0;

89 
ouutRCToSÏveDriveSysAngË12
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveLowWÜd
,
Ty³S8
,1); *outputRCToSlaveDriveSysAngle12=0;

90 
ouutRCToSÏveDriveSysAngË21
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveLowWÜd
,
Ty³S8
,2); *outputRCToSlaveDriveSysAngle21=0;

91 
ouutRCToSÏveDriveSysAngË22
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveLowWÜd
,
Ty³S8
,3); *outputRCToSlaveDriveSysAngle22=0;

93 
ouutRCToSÏveStusMES
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveHighWÜd
,
Ty³U8
,1); *outputRCToSlaveStatusMES=0x00;

94 
ouutRCToSÏveStusExtMES
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveHighWÜd
,
Ty³U8
,1); *outputRCToSlaveStatusExtMES=0x00;

95 
ouutRCToSÏvePageS‹
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveHighWÜd
,
Ty³U8
,3); *outputRCToSlavePageState=0x00;

96 
ouutRCToSÏveStusAuto
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1ToSÏveHighWÜd
,
Ty³U8
,2); *outputRCToSlaveStatusAuto=0x00;

97 
ouutRCToSÏveS‹”šgMode
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveHighWÜd
,
Ty³U8
,2); *outputRCToSlaveSteeringMode=0x00;

99 
šputIOPÜtHªd
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut38
,
Ty³U16
,0);

100 
šputIOPÜtAutom©ik
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut49
,
Ty³U16
,0);

102 
šputRCG‘DriveModuË11AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Aùu®AngË
,
Ty³S32
,0);

103 
šputRCG‘DriveModuË12AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Aùu®AngË
,
Ty³S32
,0);

104 
šputRCG‘DriveModuË21AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Aùu®AngË
,
Ty³S32
,0);

105 
šputRCG‘DriveModuË22AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Aùu®AngË
,
Ty³S32
,0);

107 
šputRCG‘AutoDriveY1V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveYV®ue
,
Ty³S16
,0);

108 
šputRCG‘AutoDriveY2V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveYV®ue
,
Ty³S16
,1);

110 
šputRCG‘AutoDriveXV®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveXV®ue
,
Ty³S16
,0);

112 
	}
}

120 
	$G‘MaxDriveS³ed
(){

121 
æßt32
 
r
;

122 
æßt32
 
S³edPÙi
;

123 
æßt32
 
£tDriveAngË
;

124 
æßt32
 
£tDriveS³ed
;

125 
æßt32
 
v®idAngË
=5.0*
G¿d2Rad
;

127 
S³edPÙi
=(
æßt32
)(*
šputRemÙeCÚŒŞS³edPÙi
-127)/87.0*
MaxS³ed
;

128 
£tDriveS³ed
=*
ouutRCS‘DriveSysS³ed
;

129 if(
S³edPÙi
>(
MaxS³ed
*0.5)){

130 ià(
DriveMode
==
KeyDriveModeAÎ¿d
){

131 
£tDriveAngË
=*
ouutRCS‘DriveSysAngË
;

132 ià(
£tDriveAngË
>
v®idAngË
){

133 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË11AngË
)*
G¿d2Rad
;

134 
r
=
L
/2.0/
	`sšf
(
£tDriveAngË
);

135 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-1.2);

138 if(
£tDriveAngË
<-
v®idAngË
){

139 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË12AngË
)*
G¿d2Rad
;

140 
r
=
L
/2.0/
	`sšf
(0.0-
£tDriveAngË
);

141 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-1.2);

144 
MaxDriveS³ed
=
MaxS³ed
;

146 if(
DriveMode
==
KeyDriveModeVÜd”¿d
){

147 
£tDriveAngË
=*
ouutRCS‘DriveSysAngË
;

148 ià(
£tDriveAngË
>
v®idAngË
){

149 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË12AngË
)*
G¿d2Rad
;

150 
r
=
L
/
	`sšf
(
£tDriveAngË
);

151 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-0.8);

153 if(
£tDriveAngË
<-
v®idAngË
){

154 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË11AngË
)*
G¿d2Rad
;

155 
r
=
L
/
	`sšf
(0.0-
£tDriveAngË
);

156 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-0.8);

158 
MaxDriveS³ed
=
MaxS³ed
;

160 if(
DriveMode
==
KeyDriveModeHš‹¼ad
){

161 
£tDriveAngË
=*
ouutRCS‘DriveSysAngË
;

162 ià(
£tDriveAngË
>
v®idAngË
){

163 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË21AngË
)*
G¿d2Rad
;

164 
r
=
L
/
	`sšf
(
£tDriveAngË
);

165 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-0.8);

167 if(
£tDriveAngË
<-
v®idAngË
){

168 
£tDriveAngË
=(
æßt32
)(*
šputRCG‘DriveModuË22AngË
)*
G¿d2Rad
;

169 
r
=
L
/
	`sšf
(0.0-
£tDriveAngË
);

170 
MaxDriveS³ed
=
MaxS³ed
/
r
*(r-0.8);

172 
MaxDriveS³ed
=
MaxS³ed
;

174 if(
S³edPÙi
<
MaxDriveS³ed
) MaxDriveSpeed=SpeedPoti;

176 
MaxDriveS³ed
=
S³edPÙi
;

178 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
){

179 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
){

180 if(
MaxDriveS³ed
>(
MaxS³ed
*0.4)) MaxDriveSpeed=MaxSpeed*0.4;

184 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&(
KeyRCG‘SaãtySysLa£rsÿÂ”1Slow
+
KeyRCG‘SaãtySysLa£rsÿÂ”2Slow
)){

185 if(
MaxDriveS³ed
>
MaxS³edSlow
) MaxDriveSpeed=MaxSpeedSlow;

187 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&(
KeyRCG‘SaãtySysLa£rsÿÂ”1W¬n
+
KeyRCG‘SaãtySysLa£rsÿÂ”2W¬n
)){

188 if(
MaxDriveS³ed
>
MaxS³edW¬nF–d
) MaxDriveSpeed=MaxSpeedWarnFeld;

190 
MaxDriveOmega
=0.4;

191 
	}
}

199 
æßt32
 
	$FuncJoy¡ickC®
(
sšt16
 
x
,
ušt16
 
joy¡ick_num
){

200 
æßt32
 
tmp
;

201 
æßt32
 
JoyStickFaùA
=0.0;

202 
æßt32
 
JoyStickFaùB
=0.000225;

203 
æßt32
 
JoyStickFaùC
=-0.0017;

204 
æßt32
 
JoyStickFaùD
=0.0021;

205 
æßt32
 
»sV®ue
;

207 
tmp
=(
æßt32
)
x
;

213 if(
x
==0)  0.0;

214 if(
x
>0){

215 
»sV®ue
=
tmp
*tmp*
JoyStickFaùB
+tmp*
JoyStickFaùC
+
JoyStickFaùD
;

216 if(
»sV®ue
<0.0)  0.0;

217 if(
»sV®ue
>1.0)  1.0;

218  
»sV®ue
;

221 
»sV®ue
=-
tmp
*tmp*
JoyStickFaùB
+tmp*
JoyStickFaùC
-
JoyStickFaùD
;

222 if(
»sV®ue
>0.0)  0.0;

223 if(
»sV®ue
<-1.0)  -1.0;

224  
»sV®ue
;

227 
	}
}

235 
	$RemÙeCÚŒŞG‘Joy¡ick
(){

236 
sšt16
 
tmp
;

238 if((*
šputRemÙeCÚŒŞXV¬
==127)&&(*
šputRemÙeCÚŒŞY2V¬
==127)&&(*
šputRemÙeCÚŒŞY1V¬
==127)è*
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysRCNoMÙiÚ
;

239 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysRCNoMÙiÚ
;

241 
XV®ue
=
	`FuncJoy¡ickC®
((
sšt16
)(*
šputRemÙeCÚŒŞXV¬
)-127,0);

243 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chTÙmªn
è
Y2V®ue
=
	`FuncJoy¡ickC®
(127-(
sšt16
)(*
šputRemÙeCÚŒŞY2V¬
),0);

244 
Y2V®ue
=0.0;

246 
tmp
=(
sšt16
)(*
šputRemÙeCÚŒŞY1V¬
)-127;

247 if(
tmp
>10è
Y1V®ue
=1;

248 if(
tmp
<-10è
Y1V®ue
=-1;

249 
Y1V®ue
=0;

252 
	`G‘MaxDriveS³ed
();

253 
	}
}

261 
	$G‘Bu‰ÚV®ue
(){

262 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞBu‰ÚS¹
){

263 if((
ŞdDig™®In
&
RemÙeCÚŒŞBu‰ÚS¹
)==0è
RCReqWÜd
|=
KeyRCReqWÜdS¹
;

266 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞBu‰ÚZ”oS‘
) {

267 
RCReqWÜd
|=
KeyRCReqWÜdZ”oS‘
;

268 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysZ”oS‘
;

271 
RCReqWÜd
&=~
KeyRCReqWÜdZ”oS‘
;

272 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysZ”oS‘
;

275 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞBu‰ÚRe£t
) {

276 if((
ŞdDig™®In
&
RemÙeCÚŒŞBu‰ÚRe£t
)==0è
RCReqWÜd
|=
KeyRCReqWÜdRe£t
;

279 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞBu‰ÚHu³
){

280 if(
S‹
!=
RCS‹AutoDrive
è
RCReqWÜd
|=
KeyRCReqWÜdHu³Req
;

281 *
ouutRCS‘AutoDriveCÚŒŞWÜd
|=
KeyRCS‘AutoDriveHu³Req
;

284 if(
S‹
!=
RCS‹AutoDrive
è
RCReqWÜd
&=~
KeyRCReqWÜdHu³Req
;

285 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveHu³Req
;

288 if(*
šputIOPÜtHªd
==1è
RCReqWÜd
&=~
KeyRCReqWÜdAutoHªd
;

289 if(*
šputIOPÜtAutom©ik
==1è
RCReqWÜd
|=
KeyRCReqWÜdAutoHªd
;

290 
	}
}

298 
	$G‘Sw™chV®ue
(){

307 if(
S‹
==
RCS‹Run
){

308 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chCrossDrive
) {

309 
RCReqWÜd
|=
KeyRCReqWÜdCrossDrive
;

310 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysCrossDriveReq
;

312 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chLÚgDrive
){

313 
RCReqWÜd
&=~
KeyRCReqWÜdCrossDrive
;

314 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysLªgDriveReq
;

319 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chE¼ÜQu™
){

320 if((
ŞdDig™®In
&
RemÙeCÚŒŞSw™chE¼ÜQu™
)==0){

321 *
ouutRCS‘AutoDriveCÚŒŞWÜd
|=
KeyRCS‘AutoDriveAutoQu™Req
;

327 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chDriveS‹”šgMode
){

328 if((
ŞdDig™®In
&
RemÙeCÚŒŞSw™chDriveS‹”šgMode
)==0){

329 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
) RCReqWord&=~KeyRCReqWordDriveSteeringMode;

330 
RCReqWÜd
|=
KeyRCReqWÜdDriveS‹”šgMode
;

335 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chHubSysAktiv
){

336 if((
ŞdDig™®In
&
RemÙeCÚŒŞSw™chHubSysAktiv
)==0){

337 if((
RCReqWÜd
&
KeyRCReqWÜdHubSysAktiv
)==0){

338 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
RCReqWÜd
|=
KeyRCReqWÜdHubSysAktiv
;

341 if(*
šputHubsy¡emStus
&
KeyRCG‘HubSysFromSÏveIsStİ
è
RCReqWÜd
&=~
KeyRCReqWÜdHubSysAktiv
;

347 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSw™chLa£rsÿÂ”D—ktiv
){

348 if((
ŞdDig™®In
&
RemÙeCÚŒŞSw™chLa£rsÿÂ”D—ktiv
)==0){

349 if(
RCReqWÜd
&
KeyRCReqWÜdLSD—ktiv
) RCReqWord&=~KeyRCReqWordLSDeaktiv;

350 
RCReqWÜd
|=
KeyRCReqWÜdLSD—ktiv
;

355 
	}
}

363 
sšt16
 
	$Abs
(
sšt16
 
v®ue
){

364 ià(
v®ue
>=0)  value;

365  (0-
v®ue
);

366 
	}
}

374 
	$RCHu³
(){

375 
ušt16
 
loÿl_tick
;

377 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”1Stİ
è
loÿl_tick
=3;

378 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”2Stİ
è
loÿl_tick
=3;

381 if(
RCReqWÜd
&
KeyRCReqWÜdHu³Req
è
loÿl_tick
=3;

383 if(
S‹
==
RCS‹Run
||S‹==
RCS‹Hub
){

384 if(
loÿl_tick
){

385 if((*
ouutIOPÜtHu³
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortHupe=(*outputIOPortHupe&0xffff0000)+0x00000001;

388 if((*
ouutIOPÜtHu³
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortHupe&=0xffff0000;

390 if(
loÿl_tick
>0)†ocal_tick--;

393 
	}
}

403 
	$DriveAÎ¿dL’kung
(){

404 if(
RCReqWÜd
&
KeyRCReqWÜdCrossDrive
è
MaxDriveAngË
=
MaxDriveAngËCrossAÎ¿d
;

405 
MaxDriveAngË
=
MaxDriveAngËLªgAÎ¿d
;

407 *
ouutRCS‘DriveSysS³ed
=
Y2V®ue
*
MaxDriveS³ed
;

408 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

409 if(
XV®ue
>0.0){

410 if(*
ouutRCS‘DriveSysAngË
<
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

411 *
ouutRCS‘DriveSysAngË
=
MaxDriveAngË
;

413 if(
XV®ue
<0.0)

415 if(*
ouutRCS‘DriveSysAngË
>-
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

416 *
ouutRCS‘DriveSysAngË
=-
MaxDriveAngË
;

420 *
ouutRCS‘DriveSysAngË
=
XV®ue
*
MaxDriveAngË
;

421 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

422 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeAÎ¿d
;

423 
	}
}

431 
	$DriveVÜd”¿dL’kung
(){

432 
æßt32
 
£tMaxS³ed
;

433 if(
RCReqWÜd
&
KeyRCReqWÜdCrossDrive
){

434 
MaxDriveAngË
=
MaxDriveAngËCrossNoAÎ¿d
;

435 
£tMaxS³ed
=
MaxDriveS³ed
*0.5;

438 
MaxDriveAngË
=
MaxDriveAngËLªgNoAÎ¿d
;

439 
£tMaxS³ed
=
MaxDriveS³ed
;

441 *
ouutRCS‘DriveSysS³ed
=
Y2V®ue
*
£tMaxS³ed
;

442 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

443 if((
RCReqWÜd
&
KeyRCReqWÜdIndDrive
)==0){

444 if(
XV®ue
>0.0){

445 if(*
ouutRCS‘DriveSysAngË
<
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

446 *
ouutRCS‘DriveSysAngË
=
MaxDriveAngË
;

448 if(
XV®ue
<0.0)

450 if(*
ouutRCS‘DriveSysAngË
>-
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

451 *
ouutRCS‘DriveSysAngË
=-
MaxDriveAngË
;

456 *
ouutRCS‘DriveSysAngË
=
XV®ue
*
MaxDriveAngË
;

457 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

458 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeVÜd”¿d
;

459 
	}
}

467 
	$DriveHš‹¼adL’kung
(){

468 
æßt32
 
£tMaxS³ed
;

469 if(
RCReqWÜd
&
KeyRCReqWÜdCrossDrive
){

470 
MaxDriveAngË
=
MaxDriveAngËCrossNoAÎ¿d
;

471 
£tMaxS³ed
=
MaxDriveS³ed
*0.5;

474 
MaxDriveAngË
=
MaxDriveAngËLªgNoAÎ¿d
;

475 
£tMaxS³ed
=
MaxDriveS³ed
;

477 *
ouutRCS‘DriveSysS³ed
=
Y2V®ue
*
£tMaxS³ed
;

478 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

479 if((
RCReqWÜd
&
KeyRCReqWÜdIndDrive
)==0){

480 if(
XV®ue
<0.0){

481 if(*
ouutRCS‘DriveSysAngË
<
MaxDriveAngË
è*ouutRCS‘DriveSysAngË-=
XV®ue
*
OmegaMÙiÚMode
;

482 *
ouutRCS‘DriveSysAngË
=
MaxDriveAngË
;

484 if(
XV®ue
>0.0)

486 if(*
ouutRCS‘DriveSysAngË
>-
MaxDriveAngË
è*ouutRCS‘DriveSysAngË-=
XV®ue
*
OmegaMÙiÚMode
;

487 *
ouutRCS‘DriveSysAngË
=-
MaxDriveAngË
;

492 *
ouutRCS‘DriveSysAngË
=0.0-
XV®ue
*
MaxDriveAngË
;

493 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

494 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeHš‹¼ad
;

495 
	}
}

503 
	$DriveK»bsgªg
(){

504 
æßt32
 
£tMaxS³ed
;

505 if(
RCReqWÜd
&
KeyRCReqWÜdCrossDrive
) {

506 
MaxDriveAngË
=
MaxDriveAngËCrossK»bsgªg
;

507 
£tMaxS³ed
=
MaxDriveS³ed
*0.5;

510 
MaxDriveAngË
=
MaxDriveAngËLªgK»bsgªg
;

511 
£tMaxS³ed
=
MaxDriveS³ed
;

514 *
ouutRCS‘DriveSysS³ed
=
Y2V®ue
*
£tMaxS³ed
;

515 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

516 if((
RCReqWÜd
&
KeyRCReqWÜdIndDrive
)==0){

517 if(
XV®ue
>0.0){

518 if(*
ouutRCS‘DriveSysAngË
<
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

519 *
ouutRCS‘DriveSysAngË
=
MaxDriveAngË
;

521 if(
XV®ue
<0.0)

523 if(*
ouutRCS‘DriveSysAngË
>-
MaxDriveAngË
è*ouutRCS‘DriveSysAngË+=
XV®ue
*
OmegaMÙiÚMode
;

524 *
ouutRCS‘DriveSysAngË
=-
MaxDriveAngË
;

529 *
ouutRCS‘DriveSysAngË
=
XV®ue
*
MaxDriveAngË
;

530 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

531 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeK»bsgªg
;

532 
	}
}

540 
	$DriveP¬k’
(){

541 *
ouutRCS‘DriveSysS³ed
=0.0;

542 *
ouutRCS‘DriveSysAngË
=0.0;

543 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

544 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeP¬k’
;

545 
	}
}

553 
	$DriveRundgªg
(){

554 *
ouutRCS‘DriveSysS³ed
=
Y2V®ue
*
MaxDriveS³ed
*0.5;

555 *
ouutRCS‘DriveSysAngË
=0.0;

556 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=0xffff0fff;

557 *
ouutRCS‘DriveSysCÚŒŞWÜd
+=
KeyRCS‘DriveSysS‹”šgModeRundgªg
;

558 
	}
}

568 
	$DriveAutoDriveR—dy
(){

569 
æßt32
 
£tS³ed
;

570 
£tS³ed
=0.15;

571 
	}
}

579 
	$RCHubSy¡em
(){

580 
ušt32
 
tmpV®ue
;

581 
ušt32
 
S‹pInP”ûÁUp
=0x00020000;

582 
ušt32
 
S‹pInP”ûÁDown
=0x00020000;

583 
ušt8
 
£tDeçuÉHeight
=40;

584 
ušt8
 
E¼Height
;

585 
ušt16
 
Loÿl_tick
;

588 
tmpV®ue
=*
ouutRCS‘HubSysCÚŒŞWÜd
>>16;

589 if(
S‹
==
RCS‹Hub
){

590 if(
Y1V®ue
==1){

591 if((*
šputHubsy¡emStus
&
KeyRCG‘HubSysFromSÏveOÆySšk’
)==0){

592 if((
Loÿl_tick
==0)&&(*
šputHubsy¡emHeight
<125)è*
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysHeb’
;

593 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

594 if((*
šputHubsy¡emStus
&
KeyRCG‘HubSysFromSÏveNoAdd
)==0){

595 if(
tmpV®ue
<100è*
ouutRCS‘HubSysCÚŒŞWÜd
+=
S‹pInP”ûÁUp
;

598 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

599 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

601 if(
Y1V®ue
==-1){

602 if((
Loÿl_tick
==0)&&(*
šputHubsy¡emHeight
>10)è*
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysSšk’
;

603 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

604 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

605 if((*
šputHubsy¡emStus
&
KeyRCG‘HubSysFromSÏveNoAdd
)==0){

606 if(
tmpV®ue
>0è*
ouutRCS‘HubSysCÚŒŞWÜd
-=
S‹pInP”ûÁDown
;

610 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

611 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

612 
Loÿl_tick
=5;

615 if(
S‹
==
RCS‹AutoDrive
){

616 if(*
šputHubsy¡emHeight
>
£tDeçuÉHeight
){

617 
E¼Height
=*
šputHubsy¡emHeight
-
£tDeçuÉHeight
;

618 if(
E¼Height
>2){

619 *
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysAutoIn™
;

620 *
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysSšk’
;

621 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

622 *
ouutRCS‘HubSysCÚŒŞWÜd
&=0x0000ffff;

623 *
ouutRCS‘HubSysCÚŒŞWÜd
+=(
£tDeçuÉHeight
<<16);

626 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysAutoIn™
;

627 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

628 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

632 
E¼Height
=
£tDeçuÉHeight
-*
šputHubsy¡emHeight
;

633 if(
E¼Height
>2){

634 *
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysAutoIn™
;

635 *
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysHeb’
;

636 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

637 *
ouutRCS‘HubSysCÚŒŞWÜd
&=0x0000ffff;

638 *
ouutRCS‘HubSysCÚŒŞWÜd
+=(
£tDeçuÉHeight
<<16);

641 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysAutoIn™
;

642 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysSšk’
;

643 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysHeb’
;

647 if(
Loÿl_tick
>0) Local_tick--;

648 
	}
}

655 
	$RCDriveS‹”šg
(){

656 
	`RemÙeCÚŒŞG‘Joy¡ick
();

657 if(
S‹
==
RCS‹Run
){

658 if((*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCS‘DriveSysTwoDim’siÚDrive
)==0){

660 if(*
šputRemÙeCÚŒŞDig™®In
&
AÎ¿dL’kung
){

661 if(
DriveMode
!=
KeyDriveModeAÎ¿d
){

662 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeAÎ¿d
;

664 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

665 if((
ŞdDig™®In
&
AÎ¿dL’kung
)==0è*
ouutRCS‘DriveSysAngË
=0.0;

669 if(*
šputRemÙeCÚŒŞDig™®In
&
VÜd”¿dL’kung
){

670 if(
DriveMode
!=
KeyDriveModeVÜd”¿d
){

671 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeVÜd”¿d
;

673 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

674 if((
ŞdDig™®In
&
VÜd”¿dL’kung
)==0è*
ouutRCS‘DriveSysAngË
=0.0;

677 if(*
šputRemÙeCÚŒŞDig™®In
&
Hš‹¼adL’kung
){

678 if(
DriveMode
!=
KeyDriveModeHš‹¼ad
){

679 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeHš‹¼ad
;

681 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

682 if((
ŞdDig™®In
&
Hš‹¼adL’kung
)==0è*
ouutRCS‘DriveSysAngË
=0.0;

685 if(*
šputRemÙeCÚŒŞDig™®In
&
K»bsgªg
){

686 if(
DriveMode
!=
KeyDriveModeK»bsgªg
){

687 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeK»bsgªg
;

689 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
){

690 if((
ŞdDig™®In
&
K»bsgªg
)==0è*
ouutRCS‘DriveSysAngË
=0.0;

693 if(*
šputRemÙeCÚŒŞDig™®In
&
Rundgªg
){

694 if(
DriveMode
!=
KeyDriveModeRundgªg
){

695 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeRundgªg
;

698 if(*
šputRemÙeCÚŒŞDig™®In
&
P¬k’
){

699 if(
DriveMode
!=
KeyDriveModeP¬k
){

700 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
è
DriveMode
=
KeyDriveModeP¬k
;

703 
DriveMode
){

704 
KeyDriveModeAÎ¿d
:

705 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeAÎ¿d
;

706 
	`DriveAÎ¿dL’kung
();

708 
KeyDriveModeVÜd”¿d
:

709 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeVÜd”¿d
;

710 
	`DriveVÜd”¿dL’kung
();

712 
KeyDriveModeHš‹¼ad
:

713 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeHš‹¼ad
;

714 
	`DriveHš‹¼adL’kung
();

716 
KeyDriveModeK»bsgªg
:

717 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeK»bsgªg
;

718 
	`DriveK»bsgªg
();

720 
KeyDriveModeRundgªg
:

721 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeRundgªg
;

722 
	`DriveRundgªg
();

724 
KeyDriveModeP¬k
:

725 *
ouutRCToSÏveS‹”šgMode
=
KeyRCDi¥ÏyS‹”šgModeP¬k
;

726 
	`DriveP¬k’
();

729 if(
RCReqWÜd
&
KeyRCReqWÜdZ”oS‘
){

730 *
ouutRCS‘DriveSysAngË
=0.0;

734 
	}
}

741 
	$RCAutoDrive
(){

742 if(
S‹
==
RCS‹AutoDrive
){

744 if((*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysAutoIn™
)==0){

745 if((*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCG‘AutoDriveK1BªdFšd
)&&(*ouutRCS‘AutoDriveCÚŒŞWÜd&
KeyRCG‘AutoDriveK2BªdFšd
)){

746 if(
Y2V®ue
>0.0){

747 *
ouutRCS‘AutoDriveCÚŒŞWÜd
|=
KeyRCS‘AutoDriveFÜw¬dDrive
;

748 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveBackw¬dDrive
;

750 if(
Y2V®ue
<0.0){

751 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveFÜw¬dDrive
;

752 *
ouutRCS‘AutoDriveCÚŒŞWÜd
|=
KeyRCS‘AutoDriveBackw¬dDrive
;

755 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveFÜw¬dDrive
;

756 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveBackw¬dDrive
;

758 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysTwoDim’siÚDrive
;

761 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysTwoDim’siÚDrive
;

766 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveFÜw¬dDrive
;

767 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveBackw¬dDrive
;

768 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysTwoDim’siÚDrive
;

771 
	}
}

779 
	$RCLam³Blšk
(
ušt16
 
Ú
){

780 
sšt16
 
BlškTick
;

781 if(
Ú
){

782 if(
BlškTick
>-5) BlinkTick--;

783 
BlškTick
=7;

786 
BlškTick
=0;

788 if(
BlškTick
>0){

789 if((*
ouutIOPÜtLam³11
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe11=(*outputIOPortLampe11&0xffff0000)+0x00000001;

790 if((*
ouutIOPÜtLam³12
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe12=(*outputIOPortLampe12&0xffff0000)+0x00000001;

791 if((*
ouutIOPÜtLam³21
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe21=(*outputIOPortLampe21&0xffff0000)+0x00000001;

792 if((*
ouutIOPÜtLam³22
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe22=(*outputIOPortLampe22&0xffff0000)+0x00000001;

795 if((*
ouutIOPÜtLam³11
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe11&=0xffff0000;

796 if((*
ouutIOPÜtLam³12
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe12&=0xffff0000;

797 if((*
ouutIOPÜtLam³21
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe21&=0xffff0000;

798 if((*
ouutIOPÜtLam³22
&
RCPšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortLampe22&=0xffff0000;

800 
	}
}

808 
	$RCP¬am‘”Upd©e
(){

809 
ušt16
 
upd©eæag
;

811 if(
upd©eæag
==0){

812 *
ouutRCToSÏveDriveSysAngË11
=(
sšt8
)(*
šputRCG‘DriveModuË11AngË
);

813 *
ouutRCToSÏveDriveSysAngË12
=(
sšt8
)(*
šputRCG‘DriveModuË12AngË
);

814 *
ouutRCToSÏveDriveSysAngË21
=(
sšt8
)(*
šputRCG‘DriveModuË21AngË
);

815 *
ouutRCToSÏveDriveSysAngË22
=(
sšt8
)(*
šputRCG‘DriveModuË22AngË
);

816 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysCrossDriveS‘
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusCrossDrive
;

817 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusCrossDrive
;

818 if(*
šputRemÙeCÚŒŞDig™®In
&
P¬k’
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusP¬k
;

819 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusP¬k
;

820 if(
RCReqWÜd
&
KeyRCReqWÜdZ”oS‘
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusZ”oS‘
;

821 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusZ”oS‘
;

822 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyIsE¼Ü
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusIsE¼Ü
;

823 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusIsE¼Ü
;

824 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyNÙAusStus
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusNÙAus
;

825 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusNÙAus
;

826 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyLadungStus
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusLadung
;

827 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusLadung
;

828 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveFÜw¬dDrive
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusDriveFÜw¬d
;

829 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusDriveFÜw¬d
;

830 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveBackw¬dDrive
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusDriveBackw¬d
;

831 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusDriveBackw¬d
;

832 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCG‘AutoDriveK1BªdFšd
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusK1BªdFšd
;

833 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusK1BªdFšd
;

834 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCG‘AutoDriveK2BªdFšd
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusK2BªdFšd
;

835 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusK2BªdFšd
;

836 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysAutoIn™
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusAutoIn™
;

837 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusAutoIn™
;

838 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCG‘AutoDriveInStİZÚe
è*
ouutRCToSÏveStusAuto
|=
KeyRCDi¥ÏyAutoStusAutoStİZÚe
;

839 *
ouutRCToSÏveStusAuto
&=~
KeyRCDi¥ÏyAutoStusAutoStİZÚe
;

840 if(
RCReqWÜd
&
KeyRCReqWÜdDriveS‹”šgMode
è*
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusIsS‹”šgMÙiÚ
;

841 *
ouutRCToSÏveStusMES
&=~
KeyRCDi¥ÏyStusIsS‹”šgMÙiÚ
;

842 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsCrossSw™ch
è*
ouutRCToSÏveStusExtMES
|=
KeyRCDi¥ÏyStusExtCrossIsSw™ch
;

843 *
ouutRCToSÏveStusExtMES
&=~
KeyRCDi¥ÏyStusExtCrossIsSw™ch
;

845 
upd©eæag
++;

846 if(
upd©eæag
==1) updateflag=0;

848 if((
S‹
==
RCS‹Run
)||(S‹==
RCS‹AutoDrive
)){

849 if((*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsStİ
)==0è
	`RCLam³Blšk
(
X_ON
);

850 
	`RCLam³Blšk
(
X_OFF
);

852 if(
S‹
==
RCS‹Hub
){

853 if((*
šputHubsy¡emStus
&
KeyRCG‘HubSysFromSÏveIsStİ
)==0è
	`RCLam³Blšk
(
X_ON
);

854 
	`RCLam³Blšk
(
X_OFF
);

856 
	`RCLam³Blšk
(
X_OFF
);

857 
	}
}

866 
	$La£rSÿÂ”Mªage
(){

867 if(
S‹
==
RCS‹Run
){

868 if(
DriveMode
!=
KeyDriveModeRundgªg
){

869 if(
Y2V®ue
==0.0){

870 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

871 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

873 if(
Y2V®ue
>0.0){

874 if(
RCReqWÜd
&
KeyRCReqWÜdLSD—ktiv
è*
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

875 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

876 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

879 if(
RCReqWÜd
&
KeyRCReqWÜdLSD—ktiv
è*
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

880 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

881 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

885 if(
Y2V®ue
==0.0){

886 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

887 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

890 if(
RCReqWÜd
&
KeyRCReqWÜdLSD—ktiv
){

891 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

892 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

895 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

896 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

901 if(
S‹
==
RCS‹Hub
){

902 if(
Y1V®ue
==0.0){

903 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

904 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

907 if(
RCReqWÜd
&
KeyRCReqWÜdLSD—ktiv
){

908 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

909 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

912 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

913 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

917 if(
S‹
==
RCS‹AutoDrive
){

918 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysAutoIn™
){

919 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

920 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

923 if(
Y2V®ue
>0.0){

924 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

925 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

927 if(
Y2V®ue
<0.0){

928 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

929 *
ouutRCS‘SaãtyCÚŒŞWÜd
&=~
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

932 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

933 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

938 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
;

939 *
ouutRCS‘SaãtyCÚŒŞWÜd
|=
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
;

943 
	}
}

954 
	$Task_RemÙeCÚŒŞ
(* 
¬gv
){

955 
¬gv
=argv;

956 
ušt32
 
u32_Ev’ts
;

957 
ušt8
 
ŞdS‹
;

958 
ušt8
 
æag
;

960 
	`x_os_£t_ev’t_mask
(
Ev’t_RC
);

961 
akt_·ge
=0;

962 
tick
=0;

963 
ŞdS‹
=
S‹
;

965 
TRUE
){

966 
	`x_os_wa™_fÜ_ev’ts
();

967 
u32_Ev’ts
 = 
	`x_os_g‘_ev’ts
();

968 if((
u32_Ev’ts
&
Ev’t_RC
)!=0){

969 if(
S‹
==
RCS‹In™
){

970 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹In™
;

971 if((
RCAùu®Time
-
timeSmpIn™Fšish
)>10000){

972 
S‹
=
RCS‹R—dy
;

973 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

977 if(
S‹
==
RCS‹R—dy
){

978 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹R—dy
;

980 if(
RCReqWÜd
&
KeyRCReqWÜdS¹
){

981 
RCReqWÜd
&=~
KeyRCReqWÜdS¹
;

982 if(
RCReqWÜd
&
KeyRCReqWÜdAutoHªd
){

983 
S‹
=
RCS‹AutoDrive
;

984 *
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysAutoIn™
;

986 
S‹
=
RCS‹Run
;

987 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysS¹
;

988 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1001 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsEÇbË
è*ouutRCS‘DriveSysCÚŒŞWÜd|=
KeyRCS‘DriveSysDi§bËReq
;

1002 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
) *outputRCSetHubSysControlWord&=~KeyRCSetHubSysEnable;

1003 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveEÇbË
) *outputRCSetAutoDriveControlWord&=~KeyRCSetAutoDriveEnable;

1005 if(
S‹
==
RCS‹Run
){

1006 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹Run
;

1008 if(
RCReqWÜd
&
KeyRCReqWÜdRe£t
){

1009 
RCReqWÜd
&=~
KeyRCReqWÜdRe£t
;

1010 
timeSmpIn™Fšish
=
RCAùu®Time
;

1011 
S‹
=
RCS‹In™
;

1012 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1013 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysRe£t
;

1016 if(
RCReqWÜd
&
KeyRCReqWÜdHubSysAktiv
){

1017 
ŞdS‹
=
RCS‹Run
;

1018 
S‹
=
RCS‹Hub
;

1019 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysCrossDriveS‘
)

1020 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysLªgDriveReq
;

1021 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1024 
æag
=0;

1025 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyNÙAusStus
è
æag
=1;

1026 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyLadungStus
è
æag
=1;

1027 if((*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSchutzR—lis
)==0è
æag
=1;

1028 if(
æag
){

1029 
ŞdS‹
=
RCS‹Run
;

1030 
æag
=0;

1031 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1032 
S‹
=
RCS‹NÙF®l
;

1035 if((*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyDriveSysStİ
)==0){

1036 if((*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsEÇbË
)==0){

1037 if(
tick
==0){

1038 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysEÇbËReq
;

1039 
tick
=50;

1043 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysDi§bËReq
;

1044 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
) *outputRCSetHubSysControlWord&=~KeyRCSetHubSysEnable;

1045 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveEÇbË
) *outputRCSetAutoDriveControlWord&=~KeyRCSetAutoDriveEnable;

1046 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysNoB¿ke
;

1048 if(
S‹
==
RCS‹Hub
){

1049 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹Hub
;

1051 if(
RCReqWÜd
&
KeyRCReqWÜdRe£t
){

1052 
RCReqWÜd
&=~
KeyRCReqWÜdRe£t
;

1053 
timeSmpIn™Fšish
=
RCAùu®Time
;

1054 
S‹
=
RCS‹In™
;

1055 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1056 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysEÇbË
;

1057 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysRe£t
;

1058 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysNoB¿ke
;

1061 if((
RCReqWÜd
&
KeyRCReqWÜdHubSysAktiv
)==0){

1062 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1063 
S‹
=
RCS‹Run
;

1066 
æag
=0;

1067 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyNÙAusStus
è
æag
=1;

1068 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyLadungStus
è
æag
=1;

1069 if((*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSchutzR—lis
)==0è
æag
=1;

1070 if(
æag
){

1071 
ŞdS‹
=
RCS‹Hub
;

1072 
æag
=0;

1073 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1074 
S‹
=
RCS‹NÙF®l
;

1077 if((*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysCrossDriveS‘
)==0){

1078 if((*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyHubSysStİ
)==0è*
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysEÇbË
;

1079 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysEÇbË
;

1080 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsEÇbË
è*ouutRCS‘DriveSysCÚŒŞWÜd|=
KeyRCS‘DriveSysDi§bËReq
;

1081 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveEÇbË
) *outputRCSetAutoDriveControlWord&=~KeyRCSetAutoDriveEnable;

1082 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysNoB¿ke
;

1085 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
) *outputRCSetHubSysControlWord&=~KeyRCSetHubSysEnable;

1086 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveEÇbË
) *outputRCSetAutoDriveControlWord&=~KeyRCSetAutoDriveEnable;

1087 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysNoB¿ke
;

1091 if(
S‹
==
RCS‹AutoDrive
){

1092 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹Auto
;

1094 if(
RCReqWÜd
&
KeyRCReqWÜdRe£t
){

1095 
RCReqWÜd
&=~
KeyRCReqWÜdRe£t
;

1096 
timeSmpIn™Fšish
=
RCAùu®Time
;

1097 
S‹
=
RCS‹In™
;

1098 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1099 *
ouutRCS‘HubSysCÚŒŞWÜd
&=~
KeyRCS‘HubSysAutoIn™
;

1100 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveEÇbË
;

1101 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysRe£t
;

1102 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysNoB¿ke
;

1105 
æag
=0;

1106 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyNÙAusStus
è
æag
=1;

1107 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyLadungStus
è
æag
=1;

1108 if((*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSchutzR—lis
)==0è
æag
=1;

1109 if(
æag
){

1110 
ŞdS‹
=
RCS‹AutoDrive
;

1111 
æag
=0;

1112 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1113 
S‹
=
RCS‹NÙF®l
;

1116 if((*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyAutoDriveStİ
)==0è*
ouutRCS‘AutoDriveCÚŒŞWÜd
|=
KeyRCS‘AutoDriveEÇbË
;

1117 *
ouutRCS‘AutoDriveCÚŒŞWÜd
&=~
KeyRCS‘AutoDriveEÇbË
;

1119 if((*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysAutoIn™
)==0){

1120 if((*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyDriveSysStİ
)==0){

1121 if((*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsEÇbË
)==0){

1122 if(
tick
==0){

1123 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysEÇbËReq
;

1124 
tick
=50;

1128 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysDi§bËReq
;

1129 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
) *outputRCSetHubSysControlWord&=~KeyRCSetHubSysEnable;

1130 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysNoB¿ke
;

1133 if((*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyHubSysStİ
)==0è*
ouutRCS‘HubSysCÚŒŞWÜd
|=
KeyRCS‘HubSysEÇbË
;

1134 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysDi§bËReq
;

1135 *
ouutRCS‘DriveSysCÚŒŞWÜd
|=
KeyRCS‘DriveSysNoB¿ke
;

1138 if(
S‹
==
RCS‹NÙF®l
){

1139 *
ouutRCToSÏvePageS‹
=
KeyRCDi¥ÏyPageS‹NÙF®l
;

1141 
æag
=0;

1142 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyNÙAusStus
è
æag
=1;

1143 if(*
ouutRCS‘SaãtyCÚŒŞWÜd
&
KeyRCG‘SaãtyLadungStus
è
æag
=1;

1144 if((*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSchutzR—lis
)==0è
æag
=1;

1145 if(
æag
==0){

1146 
æag
=0;

1147 *
ouutRCToSÏveStusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1148 
S‹
=
ŞdS‹
;

1151 if(*
ouutRCS‘DriveSysCÚŒŞWÜd
&
KeyRCG‘DriveSysIsEÇbË
è*ouutRCS‘DriveSysCÚŒŞWÜd|=
KeyRCS‘DriveSysDi§bËReq
;

1152 if(*
ouutRCS‘HubSysCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
) *outputRCSetHubSysControlWord&=~KeyRCSetHubSysEnable;

1153 if(*
ouutRCS‘AutoDriveCÚŒŞWÜd
&
KeyRCS‘AutoDriveEÇbË
) *outputRCSetAutoDriveControlWord&=~KeyRCSetAutoDriveEnable;

1154 *
ouutRCS‘DriveSysCÚŒŞWÜd
&=~
KeyRCS‘DriveSysNoB¿ke
;

1156 
	`G‘Sw™chV®ue
();

1157 
	`G‘Bu‰ÚV®ue
();

1158 
	`RCDriveS‹”šg
();

1159 
	`RCHubSy¡em
();

1160 
	`RCAutoDrive
();

1161 
	`La£rSÿÂ”Mªage
();

1162 
	`RCHu³
();

1164 
ŞdDig™®In
=*
šputRemÙeCÚŒŞDig™®In
;

1165 
	`RCP¬am‘”Upd©e
();

1166 if(
tick
>0)ick--;

1169 
	}
}

1177 
	$In™RemÙeCÚŒŞ
(){

1178 
DriveMode
=
P¬k’
;

1179 
timeSmpIn™Fšish
=
	`x_sys_g‘_time_ms
();

1180 
S‹
=
RCS‹In™
;

1182 
	`In™IÁ”çûRemÙeCÚŒŞ
();

1183 
	`x_os_š¡®l_sk
(
PrioRemÙeCÚŒŞ
, 0, 0, 
Task_RemÙeCÚŒŞ
, 128);

1184 
	}
}

1193 
	$TaskRemÙeCÚŒŞAwake
(){

1194 
RCAùu®Time
=
	`x_sys_g‘_time_ms
();

1196 if((
RCAùu®Time
-
timeSmpRC
)>2000){

1197 
timeSmpRC
=
RCAùu®Time
;

1198 *
ouutRemÙeCÚŒŞNMT
=
NODE_START
;

1199 *
ouutRemÙeCÚŒŞNMT
=(*outputRemoteControlNMT<<8)+0x0001;

1202 if(*
šputRemÙeCÚŒŞToggË
!=
OldToggËBy‹
) {

1203 
RCtoggËcouÁ”
++;

1204 
OldToggËBy‹
=*
šputRemÙeCÚŒŞToggË
;

1206 if(
RCtoggËcouÁ”
>=
MaxRCToggËCouÁ”
){

1207 
	`x_os_£t_ev’ts
(
Ev’t_RC
);

1208 
RCtoggËcouÁ”
=0;

1210 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControl.h

1 #iâdeà
_REMOTECONTROL_H


2 
	#_REMOTECONTROL_H


	)

4 
	~"x_sys.h
"

5 
	~"x_os.h
"

6 
	~"x_uti.h
"

7 
	~"DeviûOD.h
"

8 
	~"MESCÚfig.h
"

9 
	~"AµCÚfig.h
"

10 
	~"m©h.h
"

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlData.c

1 
	~"RemÙeCÚŒŞD©a.h
"

8 
ušt8
 
	gS‹
;

11 
ušt32
 
	gRCAùu®Time
;

14 
ušt16
 
	gRCReqWÜd
;

17 
ušt16
 
	gakt_·ge
;

24 
ušt32
 *
	gšputRCG‘SÏveSaãtyCÚŒŞWÜd
;

27 
ušt32
 *
	gšputRCG‘AutoDriveCÚŒŞWÜd
;

30 
ušt8
 *
	gšputRemÙeCÚŒŞXV¬
;

31 
ušt8
 *
	gšputRemÙeCÚŒŞY1V¬
;

32 
ušt8
 *
	gšputRemÙeCÚŒŞY2V¬
;

33 
ušt8
 *
	gšputRemÙeCÚŒŞZV¬
;

34 
ušt8
 *
	gšputRemÙeCÚŒŞS³edPÙi
;

35 
ušt8
 *
	gšputRemÙeCÚŒŞToggË
;

36 
ušt32
 *
	gšputRemÙeCÚŒŞDig™®In
;

39 
sšt32
 *
	gšputRCJoy¡ickXFaùA
;

40 
sšt32
 *
	gšputRCJoy¡ickXFaùB
;

41 
sšt32
 *
	gšputRCJoy¡ickXFaùC
;

42 
sšt32
 *
	gšputRCJoy¡ickXFaùD
;

46 
ušt16
 *
	gšputIOPÜtHªd
;

47 
ušt16
 *
	gšputIOPÜtAutom©ik
;

50 
sšt32
 *
	gšputRCG‘DriveModuË11AngË
;

51 
sšt32
 *
	gšputRCG‘DriveModuË12AngË
;

52 
sšt32
 *
	gšputRCG‘DriveModuË21AngË
;

53 
sšt32
 *
	gšputRCG‘DriveModuË22AngË
;

56 
sšt16
 *
	gšputRCG‘AutoDriveY1V®ue
;

57 
sšt16
 *
	gšputRCG‘AutoDriveY2V®ue
;

59 
sšt16
 *
	gšputRCG‘AutoDriveXV®ue
;

62 
ušt8
 *
	gšputHubsy¡emHeight
;

65 
ušt8
 *
	gšputHubsy¡emStus
;

72 
ušt32
 *
	gouutRCS‘DriveSysCÚŒŞWÜd
;

75 
ušt32
 *
	gouutRCS‘HubSysCÚŒŞWÜd
;

78 
ušt32
 *
	gouutRCS‘SaãtyCÚŒŞWÜd
;

81 
ušt32
 *
	gouutRCS‘AutoDriveCÚŒŞWÜd
;

84 
æßt32
 *
	gouutRCS‘DriveSysS³ed
;

85 
æßt32
 *
	gouutRCS‘DriveSysAngË
;

88 
ušt32
 *
	gouutIOPÜtHu³
;

91 
ušt32
 *
	gouutIOPÜtLam³11
;

92 
ušt32
 *
	gouutIOPÜtLam³12
;

93 
ušt32
 *
	gouutIOPÜtLam³21
;

94 
ušt32
 *
	gouutIOPÜtLam³22
;

97 
sšt8
 *
	gouutRCToSÏveDriveSysAngË11
;

98 
sšt8
 *
	gouutRCToSÏveDriveSysAngË12
;

99 
sšt8
 *
	gouutRCToSÏveDriveSysAngË21
;

100 
sšt8
 *
	gouutRCToSÏveDriveSysAngË22
;

103 
ušt8
 *
	gouutRCToSÏveStusMES
;

104 
ušt8
 *
	gouutRCToSÏveStusExtMES
;

105 
ušt8
 *
	gouutRCToSÏvePageS‹
;

106 
ušt8
 *
	gouutRCToSÏveStusAuto
;

107 
ušt8
 *
	gouutRCToSÏveS‹”šgMode
;

110 
ušt16
 *
	gouutRemÙeCÚŒŞNMT
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlData.h

1 #iâdeà
_REMOTECONTROLDATA_H


2 
	#_REMOTECONTROLDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	#RemÙeCÚŒŞSchutzR—lis
 0x00000100

	)

7 
	#RemÙeCÚŒŞBu‰ÚRe£t
 0x00000008

	)

8 
	#RemÙeCÚŒŞBu‰ÚZ”oS‘
 0x00000020

	)

9 
	#RemÙeCÚŒŞBu‰ÚS¹
 0x00000002

	)

10 
	#RemÙeCÚŒŞBu‰ÚHu³
 0x00000010

	)

11 
	#RemÙeCÚŒŞBu‰ÚAutoB‘r›b
 0x00000040

	)

12 
	#RemÙeCÚŒŞBu‰ÚNÙAus
 0x00000001

	)

14 
	#RemÙeCÚŒŞSw™chTÙmªn
 0x00000080

	)

15 
	#RemÙeCÚŒŞSw™chJoy¡ickMove
 0x00000004

	)

16 
	#RemÙeCÚŒŞSw™chIndDrive
 0x00002000

	)

17 
	#RemÙeCÚŒŞSw™chNoIndDrive
 0x00004000

	)

18 
	#RemÙeCÚŒŞSw™chCrossDrive
 0x00008000

	)

19 
	#RemÙeCÚŒŞSw™chLÚgDrive
 0x00010000

	)

20 
	#RemÙeCÚŒŞSw™chE¼ÜQu™
 0x00040000

	)

21 
	#RemÙeCÚŒŞSw™chDriveS‹”šgMode
 0x00080000

	)

22 
	#RemÙeCÚŒŞSw™chHubSysAktiv
 0x00100000

	)

23 
	#RemÙeCÚŒŞSw™chLa£rsÿÂ”D—ktiv
 0x00200000

	)

25 
	#RemÙeCÚŒŞM’uTa¡”Leá
 0x00000800

	)

26 
	#RemÙeCÚŒŞM’uTa¡”Right
 0x00000400

	)

27 
	#RemÙeCÚŒŞM’uTa¡”Push
 0x00001000

	)

29 
	#KeyRCS‘DriveSysS¹
 0x00000001

	)

30 
	#KeyRCS‘DriveSysRe£t
 0x00000002

	)

31 
	#KeyRCS‘DriveSysTe¡Mode
 0x00000020

	)

32 
	#KeyRCS‘DriveSysTwoDim’siÚDrive
 0x00000040

	)

33 
	#KeyRCS‘DriveSysCrossDriveReq
 0x00000080

	)

34 
	#KeyRCG‘DriveSysCrossDriveS‘
 0x00000200

	)

35 
	#KeyRCG‘DriveSysIsCrossSw™ch
 0x00200000

	)

36 
	#KeyRCS‘DriveSysMÙiÚReq
 0x00000400

	)

37 
	#KeyRCS‘DriveSysLªgDriveReq
 0x00000100

	)

38 
	#KeyRCS‘DriveSysDi§bËReq
 0x00000800

	)

39 
	#KeyRCS‘DriveSysEÇbËReq
 0x00010000

	)

40 
	#KeyRCS‘DriveSysZ”oS‘
 0x00040000

	)

41 
	#KeyRCS‘DriveSysNoB¿ke
 0x00100000

	)

42 
	#KeyRCG‘DriveSysIsStİ
 0x00020000

	)

43 
	#KeyRCG‘DriveSysIsEÇbË
 0x00000008

	)

46 
	#KeyRCG‘HubSy¡emNÜm®Mode
 0x00000000

	)

47 
	#KeyRCG‘HubSy¡emTe¡Mode
 0x00000001

	)

48 
	#KeyRCS‘HubSysEÇbË
 0x00000004

	)

49 
	#KeyRCS‘HubSysHeb’
 0x00000100

	)

50 
	#KeyRCS‘HubSysSšk’
 0x00000200

	)

51 
	#KeyRCS‘HubSysAutoIn™
 0x00000400

	)

53 
	#KeyRCG‘HubSysFromSÏveIsStİ
 0x01

	)

54 
	#KeyRCG‘HubSysFromSÏveOÆySšk’
 0x02

	)

55 
	#KeyRCG‘HubSysFromSÏveNoAdd
 0x04

	)

57 
	#KeyRCS‘AutoDriveEÇbË
 0x00000001

	)

58 
	#KeyRCG‘AutoDriveInStİZÚe
 0x00000002

	)

59 
	#KeyRCS‘AutoDriveFÜw¬dDrive
 0x00000004

	)

60 
	#KeyRCS‘AutoDriveBackw¬dDrive
 0x00000008

	)

61 
	#KeyRCG‘AutoDriveK1BªdFšd
 0x00000010

	)

62 
	#KeyRCG‘AutoDriveK2BªdFšd
 0x00000020

	)

63 
	#KeyRCS‘AutoDriveAutoQu™Req
 0x00000080

	)

64 
	#KeyRCS‘AutoDriveHu³Req
 0x00000100

	)

65 
	#KeyRCG‘AutoDriveInPos
 0x00000200

	)

67 
	#KeyRCG‘SaãtyIsE¼Ü
 0x00000001

	)

68 
	#KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
 0x00000002

	)

69 
	#KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
 0x00001000

	)

70 
	#KeyRCS‘SaãtySysRCNoMÙiÚ
 0x00000004

	)

71 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1W¬n
 0x00000008

	)

72 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1Stİ
 0x00000010

	)

73 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2W¬n
 0x00000020

	)

74 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2Stİ
 0x00000040

	)

75 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1Slow
 0x00000400

	)

76 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2Slow
 0x00000800

	)

77 
	#KeyRCG‘SaãtyDriveSysStİ
 0x00000080

	)

78 
	#KeyRCG‘SaãtyHubSysStİ
 0x00000100

	)

79 
	#KeyRCG‘SaãtyAutoDriveStİ
 0x00000200

	)

80 
	#KeyRCG‘SaãtyNÙAusStus
 0x00002000

	)

81 
	#KeyRCG‘SaãtyLadungStus
 0x00004000

	)

83 
	#KeyRCS‘DriveSysS‹”šgModeP¬k’
 0x00001000

	)

84 
	#KeyRCS‘DriveSysS‹”šgModeVÜd”¿d
 0x00002000

	)

85 
	#KeyRCS‘DriveSysS‹”šgModeHš‹¼ad
 0x00003000

	)

86 
	#KeyRCS‘DriveSysS‹”šgModeAÎ¿d
 0x00004000

	)

87 
	#KeyRCS‘DriveSysS‹”šgModeK»bsgªg
 0x00005000

	)

88 
	#KeyRCS‘DriveSysS‹”šgModeRundgªg
 0x00006000

	)

89 
	#KeyRCS‘DriveSysS‹”šgModeAutoR—dy
 0x00007000

	)

91 
	#KeyRCReqWÜdS¹
 0x0001

	)

92 
	#KeyRCReqWÜdRe£t
 0x0002

	)

93 
	#KeyRCReqWÜdZ”oS‘
 0x0004

	)

94 
	#KeyRCReqWÜdAutoHªd
 0x0008

	)

95 
	#KeyRCReqWÜdMeunTa¡”Push
 0x0010

	)

96 
	#KeyRCReqWÜdMeunTa¡”Leá
 0x0020

	)

97 
	#KeyRCReqWÜdMeunTa¡”Right
 0x0040

	)

98 
	#KeyRCReqWÜdCrossDrive
 0x0080

	)

99 
	#KeyRCReqWÜdIndDrive
 0x0100

	)

100 
	#KeyRCReqWÜdDriveS‹”šgMode
 0x0200

	)

101 
	#KeyRCReqWÜdHubSysAktiv
 0x0400

	)

102 
	#KeyRCReqWÜdHu³Req
 0x0800

	)

103 
	#KeyRCReqWÜdLSD—ktiv
 0x1000

	)

106 
	#KeyRCDi¥ÏyStusCrossDrive
 0x01

	)

107 
	#KeyRCDi¥ÏyStusZ”oS‘
 0x02

	)

108 
	#KeyRCDi¥ÏyStusP¬k
 0x04

	)

109 
	#KeyRCDi¥ÏyStusPageUpd©e
 0x08

	)

110 
	#KeyRCDi¥ÏyStusIsE¼Ü
 0x10

	)

111 
	#KeyRCDi¥ÏyStusIsS‹”šgMÙiÚ
 0x20

	)

112 
	#KeyRCDi¥ÏyStusNÙAus
 0x40

	)

113 
	#KeyRCDi¥ÏyStusLadung
 0x80

	)

115 
	#KeyRCDi¥ÏyStusExtCrossIsSw™ch
 0x01

	)

117 
	#KeyRCDi¥ÏyAutoStusDriveFÜw¬d
 0x01

	)

118 
	#KeyRCDi¥ÏyAutoStusDriveBackw¬d
 0x02

	)

119 
	#KeyRCDi¥ÏyAutoStusK1BªdFšd
 0x04

	)

120 
	#KeyRCDi¥ÏyAutoStusK2BªdFšd
 0x08

	)

121 
	#KeyRCDi¥ÏyAutoStusAutoIn™
 0x10

	)

122 
	#KeyRCDi¥ÏyAutoStusAutoStİZÚe
 0x20

	)

124 
	#KeyRCDi¥ÏyPageS‹In™
 0x00

	)

125 
	#KeyRCDi¥ÏyPageS‹R—dy
 0x01

	)

126 
	#KeyRCDi¥ÏyPageS‹Run
 0x02

	)

127 
	#KeyRCDi¥ÏyPageS‹Hub
 0x03

	)

128 
	#KeyRCDi¥ÏyPageS‹Auto
 0x04

	)

129 
	#KeyRCDi¥ÏyPageS‹NÙF®l
 0x05

	)

131 
	#KeyRCDi¥ÏyS‹”šgModeP¬k
 0x00

	)

132 
	#KeyRCDi¥ÏyS‹”šgModeVÜd”¿d
 0x01

	)

133 
	#KeyRCDi¥ÏyS‹”šgModeHš‹¼ad
 0x02

	)

134 
	#KeyRCDi¥ÏyS‹”šgModeK»bsgªg
 0x03

	)

135 
	#KeyRCDi¥ÏyS‹”šgModeRundgªg
 0x04

	)

136 
	#KeyRCDi¥ÏyS‹”šgModeAÎ¿d
 0x05

	)

139 
	#P¬k’
 0x00400000

	)

140 
	#AÎ¿dL’kung
 0x02000000

	)

141 
	#VÜd”¿dL’kung
 0x00800000

	)

142 
	#Hš‹¼adL’kung
 0x01000000

	)

143 
	#K»bsgªg
 0x04000000

	)

144 
	#Rundgªg
 0x08000000

	)

146 
	#MaxS³ed
 (45.0/60.0)

147 
	#MaxS³edSlow
 (10.0/60.0)

148 
	#MaxS³edW¬nF–d
 (4.0/60.0)

149 

	)

150 
	#MaxDriveAngËLªgNoAÎ¿d
 (60.0/180.0*
pi
)

	)

151 
	#MaxDriveAngËLªgAÎ¿d
 (45.0/180.0*
pi
)

	)

152 
	#MaxDriveAngËLªgK»bsgªg
 (80.0/180.0*
pi
)

	)

153 
	#MaxDriveAngËCrossNoAÎ¿d
 (25.0/180.0*
pi
)

	)

154 
	#MaxDriveAngËCrossAÎ¿d
 (15.0/180.0*
pi
)

	)

155 
	#MaxDriveAngËCrossK»bsgªg
 (80.0/180.0*
pi
)

	)

157 
	#RCS‹In™
 0

	)

158 
	#RCS‹R—dy
 1

	)

159 
	#RCS‹Run
 2

	)

160 
	#RCS‹Hub
 3

	)

161 
	#RCS‹AutoDrive
 4

	)

162 
	#RCS‹NÙF®l
 5

	)

168 
ušt8
 
S‹
;

171 
ušt32
 
RCAùu®Time
;

174 
ušt16
 
RCReqWÜd
;

177 
ušt16
 
akt_·ge
;

183 
ušt32
 *
šputRCG‘SÏveSaãtyCÚŒŞWÜd
;

186 
ušt32
 *
šputRCG‘AutoDriveCÚŒŞWÜd
;

189 
ušt8
 *
šputRemÙeCÚŒŞXV¬
;

190 
ušt8
 *
šputRemÙeCÚŒŞY1V¬
;

191 
ušt8
 *
šputRemÙeCÚŒŞY2V¬
;

192 
ušt8
 *
šputRemÙeCÚŒŞZV¬
;

193 
ušt8
 *
šputRemÙeCÚŒŞS³edPÙi
;

194 
ušt8
 *
šputRemÙeCÚŒŞToggË
;

195 
ušt32
 *
šputRemÙeCÚŒŞDig™®In
;

198 
sšt32
 *
šputRCJoy¡ickXFaùA
;

199 
sšt32
 *
šputRCJoy¡ickXFaùB
;

200 
sšt32
 *
šputRCJoy¡ickXFaùC
;

201 
sšt32
 *
šputRCJoy¡ickXFaùD
;

204 
ušt16
 *
šputIOPÜtHªd
;

205 
ušt16
 *
šputIOPÜtAutom©ik
;

208 
sšt32
 *
šputRCG‘DriveModuË11AngË
;

209 
sšt32
 *
šputRCG‘DriveModuË12AngË
;

210 
sšt32
 *
šputRCG‘DriveModuË21AngË
;

211 
sšt32
 *
šputRCG‘DriveModuË22AngË
;

214 
sšt16
 *
šputRCG‘AutoDriveY1V®ue
;

215 
sšt16
 *
šputRCG‘AutoDriveY2V®ue
;

217 
sšt16
 *
šputRCG‘AutoDriveXV®ue
;

220 
ušt8
 *
šputHubsy¡emHeight
;

223 
ušt8
 *
šputHubsy¡emStus
;

229 
ušt32
 *
ouutRCS‘DriveSysCÚŒŞWÜd
;

232 
ušt32
 *
ouutRCS‘HubSysCÚŒŞWÜd
;

235 
ušt32
 *
ouutRCS‘SaãtyCÚŒŞWÜd
;

238 
ušt32
 *
ouutRCS‘AutoDriveCÚŒŞWÜd
;

241 
æßt32
 *
ouutRCS‘DriveSysS³ed
;

242 
æßt32
 *
ouutRCS‘DriveSysAngË
;

245 
ušt32
 *
ouutIOPÜtHu³
;

246 
ušt32
 *
ouutIOPÜtLam³11
;

247 
ušt32
 *
ouutIOPÜtLam³12
;

248 
ušt32
 *
ouutIOPÜtLam³21
;

249 
ušt32
 *
ouutIOPÜtLam³22
;

252 
sšt8
 *
ouutRCToSÏveDriveSysAngË11
;

253 
sšt8
 *
ouutRCToSÏveDriveSysAngË12
;

254 
sšt8
 *
ouutRCToSÏveDriveSysAngË21
;

255 
sšt8
 *
ouutRCToSÏveDriveSysAngË22
;

258 
ušt8
 *
ouutRCToSÏveStusMES
;

259 
ušt8
 *
ouutRCToSÏveStusExtMES
;

260 
ušt8
 *
ouutRCToSÏvePageS‹
;

261 
ušt8
 *
ouutRCToSÏveStusAuto
;

262 
ušt8
 *
ouutRCToSÏveS‹”šgMode
;

264 
ušt16
 *
ouutRemÙeCÚŒŞNMT
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlInterface.h

1 #iâdeà
_REMOTECONTROLINTERFACE_H


2 
	#_REMOTECONTROLINTERFACE_H


	)

14 
In™RemÙeCÚŒŞ
();

22 
TaskRemÙeCÚŒŞAwake
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\Safety.c

1 
	~"Saãty.h
"

2 
	~"SaãtyD©a.h
"

3 
	~"SaãtyIÁ”çû.h
"

6 
	#TimeOutS¹Inv”‹rDi§bË
 1000

	)

7 
	#TimeOutNÙAus
 300

	)

8 
	#TimeOutNoJoy¡ick
 3000

	)

9 
	#TimeOutB¿ke
 1000

	)

12 
ušt32
 
	gaùu®Time
;

13 
ušt16
 
	gçuÉ
;

21 
	$In™IÁ”çûSaãty
(){

22 
ušt16
 
i
;

23 
ouutE¼ÜCouÁ
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveHighWÜd
,
Ty³U8
,0);

25 
šputSaãtyD©eTime1
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime1
,
Ty³U32
,0);

26 
šputSaãtyD©eTime2
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime2
,
Ty³U32
,0);

28 
šputSaãtySysCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCÚŒŞWÜd
,
Ty³U32
,0);

30 
ouutSaãtySDOCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚŒŞWÜd
,
Ty³U32
,0);

31 
ouutSaãtySDOCÚ‹Á
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚ‹Á
,
Ty³U32
,0);

33 
i
=0;i<32;i++){

34 
šputE¼ÜRegi¡”
[
i
]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01
+i,
Ty³U32
,0);

35 
šputE¼ÜTimeSmp
[
i
][0]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01Time¡amp1
+i*2,
Ty³U32
,0);

36 
šputE¼ÜTimeSmp
[
i
][1]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01Time¡amp1
+i*2+1,
Ty³U32
,0);

39 
	`In™SaãtyDriveSys
();

40 
	`In™SaãtyPLC
();

41 
	}
}

49 
	$£tFauÉ
(){

50 
çuÉ
++;

51 
	}
}

59 
	$S‘E¼ÜCode
(
ušt32
 
code
){

60 
ušt16
 
iE¼Ü
;

62 
iE¼Ü
=0;iError<31;iError++){

63 *
šputE¼ÜRegi¡”
[31-
iE¼Ü
]=*inputErrorRegister[30-iError];

64 *
šputE¼ÜTimeSmp
[31-
iE¼Ü
][0]=*inputErrorTimeStamp[30-iError][0];

65 *
šputE¼ÜTimeSmp
[31-
iE¼Ü
][1]=*inputErrorTimeStamp[30-iError][1];

68 *
šputE¼ÜRegi¡”
[0]=
code
;

69 *
šputE¼ÜTimeSmp
[0][0]=*
šputSaãtyD©eTime1
;

70 *
šputE¼ÜTimeSmp
[0][1]=*
šputSaãtyD©eTime2
;

72 
iE¼Ü
=0x01;iError<0x61;iError++){

73 
	`StÜeLßdOD
(0x6500,
iE¼Ü
,
StÜeODToEEP
);

76 
	}
}

84 
	$S’dRegi¡”ToSÏve
(){

85 
ušt32
 
loÿl_time¡amp
;

86 
ušt32
 
iReg
;

88 if((*
ouutSaãtySDOCÚŒŞWÜd
&
KeySaãtySDOCÚŒŞWÜdEÇbË
)==0){

89 if((
	`x_sys_g‘_time_ms
()-
loÿl_time¡amp
)>300){

90 
loÿl_time¡amp
=
	`x_sys_g‘_time_ms
();

91 *
ouutSaãtySDOCÚŒŞWÜd
=0x61650073;

92 *
ouutSaãtySDOCÚŒŞWÜd
+=(
iReg
<<24);

93 *
ouutSaãtySDOCÚ‹Á
=*
šputE¼ÜRegi¡”
[
iReg
];

94 
iReg
++;

95 if(
iReg
==8) iReg=0;

98 
	}
}

106 
	$CË¬E¼ÜCode
(){

107 
ušt16
 
iE¼Ü
;

108 
iE¼Ü
=0;iError<32;iError++){

109 *
šputE¼ÜRegi¡”
[
iE¼Ü
]=0;

110 *
šputE¼ÜTimeSmp
[
iE¼Ü
][0]=0;

111 *
šputE¼ÜTimeSmp
[
iE¼Ü
][1]=0;

113 
iE¼Ü
=0x01;iError<0x61;iError++){

114 
	`StÜeLßdOD
(0x6500,
iE¼Ü
,
StÜeODToEEP
);

117 
	}
}

125 
	$SaãtyTim”
(){

126 
	`Tim”SaãtyDriveSys
();

127 
	`Tim”SaãtyPLC
();

128 
	}
}

136 
	$La£rSÿÂ”Qu™
(){

137 
boŞ—n
 
ŞdV®ueLS1
;

138 
boŞ—n
 
ŞdV®ueLS2
;

139 
ušt16
 
tick1
,
tick2
;

141 if((
SaãtyE¼ÜLS1Absch®‹n
==
FALSE
)&&(
ŞdV®ueLS1
==
TRUE
)è
tick1
=20;

142 if((
SaãtyE¼ÜLS2Absch®‹n
==
FALSE
)&&(
ŞdV®ueLS2
==
TRUE
)è
tick2
=20;

144 if(
tick1
>0){

145 
tick1
--;

146 
SaãtyE¼ÜLS1Qu™
=1;

148 
SaãtyE¼ÜLS1Qu™
=0;

150 if(
tick2
>0){

151 
tick2
--;

152 
SaãtyE¼ÜLS2Qu™
=1;

154 
SaãtyE¼ÜLS2Qu™
=0;

156 
ŞdV®ueLS1
=
SaãtyE¼ÜLS1Absch®‹n
;

157 
ŞdV®ueLS2
=
SaãtyE¼ÜLS2Absch®‹n
;

158 
	}
}

166 
	$Task_Saãty
(*
¬gv
){

167 
¬gv
=argv;

168 
ušt32
 
u32_Ev’ts
;

169 
ušt16
 
æag
;

171 
TRUE
){

172 
	`SaãtyTim”
();

173 
æag
){

174 0: 
	`HªdËSaãtyPLC
(); ;

175 1: 
	`HªdËSaãtyNÜm®
(); ;

176 2: 
	`HªdËSaãtyDriveSys
(); ;

180 if(
æag
>=3) {

181 *
ouutE¼ÜCouÁ
=
çuÉ
;

182 if(*
ouutE¼ÜCouÁ
>8) *outputErrorCount=8;

183 
çuÉ
=0;

184 
æag
=0;

186 
æag
++;

187 
	`La£rSÿÂ”Qu™
();

188 
	`S’dRegi¡”ToSÏve
();

189 if(*
šputSaãtySysCÚŒŞWÜd
&0x00000008){

190 *
šputSaãtySysCÚŒŞWÜd
&=~0x00000008;

191 
	`CË¬E¼ÜCode
();

193 
	`x_os_wa™_fÜ_ev’ts
();

195 
	}
}

204 
	$In™Saãty
(){

205 
	`In™IÁ”çûSaãty
();

206 
	`x_os_š¡®l_sk
(
PrioSaãty
, 500, 100, 
Task_Saãty
, 128);

207 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\Safety.h

1 #iâdeà
_SAFETY_H


2 
	#_SAFETY_H


	)

4 
	~"¡wty³s.h
"

5 
	~"x_sys.h
"

6 
	~"x_os.h
"

7 
	~"DeviûOD.h
"

8 
	~"MESCÚfig.h
"

9 
	~"AµCÚfig.h
"

17 
£tFauÉ
();

25 
S‘E¼ÜCode
(
ušt32
 
code
);

34 
In™SaãtyDriveSys
();

41 
HªdËSaãtyDriveSys
();

48 
Tim”SaãtyDriveSys
();

57 
In™SaãtyPLC
();

64 
HªdËSaãtyPLC
();

71 
Tim”SaãtyPLC
();

79 
HªdËSaãtyNÜm®
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyData.c

1 
	~"SaãtyD©a.h
"

4 
ušt32
 *
	gšputE¼ÜRegi¡”
[32];

5 
ušt32
 *
	gšputE¼ÜTimeSmp
[32][2];

8 
ušt32
 *
	gšputSaãtyD©eTime1
;

9 
ušt32
 *
	gšputSaãtyD©eTime2
;

12 
ušt32
 *
	gšputSaãtySysCÚŒŞWÜd
;

15 
ušt32
 *
	gouutSaãtySDOCÚŒŞWÜd
;

16 
ušt32
 *
	gouutSaãtySDOCÚ‹Á
;

19 
ušt8
 *
	gouutE¼ÜCouÁ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyData.h

1 #iâdeà
_SAFETYDATA_H


2 
	#_SAFETYDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	~"SaãtyDriveSysD©a.h
"

6 
	~"SaãtyPLCD©a.h
"

8 
	#KeySaãtyS‘RCE¼Ü
 0x00000001

	)

9 
	#KeySaãtyG‘RCNoMÙiÚ
 0x00000004

	)

11 
	#KeySaãtySDOCÚŒŞWÜdEÇbË
 0x00000001

	)

18 
ušt32
 *
šputE¼ÜRegi¡”
[32];

19 
ušt32
 *
šputE¼ÜTimeSmp
[32][2];

22 
ušt32
 *
šputSaãtyD©eTime1
;

23 
ušt32
 *
šputSaãtyD©eTime2
;

26 
ušt32
 *
šputSaãtySysCÚŒŞWÜd
;

29 
ušt32
 *
ouutSaãtySDOCÚŒŞWÜd
;

30 
ušt32
 *
ouutSaãtySDOCÚ‹Á
;

33 
ušt8
 *
ouutE¼ÜCouÁ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSys.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$In™SaãtyDriveSys
(){

11 
šputSaãtyDriveModuË11Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË11Aùu®AngË
,
Ty³S32
,0); *inputSafetyDriveModule11ActualAngle=0;

12 
šputSaãtyDriveModuË12Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË12Aùu®AngË
,
Ty³S32
,0); *inputSafetyDriveModule12ActualAngle=0;

13 
šputSaãtyDriveModuË21Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË21Aùu®AngË
,
Ty³S32
,0); *inputSafetyDriveModule21ActualAngle=0;

14 
šputSaãtyDriveModuË22Aùu®AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveModuË22Aùu®AngË
,
Ty³S32
,0); *inputSafetyDriveModule22ActualAngle=0;

15 
šputSaãtyDriveModuË11S‘AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË11AngË
,
Ty³S32
,0); *inputSafetyDriveModule11SetAngle=0;

16 
šputSaãtyDriveModuË12S‘AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË12AngË
,
Ty³S32
,0); *inputSafetyDriveModule12SetAngle=0;

17 
šputSaãtyDriveModuË21S‘AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË21AngË
,
Ty³S32
,0); *inputSafetyDriveModule21SetAngle=0;

18 
šputSaãtyDriveModuË22S‘AngË
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexS‘DriveModuË22AngË
,
Ty³S32
,0); *inputSafetyDriveModule22SetAngle=0;

19 
šputSaãtyMÙÜ111S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor111SetSpeed=0;

20 
šputSaãtyMÙÜ112S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor112SetSpeed=0;

21 
šputSaãtyMÙÜ121S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor121SetSpeed=0;

22 
šputSaãtyMÙÜ122S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor122SetSpeed=0;

23 
šputSaãtyMÙÜ211S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor211SetSpeed=0;

24 
šputSaãtyMÙÜ212S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor212SetSpeed=0;

25 
šputSaãtyMÙÜ221S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor221SetSpeed=0;

26 
šputSaãtyMÙÜ222S‘S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor222SetSpeed=0;

27 
šputSaãtyMÙÜ111Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor111ActualTorque=0;

28 
šputSaãtyMÙÜ112Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor112ActualTorque=0;

29 
šputSaãtyMÙÜ121Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor121ActualTorque=0;

30 
šputSaãtyMÙÜ122Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor122ActualTorque=0;

31 
šputSaãtyMÙÜ211Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor211ActualTorque=0;

32 
šputSaãtyMÙÜ212Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor212ActualTorque=0;

33 
šputSaãtyMÙÜ221Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor221ActualTorque=0;

34 
šputSaãtyMÙÜ222Aùu®TÜque
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO1HighDWÜd
,
Ty³S16
,0); *inputSafetyMotor222ActualTorque=0;

35 
šputSaãtyMÙÜ111Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor111ActualSpeed=0;

36 
šputSaãtyMÙÜ112Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor112ActualSpeed=0;

37 
šputSaãtyMÙÜ121Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor121ActualSpeed=0;

38 
šputSaãtyMÙÜ122Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor122ActualSpeed=0;

39 
šputSaãtyMÙÜ211Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor211ActualSpeed=0;

40 
šputSaãtyMÙÜ212Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor212ActualSpeed=0;

41 
šputSaãtyMÙÜ221Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor221ActualSpeed=0;

42 
šputSaãtyMÙÜ222Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyMotor222ActualSpeed=0;

43 
šputSaãtyMÙÜ111StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor111StatusByte=0x00;

44 
šputSaãtyMÙÜ112StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor112StatusByte=0x00;

45 
šputSaãtyMÙÜ121StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor121StatusByte=0x00;

46 
šputSaãtyMÙÜ122StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor122StatusByte=0x00;

47 
šputSaãtyMÙÜ211StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor211StatusByte=0x00;

48 
šputSaãtyMÙÜ212StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor212StatusByte=0x00;

49 
šputSaãtyMÙÜ221StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor221StatusByte=0x00;

50 
šputSaãtyMÙÜ222StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyMotor222StatusByte=0x00;

51 
šputSaãtyMÙÜ111E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor111ErrorCode=0x0000;

52 
šputSaãtyMÙÜ112E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor112ErrorCode=0x0000;

53 
šputSaãtyMÙÜ121E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor121ErrorCode=0x0000;

54 
šputSaãtyMÙÜ122E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor122ErrorCode=0x0000;

55 
šputSaãtyMÙÜ211E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor211ErrorCode=0x0000;

56 
šputSaãtyMÙÜ212E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor212ErrorCode=0x0000;

57 
šputSaãtyMÙÜ221E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor221ErrorCode=0x0000;

58 
šputSaãtyMÙÜ222E¼ÜCode
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rTPDO2LowDWÜd
,
Ty³U16
,0); *inputSafetyMotor222ErrorCode=0x0000;

59 
šputSaãtyIOV”sÜgungB»m£nAus
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut37
,
Ty³U16
,0); *inputSafetyIOVersorgungBremsenAus=0x0000;

60 
šputSaãtyG‘DriveSy¡emStusWÜd
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysCÚŒŞWÜd
,
Ty³U32
,0); *inputSafetyGetDriveSystemStatusWord=0x00000000;

61 
šputSaãtyInv”‹r111NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter111NodeStatus=0x00;

62 
šputSaãtyInv”‹r112NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0001,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter112NodeStatus=0x00;

63 
šputSaãtyInv”‹r121NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0002,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter121NodeStatus=0x00;

64 
šputSaãtyInv”‹r122NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0003,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter122NodeStatus=0x00;

65 
šputSaãtyInv”‹r211NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0004,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter211NodeStatus=0x00;

66 
šputSaãtyInv”‹r212NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0005,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter212NodeStatus=0x00;

67 
šputSaãtyInv”‹r221NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0006,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter221NodeStatus=0x00;

68 
šputSaãtyInv”‹r222NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
+0x0007,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyInverter222NodeStatus=0x00;

69 
šputSaãtyKam”a1NodeStus
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1NodeStus
,
Ty³U8
,1); *inputSafetyKamera1NodeStatus=0x00;

70 
šputSaãtyKam”a2NodeStus
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2NodeStus
,
Ty³U8
,1); *inputSafetyKamera2NodeStatus=0x00;

72 
ouutSaãtyS‘DriveSy¡emWÜd
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysCÚŒŞWÜd
,
Ty³U32
,0); *outputSafetySetDriveSystemWord=0x00000000;

73 
	}
}

81 
	$DriveSysSaãtyHªdËDriveModuËAngË
(){

82 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
;

83 
boŞ—n
 
SaãtyE¼ÜDriveModuË11AngËOutOldV®ue
;

84 
boŞ—n
 
SaãtyE¼ÜDriveModuË12AngËOutOldV®ue
;

85 
boŞ—n
 
SaãtyE¼ÜDriveModuË21AngËOutOldV®ue
;

86 
boŞ—n
 
SaãtyE¼ÜDriveModuË22AngËOutOldV®ue
;

88 if(*
šputSaãtyDriveModuË11Aùu®AngË
>
DriveModuË11MaxAngË
è
m1
=
TRUE
;

89 
m1
=
FALSE
;

90 if(*
šputSaãtyDriveModuË11Aùu®AngË
<
DriveModuË11MšAngË
è
m2
=
TRUE
;

91 
m2
=
FALSE
;

92 if(*
šputSaãtyDriveModuË12Aùu®AngË
>
DriveModuË12MaxAngË
è
m3
=
TRUE
;

93 
m3
=
FALSE
;

94 if(*
šputSaãtyDriveModuË12Aùu®AngË
<
DriveModuË12MšAngË
è
m4
=
TRUE
;

95 
m4
=
FALSE
;

96 if(*
šputSaãtyDriveModuË21Aùu®AngË
>
DriveModuË21MaxAngË
è
m5
=
TRUE
;

97 
m5
=
FALSE
;

98 if(*
šputSaãtyDriveModuË21Aùu®AngË
<
DriveModuË21MšAngË
è
m6
=
TRUE
;

99 
m6
=
FALSE
;

100 if(*
šputSaãtyDriveModuË22Aùu®AngË
>
DriveModuË22MaxAngË
è
m7
=
TRUE
;

101 
m7
=
FALSE
;

102 if(*
šputSaãtyDriveModuË22Aùu®AngË
<
DriveModuË22MšAngË
è
m8
=
TRUE
;

103 
m8
=
FALSE
;

104 if((*
šputSaãtyG‘DriveSy¡emStusWÜd
&
KeySaáeyG‘DriveSysZ”oS‘
)==0è
m9
=
TRUE
;

105 
m9
=
FALSE
;

107 
SaãtyE¼ÜDriveModuË11AngËOut
=(
m1
|
m2
)&
m9
;

108 
SaãtyE¼ÜDriveModuË12AngËOut
=(
m3
|
m4
)&
m9
;

109 
SaãtyE¼ÜDriveModuË21AngËOut
=(
m5
|
m6
)&
m9
;

110 
SaãtyE¼ÜDriveModuË22AngËOut
=(
m7
|
m8
)&
m9
;

112 if(
SaãtyE¼ÜDriveModuË11AngËOut
){

113 if(
SaãtyE¼ÜDriveModuË11AngËOut
!=
SaãtyE¼ÜDriveModuË11AngËOutOldV®ue
)

114 
	`S‘E¼ÜCode
(1022021);

115 
	`£tFauÉ
();

117 if(
SaãtyE¼ÜDriveModuË12AngËOut
){

118 if(
SaãtyE¼ÜDriveModuË12AngËOut
!=
SaãtyE¼ÜDriveModuË12AngËOutOldV®ue
)

119 
	`S‘E¼ÜCode
(1022022);

120 
	`£tFauÉ
();

122 if(
SaãtyE¼ÜDriveModuË21AngËOut
){

123 if(
SaãtyE¼ÜDriveModuË21AngËOut
!=
SaãtyE¼ÜDriveModuË21AngËOutOldV®ue
)

124 
	`S‘E¼ÜCode
(1022023);

125 
	`£tFauÉ
();

127 if(
SaãtyE¼ÜDriveModuË22AngËOut
){

128 if(
SaãtyE¼ÜDriveModuË22AngËOut
!=
SaãtyE¼ÜDriveModuË22AngËOutOldV®ue
)

129 
	`S‘E¼ÜCode
(1022024);

130 
	`£tFauÉ
();

133 
SaãtyE¼ÜDriveModuË11AngËOutOldV®ue
=
SaãtyE¼ÜDriveModuË11AngËOut
;

134 
SaãtyE¼ÜDriveModuË12AngËOutOldV®ue
=
SaãtyE¼ÜDriveModuË12AngËOut
;

135 
SaãtyE¼ÜDriveModuË21AngËOutOldV®ue
=
SaãtyE¼ÜDriveModuË21AngËOut
;

136 
SaãtyE¼ÜDriveModuË22AngËOutOldV®ue
=
SaãtyE¼ÜDriveModuË22AngËOut
;

137 
	}
}

145 
	$DriveSysSaãtyHªdËDriveModuËS’sÜ
(){

146 
boŞ—n
 
m1
,
m2
,
m3
,
m4
;

147 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ11E¼ÜOldV®ue
;

148 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ12E¼ÜOldV®ue
;

149 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ21E¼ÜOldV®ue
;

150 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ22E¼ÜOldV®ue
;

152 if(
SaãtyAngËS’sÜ11TimeOutE¼Ü
==1è
m1
=
TRUE
;

153 
m1
=
FALSE
;

154 if(
SaãtyAngËS’sÜ12TimeOutE¼Ü
==1è
m2
=
TRUE
;

155 
m2
=
FALSE
;

156 if(
SaãtyAngËS’sÜ21TimeOutE¼Ü
==1è
m3
=
TRUE
;

157 
m3
=
FALSE
;

158 if(
SaãtyAngËS’sÜ22TimeOutE¼Ü
==1è
m4
=
TRUE
;

159 
m4
=
FALSE
;

161 
SaãtyE¼ÜAngËS’sÜ11E¼Ü
=
m1
;

162 
SaãtyE¼ÜAngËS’sÜ12E¼Ü
=
m2
;

163 
SaãtyE¼ÜAngËS’sÜ21E¼Ü
=
m3
;

164 
SaãtyE¼ÜAngËS’sÜ22E¼Ü
=
m4
;

166 if(
SaãtyE¼ÜAngËS’sÜ11E¼Ü
){

167 if(
SaãtyE¼ÜAngËS’sÜ11E¼Ü
!=
SaãtyE¼ÜAngËS’sÜ11E¼ÜOldV®ue
)

168 
	`S‘E¼ÜCode
(1022011);

169 
	`£tFauÉ
();

171 if(
SaãtyE¼ÜAngËS’sÜ12E¼Ü
){

172 if(
SaãtyE¼ÜAngËS’sÜ12E¼Ü
!=
SaãtyE¼ÜAngËS’sÜ12E¼ÜOldV®ue
)

173 
	`S‘E¼ÜCode
(1022012);

174 
	`£tFauÉ
();

176 if(
SaãtyE¼ÜAngËS’sÜ21E¼Ü
){

177 if(
SaãtyE¼ÜAngËS’sÜ21E¼Ü
!=
SaãtyE¼ÜAngËS’sÜ21E¼ÜOldV®ue
)

178 
	`S‘E¼ÜCode
(1022013);

179 
	`£tFauÉ
();

181 if(
SaãtyE¼ÜAngËS’sÜ22E¼Ü
){

182 if(
SaãtyE¼ÜAngËS’sÜ22E¼Ü
!=
SaãtyE¼ÜAngËS’sÜ22E¼ÜOldV®ue
)

183 
	`S‘E¼ÜCode
(1022014);

184 
	`£tFauÉ
();

187 
SaãtyE¼ÜAngËS’sÜ11E¼ÜOldV®ue
=
SaãtyE¼ÜAngËS’sÜ11E¼Ü
;

188 
SaãtyE¼ÜAngËS’sÜ12E¼ÜOldV®ue
=
SaãtyE¼ÜAngËS’sÜ12E¼Ü
;

189 
SaãtyE¼ÜAngËS’sÜ21E¼ÜOldV®ue
=
SaãtyE¼ÜAngËS’sÜ21E¼Ü
;

190 
SaãtyE¼ÜAngËS’sÜ22E¼ÜOldV®ue
=
SaãtyE¼ÜAngËS’sÜ22E¼Ü
;

191 
	}
}

199 
	$DriveSysSaãtyHªdËDriveModuËKÚkeLo£
(){

200 
boŞ—n
 
m1
,
m2
,
m3
,
m4
;

201 
boŞ—n
 
SaãtyE¼ÜDriveModuË11KÚktLo£OldV®ue
;

202 
boŞ—n
 
SaãtyE¼ÜDriveModuË12KÚktLo£OldV®ue
;

203 
boŞ—n
 
SaãtyE¼ÜDriveModuË21KÚktLo£OldV®ue
;

204 
boŞ—n
 
SaãtyE¼ÜDriveModuË22KÚktLo£OldV®ue
;

206 if(
SaãtyDriveModuË11KÚktTimeOutE¼Ü
==1è
m1
=
TRUE
;

207 
m1
=
FALSE
;

208 if(
SaãtyDriveModuË12KÚktTimeOutE¼Ü
==1è
m2
=
TRUE
;

209 
m2
=
FALSE
;

210 if(
SaãtyDriveModuË21KÚktTimeOutE¼Ü
==1è
m3
=
TRUE
;

211 
m3
=
FALSE
;

212 if(
SaãtyDriveModuË22KÚktTimeOutE¼Ü
==1è
m4
=
TRUE
;

213 
m4
=
FALSE
;

215 
SaãtyE¼ÜDriveModuË11KÚktLo£
=
m1
;

216 
SaãtyE¼ÜDriveModuË12KÚktLo£
=
m2
;

217 
SaãtyE¼ÜDriveModuË21KÚktLo£
=
m3
;

218 
SaãtyE¼ÜDriveModuË22KÚktLo£
=
m4
;

220 if(
SaãtyE¼ÜDriveModuË11KÚktLo£
){

221 if(
SaãtyE¼ÜDriveModuË11KÚktLo£
!=
SaãtyE¼ÜDriveModuË11KÚktLo£OldV®ue
)

222 
	`S‘E¼ÜCode
(1022001);

223 
	`£tFauÉ
();

225 if(
SaãtyE¼ÜDriveModuË12KÚktLo£
){

226 if(
SaãtyE¼ÜDriveModuË12KÚktLo£
!=
SaãtyE¼ÜDriveModuË12KÚktLo£OldV®ue
)

227 
	`S‘E¼ÜCode
(1022002);

228 
	`£tFauÉ
();

230 if(
SaãtyE¼ÜDriveModuË21KÚktLo£
){

231 if(
SaãtyE¼ÜDriveModuË21KÚktLo£
!=
SaãtyE¼ÜDriveModuË21KÚktLo£OldV®ue
)

232 
	`S‘E¼ÜCode
(1022003);

233 
	`£tFauÉ
();

235 if(
SaãtyE¼ÜDriveModuË22KÚktLo£
){

236 if(
SaãtyE¼ÜDriveModuË22KÚktLo£
!=
SaãtyE¼ÜDriveModuË22KÚktLo£OldV®ue
)

237 
	`S‘E¼ÜCode
(1022004);

238 
	`£tFauÉ
();

241 
SaãtyE¼ÜDriveModuË11KÚktLo£OldV®ue
=
SaãtyE¼ÜDriveModuË11KÚktLo£
;

242 
SaãtyE¼ÜDriveModuË12KÚktLo£OldV®ue
=
SaãtyE¼ÜDriveModuË12KÚktLo£
;

243 
SaãtyE¼ÜDriveModuË21KÚktLo£OldV®ue
=
SaãtyE¼ÜDriveModuË21KÚktLo£
;

244 
SaãtyE¼ÜDriveModuË22KÚktLo£OldV®ue
=
SaãtyE¼ÜDriveModuË22KÚktLo£
;

245 
	}
}

253 
	$DriveSysSaãtyHªdËMÙÜD»hzahl
(){

254 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
,
m10
,
m11
,
m12
,
m13
,
m14
,
m15
,
m16
;

255 
boŞ—n
 
SaãtyW¬nMÙÜ111D»hzahlPÏusiOldV®ue
;

256 
boŞ—n
 
SaãtyW¬nMÙÜ112D»hzahlPÏusiOldV®ue
;

257 
boŞ—n
 
SaãtyW¬nMÙÜ121D»hzahlPÏusiOldV®ue
;

258 
boŞ—n
 
SaãtyW¬nMÙÜ122D»hzahlPÏusiOldV®ue
;

259 
boŞ—n
 
SaãtyW¬nMÙÜ211D»hzahlPÏusiOldV®ue
;

260 
boŞ—n
 
SaãtyW¬nMÙÜ212D»hzahlPÏusiOldV®ue
;

261 
boŞ—n
 
SaãtyW¬nMÙÜ221D»hzahlPÏusiOldV®ue
;

262 
boŞ—n
 
SaãtyW¬nMÙÜ222D»hzahlPÏusiOldV®ue
;

263 
boŞ—n
 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiOldV®ue
;

264 
boŞ—n
 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiOldV®ue
;

265 
boŞ—n
 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiOldV®ue
;

266 
boŞ—n
 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiOldV®ue
;

267 
boŞ—n
 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiOldV®ue
;

268 
boŞ—n
 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiOldV®ue
;

269 
boŞ—n
 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiOldV®ue
;

270 
boŞ—n
 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiOldV®ue
;

272 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m1
=
TRUE
;

273 
m1
=
FALSE
;

274 if(
SaãtyW¬nMÙÜ112D»hzahlPÏusiTimeOut
==1è
m2
=
TRUE
;

275 
m2
=
FALSE
;

276 if(
SaãtyW¬nMÙÜ121D»hzahlPÏusiTimeOut
==1è
m3
=
TRUE
;

277 
m3
=
FALSE
;

278 if(
SaãtyW¬nMÙÜ122D»hzahlPÏusiTimeOut
==1è
m4
=
TRUE
;

279 
m4
=
FALSE
;

280 if(
SaãtyW¬nMÙÜ211D»hzahlPÏusiTimeOut
==1è
m5
=
TRUE
;

281 
m5
=
FALSE
;

282 if(
SaãtyW¬nMÙÜ212D»hzahlPÏusiTimeOut
==1è
m6
=
TRUE
;

283 
m6
=
FALSE
;

284 if(
SaãtyW¬nMÙÜ221D»hzahlPÏusiTimeOut
==1è
m7
=
TRUE
;

285 
m7
=
FALSE
;

286 if(
SaãtyW¬nMÙÜ222D»hzahlPÏusiTimeOut
==1è
m8
=
TRUE
;

287 
m8
=
FALSE
;

288 if(
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiTimeOut
==1è
m9
=
TRUE
;

289 
m9
=
FALSE
;

290 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m10
=
TRUE
;

291 
m10
=
FALSE
;

292 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m11
=
TRUE
;

293 
m11
=
FALSE
;

294 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m12
=
TRUE
;

295 
m12
=
FALSE
;

296 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m13
=
TRUE
;

297 
m13
=
FALSE
;

298 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m14
=
TRUE
;

299 
m14
=
FALSE
;

300 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m15
=
TRUE
;

301 
m15
=
FALSE
;

302 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
==1è
m16
=
TRUE
;

303 
m16
=
FALSE
;

305 
SaãtyW¬nMÙÜ111D»hzahlPÏusi
=
m1
;

306 
SaãtyW¬nMÙÜ112D»hzahlPÏusi
=
m2
;

307 
SaãtyW¬nMÙÜ121D»hzahlPÏusi
=
m3
;

308 
SaãtyW¬nMÙÜ122D»hzahlPÏusi
=
m4
;

309 
SaãtyW¬nMÙÜ211D»hzahlPÏusi
=
m5
;

310 
SaãtyW¬nMÙÜ212D»hzahlPÏusi
=
m6
;

311 
SaãtyW¬nMÙÜ221D»hzahlPÏusi
=
m7
;

312 
SaãtyW¬nMÙÜ222D»hzahlPÏusi
=
m8
;

313 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusi
=
m9
;

314 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusi
=
m10
;

315 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusi
=
m11
;

316 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusi
=
m12
;

317 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusi
=
m13
;

318 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusi
=
m14
;

319 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusi
=
m15
;

320 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusi
=
m16
;

322 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusi
){

323 if(
SaãtyW¬nMÙÜ111D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ111D»hzahlPÏusiOldV®ue
)

324 
	`S‘E¼ÜCode
(2022111);

325 
	`£tFauÉ
();

327 if(
SaãtyW¬nMÙÜ112D»hzahlPÏusi
){

328 if(
SaãtyW¬nMÙÜ112D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ112D»hzahlPÏusiOldV®ue
)

329 
	`S‘E¼ÜCode
(2022112);

330 
	`£tFauÉ
();

332 if(
SaãtyW¬nMÙÜ121D»hzahlPÏusi
){

333 if(
SaãtyW¬nMÙÜ121D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ121D»hzahlPÏusiOldV®ue
)

334 
	`S‘E¼ÜCode
(2022113);

335 
	`£tFauÉ
();

337 if(
SaãtyW¬nMÙÜ122D»hzahlPÏusi
){

338 if(
SaãtyW¬nMÙÜ122D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ122D»hzahlPÏusiOldV®ue
)

339 
	`S‘E¼ÜCode
(2022114);

340 
	`£tFauÉ
();

342 if(
SaãtyW¬nMÙÜ211D»hzahlPÏusi
){

343 if(
SaãtyW¬nMÙÜ211D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ211D»hzahlPÏusiOldV®ue
)

344 
	`S‘E¼ÜCode
(2022115);

345 
	`£tFauÉ
();

347 if(
SaãtyW¬nMÙÜ212D»hzahlPÏusi
){

348 if(
SaãtyW¬nMÙÜ212D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ212D»hzahlPÏusiOldV®ue
)

349 
	`S‘E¼ÜCode
(2022116);

350 
	`£tFauÉ
();

352 if(
SaãtyW¬nMÙÜ221D»hzahlPÏusi
){

353 if(
SaãtyW¬nMÙÜ221D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ221D»hzahlPÏusiOldV®ue
)

354 
	`S‘E¼ÜCode
(2022117);

355 
	`£tFauÉ
();

357 if(
SaãtyW¬nMÙÜ222D»hzahlPÏusi
){

358 if(
SaãtyW¬nMÙÜ222D»hzahlPÏusi
!=
SaãtyW¬nMÙÜ222D»hzahlPÏusiOldV®ue
)

359 
	`S‘E¼ÜCode
(2022118);

360 
	`£tFauÉ
();

362 if(
SaãtyE¼ÜMÙÜ111D»hzahlPÏusi
){

363 if(
SaãtyE¼ÜMÙÜ111D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiOldV®ue
)

364 
	`S‘E¼ÜCode
(1022121);

365 
	`£tFauÉ
();

367 if(
SaãtyE¼ÜMÙÜ112D»hzahlPÏusi
){

368 if(
SaãtyE¼ÜMÙÜ112D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiOldV®ue
)

369 
	`S‘E¼ÜCode
(1022122);

370 
	`£tFauÉ
();

372 if(
SaãtyE¼ÜMÙÜ121D»hzahlPÏusi
){

373 if(
SaãtyE¼ÜMÙÜ121D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiOldV®ue
)

374 
	`S‘E¼ÜCode
(1022123);

375 
	`£tFauÉ
();

377 if(
SaãtyE¼ÜMÙÜ122D»hzahlPÏusi
){

378 if(
SaãtyE¼ÜMÙÜ122D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiOldV®ue
)

379 
	`S‘E¼ÜCode
(1022124);

380 
	`£tFauÉ
();

382 if(
SaãtyE¼ÜMÙÜ211D»hzahlPÏusi
){

383 if(
SaãtyE¼ÜMÙÜ211D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiOldV®ue
)

384 
	`S‘E¼ÜCode
(1022125);

385 
	`£tFauÉ
();

387 if(
SaãtyE¼ÜMÙÜ212D»hzahlPÏusi
){

388 if(
SaãtyE¼ÜMÙÜ212D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiOldV®ue
)

389 
	`S‘E¼ÜCode
(1022126);

390 
	`£tFauÉ
();

392 if(
SaãtyE¼ÜMÙÜ221D»hzahlPÏusi
){

393 if(
SaãtyE¼ÜMÙÜ221D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiOldV®ue
)

394 
	`S‘E¼ÜCode
(1022127);

395 
	`£tFauÉ
();

397 if(
SaãtyE¼ÜMÙÜ222D»hzahlPÏusi
){

398 if(
SaãtyE¼ÜMÙÜ222D»hzahlPÏusi
!=
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiOldV®ue
)

399 
	`S‘E¼ÜCode
(1022128);

400 
	`£tFauÉ
();

403 
SaãtyW¬nMÙÜ111D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ111D»hzahlPÏusi
;

404 
SaãtyW¬nMÙÜ112D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ112D»hzahlPÏusi
;

405 
SaãtyW¬nMÙÜ121D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ121D»hzahlPÏusi
;

406 
SaãtyW¬nMÙÜ122D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ122D»hzahlPÏusi
;

407 
SaãtyW¬nMÙÜ211D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ211D»hzahlPÏusi
;

408 
SaãtyW¬nMÙÜ212D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ212D»hzahlPÏusi
;

409 
SaãtyW¬nMÙÜ221D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ221D»hzahlPÏusi
;

410 
SaãtyW¬nMÙÜ222D»hzahlPÏusiOldV®ue
=
SaãtyW¬nMÙÜ222D»hzahlPÏusi
;

411 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ111D»hzahlPÏusi
;

412 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ112D»hzahlPÏusi
;

413 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ121D»hzahlPÏusi
;

414 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ122D»hzahlPÏusi
;

415 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ211D»hzahlPÏusi
;

416 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ212D»hzahlPÏusi
;

417 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ221D»hzahlPÏusi
;

418 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiOldV®ue
=
SaãtyE¼ÜMÙÜ222D»hzahlPÏusi
;

419 
	}
}

427 
	$DriveSysSaãtyHªdËMÙÜUmrich‹r
(){

428 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
;

429 
boŞ—n
 
SaãtyE¼ÜMÙÜ111Umrich‹rOldV®ue
;

430 
boŞ—n
 
SaãtyE¼ÜMÙÜ112Umrich‹rOldV®ue
;

431 
boŞ—n
 
SaãtyE¼ÜMÙÜ121Umrich‹rOldV®ue
;

432 
boŞ—n
 
SaãtyE¼ÜMÙÜ122Umrich‹rOldV®ue
;

433 
boŞ—n
 
SaãtyE¼ÜMÙÜ211Umrich‹rOldV®ue
;

434 
boŞ—n
 
SaãtyE¼ÜMÙÜ212Umrich‹rOldV®ue
;

435 
boŞ—n
 
SaãtyE¼ÜMÙÜ221Umrich‹rOldV®ue
;

436 
boŞ—n
 
SaãtyE¼ÜMÙÜ222Umrich‹rOldV®ue
;

438 if(*
šputSaãtyMÙÜ111StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m1
=
TRUE
;

439 
m1
=
FALSE
;

440 if(*
šputSaãtyMÙÜ112StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m2
=
TRUE
;

441 
m2
=
FALSE
;

442 if(*
šputSaãtyMÙÜ121StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m3
=
TRUE
;

443 
m3
=
FALSE
;

444 if(*
šputSaãtyMÙÜ122StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m4
=
TRUE
;

445 
m4
=
FALSE
;

446 if(*
šputSaãtyMÙÜ211StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m5
=
TRUE
;

447 
m5
=
FALSE
;

448 if(*
šputSaãtyMÙÜ212StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m6
=
TRUE
;

449 
m6
=
FALSE
;

450 if(*
šputSaãtyMÙÜ221StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m7
=
TRUE
;

451 
m7
=
FALSE
;

452 if(*
šputSaãtyMÙÜ222StusBy‹
&
KeySaãtyMÙÜUmrich‹rFauÉ
è
m8
=
TRUE
;

453 
m8
=
FALSE
;

455 
SaãtyE¼ÜMÙÜ111Umrich‹r
=
m1
;

456 
SaãtyE¼ÜMÙÜ112Umrich‹r
=
m2
;

457 
SaãtyE¼ÜMÙÜ121Umrich‹r
=
m3
;

458 
SaãtyE¼ÜMÙÜ122Umrich‹r
=
m4
;

459 
SaãtyE¼ÜMÙÜ211Umrich‹r
=
m5
;

460 
SaãtyE¼ÜMÙÜ212Umrich‹r
=
m6
;

461 
SaãtyE¼ÜMÙÜ221Umrich‹r
=
m7
;

462 
SaãtyE¼ÜMÙÜ222Umrich‹r
=
m8
;

464 if(
SaãtyE¼ÜMÙÜ111Umrich‹r
){

465 if(
SaãtyE¼ÜMÙÜ111Umrich‹r
!=
SaãtyE¼ÜMÙÜ111Umrich‹rOldV®ue
)

466 
	`S‘E¼ÜCode
(1092101);

467 
	`£tFauÉ
();

469 if(
SaãtyE¼ÜMÙÜ112Umrich‹r
){

470 if(
SaãtyE¼ÜMÙÜ112Umrich‹r
!=
SaãtyE¼ÜMÙÜ112Umrich‹rOldV®ue
)

471 
	`S‘E¼ÜCode
(1112102);

472 
	`£tFauÉ
();

474 if(
SaãtyE¼ÜMÙÜ121Umrich‹r
){

475 if(
SaãtyE¼ÜMÙÜ121Umrich‹r
!=
SaãtyE¼ÜMÙÜ121Umrich‹rOldV®ue
)

476 
	`S‘E¼ÜCode
(1122103);

477 
	`£tFauÉ
();

479 if(
SaãtyE¼ÜMÙÜ122Umrich‹r
){

480 if(
SaãtyE¼ÜMÙÜ122Umrich‹r
!=
SaãtyE¼ÜMÙÜ122Umrich‹rOldV®ue
)

481 
	`S‘E¼ÜCode
(1132104);

482 
	`£tFauÉ
();

484 if(
SaãtyE¼ÜMÙÜ211Umrich‹r
){

485 if(
SaãtyE¼ÜMÙÜ211Umrich‹r
!=
SaãtyE¼ÜMÙÜ211Umrich‹rOldV®ue
)

486 
	`S‘E¼ÜCode
(1162105);

487 
	`£tFauÉ
();

489 if(
SaãtyE¼ÜMÙÜ212Umrich‹r
){

490 if(
SaãtyE¼ÜMÙÜ212Umrich‹r
!=
SaãtyE¼ÜMÙÜ212Umrich‹rOldV®ue
)

491 
	`S‘E¼ÜCode
(1152106);

492 
	`£tFauÉ
();

494 if(
SaãtyE¼ÜMÙÜ221Umrich‹r
){

495 if(
SaãtyE¼ÜMÙÜ221Umrich‹r
!=
SaãtyE¼ÜMÙÜ221Umrich‹rOldV®ue
)

496 
	`S‘E¼ÜCode
(1142107);

497 
	`£tFauÉ
();

499 if(
SaãtyE¼ÜMÙÜ222Umrich‹r
){

500 if(
SaãtyE¼ÜMÙÜ222Umrich‹r
!=
SaãtyE¼ÜMÙÜ222Umrich‹rOldV®ue
)

501 
	`S‘E¼ÜCode
(1132108);

502 
	`£tFauÉ
();

505 
SaãtyE¼ÜMÙÜ111Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ111Umrich‹r
;

506 
SaãtyE¼ÜMÙÜ112Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ112Umrich‹r
;

507 
SaãtyE¼ÜMÙÜ121Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ121Umrich‹r
;

508 
SaãtyE¼ÜMÙÜ122Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ122Umrich‹r
;

509 
SaãtyE¼ÜMÙÜ211Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ211Umrich‹r
;

510 
SaãtyE¼ÜMÙÜ212Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ212Umrich‹r
;

511 
SaãtyE¼ÜMÙÜ221Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ221Umrich‹r
;

512 
SaãtyE¼ÜMÙÜ222Umrich‹rOldV®ue
=
SaãtyE¼ÜMÙÜ222Umrich‹r
;

513 
	}
}

521 
	$KeySaãtyNodeStus
(){

522 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
,
m10
;

523 
boŞ—n
 
SaãtyE¼ÜMÙÜ111Umrich‹rOfæšeOldV®ue
;

524 
boŞ—n
 
SaãtyE¼ÜMÙÜ112Umrich‹rOfæšeOldV®ue
;

525 
boŞ—n
 
SaãtyE¼ÜMÙÜ121Umrich‹rOfæšeOldV®ue
;

526 
boŞ—n
 
SaãtyE¼ÜMÙÜ122Umrich‹rOfæšeOldV®ue
;

527 
boŞ—n
 
SaãtyE¼ÜMÙÜ211Umrich‹rOfæšeOldV®ue
;

528 
boŞ—n
 
SaãtyE¼ÜMÙÜ212Umrich‹rOfæšeOldV®ue
;

529 
boŞ—n
 
SaãtyE¼ÜMÙÜ221Umrich‹rOfæšeOldV®ue
;

530 
boŞ—n
 
SaãtyE¼ÜMÙÜ222Umrich‹rOfæšeOldV®ue
;

531 
boŞ—n
 
SaãtyE¼ÜKam”a1OfæšeOldV®ue
;

532 
boŞ—n
 
SaãtyE¼ÜKam”a2OfæšeOldV®ue
;

534 if(*
šputSaãtyInv”‹r111NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m1
=
TRUE
;

535 
m1
=
FALSE
;

536 if(*
šputSaãtyInv”‹r112NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m2
=
TRUE
;

537 
m2
=
FALSE
;

538 if(*
šputSaãtyInv”‹r121NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m3
=
TRUE
;

539 
m3
=
FALSE
;

540 if(*
šputSaãtyInv”‹r122NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m4
=
TRUE
;

541 
m4
=
FALSE
;

542 if(*
šputSaãtyInv”‹r211NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m5
=
TRUE
;

543 
m5
=
FALSE
;

544 if(*
šputSaãtyInv”‹r212NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m6
=
TRUE
;

545 
m6
=
FALSE
;

546 if(*
šputSaãtyInv”‹r221NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m7
=
TRUE
;

547 
m7
=
FALSE
;

548 if(*
šputSaãtyInv”‹r222NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m8
=
TRUE
;

549 
m8
=
FALSE
;

550 if(*
šputSaãtyKam”a1NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m9
=
TRUE
;

551 
m9
=
FALSE
;

552 if(*
šputSaãtyInv”‹r111NodeStus
<=
KeySaãtyNodeDiscÚÃ‹d
è
m10
=
TRUE
;

553 
m10
=
FALSE
;

555 
SaãtyE¼ÜMÙÜ111Umrich‹rOfæše
=
m1
;

556 
SaãtyE¼ÜMÙÜ112Umrich‹rOfæše
=
m2
;

557 
SaãtyE¼ÜMÙÜ121Umrich‹rOfæše
=
m3
;

558 
SaãtyE¼ÜMÙÜ122Umrich‹rOfæše
=
m4
;

559 
SaãtyE¼ÜMÙÜ211Umrich‹rOfæše
=
m5
;

560 
SaãtyE¼ÜMÙÜ212Umrich‹rOfæše
=
m6
;

561 
SaãtyE¼ÜMÙÜ221Umrich‹rOfæše
=
m7
;

562 
SaãtyE¼ÜMÙÜ222Umrich‹rOfæše
=
m8
;

563 
SaãtyE¼ÜMÙÜUmrich‹rOfæše
=
m1
|
m2
|
m3
|
m4
|
m5
|
m6
|
m7
|
m8
;

564 
SaãtyE¼ÜKam”a1Ofæše
=
m9
;

565 
SaãtyE¼ÜKam”a2Ofæše
=
m10
;

566 
SaãtyE¼ÜKam”aOfæše
=
m9
|
m10
;

568 if(
SaãtyE¼ÜMÙÜ111Umrich‹rOfæše
){

569 if(
SaãtyE¼ÜMÙÜ111Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ111Umrich‹rOfæšeOldV®ue
)

570 
	`S‘E¼ÜCode
(1091211);

571 
	`£tFauÉ
();

573 if(
SaãtyE¼ÜMÙÜ112Umrich‹rOfæše
){

574 if(
SaãtyE¼ÜMÙÜ112Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ112Umrich‹rOfæšeOldV®ue
)

575 
	`S‘E¼ÜCode
(1101212);

576 
	`£tFauÉ
();

578 if(
SaãtyE¼ÜMÙÜ121Umrich‹rOfæše
){

579 if(
SaãtyE¼ÜMÙÜ121Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ121Umrich‹rOfæšeOldV®ue
)

580 
	`S‘E¼ÜCode
(1111213);

581 
	`£tFauÉ
();

583 if(
SaãtyE¼ÜMÙÜ122Umrich‹rOfæše
){

584 if(
SaãtyE¼ÜMÙÜ122Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ122Umrich‹rOfæšeOldV®ue
)

585 
	`S‘E¼ÜCode
(1121214);

586 
	`£tFauÉ
();

588 if(
SaãtyE¼ÜMÙÜ211Umrich‹rOfæše
){

589 if(
SaãtyE¼ÜMÙÜ211Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ211Umrich‹rOfæšeOldV®ue
)

590 
	`S‘E¼ÜCode
(1161215);

591 
	`£tFauÉ
();

593 if(
SaãtyE¼ÜMÙÜ212Umrich‹rOfæše
){

594 if(
SaãtyE¼ÜMÙÜ212Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ212Umrich‹rOfæšeOldV®ue
)

595 
	`S‘E¼ÜCode
(1151216);

596 
	`£tFauÉ
();

598 if(
SaãtyE¼ÜMÙÜ221Umrich‹rOfæše
){

599 if(
SaãtyE¼ÜMÙÜ221Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ221Umrich‹rOfæšeOldV®ue
)

600 
	`S‘E¼ÜCode
(1141217);

601 
	`£tFauÉ
();

603 if(
SaãtyE¼ÜMÙÜ222Umrich‹rOfæše
){

604 if(
SaãtyE¼ÜMÙÜ222Umrich‹rOfæše
!=
SaãtyE¼ÜMÙÜ222Umrich‹rOfæšeOldV®ue
)

605 
	`S‘E¼ÜCode
(1131218);

606 
	`£tFauÉ
();

608 if(
SaãtyE¼ÜKam”a1Ofæše
){

609 if(
SaãtyE¼ÜKam”a1Ofæše
!=
SaãtyE¼ÜKam”a1OfæšeOldV®ue
)

610 
	`S‘E¼ÜCode
(1051236);

611 
	`£tFauÉ
();

613 if(
SaãtyE¼ÜKam”a2Ofæše
){

614 if(
SaãtyE¼ÜKam”a2Ofæše
!=
SaãtyE¼ÜKam”a2OfæšeOldV®ue
)

615 
	`S‘E¼ÜCode
(1061237);

616 
	`£tFauÉ
();

619 
SaãtyE¼ÜMÙÜ111Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ111Umrich‹rOfæše
;

620 
SaãtyE¼ÜMÙÜ112Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ112Umrich‹rOfæše
;

621 
SaãtyE¼ÜMÙÜ121Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ121Umrich‹rOfæše
;

622 
SaãtyE¼ÜMÙÜ122Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ122Umrich‹rOfæše
;

623 
SaãtyE¼ÜMÙÜ211Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ211Umrich‹rOfæše
;

624 
SaãtyE¼ÜMÙÜ212Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ212Umrich‹rOfæše
;

625 
SaãtyE¼ÜMÙÜ221Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ221Umrich‹rOfæše
;

626 
SaãtyE¼ÜMÙÜ222Umrich‹rOfæšeOldV®ue
=
SaãtyE¼ÜMÙÜ222Umrich‹rOfæše
;

627 
SaãtyE¼ÜKam”a1OfæšeOldV®ue
=
SaãtyE¼ÜKam”a1Ofæše
;

628 
SaãtyE¼ÜKam”a2OfæšeOldV®ue
=
SaãtyE¼ÜKam”a2Ofæše
;

629 
	}
}

637 
	$HªdËSaãtyDriveSys
(){

638 
	`DriveSysSaãtyHªdËDriveModuËAngË
();

639 
	`DriveSysSaãtyHªdËDriveModuËS’sÜ
();

640 
	`DriveSysSaãtyHªdËDriveModuËKÚkeLo£
();

641 
	`DriveSysSaãtyHªdËMÙÜD»hzahl
();

642 
	`DriveSysSaãtyHªdËMÙÜUmrich‹r
();

643 
	`KeySaãtyNodeStus
();

644 
	}
}

652 
	$Tim”SaãtyDriveSys
(){

653 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
,
m10
,
m11
,
m12
,
m13
,
m14
,
m15
,
m16
,
m17
,
m18
,
m19
,
m20
,
m21
,
m22
,
m23
,
m24
,
m25
,
m26
,
m27
,
m28
;

654 
ušt8
 
tick1
,
tick2
,
tick3
,
tick4
,
tick5
,
tick6
,
tick7
,
tick8
,
tick9
,
tick10
,
tick11
,
tick12
,
tick13
,
tick14
,
tick15
,
tick16
,
tick17
,
tick18
,
tick19
,
tick20
,
tick21
,
tick22
,
tick23
,
tick24
;

656 if(
	`abs
(*
šputSaãtyDriveModuË11S‘AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)<
AngËS’sÜE¼ÜFauÉ
è
m1
=
TRUE
;

657 
m1
=
FALSE
;

658 if(
	`abs
(*
šputSaãtyDriveModuË12S‘AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)<
AngËS’sÜE¼ÜFauÉ
è
m2
=
TRUE
;

659 
m2
=
FALSE
;

660 if(
	`abs
(*
šputSaãtyDriveModuË21S‘AngË
-*
šputSaãtyDriveModuË21Aùu®AngË
)<
AngËS’sÜE¼ÜFauÉ
è
m3
=
TRUE
;

661 
m3
=
FALSE
;

662 if(
	`abs
(*
šputSaãtyDriveModuË22S‘AngË
-*
šputSaãtyDriveModuË22Aùu®AngË
)<
AngËS’sÜE¼ÜFauÉ
è
m4
=
TRUE
;

663 
m4
=
FALSE
;

664 if((
	`abs
(*
šputSaãtyDriveModuË11Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyMÙÜ111Aùu®TÜque
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m5
=
TRUE
;

665 
m5
=
FALSE
;

666 if((
	`abs
(*
šputSaãtyDriveModuË11Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*šputSaãtyDriveModuË11Aùu®AngË)<
DriveModuËLo¡KÚkeMšTÜque
)è
m6
=
TRUE
;

667 
m6
=
FALSE
;

668 if((
	`abs
(*
šputSaãtyDriveModuË11Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*šputSaãtyDriveModuË11Aùu®AngË)<
DriveModuËLo¡KÚkeMšTÜque
)è
m7
=
TRUE
;

669 
m7
=
FALSE
;

670 if((
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyDriveModuË11Aùu®AngË
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m8
=
TRUE
;

671 
m8
=
FALSE
;

672 if((
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyDriveModuË11Aùu®AngË
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m9
=
TRUE
;

673 
m9
=
FALSE
;

674 if((
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyDriveModuË11Aùu®AngË
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m10
=
TRUE
;

675 
m10
=
FALSE
;

676 if((
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyDriveModuË11Aùu®AngË
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m11
=
TRUE
;

677 
m11
=
FALSE
;

678 if((
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
)>
DriveModuËLo¡KÚkeMšS³ed
)&&×bs(*
šputSaãtyDriveModuË11Aùu®AngË
)<
DriveModuËLo¡KÚkeMšTÜque
)è
m12
=
TRUE
;

679 
m12
=
FALSE
;

680 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m13
=
TRUE
;

681 
m13
=
FALSE
;

682 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m14
=
TRUE
;

683 
m14
=
FALSE
;

684 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m15
=
TRUE
;

685 
m15
=
FALSE
;

686 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m16
=
TRUE
;

687 
m16
=
FALSE
;

688 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m17
=
TRUE
;

689 
m17
=
FALSE
;

690 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*
šputSaãtyDriveModuË11Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m18
=
TRUE
;

691 
m18
=
FALSE
;

692 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*šputSaãtyDriveModuË12Aùu®AngË)>
MÙÜPÏusiW¬nD»hzahl
è
m19
=
TRUE
;

693 
m19
=
FALSE
;

694 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*šputSaãtyDriveModuË12Aùu®AngË)>
MÙÜPÏusiFehËrD»hzahl
è
m20
=
TRUE
;

695 
m20
=
FALSE
;

696 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*šputSaãtyDriveModuË12Aùu®AngË)>
MÙÜPÏusiW¬nD»hzahl
è
m21
=
TRUE
;

697 
m21
=
FALSE
;

698 if(
	`abs
(*
šputSaãtyDriveModuË12Aùu®AngË
-*šputSaãtyDriveModuË12Aùu®AngË)>
MÙÜPÏusiFehËrD»hzahl
è
m22
=
TRUE
;

699 
m22
=
FALSE
;

700 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m23
=
TRUE
;

701 
m23
=
FALSE
;

702 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m24
=
TRUE
;

703 
m24
=
FALSE
;

704 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m25
=
TRUE
;

705 
m25
=
FALSE
;

706 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m26
=
TRUE
;

707 
m26
=
FALSE
;

708 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiW¬nD»hzahl
è
m27
=
TRUE
;

709 
m27
=
FALSE
;

710 if(
	`abs
(*
šputSaãtyDriveModuË21Aùu®AngË
-*
šputSaãtyDriveModuË12Aùu®AngË
)>
MÙÜPÏusiFehËrD»hzahl
è
m28
=
TRUE
;

711 
m28
=
FALSE
;

713 if(
m1
==
FALSE
){ if(
tick1
<255)ick1++;}

714 
tick1
=0;

715 if(
m2
==
FALSE
){ if(
tick2
<255)ick2++;}

716 
tick2
=0;

717 if(
m3
==
FALSE
){ if(
tick3
<255)ick3++;}

718 
tick3
=0;

719 if(
m4
==
FALSE
){ if(
tick4
<255)ick4++;}

720 
tick4
=0;

721 if(
m5
|
m6
){ if(
tick5
<255)ick5++;}

722 
tick5
=0;

723 if(
m7
|
m8
){ if(
tick6
<255)ick6++;}

724 
tick6
=0;

725 if(
m9
|
m10
){ if(
tick7
<255)ick7++;}

726 
tick7
=0;

727 if(
m11
|
m12
){ if(
tick8
<255)ick8++;}

728 
tick8
=0;

729 if(
m13
&~
m14
){ if(
tick9
<255)ick9++;}

730 
tick9
=0;

731 if(
m14
){ if(
tick10
<255)ick10++;}

732 
tick10
=0;

733 if(
m15
&~
m16
){ if(
tick11
<255)ick11++;}

734 
tick11
=0;

735 if(
m16
){ if(
tick12
<255)ick12++;}

736 
tick12
=0;

737 if(
m17
&~
m18
){ if(
tick13
<255)ick13++;}

738 
tick13
=0;

739 if(
m18
){ if(
tick14
<255)ick14++;}

740 
tick14
=0;

741 if(
m19
&~
m20
){ if(
tick15
<255)ick15++;}

742 
tick15
=0;

743 if(
m20
){ if(
tick16
<255)ick16++;}

744 
tick16
=0;

745 if(
m21
&~
m22
){ if(
tick17
<255)ick17++;}

746 
tick17
=0;

747 if(
m22
){ if(
tick18
<255)ick18++;}

748 
tick18
=0;

749 if(
m23
&~
m24
){ if(
tick19
<255)ick19++;}

750 
tick19
=0;

751 if(
m24
){ if(
tick20
<255)ick20++;}

752 
tick20
=0;

753 if(
m25
&~
m26
){ if(
tick21
<255)ick21++;}

754 
tick21
=0;

755 if(
m26
){ if(
tick22
<255)ick22++;}

756 
tick22
=0;

757 if(
m27
&~
m28
){ if(
tick23
<255)ick23++;}

758 
tick23
=0;

759 if(
m28
){ if(
tick24
<255)ick24++;}

760 
tick24
=0;

762 if(
tick1
>=50è
SaãtyAngËS’sÜ11TimeOutE¼Ü
=1;

763 
SaãtyAngËS’sÜ11TimeOutE¼Ü
=0;

764 if(
tick2
>=50è
SaãtyAngËS’sÜ12TimeOutE¼Ü
=1;

765 
SaãtyAngËS’sÜ12TimeOutE¼Ü
=0;

766 if(
tick3
>=50è
SaãtyAngËS’sÜ21TimeOutE¼Ü
=1;

767 
SaãtyAngËS’sÜ21TimeOutE¼Ü
=0;

768 if(
tick4
>=50è
SaãtyAngËS’sÜ22TimeOutE¼Ü
=1;

769 
SaãtyAngËS’sÜ22TimeOutE¼Ü
=0;

770 if(
tick5
>=30è
SaãtyDriveModuË11KÚktTimeOutE¼Ü
=1;

771 
SaãtyDriveModuË11KÚktTimeOutE¼Ü
=0;

772 if(
tick6
>=30è
SaãtyDriveModuË12KÚktTimeOutE¼Ü
=1;

773 
SaãtyDriveModuË12KÚktTimeOutE¼Ü
=0;

774 if(
tick7
>=30è
SaãtyDriveModuË21KÚktTimeOutE¼Ü
=1;

775 
SaãtyDriveModuË21KÚktTimeOutE¼Ü
=0;

776 if(
tick8
>=30è
SaãtyDriveModuË22KÚktTimeOutE¼Ü
=1;

777 
SaãtyDriveModuË22KÚktTimeOutE¼Ü
=0;

778 if(
tick9
>=20è
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
=1;

779 
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
=0;

780 if(
tick10
>=20è
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiTimeOut
=1;

781 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiTimeOut
=0;

782 if(
tick11
>=20è
SaãtyW¬nMÙÜ112D»hzahlPÏusiTimeOut
=1;

783 
SaãtyW¬nMÙÜ112D»hzahlPÏusiTimeOut
=0;

784 if(
tick12
>=20è
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiTimeOut
=1;

785 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiTimeOut
=0;

786 if(
tick13
>=20è
SaãtyW¬nMÙÜ121D»hzahlPÏusiTimeOut
=1;

787 
SaãtyW¬nMÙÜ121D»hzahlPÏusiTimeOut
=0;

788 if(
tick14
>=20è
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiTimeOut
=1;

789 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiTimeOut
=0;

790 if(
tick15
>=20è
SaãtyW¬nMÙÜ122D»hzahlPÏusiTimeOut
=1;

791 
SaãtyW¬nMÙÜ122D»hzahlPÏusiTimeOut
=0;

792 if(
tick16
>=20è
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiTimeOut
=1;

793 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiTimeOut
=0;

794 if(
tick17
>=20è
SaãtyW¬nMÙÜ211D»hzahlPÏusiTimeOut
=1;

795 
SaãtyW¬nMÙÜ211D»hzahlPÏusiTimeOut
=0;

796 if(
tick18
>=20è
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiTimeOut
=1;

797 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiTimeOut
=0;

798 if(
tick19
>=20è
SaãtyW¬nMÙÜ212D»hzahlPÏusiTimeOut
=1;

799 
SaãtyW¬nMÙÜ212D»hzahlPÏusiTimeOut
=0;

800 if(
tick20
>=20è
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiTimeOut
=1;

801 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiTimeOut
=0;

802 if(
tick21
>=20è
SaãtyW¬nMÙÜ221D»hzahlPÏusiTimeOut
=1;

803 
SaãtyW¬nMÙÜ221D»hzahlPÏusiTimeOut
=0;

804 if(
tick22
>=20è
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiTimeOut
=1;

805 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiTimeOut
=0;

806 if(
tick23
>=20è
SaãtyW¬nMÙÜ222D»hzahlPÏusiTimeOut
=1;

807 
SaãtyW¬nMÙÜ222D»hzahlPÏusiTimeOut
=0;

808 if(
tick24
>=20è
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiTimeOut
=1;

809 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiTimeOut
=0;

810 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSysData.c

1 
	~<SaãtyDriveSysD©a.h
>

6 
ušt8
 
	gSaãtyAngËS’sÜ11TimeOutE¼Ü
;

7 
ušt8
 
	gSaãtyAngËS’sÜ12TimeOutE¼Ü
;

8 
ušt8
 
	gSaãtyAngËS’sÜ21TimeOutE¼Ü
;

9 
ušt8
 
	gSaãtyAngËS’sÜ22TimeOutE¼Ü
;

10 
ušt8
 
	gSaãtyDriveModuË11KÚktTimeOutE¼Ü
;

11 
ušt8
 
	gSaãtyDriveModuË12KÚktTimeOutE¼Ü
;

12 
ušt8
 
	gSaãtyDriveModuË21KÚktTimeOutE¼Ü
;

13 
ušt8
 
	gSaãtyDriveModuË22KÚktTimeOutE¼Ü
;

14 
boŞ—n
 
	gSaãtyE¼ÜAngËS’sÜ11E¼Ü
;

15 
boŞ—n
 
	gSaãtyE¼ÜAngËS’sÜ12E¼Ü
;

16 
boŞ—n
 
	gSaãtyE¼ÜAngËS’sÜ21E¼Ü
;

17 
boŞ—n
 
	gSaãtyE¼ÜAngËS’sÜ22E¼Ü
;

18 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË11AngËOut
;

19 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË12AngËOut
;

20 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË21AngËOut
;

21 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË22AngËOut
;

22 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË11KÚktLo£
;

23 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË12KÚktLo£
;

24 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË21KÚktLo£
;

25 
boŞ—n
 
	gSaãtyE¼ÜDriveModuË22KÚktLo£
;

26 
boŞ—n
 
	gSaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
;

27 
boŞ—n
 
	gSaãtyW¬nMÙÜ112D»hzahlPÏusiTimeOut
;

28 
boŞ—n
 
	gSaãtyW¬nMÙÜ121D»hzahlPÏusiTimeOut
;

29 
boŞ—n
 
	gSaãtyW¬nMÙÜ122D»hzahlPÏusiTimeOut
;

30 
boŞ—n
 
	gSaãtyW¬nMÙÜ211D»hzahlPÏusiTimeOut
;

31 
boŞ—n
 
	gSaãtyW¬nMÙÜ212D»hzahlPÏusiTimeOut
;

32 
boŞ—n
 
	gSaãtyW¬nMÙÜ221D»hzahlPÏusiTimeOut
;

33 
boŞ—n
 
	gSaãtyW¬nMÙÜ222D»hzahlPÏusiTimeOut
;

34 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ111D»hzahlPÏusiTimeOut
;

35 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ112D»hzahlPÏusiTimeOut
;

36 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ121D»hzahlPÏusiTimeOut
;

37 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ122D»hzahlPÏusiTimeOut
;

38 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ211D»hzahlPÏusiTimeOut
;

39 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ212D»hzahlPÏusiTimeOut
;

40 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ221D»hzahlPÏusiTimeOut
;

41 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ222D»hzahlPÏusiTimeOut
;

42 
boŞ—n
 
	gSaãtyW¬nMÙÜ111D»hzahlPÏusi
;

43 
boŞ—n
 
	gSaãtyW¬nMÙÜ112D»hzahlPÏusi
;

44 
boŞ—n
 
	gSaãtyW¬nMÙÜ121D»hzahlPÏusi
;

45 
boŞ—n
 
	gSaãtyW¬nMÙÜ122D»hzahlPÏusi
;

46 
boŞ—n
 
	gSaãtyW¬nMÙÜ211D»hzahlPÏusi
;

47 
boŞ—n
 
	gSaãtyW¬nMÙÜ212D»hzahlPÏusi
;

48 
boŞ—n
 
	gSaãtyW¬nMÙÜ221D»hzahlPÏusi
;

49 
boŞ—n
 
	gSaãtyW¬nMÙÜ222D»hzahlPÏusi
;

50 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ111D»hzahlPÏusi
;

51 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ112D»hzahlPÏusi
;

52 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ121D»hzahlPÏusi
;

53 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ122D»hzahlPÏusi
;

54 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ211D»hzahlPÏusi
;

55 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ212D»hzahlPÏusi
;

56 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ221D»hzahlPÏusi
;

57 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ222D»hzahlPÏusi
;

58 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ111Umrich‹r
;

59 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ112Umrich‹r
;

60 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ121Umrich‹r
;

61 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ122Umrich‹r
;

62 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ211Umrich‹r
;

63 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ212Umrich‹r
;

64 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ221Umrich‹r
;

65 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ222Umrich‹r
;

66 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ111Umrich‹rOfæše
;

67 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ112Umrich‹rOfæše
;

68 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ121Umrich‹rOfæše
;

69 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ122Umrich‹rOfæše
;

70 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ211Umrich‹rOfæše
;

71 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ212Umrich‹rOfæše
;

72 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ221Umrich‹rOfæše
;

73 
boŞ—n
 
	gSaãtyE¼ÜMÙÜ222Umrich‹rOfæše
;

74 
boŞ—n
 
	gSaãtyE¼ÜMÙÜUmrich‹rOfæše
;

75 
boŞ—n
 
	gSaãtyE¼ÜKam”a1Ofæše
;

76 
boŞ—n
 
	gSaãtyE¼ÜKam”a2Ofæše
;

77 
boŞ—n
 
	gSaãtyE¼ÜKam”aOfæše
;

82 
sšt32
 *
	gšputSaãtyDriveModuË11Aùu®AngË
;

83 
sšt32
 *
	gšputSaãtyDriveModuË12Aùu®AngË
;

84 
sšt32
 *
	gšputSaãtyDriveModuË21Aùu®AngË
;

85 
sšt32
 *
	gšputSaãtyDriveModuË22Aùu®AngË
;

86 
sšt32
 *
	gšputSaãtyDriveModuË11S‘AngË
;

87 
sšt32
 *
	gšputSaãtyDriveModuË12S‘AngË
;

88 
sšt32
 *
	gšputSaãtyDriveModuË21S‘AngË
;

89 
sšt32
 *
	gšputSaãtyDriveModuË22S‘AngË
;

90 
sšt16
 *
	gšputSaãtyMÙÜ111S‘S³ed
;

91 
sšt16
 *
	gšputSaãtyMÙÜ112S‘S³ed
;

92 
sšt16
 *
	gšputSaãtyMÙÜ121S‘S³ed
;

93 
sšt16
 *
	gšputSaãtyMÙÜ122S‘S³ed
;

94 
sšt16
 *
	gšputSaãtyMÙÜ211S‘S³ed
;

95 
sšt16
 *
	gšputSaãtyMÙÜ212S‘S³ed
;

96 
sšt16
 *
	gšputSaãtyMÙÜ221S‘S³ed
;

97 
sšt16
 *
	gšputSaãtyMÙÜ222S‘S³ed
;

98 
sšt16
 *
	gšputSaãtyMÙÜ111Aùu®TÜque
;

99 
sšt16
 *
	gšputSaãtyMÙÜ112Aùu®TÜque
;

100 
sšt16
 *
	gšputSaãtyMÙÜ121Aùu®TÜque
;

101 
sšt16
 *
	gšputSaãtyMÙÜ122Aùu®TÜque
;

102 
sšt16
 *
	gšputSaãtyMÙÜ211Aùu®TÜque
;

103 
sšt16
 *
	gšputSaãtyMÙÜ212Aùu®TÜque
;

104 
sšt16
 *
	gšputSaãtyMÙÜ221Aùu®TÜque
;

105 
sšt16
 *
	gšputSaãtyMÙÜ222Aùu®TÜque
;

106 
sšt16
 *
	gšputSaãtyMÙÜ111Aùu®S³ed
;

107 
sšt16
 *
	gšputSaãtyMÙÜ112Aùu®S³ed
;

108 
sšt16
 *
	gšputSaãtyMÙÜ121Aùu®S³ed
;

109 
sšt16
 *
	gšputSaãtyMÙÜ122Aùu®S³ed
;

110 
sšt16
 *
	gšputSaãtyMÙÜ211Aùu®S³ed
;

111 
sšt16
 *
	gšputSaãtyMÙÜ212Aùu®S³ed
;

112 
sšt16
 *
	gšputSaãtyMÙÜ221Aùu®S³ed
;

113 
sšt16
 *
	gšputSaãtyMÙÜ222Aùu®S³ed
;

114 
ušt8
 *
	gšputSaãtyMÙÜ111StusBy‹
;

115 
ušt8
 *
	gšputSaãtyMÙÜ112StusBy‹
;

116 
ušt8
 *
	gšputSaãtyMÙÜ121StusBy‹
;

117 
ušt8
 *
	gšputSaãtyMÙÜ122StusBy‹
;

118 
ušt8
 *
	gšputSaãtyMÙÜ211StusBy‹
;

119 
ušt8
 *
	gšputSaãtyMÙÜ212StusBy‹
;

120 
ušt8
 *
	gšputSaãtyMÙÜ221StusBy‹
;

121 
ušt8
 *
	gšputSaãtyMÙÜ222StusBy‹
;

122 
ušt16
 *
	gšputSaãtyMÙÜ111E¼ÜCode
;

123 
ušt16
 *
	gšputSaãtyMÙÜ112E¼ÜCode
;

124 
ušt16
 *
	gšputSaãtyMÙÜ121E¼ÜCode
;

125 
ušt16
 *
	gšputSaãtyMÙÜ122E¼ÜCode
;

126 
ušt16
 *
	gšputSaãtyMÙÜ211E¼ÜCode
;

127 
ušt16
 *
	gšputSaãtyMÙÜ212E¼ÜCode
;

128 
ušt16
 *
	gšputSaãtyMÙÜ221E¼ÜCode
;

129 
ušt16
 *
	gšputSaãtyMÙÜ222E¼ÜCode
;

130 
ušt16
 *
	gšputSaãtyIOV”sÜgungB»m£nAus
;

131 
ušt32
 *
	gšputSaãtyG‘DriveSy¡emStusWÜd
;

132 
ušt8
 *
	gšputSaãtyInv”‹r111NodeStus
;

133 
ušt8
 *
	gšputSaãtyInv”‹r112NodeStus
;

134 
ušt8
 *
	gšputSaãtyInv”‹r121NodeStus
;

135 
ušt8
 *
	gšputSaãtyInv”‹r122NodeStus
;

136 
ušt8
 *
	gšputSaãtyInv”‹r211NodeStus
;

137 
ušt8
 *
	gšputSaãtyInv”‹r212NodeStus
;

138 
ušt8
 *
	gšputSaãtyInv”‹r221NodeStus
;

139 
ušt8
 *
	gšputSaãtyInv”‹r222NodeStus
;

140 
ušt8
 *
	gšputSaãtyKam”a1NodeStus
;

141 
ušt8
 *
	gšputSaãtyKam”a2NodeStus
;

146 
ušt32
 *
	gouutSaãtyS‘DriveSy¡emWÜd
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSysData.h

1 #iâdeà
_SAFETYDRIVESYSDATA_H


2 
	#_SAFETYDRIVESYSDATA_H


	)

3 
	~<¡wty³s.h
>

8 
	#DriveModuË11MaxAngË
 (110)

	)

9 
	#DriveModuË11MšAngË
 (-110)

	)

10 
	#DriveModuË12MaxAngË
 (110)

	)

11 
	#DriveModuË12MšAngË
 (-110)

	)

12 
	#DriveModuË21MaxAngË
 (110)

	)

13 
	#DriveModuË21MšAngË
 (-110)

	)

14 
	#DriveModuË22MaxAngË
 (110)

	)

15 
	#DriveModuË22MšAngË
 (-110)

	)

16 
	#KeySaáeyG‘DriveSysZ”oS‘
 (0x00040000)

	)

17 
	#AngËS’sÜE¼ÜFauÉ
 (3.5)

	)

18 
	#DriveModuËLo¡KÚkeMšS³ed
 (500)

	)

19 
	#DriveModuËLo¡KÚkeMšTÜque
 (120)

	)

20 
	#MÙÜPÏusiW¬nD»hzahl
 (100)

	)

21 
	#MÙÜPÏusiFehËrD»hzahl
 (300)

	)

22 
	#KeySaãtyMÙÜUmrich‹rFauÉ
 (0x02)

	)

23 
	#KeySaãtyNodeDiscÚÃ‹d
 (0x01)

	)

28 
ušt8
 
SaãtyAngËS’sÜ11TimeOutE¼Ü
;

29 
ušt8
 
SaãtyAngËS’sÜ12TimeOutE¼Ü
;

30 
ušt8
 
SaãtyAngËS’sÜ21TimeOutE¼Ü
;

31 
ušt8
 
SaãtyAngËS’sÜ22TimeOutE¼Ü
;

32 
ušt8
 
SaãtyDriveModuË11KÚktTimeOutE¼Ü
;

33 
ušt8
 
SaãtyDriveModuË12KÚktTimeOutE¼Ü
;

34 
ušt8
 
SaãtyDriveModuË21KÚktTimeOutE¼Ü
;

35 
ušt8
 
SaãtyDriveModuË22KÚktTimeOutE¼Ü
;

36 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ11E¼Ü
;

37 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ12E¼Ü
;

38 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ21E¼Ü
;

39 
boŞ—n
 
SaãtyE¼ÜAngËS’sÜ22E¼Ü
;

40 
boŞ—n
 
SaãtyE¼ÜDriveModuË11AngËOut
;

41 
boŞ—n
 
SaãtyE¼ÜDriveModuË12AngËOut
;

42 
boŞ—n
 
SaãtyE¼ÜDriveModuË21AngËOut
;

43 
boŞ—n
 
SaãtyE¼ÜDriveModuË22AngËOut
;

44 
boŞ—n
 
SaãtyE¼ÜDriveModuË11KÚktLo£
;

45 
boŞ—n
 
SaãtyE¼ÜDriveModuË12KÚktLo£
;

46 
boŞ—n
 
SaãtyE¼ÜDriveModuË21KÚktLo£
;

47 
boŞ—n
 
SaãtyE¼ÜDriveModuË22KÚktLo£
;

48 
boŞ—n
 
SaãtyW¬nMÙÜ111D»hzahlPÏusiTimeOut
;

49 
boŞ—n
 
SaãtyW¬nMÙÜ112D»hzahlPÏusiTimeOut
;

50 
boŞ—n
 
SaãtyW¬nMÙÜ121D»hzahlPÏusiTimeOut
;

51 
boŞ—n
 
SaãtyW¬nMÙÜ122D»hzahlPÏusiTimeOut
;

52 
boŞ—n
 
SaãtyW¬nMÙÜ211D»hzahlPÏusiTimeOut
;

53 
boŞ—n
 
SaãtyW¬nMÙÜ212D»hzahlPÏusiTimeOut
;

54 
boŞ—n
 
SaãtyW¬nMÙÜ221D»hzahlPÏusiTimeOut
;

55 
boŞ—n
 
SaãtyW¬nMÙÜ222D»hzahlPÏusiTimeOut
;

56 
boŞ—n
 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusiTimeOut
;

57 
boŞ—n
 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusiTimeOut
;

58 
boŞ—n
 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusiTimeOut
;

59 
boŞ—n
 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusiTimeOut
;

60 
boŞ—n
 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusiTimeOut
;

61 
boŞ—n
 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusiTimeOut
;

62 
boŞ—n
 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusiTimeOut
;

63 
boŞ—n
 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusiTimeOut
;

64 
boŞ—n
 
SaãtyW¬nMÙÜ111D»hzahlPÏusi
;

65 
boŞ—n
 
SaãtyW¬nMÙÜ112D»hzahlPÏusi
;

66 
boŞ—n
 
SaãtyW¬nMÙÜ121D»hzahlPÏusi
;

67 
boŞ—n
 
SaãtyW¬nMÙÜ122D»hzahlPÏusi
;

68 
boŞ—n
 
SaãtyW¬nMÙÜ211D»hzahlPÏusi
;

69 
boŞ—n
 
SaãtyW¬nMÙÜ212D»hzahlPÏusi
;

70 
boŞ—n
 
SaãtyW¬nMÙÜ221D»hzahlPÏusi
;

71 
boŞ—n
 
SaãtyW¬nMÙÜ222D»hzahlPÏusi
;

72 
boŞ—n
 
SaãtyE¼ÜMÙÜ111D»hzahlPÏusi
;

73 
boŞ—n
 
SaãtyE¼ÜMÙÜ112D»hzahlPÏusi
;

74 
boŞ—n
 
SaãtyE¼ÜMÙÜ121D»hzahlPÏusi
;

75 
boŞ—n
 
SaãtyE¼ÜMÙÜ122D»hzahlPÏusi
;

76 
boŞ—n
 
SaãtyE¼ÜMÙÜ211D»hzahlPÏusi
;

77 
boŞ—n
 
SaãtyE¼ÜMÙÜ212D»hzahlPÏusi
;

78 
boŞ—n
 
SaãtyE¼ÜMÙÜ221D»hzahlPÏusi
;

79 
boŞ—n
 
SaãtyE¼ÜMÙÜ222D»hzahlPÏusi
;

80 
boŞ—n
 
SaãtyE¼ÜMÙÜ111Umrich‹r
;

81 
boŞ—n
 
SaãtyE¼ÜMÙÜ112Umrich‹r
;

82 
boŞ—n
 
SaãtyE¼ÜMÙÜ121Umrich‹r
;

83 
boŞ—n
 
SaãtyE¼ÜMÙÜ122Umrich‹r
;

84 
boŞ—n
 
SaãtyE¼ÜMÙÜ211Umrich‹r
;

85 
boŞ—n
 
SaãtyE¼ÜMÙÜ212Umrich‹r
;

86 
boŞ—n
 
SaãtyE¼ÜMÙÜ221Umrich‹r
;

87 
boŞ—n
 
SaãtyE¼ÜMÙÜ222Umrich‹r
;

88 
boŞ—n
 
SaãtyE¼ÜMÙÜ111Umrich‹rOfæše
;

89 
boŞ—n
 
SaãtyE¼ÜMÙÜ112Umrich‹rOfæše
;

90 
boŞ—n
 
SaãtyE¼ÜMÙÜ121Umrich‹rOfæše
;

91 
boŞ—n
 
SaãtyE¼ÜMÙÜ122Umrich‹rOfæše
;

92 
boŞ—n
 
SaãtyE¼ÜMÙÜ211Umrich‹rOfæše
;

93 
boŞ—n
 
SaãtyE¼ÜMÙÜ212Umrich‹rOfæše
;

94 
boŞ—n
 
SaãtyE¼ÜMÙÜ221Umrich‹rOfæše
;

95 
boŞ—n
 
SaãtyE¼ÜMÙÜ222Umrich‹rOfæše
;

96 
boŞ—n
 
SaãtyE¼ÜMÙÜUmrich‹rOfæše
;

97 
boŞ—n
 
SaãtyE¼ÜKam”a1Ofæše
;

98 
boŞ—n
 
SaãtyE¼ÜKam”a2Ofæše
;

99 
boŞ—n
 
SaãtyE¼ÜKam”aOfæše
;

104 
sšt32
 *
šputSaãtyDriveModuË11Aùu®AngË
;

105 
sšt32
 *
šputSaãtyDriveModuË12Aùu®AngË
;

106 
sšt32
 *
šputSaãtyDriveModuË21Aùu®AngË
;

107 
sšt32
 *
šputSaãtyDriveModuË22Aùu®AngË
;

108 
sšt32
 *
šputSaãtyDriveModuË11S‘AngË
;

109 
sšt32
 *
šputSaãtyDriveModuË12S‘AngË
;

110 
sšt32
 *
šputSaãtyDriveModuË21S‘AngË
;

111 
sšt32
 *
šputSaãtyDriveModuË22S‘AngË
;

112 
sšt16
 *
šputSaãtyMÙÜ111S‘S³ed
;

113 
sšt16
 *
šputSaãtyMÙÜ112S‘S³ed
;

114 
sšt16
 *
šputSaãtyMÙÜ121S‘S³ed
;

115 
sšt16
 *
šputSaãtyMÙÜ122S‘S³ed
;

116 
sšt16
 *
šputSaãtyMÙÜ211S‘S³ed
;

117 
sšt16
 *
šputSaãtyMÙÜ212S‘S³ed
;

118 
sšt16
 *
šputSaãtyMÙÜ221S‘S³ed
;

119 
sšt16
 *
šputSaãtyMÙÜ222S‘S³ed
;

120 
sšt16
 *
šputSaãtyMÙÜ111Aùu®TÜque
;

121 
sšt16
 *
šputSaãtyMÙÜ112Aùu®TÜque
;

122 
sšt16
 *
šputSaãtyMÙÜ121Aùu®TÜque
;

123 
sšt16
 *
šputSaãtyMÙÜ122Aùu®TÜque
;

124 
sšt16
 *
šputSaãtyMÙÜ211Aùu®TÜque
;

125 
sšt16
 *
šputSaãtyMÙÜ212Aùu®TÜque
;

126 
sšt16
 *
šputSaãtyMÙÜ221Aùu®TÜque
;

127 
sšt16
 *
šputSaãtyMÙÜ222Aùu®TÜque
;

128 
sšt16
 *
šputSaãtyMÙÜ111Aùu®S³ed
;

129 
sšt16
 *
šputSaãtyMÙÜ112Aùu®S³ed
;

130 
sšt16
 *
šputSaãtyMÙÜ121Aùu®S³ed
;

131 
sšt16
 *
šputSaãtyMÙÜ122Aùu®S³ed
;

132 
sšt16
 *
šputSaãtyMÙÜ211Aùu®S³ed
;

133 
sšt16
 *
šputSaãtyMÙÜ212Aùu®S³ed
;

134 
sšt16
 *
šputSaãtyMÙÜ221Aùu®S³ed
;

135 
sšt16
 *
šputSaãtyMÙÜ222Aùu®S³ed
;

136 
ušt8
 *
šputSaãtyMÙÜ111StusBy‹
;

137 
ušt8
 *
šputSaãtyMÙÜ112StusBy‹
;

138 
ušt8
 *
šputSaãtyMÙÜ121StusBy‹
;

139 
ušt8
 *
šputSaãtyMÙÜ122StusBy‹
;

140 
ušt8
 *
šputSaãtyMÙÜ211StusBy‹
;

141 
ušt8
 *
šputSaãtyMÙÜ212StusBy‹
;

142 
ušt8
 *
šputSaãtyMÙÜ221StusBy‹
;

143 
ušt8
 *
šputSaãtyMÙÜ222StusBy‹
;

144 
ušt16
 *
šputSaãtyMÙÜ111E¼ÜCode
;

145 
ušt16
 *
šputSaãtyMÙÜ112E¼ÜCode
;

146 
ušt16
 *
šputSaãtyMÙÜ121E¼ÜCode
;

147 
ušt16
 *
šputSaãtyMÙÜ122E¼ÜCode
;

148 
ušt16
 *
šputSaãtyMÙÜ211E¼ÜCode
;

149 
ušt16
 *
šputSaãtyMÙÜ212E¼ÜCode
;

150 
ušt16
 *
šputSaãtyMÙÜ221E¼ÜCode
;

151 
ušt16
 *
šputSaãtyMÙÜ222E¼ÜCode
;

152 
ušt16
 *
šputSaãtyIOV”sÜgungB»m£nAus
;

153 
ušt32
 *
šputSaãtyG‘DriveSy¡emStusWÜd
;

154 
ušt8
 *
šputSaãtyInv”‹r111NodeStus
;

155 
ušt8
 *
šputSaãtyInv”‹r112NodeStus
;

156 
ušt8
 *
šputSaãtyInv”‹r121NodeStus
;

157 
ušt8
 *
šputSaãtyInv”‹r122NodeStus
;

158 
ušt8
 *
šputSaãtyInv”‹r211NodeStus
;

159 
ušt8
 *
šputSaãtyInv”‹r212NodeStus
;

160 
ušt8
 *
šputSaãtyInv”‹r221NodeStus
;

161 
ušt8
 *
šputSaãtyInv”‹r222NodeStus
;

162 
ušt8
 *
šputSaãtyKam”a1NodeStus
;

163 
ušt8
 *
šputSaãtyKam”a2NodeStus
;

168 
ušt32
 *
ouutSaãtyS‘DriveSy¡emWÜd
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyInterface.h

1 #iâdeà
_SAFETYINTERFACE_H


2 
	#_SAFETYINTERFACE_H


	)

12 
In™Saãty
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyNormal.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$HªdËSaãtyNÜm®
(){

11 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
,
m10
,
m11
,
m12
,
m13
,
m14
,
m15
;

13 
m1
=
SaãtyE¼ÜNÙAusEckVÜÃ
|
SaãtyE¼ÜNÙAusEckHš‹n
|
SaãtyE¼ÜNÙAusFunke
|
SaãtyE¼ÜDriveModuË11AngËOut
|
SaãtyE¼ÜDriveModuË12AngËOut
|
SaãtyE¼ÜDriveModuË21AngËOut
|
SaãtyE¼ÜDriveModuË22AngËOut
|
SaãtyE¼ÜLS1Absch®‹n
|
SaãtyE¼ÜLS2Absch®‹n
;

14 
m2
=
SaãtyE¼ÜNÙAusSchutzAus
|
SaãtyE¼ÜMESTimeOut
|
SaãtyE¼ÜCANBus
;

15 
m3
=
SaãtyE¼ÜNÙAusEckVÜÃ
|
SaãtyE¼ÜNÙAusEckHš‹n
|
SaãtyE¼ÜNÙAusFunke
|
SaãtyE¼ÜDriveModuË11AngËOut
|
SaãtyE¼ÜDriveModuË12AngËOut
|
SaãtyE¼ÜDriveModuË21AngËOut
|
SaãtyE¼ÜDriveModuË22AngËOut
|
SaãtyE¼ÜLS1Absch®‹n
|
SaãtyE¼ÜLS2Absch®‹n
|
SaãtyE¼ÜHubSy¡emOÆySšk’
|
SaãtyE¼ÜMÙÜUmrich‹rOfæše
|
SaãtyE¼ÜRCOfæše
;

16 
m4
=
SaãtyE¼ÜLS1Qu™
;

17 
m5
=
SaãtyE¼ÜLS2Qu™
;

18 
m6
=
SaãtyE¼ÜLS1W¬n1
;

19 
m7
=
SaãtyE¼ÜLS1W¬n2
;

20 
m8
=
SaãtyE¼ÜLS2W¬n1
;

21 
m9
=
SaãtyE¼ÜLS2W¬n2
;

22 
m10
=
SaãtyE¼ÜLS1Absch®‹n
;

23 
m11
=
SaãtyE¼ÜLS2Absch®‹n
;

24 
m12
=
SaãtyE¼ÜNÙAusEckVÜÃ
|
SaãtyE¼ÜNÙAusEckHš‹n
|
SaãtyE¼ÜNÙAusFunke
;

25 
m13
=
SaãtyE¼ÜLad’Zu¡ªd
;

26 
m14
=
SaãtyE¼ÜKam”aOfæše
|
SaãtyE¼ÜRCOfæše
;

27 
m15
=
SaãtyE¼ÜHubSy¡emStİReq
;

29 if(
m1
){

30 *
ouutSaãtyIOMÙÜSaãtyStİ
&=0xffff0000;

33 *
ouutSaãtyIOMÙÜSaãtyStİ
&=0xffff0000;

34 *
ouutSaãtyIOMÙÜSaãtyStİ
+=0x00000001;

36 if(
m2
){

37 *
ouutSaãtyIOLei¡ungSchutz1
&=0xffff0000;

38 *
ouutSaãtyIOLei¡ungSchutz2
&=0xffff0000;

41 *
ouutSaãtyIOLei¡ungSchutz1
&=0xffff0000;

42 *
ouutSaãtyIOLei¡ungSchutz1
+=0x00000001;

43 *
ouutSaãtyIOLei¡ungSchutz2
&=0xffff0000;

44 *
ouutSaãtyIOLei¡ungSchutz2
+=0x00000001;

46 if(
m3
){

47 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCDriveSysStİ
;

50 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCDriveSysStİ
;

52 if(
m4
){

53 *
ouutSaãtyIOQu™t›rungLS1
&=0xffff0000;

56 *
ouutSaãtyIOQu™t›rungLS1
&=0xffff0000;

57 *
ouutSaãtyIOQu™t›rungLS1
+=0x00000001;

59 if(
m5
){

60 *
ouutSaãtyIOQu™t›rungLS2
&=0xffff0000;

63 *
ouutSaãtyIOQu™t›rungLS2
&=0xffff0000;

64 *
ouutSaãtyIOQu™t›rungLS2
+=0x00000001;

66 if(
m6
){

67 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”1W¬n
;

70 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”1W¬n
;

72 if(
m7
){

73 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”1Slow
;

76 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”1Slow
;

78 if(
m8
){

79 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”2W¬n
;

82 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”2W¬n
;

84 if(
m9
){

85 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”2Slow
;

88 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”2Slow
;

90 if(
m10
){

91 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”1Stİ
;

94 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”1Stİ
;

96 if(
m11
){

97 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLa£rsÿÂ”2Stİ
;

100 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLa£rsÿÂ”2Stİ
;

102 if(
m12
){

103 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCNÙAusStus
;

106 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCNÙAusStus
;

108 if(
m13
){

109 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCLadeStus
;

112 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCLadeStus
;

114 if(
m14
){

115 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCAutoDriveStİ
;

118 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCAutoDriveStİ
;

120 if(
m15
){

121 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘RCHubSysStİ
;

124 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘RCHubSysStİ
;

126 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLC.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$In™SaãtyPLC
(){

11 
šputSaãtyIONÙAusFunkeKª®1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut28
,
Ty³U16
,0); *inputSafetyIONotAusFunkeKanal1=0x0000;

12 
šputSaãtyIONÙAusFunkeKª®2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut41
,
Ty³U16
,0); *inputSafetyIONotAusFunkeKanal2=0x0000;

13 
šputSaãtyIONÙAusEckVÜÃKª®1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut29
,
Ty³U16
,0); *inputSafetyIONotAusEckVorneKanal1=0x0000;

14 
šputSaãtyIONÙAusEckVÜÃKª®2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut42
,
Ty³U16
,0); *inputSafetyIONotAusEckVorneKanal2=0x0000;

15 
šputSaãtyIONÙAusEckHš‹nKª®1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut30
,
Ty³U16
,0); *inputSafetyIONotAusEckHintenKanal1=0x0000;

16 
šputSaãtyIONÙAusEckHš‹nKª®2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut43
,
Ty³U16
,0); *inputSafetyIONotAusEckHintenKanal2=0x0000;

17 
šputSaãtyIOLS1W¬nãld1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut32
,
Ty³U16
,0); *inputSafetyIOLS1Warnfeld1=0x0000;

18 
šputSaãtyIOLS2W¬nãld1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut45
,
Ty³U16
,0); *inputSafetyIOLS2Warnfeld1=0x0000;

19 
šputSaãtyIOLS1Absch®tF–dKª®1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut33
,
Ty³U16
,0); *inputSafetyIOLS1AbschaltFeldKanal1=0x0000;

20 
šputSaãtyIOLS1Absch®tF–dKª®2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut46
,
Ty³U16
,0); *inputSafetyIOLS1AbschaltFeldKanal2=0x0000;

21 
šputSaãtyIOLS2Absch®tF–dKª®1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut34
,
Ty³U16
,0); *inputSafetyIOLS2AbschaltFeldKanal1=0x0000;

22 
šputSaãtyIOLS2Absch®tF–dKª®2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut47
,
Ty³U16
,0); *inputSafetyIOLS2AbschaltFeldKanal2=0x0000;

23 
šputSaãtyIOLS1W¬nãld2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut35
,
Ty³U16
,0); *inputSafetyIOLS1Warnfeld2=0x0000;

24 
šputSaãtyIOLS2W¬nãld2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut48
,
Ty³U16
,0); *inputSafetyIOLS2Warnfeld2=0x0000;

25 
šputSaãtyIOLS1Qu™t›rung
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut36
,
Ty³U32
,0); *inputSafetyIOLS1Quittierung=0x00000000;

26 
šputSaãtyIOLS2Qu™t›rung
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut49
,
Ty³U32
,0); *inputSafetyIOLS2Quittierung=0x00000000;

27 
šputSaãtyIONÙAusSchutz
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut52
,
Ty³U16
,0); *inputSafetyIONotAusSchutz=0x0000;

28 
šputSaãtyIOLadeS‹ck”
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut39
,
Ty³U16
,0); *inputSafetyIOLadeStecker=0x0000;

29 
šputSaãtySaãtySysCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0); *inputSafetySafetySysControlWord=0x00000000;

30 
šputSaãtyG‘SÏveMESStus
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm1FromSÏveLowWÜd
,
Ty³U8
,0); *inputSafetyGetSlaveMESStatus=0x00;

31 
šputSaãtyG‘CPUTem³¿tur
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUTem³¿tur
,
Ty³U32
,0); *inputSafetyGetCPUTemperatur=0x00000000;

32 
šputSaãtyG‘CPUVŞgeUb
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUb1
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUb=0x00000000;

33 
šputSaãtyG‘CPUVŞgeUc
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUC1
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUc=0x00000000;

34 
šputSaãtyG‘CPUVŞgeUext
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeExt
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUext=0x00000000;

35 
šputSaãtyG‘CPUCu¼’tUb
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUCu¼’tUb1
,
Ty³U32
,0); *inputSafetyGetCPUCurrentUb=0x00000000;

36 
šputSaãtyG‘CANBusStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,1); *inputSafetyGetCANBusStatus=0x00;

37 
šputSaãtyRCNodeStus
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlNodeStus
,
Ty³U8
,1); *inputSafetyRCNodeStatus=0x00;

39 
ouutSaãtyIOLei¡ungSchutz1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut01
,
Ty³U32
,0); *outputSafetyIOLeistungSchutz1=0x00000000;

40 
ouutSaãtyIOLei¡ungSchutz2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut50
,
Ty³U32
,0); *outputSafetyIOLeistungSchutz2=0x00000000;

41 
ouutSaãtyIOMESAus
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut06
,
Ty³U32
,0); *outputSafetyIOMESAus=0x00000000;

42 
ouutSaãtyIOQu™t›rungLS1
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut36
,
Ty³U32
,0); *outputSafetyIOQuittierungLS1=0x00000000;

43 
ouutSaãtyIOQu™t›rungLS2
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut49
,
Ty³U32
,0); *outputSafetyIOQuittierungLS2=0x00000000;

44 
ouutSaãtyIOMÙÜSaãtyStİ
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut51
,
Ty³U32
,0); *outputSafetyIOMotorSafetyStop=0x00000000;

45 
	}
}

53 
	$PLCSaãtyNoV”sÜgung
(){

54 
boŞ—n
 
m1
,
m2
,
m3
;

55 
boŞ—n
 
SaãtyE¼ÜNoV”sÜgungOldV®ue
;

57 if(*
šputSaãtyIONÙAusSchutz
==1è
m1
=
TRUE
;

58 
m1
=
FALSE
;

59 if(*
ouutSaãtyIOLei¡ungSchutz1
&0x0000ffffè
m2
=
TRUE
;

60 
m2
=
FALSE
;

61 if(*
ouutSaãtyIOLei¡ungSchutz2
&0x0000ffffè
m3
=
TRUE
;

62 
m3
=
FALSE
;

64 
SaãtyE¼ÜNoV”sÜgung
=
m2
&
m3
&
m1
;

66 if(
SaãtyE¼ÜNoV”sÜgung
){

67 if(
SaãtyE¼ÜNoV”sÜgung
!=
SaãtyE¼ÜNoV”sÜgungOldV®ue
)

68 
	`S‘E¼ÜCode
(1021005);

69 
	`£tFauÉ
();

72 
SaãtyE¼ÜNoV”sÜgungOldV®ue
=
SaãtyE¼ÜNoV”sÜgung
;

73 
	}
}

81 
	$PLCSaãtyLa£rsÿÂ”
(){

82 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
;

84 if(*
šputSaãtyIOLS1W¬nãld1
==0è
m1
=
TRUE
;

85 
m1
=
FALSE
;

86 if(*
šputSaãtyIOLS1W¬nãld2
==0è
m2
=
TRUE
;

87 
m2
=
FALSE
;

88 if(*
šputSaãtyIOLS2W¬nãld1
==0è
m3
=
TRUE
;

89 
m3
=
FALSE
;

90 if(*
šputSaãtyIOLS2W¬nãld2
==0è
m4
=
TRUE
;

91 
m4
=
FALSE
;

92 if((*
šputSaãtyIOLS1Absch®tF–dKª®1
==0)&&(*
šputSaãtyIOLS1Absch®tF–dKª®2
==0)è
m5
=
TRUE
;

93 
m5
=
FALSE
;

94 if((*
šputSaãtyIOLS2Absch®tF–dKª®1
==0)&&(*
šputSaãtyIOLS2Absch®tF–dKª®2
==0)è
m6
=
TRUE
;

95 
m6
=
FALSE
;

96 if(*
šputSaãtySaãtySysCÚŒŞWÜd
&
KeySaãtyG‘RCLa£rsÿÂ”1D—ktiv
è
m7
=
TRUE
;

97 
m7
=
FALSE
;

98 if(*
šputSaãtySaãtySysCÚŒŞWÜd
&
KeySaãtyG‘RCLa£rsÿÂ”2D—ktiv
è
m8
=
TRUE
;

99 
m8
=
FALSE
;

101 
SaãtyE¼ÜLS1W¬n1
=~
m5
&
m1
&~
m7
;

102 
SaãtyE¼ÜLS1W¬n2
=~(
m5
|
m1
)&
m2
&~
m7
;

103 
SaãtyE¼ÜLS1Absch®‹n
=
m5
&~
m7
;

104 
SaãtyE¼ÜLS2W¬n1
=~
m6
&
m3
&~
m8
;

105 
SaãtyE¼ÜLS2W¬n2
=~(
m6
|
m3
)&
m4
&~
m8
;

106 
SaãtyE¼ÜLS2Absch®‹n
=
m6
&~
m8
;

109 
	}
}

117 
	$PLCSaãtyNÙAus
(){

118 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
;

120 if(*
šputSaãtyIONÙAusFunkeKª®1
==0è
m1
=
TRUE
;

121 
m1
=
FALSE
;

122 if(*
šputSaãtyIONÙAusFunkeKª®2
==0è
m2
=
TRUE
;

123 
m2
=
FALSE
;

124 if(*
šputSaãtyIONÙAusEckVÜÃKª®1
==0è
m3
=
TRUE
;

125 
m3
=
FALSE
;

126 if(*
šputSaãtyIONÙAusEckVÜÃKª®2
==0è
m4
=
TRUE
;

127 
m4
=
FALSE
;

128 if(*
šputSaãtyIONÙAusEckHš‹nKª®1
==0è
m5
=
TRUE
;

129 
m5
=
FALSE
;

130 if(*
šputSaãtyIONÙAusEckHš‹nKª®2
==0è
m6
=
TRUE
;

131 
m6
=
FALSE
;

133 
SaãtyE¼ÜNÙAusFunke
=
m1
&
m2
;

134 
SaãtyE¼ÜNÙAusEckVÜÃ
=
m3
&
m4
;

135 
SaãtyE¼ÜNÙAusEckHš‹n
=
m5
&
m6
;

138 
	}
}

146 
	$PLCSaãtyLadeS‹ck”
(){

147 
boŞ—n
 
m1
;

149 if(*
šputSaãtyIOLadeS‹ck”
==1è
m1
=
TRUE
;

150 
m1
=
FALSE
;

152 
SaãtyE¼ÜLad’Zu¡ªd
=
m1
;

155 
	}
}

163 
	$PLCSaãtyHubSšk’OÆy
(){

164 
boŞ—n
 
m1
,
m2
;

166 if(*
šputSaãtyG‘SÏveMESStus
&
KeySaãtyG‘SÏveMESStusOÆySšk’
è
m1
=
TRUE
;

167 
m1
=
FALSE
;

168 if(*
šputSaãtyG‘SÏveMESStus
&
KeySaãtyG‘SÏveMESStusHubStİReq
è
m2
=
TRUE
;

169 
m2
=
FALSE
;

171 
SaãtyE¼ÜHubSy¡emOÆySšk’
=
m1
;

172 
SaãtyE¼ÜHubSy¡emStİReq
=
m2
;

175 
	}
}

183 
	$SaãtyE¼ÜCPU
(){

184 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
;

185 
boŞ—n
 
SaãtyE¼ÜCPUTem³¿turOldV®ue
;

186 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUbOldV®ue
;

187 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUcOldV®ue
;

188 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUextOldV®ue
;

189 
boŞ—n
 
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
;

190 
boŞ—n
 
SaãtyE¼ÜCANBus1OldV®ue
;

191 
boŞ—n
 
SaãtyE¼ÜCANBus2OldV®ue
;

192 
boŞ—n
 
SaãtyE¼ÜCANBus3OldV®ue
;

193 
boŞ—n
 
SaãtyE¼ÜCANBus4OldV®ue
;

195 if(*
šputSaãtyG‘CPUTem³¿tur
>
CPUMaxTem³¿tur
è
m1
=
TRUE
;

196 
m1
=
FALSE
;

197 if((*
šputSaãtyG‘CPUVŞgeUb
>
CPUMaxVŞge
)||(*šputSaãtyG‘CPUVŞgeUb<
CPUMšVŞge
)è
m2
=
TRUE
;

198 
m2
=
FALSE
;

199 if((*
šputSaãtyG‘CPUVŞgeUc
>
CPUMaxVŞge
)||(*šputSaãtyG‘CPUVŞgeUc<
CPUMšVŞge
)è
m3
=
TRUE
;

200 
m3
=
FALSE
;

201 if((*
šputSaãtyG‘CPUVŞgeUext
>
CPUMaxVŞgeExt
)||(*šputSaãtyG‘CPUVŞgeUext<
CPUMšVŞgeExt
)è
m4
=
TRUE
;

202 
m4
=
FALSE
;

203 if((*
šputSaãtyG‘CPUCu¼’tUb
>
CPUMaxCu¼’t
)||(*šputSaãtyG‘CPUCu¼’tUb<
CPUMšCu¼’t
)è
m5
=
TRUE
;

204 
m5
=
FALSE
;

205 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus1E¼Ü
è
m6
=
TRUE
;

206 
m6
=
FALSE
;

207 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus2E¼Ü
è
m7
=
TRUE
;

208 
m7
=
FALSE
;

209 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus3E¼Ü
è
m8
=
TRUE
;

210 
m8
=
FALSE
;

211 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus4E¼Ü
è
m9
=
TRUE
;

212 
m9
=
FALSE
;

214 
SaãtyE¼ÜCPUTem³¿tur
=
m1
;

215 
SaãtyE¼ÜCPUVŞgeUb
=
m2
;

216 
SaãtyE¼ÜCPUVŞgeUc
=
m3
;

217 
SaãtyE¼ÜCPUVŞgeUext
=
m4
;

218 
SaãtyE¼ÜCPUCu¼’tUb
=
m5
;

219 
SaãtyE¼ÜCANBus1
=
m6
;

220 
SaãtyE¼ÜCANBus2
=
m7
;

221 
SaãtyE¼ÜCANBus3
=
m8
;

222 
SaãtyE¼ÜCANBus4
=
m9
;

223 
SaãtyE¼ÜCANBus
=
m6
|
m7
|
m8
|
m9
;

225 if(
SaãtyE¼ÜCPUTem³¿tur
){

226 if(
SaãtyE¼ÜCPUTem³¿tur
!=
SaãtyE¼ÜCPUTem³¿turOldV®ue
)

227 
	`S‘E¼ÜCode
(1021000);

228 
	`£tFauÉ
();

230 if(
SaãtyE¼ÜCPUVŞgeUb
){

231 if(
SaãtyE¼ÜCPUVŞgeUb
!=
SaãtyE¼ÜCPUVŞgeUbOldV®ue
)

232 
	`S‘E¼ÜCode
(1021001);

233 
	`£tFauÉ
();

235 if(
SaãtyE¼ÜCPUVŞgeUc
){

236 if(
SaãtyE¼ÜCPUVŞgeUc
!=
SaãtyE¼ÜCPUVŞgeUcOldV®ue
)

237 
	`S‘E¼ÜCode
(1021004);

238 
	`£tFauÉ
();

240 if(
SaãtyE¼ÜCPUVŞgeUext
){

241 if(
SaãtyE¼ÜCPUVŞgeUext
!=
SaãtyE¼ÜCPUVŞgeUextOldV®ue
)

242 
	`S‘E¼ÜCode
(1021003);

243 
	`£tFauÉ
();

245 if(
SaãtyE¼ÜCPUCu¼’tUb
){

246 if(
SaãtyE¼ÜCPUCu¼’tUb
!=
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
)

247 
	`S‘E¼ÜCode
(1021002);

248 
	`£tFauÉ
();

250 if(
SaãtyE¼ÜCANBus1
){

251 if(
SaãtyE¼ÜCANBus1
!=
SaãtyE¼ÜCANBus1OldV®ue
)

252 
	`S‘E¼ÜCode
(1021200);

253 
	`£tFauÉ
();

255 if(
SaãtyE¼ÜCANBus2
){

256 if(
SaãtyE¼ÜCANBus2
!=
SaãtyE¼ÜCANBus2OldV®ue
)

257 
	`S‘E¼ÜCode
(1021201);

258 
	`£tFauÉ
();

260 if(
SaãtyE¼ÜCANBus3
){

261 if(
SaãtyE¼ÜCANBus3
!=
SaãtyE¼ÜCANBus3OldV®ue
)

262 
	`S‘E¼ÜCode
(1021202);

263 
	`£tFauÉ
();

265 if(
SaãtyE¼ÜCANBus4
){

266 if(
SaãtyE¼ÜCANBus4
!=
SaãtyE¼ÜCANBus4OldV®ue
)

267 
	`S‘E¼ÜCode
(1021203);

268 
	`£tFauÉ
();

271 
SaãtyE¼ÜCPUTem³¿turOldV®ue
=
SaãtyE¼ÜCPUTem³¿tur
;

272 
SaãtyE¼ÜCPUVŞgeUbOldV®ue
=
SaãtyE¼ÜCPUVŞgeUb
;

273 
SaãtyE¼ÜCPUVŞgeUcOldV®ue
=
SaãtyE¼ÜCPUVŞgeUc
;

274 
SaãtyE¼ÜCPUVŞgeUextOldV®ue
=
SaãtyE¼ÜCPUVŞgeUext
;

275 
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
=
SaãtyE¼ÜCPUCu¼’tUb
;

276 
SaãtyE¼ÜCANBus1OldV®ue
=
SaãtyE¼ÜCANBus1
;

277 
SaãtyE¼ÜCANBus2OldV®ue
=
SaãtyE¼ÜCANBus2
;

278 
SaãtyE¼ÜCANBus3OldV®ue
=
SaãtyE¼ÜCANBus3
;

279 
SaãtyE¼ÜCANBus4OldV®ue
=
SaãtyE¼ÜCANBus4
;

280 
	}
}

288 
	$SaãtyE¼ÜRCStus
(){

289 
boŞ—n
 
m1
;

290 
boŞ—n
 
SaãtyE¼ÜRCOfæšeOldV®ue
;

292 if(*
šputSaãtyRCNodeStus
<=0x01è
m1
=
TRUE
;

293 
m1
=
FALSE
;

295 
SaãtyE¼ÜRCOfæše
=
m1
;

297 if(
SaãtyE¼ÜRCOfæše
){

298 if(
SaãtyE¼ÜRCOfæše
!=
SaãtyE¼ÜRCOfæšeOldV®ue
)

299 
	`S‘E¼ÜCode
(1021204);

300 
	`£tFauÉ
();

303 
SaãtyE¼ÜRCOfæšeOldV®ue
=
SaãtyE¼ÜRCOfæše
;

304 
	}
}

312 
	$HªdËSaãtyPLC
(){

313 
	`PLCSaãtyNoV”sÜgung
();

314 
	`PLCSaãtyLa£rsÿÂ”
();

315 
	`PLCSaãtyNÙAus
();

316 
	`PLCSaãtyLadeS‹ck”
();

317 
	`PLCSaãtyHubSšk’OÆy
();

318 
	`SaãtyE¼ÜCPU
();

319 
	`SaãtyE¼ÜRCStus
();

320 
	}
}

328 
	$Tim”SaãtyPLC
(){

329 
boŞ—n
 
m1
,
m2
;

330 
ušt16
 
tick1
,
tick2
;

332 if(*
šputSaãtySaãtySysCÚŒŞWÜd
&
KeySaãtyG‘RCNoMÙiÚ
è
m1
=
TRUE
;

333 
m1
=
FALSE
;

334 if(
SaãtyE¼ÜNÙAusEckVÜÃ
|
SaãtyE¼ÜNÙAusEckHš‹n
|
SaãtyE¼ÜNÙAusFunke
è
m2
=
TRUE
;

335 
m2
=
FALSE
;

337 if(
m1
){ if(
tick1
<65530)ick1++;}

338 
tick1
=0;

339 if(
m2
){ if(
tick2
<65530)ick2++;}

340 
tick2
=0;

342 if(
tick1
>=9000è
SaãtyE¼ÜMESTimeOut
=
TRUE
;

343 
SaãtyE¼ÜMESTimeOut
=
FALSE
;

344 if(
tick2
>=15è
SaãtyE¼ÜNÙAusSchutzAus
=
TRUE
;

345 
SaãtyE¼ÜNÙAusSchutzAus
=
FALSE
;

346 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLCData.c

1 
	~<SaãtyPLCD©a.h
>

6 
boŞ—n
 
	gSaãtyE¼ÜNoV”sÜgung
;

7 
boŞ—n
 
	gSaãtyE¼ÜMESTimeOut
;

8 
boŞ—n
 
	gSaãtyE¼ÜLS1W¬n1
;

9 
boŞ—n
 
	gSaãtyE¼ÜLS1W¬n2
;

10 
boŞ—n
 
	gSaãtyE¼ÜLS1Absch®‹n
;

11 
boŞ—n
 
	gSaãtyE¼ÜLS2W¬n1
;

12 
boŞ—n
 
	gSaãtyE¼ÜLS2W¬n2
;

13 
boŞ—n
 
	gSaãtyE¼ÜLS2Absch®‹n
;

14 
boŞ—n
 
	gSaãtyE¼ÜLS1Qu™
;

15 
boŞ—n
 
	gSaãtyE¼ÜLS2Qu™
;

16 
boŞ—n
 
	gSaãtyE¼ÜNÙAusEckVÜÃ
;

17 
boŞ—n
 
	gSaãtyE¼ÜNÙAusEckHš‹n
;

18 
boŞ—n
 
	gSaãtyE¼ÜNÙAusFunke
;

19 
boŞ—n
 
	gSaãtyE¼ÜNÙAusSchutzAus
;

20 
boŞ—n
 
	gSaãtyE¼ÜLad’Zu¡ªd
;

21 
boŞ—n
 
	gSaãtyE¼ÜHubSy¡emOÆySšk’
;

22 
boŞ—n
 
	gSaãtyE¼ÜHubSy¡emStİReq
;

23 
boŞ—n
 
	gSaãtyE¼ÜCPUTem³¿tur
;

24 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUb
;

25 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUc
;

26 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUext
;

27 
boŞ—n
 
	gSaãtyE¼ÜCPUCu¼’tUb
;

28 
boŞ—n
 
	gSaãtyE¼ÜCANBus1
;

29 
boŞ—n
 
	gSaãtyE¼ÜCANBus2
;

30 
boŞ—n
 
	gSaãtyE¼ÜCANBus3
;

31 
boŞ—n
 
	gSaãtyE¼ÜCANBus4
;

32 
boŞ—n
 
	gSaãtyE¼ÜCANBus
;

33 
boŞ—n
 
	gSaãtyE¼ÜRCOfæše
;

38 
ušt16
 *
	gšputSaãtyIONÙAusFunkeKª®1
;

39 
ušt16
 *
	gšputSaãtyIONÙAusFunkeKª®2
;

40 
ušt16
 *
	gšputSaãtyIONÙAusEckVÜÃKª®1
;

41 
ušt16
 *
	gšputSaãtyIONÙAusEckVÜÃKª®2
;

42 
ušt16
 *
	gšputSaãtyIONÙAusEckHš‹nKª®1
;

43 
ušt16
 *
	gšputSaãtyIONÙAusEckHš‹nKª®2
;

44 
ušt16
 *
	gšputSaãtyIOLS1W¬nãld1
;

45 
ušt16
 *
	gšputSaãtyIOLS2W¬nãld1
;

46 
ušt16
 *
	gšputSaãtyIOLS1Absch®tF–dKª®1
;

47 
ušt16
 *
	gšputSaãtyIOLS1Absch®tF–dKª®2
;

48 
ušt16
 *
	gšputSaãtyIOLS2Absch®tF–dKª®1
;

49 
ušt16
 *
	gšputSaãtyIOLS2Absch®tF–dKª®2
;

50 
ušt16
 *
	gšputSaãtyIOLS1W¬nãld2
;

51 
ušt16
 *
	gšputSaãtyIOLS2W¬nãld2
;

52 
ušt32
 *
	gšputSaãtyIOLS1Qu™t›rung
;

53 
ušt32
 *
	gšputSaãtyIOLS2Qu™t›rung
;

54 
ušt16
 *
	gšputSaãtyIONÙAusSchutz
;

55 
ušt16
 *
	gšputSaãtyIOLadeS‹ck”
;

56 
ušt32
 *
	gšputSaãtySaãtySysCÚŒŞWÜd
;

57 
ušt8
 *
	gšputSaãtyG‘SÏveMESStus
;

58 
ušt32
 *
	gšputSaãtyG‘CPUTem³¿tur
;

59 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUb
;

60 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUc
;

61 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUext
;

62 
ušt32
 *
	gšputSaãtyG‘CPUCu¼’tUb
;

63 
ušt8
 *
	gšputSaãtyG‘CANBusStus
;

64 
ušt8
 *
	gšputSaãtyRCNodeStus
;

69 
ušt32
 *
	gouutSaãtyIOLei¡ungSchutz1
;

70 
ušt32
 *
	gouutSaãtyIOLei¡ungSchutz2
;

71 
ušt32
 *
	gouutSaãtyIOMESAus
;

72 
ušt32
 *
	gouutSaãtyIOQu™t›rungLS1
;

73 
ušt32
 *
	gouutSaãtyIOQu™t›rungLS2
;

74 
ušt32
 *
	gouutSaãtyIOMÙÜSaãtyStİ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLCData.h

1 #iâdeà
_SAFETYPLCDATA_H


2 
	#_SAFETYPLCDATA_H


	)

3 
	~<¡wty³s.h
>

8 
	#KeySaãtyS‘RCLa£rsÿÂ”1Slow
 (0x00000400)

	)

9 
	#KeySaãtyS‘RCLa£rsÿÂ”2Slow
 (0x00000800)

	)

10 
	#KeySaãtyS‘RCLa£rsÿÂ”1W¬n
 (0x00000008)

	)

11 
	#KeySaãtyS‘RCLa£rsÿÂ”2W¬n
 (0x00000020)

	)

12 
	#KeySaãtyS‘RCLa£rsÿÂ”1Stİ
 (0x00000010)

	)

13 
	#KeySaãtyS‘RCLa£rsÿÂ”2Stİ
 (0x00000040)

	)

14 
	#KeySaãtyG‘RCLa£rsÿÂ”1D—ktiv
 (0x00000002)

	)

15 
	#KeySaãtyG‘RCLa£rsÿÂ”2D—ktiv
 (0x00001000)

	)

16 
	#KeySaãtyS‘RCDriveSysStİ
 (0x00000080)

	)

17 
	#KeySaãtyS‘RCHubSysStİ
 (0x00000100)

	)

18 
	#KeySaãtyS‘RCAutoDriveStİ
 (0x00000200)

	)

19 
	#KeySaãtyS‘RCNÙAusStus
 (0x00002000)

	)

20 
	#KeySaãtyS‘RCLadeStus
 (0x00004000)

	)

21 
	#KeySaãtyS‘RCSysS³¼n
 (0x00008000)

	)

22 
	#KeySaãtyG‘SÏveMESStusOÆySšk’
 (0x02)

	)

23 
	#KeySaãtyG‘SÏveMESStusHubStİReq
 (0x08)

	)

24 
	#KeySaãtyG‘CANBus1E¼Ü
 (0x01)

	)

25 
	#KeySaãtyG‘CANBus2E¼Ü
 (0x02)

	)

26 
	#KeySaãtyG‘CANBus3E¼Ü
 (0x04)

	)

27 
	#KeySaãtyG‘CANBus4E¼Ü
 (0x08)

	)

28 
	#CPUMaxTem³¿tur
 (100000)

	)

29 
	#CPUMaxVŞge
 (28000)

	)

30 
	#CPUMšVŞge
 (12000)

	)

31 
	#CPUMaxVŞgeExt
 (15000)

	)

32 
	#CPUMšVŞgeExt
 (5000)

	)

33 
	#CPUMaxCu¼’t
 (10000)

	)

34 
	#CPUMšCu¼’t
 (10)

	)

39 
boŞ—n
 
SaãtyE¼ÜNoV”sÜgung
;

40 
boŞ—n
 
SaãtyE¼ÜMESTimeOut
;

41 
boŞ—n
 
SaãtyE¼ÜLS1W¬n1
;

42 
boŞ—n
 
SaãtyE¼ÜLS1W¬n2
;

43 
boŞ—n
 
SaãtyE¼ÜLS1Absch®‹n
;

44 
boŞ—n
 
SaãtyE¼ÜLS2W¬n1
;

45 
boŞ—n
 
SaãtyE¼ÜLS2W¬n2
;

46 
boŞ—n
 
SaãtyE¼ÜLS2Absch®‹n
;

47 
boŞ—n
 
SaãtyE¼ÜLS1Qu™
;

48 
boŞ—n
 
SaãtyE¼ÜLS2Qu™
;

49 
boŞ—n
 
SaãtyE¼ÜNÙAusEckVÜÃ
;

50 
boŞ—n
 
SaãtyE¼ÜNÙAusEckHš‹n
;

51 
boŞ—n
 
SaãtyE¼ÜNÙAusFunke
;

52 
boŞ—n
 
SaãtyE¼ÜNÙAusSchutzAus
;

53 
boŞ—n
 
SaãtyE¼ÜLad’Zu¡ªd
;

54 
boŞ—n
 
SaãtyE¼ÜHubSy¡emOÆySšk’
;

55 
boŞ—n
 
SaãtyE¼ÜHubSy¡emStİReq
;

56 
boŞ—n
 
SaãtyE¼ÜCPUTem³¿tur
;

57 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUb
;

58 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUc
;

59 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUext
;

60 
boŞ—n
 
SaãtyE¼ÜCPUCu¼’tUb
;

61 
boŞ—n
 
SaãtyE¼ÜCANBus1
;

62 
boŞ—n
 
SaãtyE¼ÜCANBus2
;

63 
boŞ—n
 
SaãtyE¼ÜCANBus3
;

64 
boŞ—n
 
SaãtyE¼ÜCANBus4
;

65 
boŞ—n
 
SaãtyE¼ÜCANBus
;

66 
boŞ—n
 
SaãtyE¼ÜRCOfæše
;

71 
ušt16
 *
šputSaãtyIONÙAusFunkeKª®1
;

72 
ušt16
 *
šputSaãtyIONÙAusFunkeKª®2
;

73 
ušt16
 *
šputSaãtyIONÙAusEckVÜÃKª®1
;

74 
ušt16
 *
šputSaãtyIONÙAusEckVÜÃKª®2
;

75 
ušt16
 *
šputSaãtyIONÙAusEckHš‹nKª®1
;

76 
ušt16
 *
šputSaãtyIONÙAusEckHš‹nKª®2
;

77 
ušt16
 *
šputSaãtyIOLS1W¬nãld1
;

78 
ušt16
 *
šputSaãtyIOLS2W¬nãld1
;

79 
ušt16
 *
šputSaãtyIOLS1Absch®tF–dKª®1
;

80 
ušt16
 *
šputSaãtyIOLS1Absch®tF–dKª®2
;

81 
ušt16
 *
šputSaãtyIOLS2Absch®tF–dKª®1
;

82 
ušt16
 *
šputSaãtyIOLS2Absch®tF–dKª®2
;

83 
ušt16
 *
šputSaãtyIOLS1W¬nãld2
;

84 
ušt16
 *
šputSaãtyIOLS2W¬nãld2
;

85 
ušt32
 *
šputSaãtyIOLS1Qu™t›rung
;

86 
ušt32
 *
šputSaãtyIOLS2Qu™t›rung
;

87 
ušt16
 *
šputSaãtyIONÙAusSchutz
;

88 
ušt16
 *
šputSaãtyIOLadeS‹ck”
;

89 
ušt32
 *
šputSaãtySaãtySysCÚŒŞWÜd
;

90 
ušt8
 *
šputSaãtyG‘SÏveMESStus
;

91 
ušt32
 *
šputSaãtyG‘CPUTem³¿tur
;

92 
ušt32
 *
šputSaãtyG‘CPUVŞgeUb
;

93 
ušt32
 *
šputSaãtyG‘CPUVŞgeUc
;

94 
ušt32
 *
šputSaãtyG‘CPUVŞgeUext
;

95 
ušt32
 *
šputSaãtyG‘CPUCu¼’tUb
;

96 
ušt8
 *
šputSaãtyG‘CANBusStus
;

97 
ušt8
 *
šputSaãtyRCNodeStus
;

102 
ušt32
 *
ouutSaãtyIOLei¡ungSchutz1
;

103 
ušt32
 *
ouutSaãtyIOLei¡ungSchutz2
;

104 
ušt32
 *
ouutSaãtyIOMESAus
;

105 
ušt32
 *
ouutSaãtyIOQu™t›rungLS1
;

106 
ušt32
 *
ouutSaãtyIOQu™t›rungLS2
;

107 
ušt32
 *
ouutSaãtyIOMÙÜSaãtyStİ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\Tracking.c

1 
	~<T¿ckšg.h
>

2 
	~<T¿ckšgD©a.h
>

3 
	~<T¿ckšgIÁ”çû.h
>

11 
	$In™IÁ”çûAutoDrive
(){

13 
šputAutoDriveCÚŒŞWÜd
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞWÜd
,
Ty³U32
,0); *inputAutoDriveControlWord=0;

15 
šputAutoDriveG‘SaãtyCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0);

17 
šputAutoDriveReã»nzS³ed
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveReãÃrzS³ed
,
Ty³S32
,0);

18 
šputAutoDriveCÚŒŞK1
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞK1
,
Ty³S32
,0);

19 
šputAutoDriveCÚŒŞK2
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞK2
,
Ty³S32
,0);

20 
šputAutoDriveCÚŒŞKv
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞKv
,
Ty³S32
,0);

21 
šputAutoDriveS‹”šgCÜr
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveS‹”šgCÜrFaùÜ
,
Ty³S32
,0);

23 
šputKam”a1NodeStus
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1NodeStus
,
Ty³U8
,1); *inputKamera1NodeStatus=0x00;

24 
šputKam”a2NodeStus
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2NodeStus
,
Ty³U8
,1); *inputKamera2NodeStatus=0x00;

27 
šputAutoDriveYp11
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO1LowWÜd
,
Ty³U8
,3); *inputAutoDriveYp11=0;

28 
šputAutoDriveYp12
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO1LowWÜd
,
Ty³U8
,2); *
šputAutoDriveYp11
=0;

29 
šputAutoDriveYp13
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO1LowWÜd
,
Ty³U8
,1); *
šputAutoDriveYp11
=0;

30 
šputAutoDriveYp14
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO1LowWÜd
,
Ty³U8
,0); *
šputAutoDriveYp11
=0;

31 
šputAutoDriveYp21
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO1LowWÜd
,
Ty³U8
,3); *inputAutoDriveYp21=0;

32 
šputAutoDriveYp22
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO1LowWÜd
,
Ty³U8
,2); *inputAutoDriveYp22=0;

33 
šputAutoDriveYp23
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO1LowWÜd
,
Ty³U8
,1); *inputAutoDriveYp23=0;

34 
šputAutoDriveYp24
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO1LowWÜd
,
Ty³U8
,0); *inputAutoDriveYp24=0;

37 
šputAutoDriveXp11
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2LowWÜd
,
Ty³U8
,3); *inputAutoDriveXp11=0;

38 
šputAutoDriveXp12
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2LowWÜd
,
Ty³U8
,2); *
šputAutoDriveXp11
=0;

39 
šputAutoDriveXp13
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2LowWÜd
,
Ty³U8
,1); *
šputAutoDriveXp11
=0;

40 
šputAutoDriveXp14
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2LowWÜd
,
Ty³U8
,0); *
šputAutoDriveXp11
=0;

41 
šputAutoDriveXp21
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2LowWÜd
,
Ty³U8
,3); *inputAutoDriveXp21=0;

42 
šputAutoDriveXp22
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2LowWÜd
,
Ty³U8
,2); *inputAutoDriveXp22=0;

43 
šputAutoDriveXp23
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2LowWÜd
,
Ty³U8
,1); *inputAutoDriveXp23=0;

44 
šputAutoDriveXp24
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2LowWÜd
,
Ty³U8
,0); *inputAutoDriveXp24=0;

47 
šputAutoDriveAG11
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2HighWÜd
,
Ty³U8
,1); *inputAutoDriveAG11=0;

48 
šputAutoDriveAG12
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO2HighWÜd
,
Ty³U8
,0); *inputAutoDriveAG12=0;

49 
šputAutoDriveAG21
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2HighWÜd
,
Ty³U8
,1); *inputAutoDriveAG21=0;

50 
šputAutoDriveAG22
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO2HighWÜd
,
Ty³U8
,0); *inputAutoDriveAG22=0;

53 
šputAutoDriveST11
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO3LowWÜd
,
Ty³U8
,1); *inputAutoDriveST11=0;

54 
šputAutoDriveST12
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1RPDO3LowWÜd
,
Ty³U8
,0); *inputAutoDriveST12=0;

55 
šputAutoDriveST21
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO3LowWÜd
,
Ty³U8
,1); *inputAutoDriveST21=0;

56 
šputAutoDriveST22
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2RPDO3LowWÜd
,
Ty³U8
,0); *inputAutoDriveST22=0;

59 
ouutKam”a1NMT
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a1NMT
,
Ty³U16
,0); *outputKamera1NMT=0x0000;

60 
ouutKam”a2NMT
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”a2NMT
,
Ty³U16
,0); *outputKamera2NMT=0x0000;

62 
ouutAutoDriveY1V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveYV®ue
,
Ty³S16
,0); *outputAutoDriveY1Value=0;

63 
ouutAutoDriveY2V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveYV®ue
,
Ty³S16
,1); *outputAutoDriveY2Value=0;

65 
ouutAutoDriveX1V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveXV®ue
,
Ty³S16
,0); *outputAutoDriveX1Value=0;

66 
ouutAutoDriveX2V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveXV®ue
,
Ty³S16
,1); *outputAutoDriveX2Value=0;

68 
ouutAutoDriveAG1V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveAGV®ue
,
Ty³S16
,0); *outputAutoDriveAG1Value=0;

69 
ouutAutoDriveAG2V®ue
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveAGV®ue
,
Ty³S16
,1); *outputAutoDriveAG2Value=0;

71 
ouutAutoDriveToSÏveY1V®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveLowWÜd
,
Ty³S8
,0); *outputAutoDriveToSlaveY1Value=0;

72 
ouutAutoDriveToSÏveY2V®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveLowWÜd
,
Ty³S8
,1); *outputAutoDriveToSlaveY2Value=0;

73 
ouutAutoDriveToSÏveXV®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexT–eg¿mm2ToSÏveLowWÜd
,
Ty³U16
,1); *outputAutoDriveToSlaveXValue=0;

75 
ouutAutoDriveS‘S³edX
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³edX
,
Ty³F32
,0); *outputAutoDriveSetSpeedX=0.0;

76 
ouutAutoDriveS‘S³edY
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘S³edY
,
Ty³F32
,0); *outputAutoDriveSetSpeedY=0.0;

77 
ouutAutoDriveS‘OmegaZ
=
	`BšdODMem
(
DriveModuËS¹Index
,
SubšdexDriveSysS‘OmegaZ
,
Ty³F32
,0); *outputAutoDriveSetOmegaZ=0.0;

79 
ouutAutoDriveIn™SDOCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚŒŞWÜd
,
Ty³U32
,0);

80 
ouutAutoDriveIn™SDOCÚ‹Á
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysSDOCÚ‹Á
,
Ty³U32
,0);

82 
ouutAutoDriveCam”aCÚŒŞWÜd
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexCam”aTPDO1LowWÜd
,
Ty³U32
,0);

83 
ouutIOPÜtFšishHu³
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut53
,
Ty³U32
,0);

85 
ouutAutoDriveS‹
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞWÜd
,
Ty³U8
,3); *ouutAutoDriveS‹=
AutoDriveS‹NoLªe
;

87 
ouutNumOfBªd
=
	`BšdODMem
(
AutoDriveS¹Index
,
SubšdexAutoDriveCÚŒŞWÜd
,
Ty³S8
,2); *outputNumOfBand=-1;

88 
	}
}

98 
	$FšishHu³
(){

99 
ušt16
 
loÿl_tick
;

101 if(*
ouutAutoDriveS‹
==
AutoDriveS‹InPos
è
loÿl_tick
=3;

104 if(*
šputAutoDriveG‘SaãtyCÚŒŞWÜd
&(
KeyAutoG‘SaãtySysLa£rsÿÂ”1Stİ
+
KeyAutoG‘SaãtySysLa£rsÿÂ”2Stİ
)è
loÿl_tick
=3;

105 if(*
šputAutoDriveG‘SaãtyCÚŒŞWÜd
&
KeyAutoDriveHu³Req
è
loÿl_tick
=3;

108 if(
loÿl_tick
){

109 if((*
ouutIOPÜtFšishHu³
&
AutoDrivePšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortFinishHupe=(*outputIOPortFinishHupe&0xffff0000)+0x00000001;

112 if((*
ouutIOPÜtFšishHu³
&
AutoDrivePšCÚŒŞWÜdTe¡Mode
)==0) *outputIOPortFinishHupe&=0xffff0000;

114 if(
loÿl_tick
>0)†ocal_tick--;

115 
	}
}

123 
	$AutoDriveMªage
(){

124 
ušt32
 
tmp
;

125 
ušt16
 
loÿl_tick
[2];

126 
tmp
=
KeyAutoDriveK1BªdFšd
+
KeyAutoDriveK2BªdFšd
;

127 if((*
šputAutoDriveCÚŒŞWÜd
&
tmp
)==tmp){

128 
loÿl_tick
[1]=50;

129 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveInStİZÚe
){

130 *
ouutNumOfBªd
=(*
ouutAutoDriveX1V®ue
+500)/1000-1;

131 if(*
ouutAutoDriveS‹
==
AutoDriveS‹OnLªe
){

132 *
ouutAutoDriveS‹
=
AutoDriveS‹OnTagNoU£d
;

134 if(*
ouutAutoDriveS‹
==
AutoDriveS‹OnTagNoU£d
){

135 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDrivePosR—dy
){

136 *
ouutAutoDriveS‹
=
AutoDriveS‹InPos
;

137 
loÿl_tick
[0]=10;

139 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveQu™Req
){

140 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveQu™Req
;

141 *
ouutAutoDriveS‹
=
AutoDriveS‹OnTagU£d
;

145 if(*
ouutAutoDriveS‹
==
AutoDriveS‹InPos
){

146 if(
loÿl_tick
[0]==0è*
ouutAutoDriveS‹
=
AutoDriveS‹LiáBu‰om
;

148 if(*
ouutAutoDriveS‹
==
AutoDriveS‹LiáBu‰om
){

149 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveQu™Req
){

150 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveQu™Req
;

151 *
ouutAutoDriveS‹
=
AutoDriveS‹OnTagU£d
;

156 *
ouutAutoDriveS‹
=
AutoDriveS‹OnLªe
;

157 *
ouutNumOfBªd
=-1;

161 if(
loÿl_tick
[1]==0è*
ouutAutoDriveS‹
=
AutoDriveS‹NoLªe
;

163 if(
loÿl_tick
[0]>0)†ocal_tick[0]--;

164 if(
loÿl_tick
[1]>0)†ocal_tick[1]--;

165 if((*
ouutAutoDriveS‹
!=
AutoDriveS‹LiáBu‰om
)||(*ouutAutoDriveS‹!=
AutoDriveS‹OnTagNoU£d
)è*
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveQu™Req
;

166 
	}
}

174 
	$AutoDriveP¬aUpd©e
(){

175 
ušt8
 
upd©eæag
[4];

177 if(
upd©eæag
[0]>=100){

179 
AutoDriveCÚŒŞËrD©’
.
k1
=(
æßt32
)(*
šputAutoDriveCÚŒŞK1
)*0.001;

180 
AutoDriveCÚŒŞËrD©’
.
k2
=(
æßt32
)(*
šputAutoDriveCÚŒŞK2
)*0.001;

181 
AutoDriveCÚŒŞËrD©’
.
kv
=(
æßt32
)(*
šputAutoDriveCÚŒŞKv
)*0.001;

182 
AutoDriveCÚŒŞËrD©’
.
S‹”šgCÜr
=(
æßt32
)(*
šputAutoDriveS‹”šgCÜr
)*0.001;

183 
upd©eæag
[0]=0;

185 if(
upd©eæag
[1]>=2){

186 if((*
šputAutoDriveST12
&0x02)||((*
šputAutoDriveST11
&0x02)==0)è*
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDriveK1BªdFšd
;

187 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveK1BªdFšd
;

188 if((*
šputAutoDriveST22
&0x02)||((*
šputAutoDriveST21
&0x02)==0)è*
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDriveK2BªdFšd
;

189 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveK2BªdFšd
;

191 if(*
šputAutoDriveG‘SaãtyCÚŒŞWÜd
&(
KeyAutoG‘SaãtySysLa£rsÿÂ”1Slow
+
KeyAutoG‘SaãtySysLa£rsÿÂ”2Slow
)){

192 
AutoDriveCÚŒŞËrD©’
.
Vc
=(
æßt32
)(*
šputAutoDriveReã»nzS³ed
)*0.001/5.0;

194 if(*
šputAutoDriveG‘SaãtyCÚŒŞWÜd
&(
KeyAutoG‘SaãtySysLa£rsÿÂ”1W¬n
+
KeyAutoG‘SaãtySysLa£rsÿÂ”2W¬n
)){

195 
AutoDriveCÚŒŞËrD©’
.
Vc
=(
æßt32
)(*
šputAutoDriveReã»nzS³ed
)*0.001/8.0;

197 
AutoDriveCÚŒŞËrD©’
.
Vc
=(
æßt32
)(*
šputAutoDriveReã»nzS³ed
)*0.001;

199 *
ouutAutoDriveToSÏveY1V®ue
=(
sšt8
)(*
ouutAutoDriveY1V®ue
);

200 *
ouutAutoDriveToSÏveY2V®ue
=(
sšt8
)(*
ouutAutoDriveY2V®ue
);

201 *
ouutAutoDriveToSÏveXV®ue
=(
ušt16
)(*
ouutAutoDriveX1V®ue
);

203 *
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDriveInPos
;

204 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveInPos
;

206 
upd©eæag
[1]=0;

210 
upd©eæag
[0]++;

211 
upd©eæag
[1]++;

212 
	}
}

220 
	$In™Kam”a
(){

221 
ušt16
 
loÿl_tick
;

222 
ušt16
 
£ndæag
;

224 if(
loÿl_tick
>100){

225 if(
£ndæag
==0){

226 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

227 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x0b3001bf;

228 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x00000002;

229 
£ndæag
++;

230 
loÿl_tick
=70;

233 if(
£ndæag
==1){

234 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

235 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x0b3001df;

236 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x00000002;

237 
£ndæag
++;

238 
loÿl_tick
=70;

241 if(
£ndæag
==2){

242 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

243 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x0c3001bf;

244 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x00000001;

245 
£ndæag
++;

246 
loÿl_tick
=70;

249 if(
£ndæag
==3){

250 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

251 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x0c3001bf;

252 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x00000001;

253 
£ndæag
++;

254 
loÿl_tick
=70;

257 if(
£ndæag
==4){

258 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

259 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x0c3001df;

260 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x00000001;

261 
£ndæag
++;

262 
loÿl_tick
=70;

265 if(
£ndæag
==5){

266 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

267 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x001017af;

268 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x000001f4;

269 
£ndæag
++;

270 
loÿl_tick
=60;

273 if(
£ndæag
==6){

274 if((*
ouutAutoDriveIn™SDOCÚŒŞWÜd
&
KeyAutoDriveSDOCÚŒŞWÜdEÇbË
)==0){

275 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
=0x001017cf;

276 *
ouutAutoDriveIn™SDOCÚ‹Á
=0x000001f4;

277 
£ndæag
++;

278 
loÿl_tick
=60;

282 if(
loÿl_tick
<300)†ocal_tick++;

283 
	}
}

291 
	$¡¬tK¬m—
(){

292 ià(*
šputKam”a1NodeStus
==
NodeStusPRE_OPERATIONAL
){

293 *
ouutKam”a1NMT
=
NODE_START
;

294 *
ouutKam”a1NMT
=(*outputKamera1NMT<<8)+0x0001;

296 ià(*
šputKam”a2NodeStus
==
NodeStusPRE_OPERATIONAL
){

297 *
ouutKam”a2NMT
=
NODE_START
;

298 *
ouutKam”a2NMT
=(*outputKamera2NMT<<8)+0x0001;

301 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveEÇbË
){

302 *
ouutAutoDriveCam”aCÚŒŞWÜd
=
KeyCam”aCÚŒŞWÜdMu¡”
;

305 *
ouutAutoDriveCam”aCÚŒŞWÜd
=0x00000011;

307 
	}
}

315 
	$Task_AutoDriveCÚŒŞ
(* 
¬gv
){

316 
¬gv
=argv;

317 
TRUE
){

318 
	`In™Kam”a
();

319 
	`¡¬tK¬m—
();

320 
	`AutoDriveP¬aUpd©e
();

321 
	`G‘M—su»m’tAutoDrive
();

322 
	`AutoDriveMªage
();

323 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveEÇbË
){

324 
AutoDriveS‹
){

325 
AutoDriveS‹OnLªe
: 
	`AutoDriveCÚŒŞËr
();

326 
AutoDriveS‹NoLªe
: 
	`AutoDriveRe£tCÚŒŞËr
();

327 
AutoDriveS‹InPos
: 
	`AutoDriveCÚŒŞËr
();

328 
AutoDriveS‹LiáBu‰om
: 
	`AutoDriveCÚŒŞËr
();

329 
AutoDriveS‹OnTagNoU£d
: 
	`AutoDriveCÚŒŞËr
();

330 
AutoDriveS‹OnTagU£d
: 
	`AutoDriveCÚŒŞËr
();

338 
	`FšishHu³
();

340 
	`x_os_wa™_fÜ_ev’ts
();

342 
	}
}

351 
	$In™AutoDrive
(){

352 
	`In™IÁ”çûAutoDrive
();

353 
	`x_os_š¡®l_sk
(
PrioT¿ckšgCÚŒŞ
, 100, 10, 
Task_AutoDriveCÚŒŞ
, 64);

354 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\Tracking.h

1 #iâdeà
_TRACKING_H


2 
	#_TRACKING_H


	)

4 
	~"¡wty³s.h
"

5 
	~"MESCÚfig.h
"

6 
	~"AµCÚfig.h
"

7 
	~"DeviûOD.h
"

15 
G‘M—su»m’tAutoDrive
();

23 
AutoDriveCÚŒŞËr
();

30 
AutoDriveRe£tCÚŒŞËr
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingControl.c

1 
	~<T¿ckšg.h
>

2 
	~<T¿ckšgD©a.h
>

5 
	#Lim™Th‘aM
 (15.0/180.0*
pi
)

	)

6 
	#CÚŒŞDi¡ªû
 50

	)

7 
	#StİXDi¡ªû
 6

	)

8 
	#StİYDi¡ªû
 2

	)

16 
	$G‘M—su»m’tAutoDrive
(){

17 
ušt32
 
u32_tmp
;

18 
sšt32
 
s32_tmp
;

19 
sšt16
 
s16_tmp
;

21 
s32_tmp
=*
šputAutoDriveYp14
;

22 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp13
)+(s32_tmp<<8);

23 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp12
)+(s32_tmp<<8);

24 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp11
)+(s32_tmp<<8);

25 if((*
šputAutoDriveST11
&0x02)==0è*
ouutAutoDriveY1V®ue
=(
sšt16
)
s32_tmp
;

26 *
ouutAutoDriveY1V®ue
=(
sšt16
)(0-
s32_tmp
);

28 
s32_tmp
=*
šputAutoDriveYp24
;

29 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp23
)+(s32_tmp<<8);

30 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp22
)+(s32_tmp<<8);

31 
s32_tmp
=(
ušt32
)(*
šputAutoDriveYp21
)+(s32_tmp<<8);

32 if((*
šputAutoDriveST21
&0x02)==0è*
ouutAutoDriveY2V®ue
=(
sšt16
)
s32_tmp
;

33 *
ouutAutoDriveY2V®ue
=(
sšt16
)
s32_tmp
;

36 
s32_tmp
=*
šputAutoDriveXp14
;

37 
s32_tmp
=(
ušt32
)(*
šputAutoDriveXp13
)+(s32_tmp<<8);

38 
s32_tmp
=(
ušt32
)(*
šputAutoDriveXp12
)+(s32_tmp<<8);

39 
s32_tmp
=(
ušt32
)(*
šputAutoDriveXp11
)+(s32_tmp<<8);

40 *
ouutAutoDriveX1V®ue
=(
sšt16
)
s32_tmp
;

48 if((*
šputAutoDriveST11
&0x02)==0è*
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDriveInStİZÚe
;

49 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDriveInStİZÚe
;

51 
s16_tmp
=*
šputAutoDriveAG12
;

52 
s16_tmp
=(
ušt16
)(*
šputAutoDriveAG11
)+(s16_tmp<<8);

53 if(
s16_tmp
>55) s16_tmp=s16_tmp-360;

54 *
ouutAutoDriveAG1V®ue
=(
sšt16
)
s16_tmp
;

56 
s16_tmp
=*
šputAutoDriveAG22
;

57 
s16_tmp
=(
ušt16
)(*
šputAutoDriveAG21
)+(s16_tmp<<8);

58 if(
s16_tmp
>55) s16_tmp=s16_tmp-360;

59 *
ouutAutoDriveAG2V®ue
=(
sšt16
)
s16_tmp
;

61 
AutoDriveCÚŒŞËrD©’
.
e_n
=(
æßt32
)(*
ouutAutoDriveY1V®ue
+*
ouutAutoDriveY2V®ue
)/2.0;

62 
AutoDriveCÚŒŞËrD©’
.
e_th‘a
=(
æßt32
)(*
ouutAutoDriveY1V®ue
-*
ouutAutoDriveY2V®ue
);

63 
	}
}

71 
	$AutoDriveRe£tCÚŒŞËr
(){

72 *
ouutAutoDriveS‘S³edX
=0.0;

73 *
ouutAutoDriveS‘S³edY
=0.0;

74 *
ouutAutoDriveS‘OmegaZ
=0.0;

75 
	}
}

163 
	$AutoDriveCÚŒŞËr
(){

164 
sšt16
 
AngË_tmp
[2];

165 
æßt32
 
Th‘aM
;

166 
æßt32
 
OmegaLim™
;

167 
sšt16
 
E¼ÜX
;

168 
æßt32
 
OmegaOff£t
;

169 
ušt16
 
¦ow
;

171 if((*
ouutAutoDriveS‹
==
AutoDriveS‹OnTagNoU£d
)||(*ouutAutoDriveS‹==
AutoDriveS‹InPos
)||(*ouutAutoDriveS‹==
AutoDriveS‹LiáBu‰om
)){

172 
¦ow
=1;

174 
¦ow
=0;

176 
AngË_tmp
[0]=(*
ouutAutoDriveAG1V®ue
+*
ouutAutoDriveAG2V®ue
)/2;

178 
AngË_tmp
[1]=Angle_tmp[0];

180 if((
AngË_tmp
[0]<2)&&(AngË_tmp[0]>-2)è
OmegaOff£t
=0.0;

181 
OmegaOff£t
=(
æßt32
)
AngË_tmp
[0]*
AutoDriveCÚŒŞËrD©’
.
S‹”šgCÜr
;

183 
Th‘aM
=
AutoDriveCÚŒŞËrD©’
.
e_n
*AutoDriveCÚŒŞËrD©’.
k1
;

185 if(
Th‘aM
>
Lim™Th‘aM
) ThetaM=LimitThetaM;

186 if(
Th‘aM
<(0.0-
Lim™Th‘aM
)) ThetaM=-LimitThetaM;

190 
OmegaLim™
=
AutoDriveCÚŒŞËrD©’
.
Vc
/
Rmš2Dim
/15.0*
	`abs
(AutoDriveCÚŒŞËrD©’.
e_th‘a
)/10.0;

192 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveFÜw¬dDrive
){

193 if(
¦ow
){

194 
E¼ÜX
=*
ouutAutoDriveX1V®ue
-
AutoDriveStİPos
[*
ouutNumOfBªd
];

195 if((
E¼ÜX
<
StİXDi¡ªû
)&&(ErrorX>-StopXDistance)){

196 *
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDrivePosR—dy
;

197 *
ouutAutoDriveS‘S³edX
=0.0;

198 *
ouutAutoDriveS‘S³edY
=0.0;

199 *
ouutAutoDriveS‘OmegaZ
=0.0;

202 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDrivePosR—dy
;

203 if((
E¼ÜX
<
CÚŒŞDi¡ªû
)&&(ErrorX>-ControlDistance)){

204 *
ouutAutoDriveS‘S³edX
=
AutoDriveCÚŒŞËrD©’
.
Vc
/18.0;

205 *
ouutAutoDriveS‘S³edY
=0.0;

206 *
ouutAutoDriveS‘OmegaZ
=0.0;

208 *
ouutAutoDriveS‘S³edX
=
AutoDriveCÚŒŞËrD©’
.
Vc
/5.0;

211 *
ouutAutoDriveS‘S³edX
=
AutoDriveCÚŒŞËrD©’
.
Vc
;

212 *
ouutAutoDriveS‘S³edY
=*
ouutAutoDriveS‘S³edX
*
Th‘aM
;

214 *
ouutAutoDriveS‘OmegaZ
=*
ouutAutoDriveS‘S³edX
*
AutoDriveCÚŒŞËrD©’
.
k2
*AutoDriveCÚŒŞËrD©’.
e_th‘a
;

215 if(*
ouutAutoDriveS‘OmegaZ
>
OmegaLim™
) *outputAutoDriveSetOmegaZ=OmegaLimit;

216 if(*
ouutAutoDriveS‘OmegaZ
<-
OmegaLim™
) *outputAutoDriveSetOmegaZ=-OmegaLimit;

220 if(*
šputAutoDriveCÚŒŞWÜd
&
KeyAutoDriveBackw¬dDrive
){

221 if(
¦ow
){

222 
E¼ÜX
=*
ouutAutoDriveX1V®ue
-
AutoDriveStİPos
[*
ouutNumOfBªd
];

223 if((
E¼ÜX
<
StİXDi¡ªû
)&&(ErrorX>-StopXDistance)){

224 *
šputAutoDriveCÚŒŞWÜd
|=
KeyAutoDrivePosR—dy
;

225 *
ouutAutoDriveS‘S³edX
=0.0;

226 *
ouutAutoDriveS‘S³edY
=0.0;

227 *
ouutAutoDriveS‘OmegaZ
=0.0;

230 *
šputAutoDriveCÚŒŞWÜd
&=~
KeyAutoDrivePosR—dy
;

231 if((
E¼ÜX
<
CÚŒŞDi¡ªû
)&&(ErrorX>-ControlDistance)){

232 *
ouutAutoDriveS‘S³edX
=-
AutoDriveCÚŒŞËrD©’
.
Vc
/18.0;

233 *
ouutAutoDriveS‘S³edY
=0.0;

234 *
ouutAutoDriveS‘OmegaZ
=0.0;

236 *
ouutAutoDriveS‘S³edX
=-
AutoDriveCÚŒŞËrD©’
.
Vc
/5.0;

239 *
ouutAutoDriveS‘S³edX
=-
AutoDriveCÚŒŞËrD©’
.
Vc
;

240 *
ouutAutoDriveS‘S³edY
=-*
ouutAutoDriveS‘S³edX
*
Th‘aM
;

242 *
ouutAutoDriveS‘OmegaZ
=-*
ouutAutoDriveS‘S³edX
*
AutoDriveCÚŒŞËrD©’
.
k2
*AutoDriveCÚŒŞËrD©’.
e_th‘a
;

243 if(*
ouutAutoDriveS‘OmegaZ
>
OmegaLim™
) *outputAutoDriveSetOmegaZ=OmegaLimit;

244 if(*
ouutAutoDriveS‘OmegaZ
<-
OmegaLim™
) *outputAutoDriveSetOmegaZ=-OmegaLimit;

247 *
ouutAutoDriveS‘S³edX
=0.0;

248 *
ouutAutoDriveS‘S³edY
=0.0;

249 *
ouutAutoDriveS‘OmegaZ
=0.0;

251 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingData.c

1 
	~<T¿ckšgD©a.h
>

3 
Ty³AutoDriveCÚŒŞËrD©’
 
	gAutoDriveCÚŒŞËrD©’
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0.0f};

5 
sšt16
 
	gAutoDriveStİPos
[
NumOfPosBªd
]={1000,2000,3000,4000,5000,6000,7000,8000,9000,10000};

9 
æßt32
 
	gAutoDriveTs
;

12 
ušt8
 
	gAutoDriveS‹
;

15 
ušt32
 *
	gšputAutoDriveCÚŒŞWÜd
;

18 
ušt32
 *
	gšputAutoDriveG‘SaãtyCÚŒŞWÜd
;

20 
sšt32
 *
	gšputAutoDriveReã»nzS³ed
;

22 
sšt32
 *
	gšputAutoDriveCÚŒŞK1
;

23 
sšt32
 *
	gšputAutoDriveCÚŒŞK2
;

24 
sšt32
 *
	gšputAutoDriveCÚŒŞKv
;

25 
sšt32
 *
	gšputAutoDriveS‹”šgCÜr
;

27 
ušt8
 *
	gšputAutoDriveYp11
;

28 
ušt8
 *
	gšputAutoDriveYp12
;

29 
ušt8
 *
	gšputAutoDriveYp13
;

30 
ušt8
 *
	gšputAutoDriveYp14
;

31 
ušt8
 *
	gšputAutoDriveYp21
;

32 
ušt8
 *
	gšputAutoDriveYp22
;

33 
ušt8
 *
	gšputAutoDriveYp23
;

34 
ušt8
 *
	gšputAutoDriveYp24
;

36 
ušt8
 *
	gšputAutoDriveXp11
;

37 
ušt8
 *
	gšputAutoDriveXp12
;

38 
ušt8
 *
	gšputAutoDriveXp13
;

39 
ušt8
 *
	gšputAutoDriveXp14
;

40 
ušt8
 *
	gšputAutoDriveXp21
;

41 
ušt8
 *
	gšputAutoDriveXp22
;

42 
ušt8
 *
	gšputAutoDriveXp23
;

43 
ušt8
 *
	gšputAutoDriveXp24
;

45 
ušt8
 *
	gšputAutoDriveAG11
;

46 
ušt8
 *
	gšputAutoDriveAG12
;

47 
ušt8
 *
	gšputAutoDriveAG21
;

48 
ušt8
 *
	gšputAutoDriveAG22
;

50 
ušt8
 *
	gšputAutoDriveST11
;

51 
ušt8
 *
	gšputAutoDriveST12
;

52 
ušt8
 *
	gšputAutoDriveST21
;

53 
ušt8
 *
	gšputAutoDriveST22
;

55 
ušt8
 *
	gšputKam”a1NodeStus
;

56 
ušt8
 *
	gšputKam”a2NodeStus
;

59 
ušt8
 *
	gouutAutoDriveS‹
;

62 
sšt8
 *
	gouutNumOfBªd
;

65 
sšt16
 *
	gouutAutoDriveY1V®ue
;

66 
sšt16
 *
	gouutAutoDriveY2V®ue
;

68 
sšt16
 *
	gouutAutoDriveX1V®ue
;

69 
sšt16
 *
	gouutAutoDriveX2V®ue
;

71 
sšt16
 *
	gouutAutoDriveAG1V®ue
;

72 
sšt16
 *
	gouutAutoDriveAG2V®ue
;

75 
sšt8
 *
	gouutAutoDriveToSÏveY1V®ue
;

76 
sšt8
 *
	gouutAutoDriveToSÏveY2V®ue
;

78 
ušt16
 *
	gouutAutoDriveToSÏveXV®ue
;

82 
æßt32
 *
	gouutAutoDriveS‘S³edX
;

83 
æßt32
 *
	gouutAutoDriveS‘S³edY
;

84 
æßt32
 *
	gouutAutoDriveS‘OmegaZ
;

87 
ušt32
 *
	gouutAutoDriveIn™SDOCÚŒŞWÜd
;

88 
ušt32
 *
	gouutAutoDriveIn™SDOCÚ‹Á
;

90 
ušt32
 *
	gouutAutoDriveCam”aCÚŒŞWÜd
;

93 
ušt16
 *
	gouutKam”a1NMT
;

94 
ušt16
 *
	gouutKam”a2NMT
;

97 
ušt32
 *
	gouutIOPÜtFšishHu³
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingData.h

1 #iâdeà
_TRACKINGDATA_H


2 
	#_TRACKINGDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	#KeyAutoDriveEÇbË
 0x00000001

	)

6 
	#KeyAutoDriveInStİZÚe
 0x00000002

	)

7 
	#KeyAutoDriveFÜw¬dDrive
 0x00000004

	)

8 
	#KeyAutoDriveBackw¬dDrive
 0x00000008

	)

9 
	#KeyAutoDriveK1BªdFšd
 0x00000010

	)

10 
	#KeyAutoDriveK2BªdFšd
 0x00000020

	)

11 
	#KeyAutoDrivePosR—dy
 0x00000040

	)

12 
	#KeyAutoDriveQu™Req
 0x00000080

	)

13 
	#KeyAutoDriveHu³Req
 0x00000100

	)

14 
	#KeyAutoDriveInPos
 0x00000200

	)

16 
	#KeyAutoDriveKam”aD‘ektB1
 0x02

	)

17 
	#KeyAutoDriveKam”aD‘ektB2
 0x04

	)

18 
	#KeyAutoDriveKam”aD‘ektB3
 0x06

	)

19 
	#KeyAutoDriveKam”aD‘ektTag
 0x80

	)

21 
	#KeyAutoDriveSDOCÚŒŞWÜdEÇbË
 0x00000001

	)

22 
	#KeyCam”aCÚŒŞWÜdMu¡”
 0x00000001

	)

24 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”1W¬n
 0x00000008

	)

25 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”2W¬n
 0x00000020

	)

26 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”1Slow
 0x00000400

	)

27 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”2Slow
 0x00000800

	)

28 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”1Stİ
 0x00000010

	)

29 
	#KeyAutoG‘SaãtySysLa£rsÿÂ”2Stİ
 0x00000040

	)

31 
	#AutoDrivePšCÚŒŞWÜdTe¡Mode
 0x01000000

	)

32 
	#AutoDrivePšCÚŒŞWÜdIsU£d
 0x02000000

	)

34 
	#AutoDriveS‹NoLªe
 0x00

	)

35 
	#AutoDriveS‹OnLªe
 0x01

	)

36 
	#AutoDriveS‹OnTagNoU£d
 0x02

	)

37 
	#AutoDriveS‹OnTagU£d
 0x03

	)

38 
	#AutoDriveS‹InPos
 0x04

	)

39 
	#AutoDriveS‹LiáUp
 0x05

	)

40 
	#AutoDriveS‹LiáTİ
 0x06

	)

41 
	#AutoDriveS‹LiáDown
 0x07

	)

42 
	#AutoDriveS‹LiáBu‰om
 0x08

	)

45 
	#V®ueAutoDriveTick
 100

	)

46 
	#NumOfPosBªd
 10

	)

50 
æßt32
 
	mVc
;

51 
æßt32
 
	me_n
;

52 
æßt32
 
	me_th‘a
;

53 
æßt32
 
	mk1
;

54 
æßt32
 
	mk2
;

55 
æßt32
 
	mkv
;

56 
æßt32
 
	mS‹”šgCÜr
;

57 }
	tTy³AutoDriveCÚŒŞËrD©’
;

59 
Ty³AutoDriveCÚŒŞËrD©’
 
AutoDriveCÚŒŞËrD©’
;

61 
sšt16
 
AutoDriveStİPos
[
NumOfPosBªd
];

65 
æßt32
 
AutoDriveTs
;

68 
ušt8
 
AutoDriveS‹
;

71 
ušt32
 *
šputAutoDriveCÚŒŞWÜd
;

74 
ušt32
 *
šputAutoDriveG‘SaãtyCÚŒŞWÜd
;

76 
sšt32
 *
šputAutoDriveReã»nzS³ed
;

78 
sšt32
 *
šputAutoDriveCÚŒŞK1
;

79 
sšt32
 *
šputAutoDriveCÚŒŞK2
;

80 
sšt32
 *
šputAutoDriveCÚŒŞKv
;

81 
sšt32
 *
šputAutoDriveS‹”šgCÜr
;

83 
ušt8
 *
šputAutoDriveYp11
;

84 
ušt8
 *
šputAutoDriveYp12
;

85 
ušt8
 *
šputAutoDriveYp13
;

86 
ušt8
 *
šputAutoDriveYp14
;

87 
ušt8
 *
šputAutoDriveYp21
;

88 
ušt8
 *
šputAutoDriveYp22
;

89 
ušt8
 *
šputAutoDriveYp23
;

90 
ušt8
 *
šputAutoDriveYp24
;

92 
ušt8
 *
šputAutoDriveXp11
;

93 
ušt8
 *
šputAutoDriveXp12
;

94 
ušt8
 *
šputAutoDriveXp13
;

95 
ušt8
 *
šputAutoDriveXp14
;

96 
ušt8
 *
šputAutoDriveXp21
;

97 
ušt8
 *
šputAutoDriveXp22
;

98 
ušt8
 *
šputAutoDriveXp23
;

99 
ušt8
 *
šputAutoDriveXp24
;

101 
ušt8
 *
šputAutoDriveAG11
;

102 
ušt8
 *
šputAutoDriveAG12
;

103 
ušt8
 *
šputAutoDriveAG21
;

104 
ušt8
 *
šputAutoDriveAG22
;

106 
ušt8
 *
šputAutoDriveST11
;

107 
ušt8
 *
šputAutoDriveST12
;

108 
ušt8
 *
šputAutoDriveST21
;

109 
ušt8
 *
šputAutoDriveST22
;

111 
ušt8
 *
šputKam”a1NodeStus
;

112 
ušt8
 *
šputKam”a2NodeStus
;

115 
ušt8
 *
ouutAutoDriveS‹
;

118 
sšt8
 *
ouutNumOfBªd
;

121 
sšt16
 *
ouutAutoDriveY1V®ue
;

122 
sšt16
 *
ouutAutoDriveY2V®ue
;

124 
sšt16
 *
ouutAutoDriveX1V®ue
;

125 
sšt16
 *
ouutAutoDriveX2V®ue
;

127 
sšt16
 *
ouutAutoDriveAG1V®ue
;

128 
sšt16
 *
ouutAutoDriveAG2V®ue
;

131 
æßt32
 *
ouutAutoDriveS‘S³edX
;

132 
æßt32
 *
ouutAutoDriveS‘S³edY
;

133 
æßt32
 *
ouutAutoDriveS‘OmegaZ
;

136 
sšt8
 *
ouutAutoDriveToSÏveY1V®ue
;

137 
sšt8
 *
ouutAutoDriveToSÏveY2V®ue
;

139 
ušt16
 *
ouutAutoDriveToSÏveXV®ue
;

142 
ušt32
 *
ouutAutoDriveIn™SDOCÚŒŞWÜd
;

143 
ušt32
 *
ouutAutoDriveIn™SDOCÚ‹Á
;

145 
ušt32
 *
ouutAutoDriveCam”aCÚŒŞWÜd
;

148 
ušt16
 *
ouutKam”a1NMT
;

149 
ušt16
 *
ouutKam”a2NMT
;

152 
ušt32
 *
ouutIOPÜtFšishHu³
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingInterface.h

1 #iâdeà
_TRACKINGINTERFACE_H


2 
	#_TRACKINGINTERFACE_H


	)

12 
In™AutoDrive
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_in.h

18 #iâdeà
_X02_IN_H


19 
	#_X02_IN_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_š.h
"

25 #ifdeà
__ılu¥lus


32 
	#X02_IN_CH_MAX
 (12u)

33 
	#X02_IN_01
 (0u)

34 
	#X02_IN_02
 (1u)

	)

35 
	#X02_IN_03
 (2u)

	)

36 
	#X02_IN_04
 (3u)

	)

37 
	#X02_IN_05
 (4u)

	)

38 
	#X02_IN_06
 (5u)

	)

39 
	#X02_IN_07
 (6u)

	)

40 
	#X02_IN_08
 (7u)

	)

41 
	#X02_IN_09
 (8u)

	)

42 
	#X02_IN_10
 (9u)

	)

43 
	#X02_IN_11
 (10u)

	)

44 
	#X02_IN_12
 (11u)

	)

46 
	#X02_IN_TYPE_DIGITAL
 (0x0000u)

47 
	#X02_IN_TYPE_EVENT_RISING
 (0x0001u)

48 
	#X02_IN_TYPE_EVENT_FALLING
 (0x0002u)

49 
	#X02_IN_TYPE_EVENT_BOTH
 (0x0003u)

50 
	#X02_IN_TYPE_VOLTAGE_40V
 (0x0070u)

51 

	)

52 
	#X02_IN_TYPE_INCREMENTAL
 (0x0100u)

53 
	#X02_IN_TYPE_FREQUENCY
 (0x0400u)

	)

55 
	#X02_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

56 
	#X02_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

57 
	#X02_IN_CIRCUIT_PULL_UP
 (0x0002u)

58 
	#X02_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

59 

	)

66 #ifdeà
__ılu¥lus


67 
Çme¥aû
 
¡w_£pi


69 
	~"hµ/x02_š.hµ
"

76 (*
PR_x02_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
);

78 
T_x_š_¡©us
 
	tT_x02_š_¡©us
;

81 
sšt16
 
x02_š_š™
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

82 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

83 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

84 cÚ¡ 
PR_x02_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

85 
sšt16
 
x02_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

86 
sšt32
 * cÚ¡ 
İs32_V®ue
);

87 
sšt16
 
x02_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

88 
sšt32
 * cÚ¡ 
İs32_V®ue
);

89 
sšt16
 
x02_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x02_š_¡©us
 * cÚ¡ 
İt_Stus
);

90 
sšt16
 
x02_š_£t_th»shŞd
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

91 cÚ¡ 
sšt32
 
os32_OnV®ue
, cÚ¡ sšt32 
os32_OffV®ue
);

92 
sšt16
 
x02_š_£t_couÁ”
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

93 
sšt16
 
x02_š_g‘_couÁ”
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

96 
sšt32
 
x02_š_»£t_šc
(cÚ¡ 
ušt32
 
ou32_SlÙ
, cÚ¡ ušt32 
ou32_ChªÃl
è
__©Œibu‹__
 ((
d•»ÿ‹d
));

97 
sšt32
 
x02_š_£t_šc_th»shŞd
(cÚ¡ 
ušt32
 
ou32_SlÙ
, cÚ¡ ušt32 
ou32_ChªÃl
,

98 cÚ¡ 
ušt32
 
ou32_Th»shŞdHigh
, cÚ¡ ušt32 
ou32_Th»shŞdLow
è
__©Œibu‹__
 ((
d•»ÿ‹d
));

103 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_lib.h

18 #iâdeà
X02_LIB_VERSION_H


19 
	#X02_LIB_VERSION_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_lib.h
"

24 
	~"x02_lib_¡ršg.h
"

26 #ifdeà
__ılu¥lus


45 
	#X02_LIB_MAJOR_VERSION
 2

46 
	#X02_LIB_MINOR_VERSION
 0

47 
	#X02_LIB_RELEASE
 5

48 

	)

49 
	#X02_TARGET_ID
 0

50 
	#X02_TARGET_VERSION
 0

51 

	)

52 
	#X02_LIB_INFO_DEVICE_ID
 "Y_EB02"

53 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x02_lib.hµ
"

70 
T_x_lib_v”siÚ
 
	tT_x02_lib_v”siÚ
;

75 
sšt16
 
x02_lib_g‘_v”siÚ
(
T_x02_lib_v”siÚ
 * cÚ¡ 
İt_V”siÚ
);

78 
INLINE
 
sšt16
 
x02_g‘_lib_v”siÚ
(
T_x02_lib_v”siÚ
 * cÚ¡ 
İt_V”siÚ
)

80  
x02_lib_g‘_v”siÚ
(
İt_V”siÚ
);

86 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_lib_string.h

18 #iâdeà
X02_LIB_STRING_H


19 
	#X02_LIB_STRING_H


	)

23 
	#X02_LIB_STRING
 "EB02 LIB"

24 

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_out.h

18 #iâdeà
_X02_OUT_H


19 
	#_X02_OUT_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_out.h
"

26 #ifdeà
__ılu¥lus


33 
	#X02_ON
 (1)

	)

34 
	#X02_OFF
 (0)

	)

36 
	#X02_OUT_CH_MAX
 (1u)

37 
	#X02_OUT_01
 (0)

38 
	#X02_OUT_CHANNEL
 (0)

39 

	)

40 
	#X02_OUT_TYPE_DIGITAL
 (0u)

41 

	)

42 
	#X02_OUT_STATE_NO_ERROR
 (0u)

43 
	#X02_OUT_STATE_OVERCURRENT
 (1u)

44 

	)

45 
	#X02_OUT_EVENT_OVERCURRENT
 (0u)

46 
	#X02_OUT_EVENT_RECOVERY
 (1u)

47 

	)

55 #ifdeà
__ılu¥lus


56 
Çme¥aû
 
¡w_£pi


58 
	~"hµ/x02_out.hµ
"

65 (*
PR_x02_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
, cÚ¡ ušt16 
	tou16_Ev’t
);

66 
T_x_out_¡©us
 
	tT_x02_out_¡©us
;

70 
sšt16
 
x02_out_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

71 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ 
sšt32
 
os32_MaxV®ue
,

72 cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

73 cÚ¡ 
PR_x02_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

75 
sšt16
 
x02_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

76 
sšt16
 
x02_out_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
);

77 
sšt16
 
x02_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x02_out_¡©us
 * cÚ¡ 
İt_Stus
 );

82 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_sys.h

18 #iâdeà
_X02_SYS_H


19 
	#_X02_SYS_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_sys.h
"

24 
	~"x_eb.h
"

26 #ifdeà
__ılu¥lus


34 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

35 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

44 
	#X02_SYS_COMPONENT_LIBRARY
 (0)

45 
	#X02_SYS_COMPONENT_FPGA
 (1)

46 
	#X02_SYS_COMPONENT_CHANNEL_MAX
 (2)

	)

54 #ifdeà
__ılu¥lus


55 
Çme¥aû
 
¡w_£pi


57 
	~"hµ/x02_sys.hµ
"

63 
sšt16
 
x02_sys_š™
();

64 
sšt16
 
x02_sys_g‘_compÚ’t_šfo
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_CompÚ’t
, 
T_x_sys_šfo
* cÚ¡ 
İt_Info
);

69 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_in.h

25 #iâdeà
_X05_IN_H


26 
	#_X05_IN_H


	)

30 
	~"x_¡dty³s.h
"

31 
	~"x_š.h
"

34 #ifdeà
__ılu¥lus


39 
	#X05_IN_CH_MAX
 (4u)

	)

40 
	#X05_IN_01
 (0u)

	)

41 
	#X05_IN_02
 (1u)

	)

42 
	#X05_IN_03
 (2u)

	)

43 
	#X05_IN_04
 (3u)

	)

45 
	#X05_IN_TYPE_DIGITAL
 (0x0000u)

46 
	#X05_IN_TYPE_EVENT_RISING
 (0x0001u)

47 
	#X05_IN_TYPE_EVENT_FALLING
 (0x0002u)

48 
	#X05_IN_TYPE_EVENT_BOTH
 (0x0003u)

49 
	#X05_IN_TYPE_VOLTAGE_40V
 (0x0070u)

50 

	)

51 
	#X05_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

52 
	#X05_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

53 
	#X05_IN_CIRCUIT_PULL_UP
 (0x0002u)

54 
	#X05_IN_CIRCUIT_NO_PULL_UP
 (0x0000u)

55 
	#X05_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

56 
	#X05_IN_CIRCUIT_NO_PULL_DOWN
 (0x0000u)

57 

	)

66 #ifdeà
__ılu¥lus


67 
Çme¥aû
 
¡w_£pi


69 
	~"hµ/x05_š.hµ
"

76 (*
PR_x05_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
);

77 
T_x_š_¡©us
 
	tT_x05_š_¡©us
;

81 
sšt16
 
x05_š_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

82 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

83 cÚ¡ 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

84 cÚ¡ 
PR_x05_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

85 
sšt16
 
x05_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

86 
sšt16
 
x05_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

87 
sšt16
 
x05_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x05_š_¡©us
* cÚ¡ 
İt_Stus
);

92 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_lib.h

24 #iâdeà
_X05_LIB_H


25 
	#_X05_LIB_H


	)

29 
	~"x_¡dty³s.h
"

30 
	~"x_lib.h
"

32 #ifdeà
__ılu¥lus


39 
	#X05_LIB_MAJOR_VERSION
 2

	)

40 
	#X05_LIB_MINOR_VERSION
 1

	)

41 
	#X05_LIB_RELEASE
 1

	)

43 
	#X05_TARGET_ID
 0

44 
	#X05_TARGET_VERSION
 0

45 

	)

46 
	#X05_LIB_INFO_DEVICE_ID
 "Y_EB05"

47 

	)

54 #ifdeà
__ılu¥lus


55 
Çme¥aû
 
¡w_£pi


57 
	~"hµ/x05_lib.hµ
"

63 
T_x_lib_v”siÚ
 
	tT_x05_lib_v”siÚ
;

67 
sšt16
 
x05_lib_g‘_v”siÚ
(
T_x05_lib_v”siÚ
* cÚ¡ 
İt_V”siÚ
);

72 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_lib_string.h

18 #iâdeà
X05_LIB_STRING_H


19 
	#X05_LIB_STRING_H


	)

23 
	#X05_LIB_STRING
 "EB05 LIB"

24 

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_out.h

25 #iâdeà
_X05_OUT_H


26 
	#_X05_OUT_H


	)

30 
	~"x_¡dty³s.h
"

31 
	~"x_out.h
"

34 #ifdeà
__ılu¥lus


41 
	#X05_ON
 (1)

	)

42 
	#X05_OFF
 (0)

	)

44 
	#X05_OUT_CH_MAX
 (8u)

45 
	#X05_OUT_01
 (0u)

46 
	#X05_OUT_02
 (1u)

	)

47 
	#X05_OUT_03
 (2u)

	)

48 
	#X05_OUT_04
 (3u)

	)

49 
	#X05_OUT_05
 (4u)

50 
	#X05_OUT_06
 (5u)

	)

51 
	#X05_OUT_07
 (6u)

	)

52 
	#X05_OUT_08
 (7u)

	)

53 
	#X05_OUT_ALL
 (0xFFFFu)

54 

	)

55 
	#X05_OUT_TYPE_DIGITAL
 (0u)

56 
	#X05_OUT_TYPE_PWM
 (1u)

57 
	#X05_OUT_TYPE_CONTROL_CURRENT
 (2u)

58 

	)

59 
	#X05_OUT_STATE_OVERCURRENT
 (0x0001u)

60 
	#X05_OUT_STATE_GROUND_ERROR
 (0x0002u)

61 
	#X05_OUT_STATE_DIGITAL_FB
 (0x0100u)

62 

	)

63 
	#X05_OUT_EVENT_OVERCURRENT
 (0u)

64 
	#X05_OUT_EVENT_RECOVERY
 (1u)

65 
	#X05_OUT_EVENT_GND_ERROR
 (2u)

66 

	)

67 
	#X05_OUT_MAX_PWM_FREQ
 (1000000u)

68 
	#X05_OUT_MIN_PWM_FREQ
 (5000u)

69 

	)

70 
	#X05_OUT_RELAY_01
 (0u)

	)

80 #ifdeà
__ılu¥lus


81 
Çme¥aû
 
¡w_£pi


83 
	~"hµ/x05_out.hµ
"

90 (*
PR_x05_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
, cÚ¡ ušt16 
	tou16_Ev’t
);

91 
T_x_out_¡©us
 
	tT_x05_out_¡©us
;

92 
T_x_out_pid_·¿m‘”s
 
	tT_x05_out_pid_·¿m‘”s
;

95 
sšt16
 
x05_out_£t_»Ïy
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 
sšt16
 
x05_out_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
,

97 cÚ¡ 
sšt32
 
os32_MaxV®ue
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

98 cÚ¡ 
PR_x05_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

99 
sšt16
 
x05_out_£t_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

100 cÚ¡ 
T_x05_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

101 
sšt16
 
x05_out_g‘_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

102 
T_x05_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

103 
sšt16
 
x05_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

104 
sšt16
 
x05_out_£t_äequ’cy
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

105 
sšt16
 
x05_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x05_out_¡©us
* cÚ¡ 
İt_Stus
 );

106 
sšt16
 
x05_out_g‘_cu¼’t
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_Cu¼’t
 );

107 
sšt16
 
x05_out_g‘_vŞge
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_VŞge
 );

108 
sšt16
 
x05_out_š™_gnd_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

109 cÚ¡ 
PR_x05_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

110 
sšt16
 
x05_out_»£t_gnd_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
);

111 
sšt16
 
x05_out_»£t_oc_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
);

116 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_sys.h

24 #iâdeà
_X05_SYS_H


25 
	#_X05_SYS_H


	)

29 
	~"x_¡dty³s.h
"

30 
	~"x_sys.h
"

32 #ifdeà
__ılu¥lus


42 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

43 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

49 #iâdeà
X05_TIMESTAMP


50 
	#X05_TIMESTAMP
 1402916822

	)

53 #ifdeà
X04_TIMESTAMP


54 #ià(
X04_TIMESTAMP
 !ğ
X05_TIMESTAMP
)

55 
	#X05_LIBRARY_VERSION_ERROR


	)

58 #ifdeà
X08_TIMESTAMP


59 #ià(
X08_TIMESTAMP
 !ğ
X05_TIMESTAMP
)

60 
	#X05_LIBRARY_VERSION_ERROR


	)

65 #ifdeà
X05_LIBRARY_VERSION_ERROR


66 #”rÜ 
eb05
, 
eb04
 
ªd
 
eb08
 
Lib¿r›s
 
¬e
 
difã»Á
; 
¶—£
 
upg¿de
 
to
 
§me
 
v”siÚ
!

72 
	#X05_ADCMUX_BOARD_POWER_UB
 (0u)

	)

73 
	#X05_ADCMUX_VSUP_1V25
 (1u)

	)

74 
	#X05_ADCMUX_VREF_3V3
 (2u)

	)

75 
	#X05_ADCMUX_BOARD_POWER_SWITCHED
 (3u)

	)

76 
	#X05_ADCMUX_VREF1_5V
 (4u)

	)

77 
	#X05_ADCMUX_GND_OFFSET
 (5u)

	)

78 
	#X05_ADCMUX_VSUP_5V_BOARD_GND
 (6u)

	)

79 
	#X05_ADCMUX_VSUP_12V_BOARD_GND
 (7u)

	)

80 
	#X05_ADCMUX_VREF_0V64
 (8u)

	)

81 
	#X05_ADCMUX_VSUP_12V_DIGITAL_GND
 (9u)

	)

82 
	#X05_ADCMUX_TOTAL_CURRENT
 (10u)

	)

83 
	#X05_ADCMUX_VSUP_5V_ANALOG_GND
 (11u)

	)

84 
	#X05_ADCMUX_VSUP_MINUS_5V_ANALOG_GND
 (12u)

	)

85 
	#X05_ADCMUX_TEMP_SENSE
 (13u)

	)

86 
	#X05_ADCMUX_VREF2_5V
 (14u)

	)

87 
	#X05_NUM_MUX_CHANNELS
 (15u)

	)

91 
	#X05_ADC_CH_MAX
 (12u)

	)

92 
	#X05_ADC_I_OUT_01
 (0u)

	)

93 
	#X05_ADC_I_OUT_02
 (1u)

	)

94 
	#X05_ADC_I_OUT_03
 (2u)

	)

95 
	#X05_ADC_I_OUT_04
 (3u)

	)

96 
	#X05_ADC_I_OUT_05
 (4u)

	)

97 
	#X05_ADC_I_OUT_06
 (5u)

	)

98 
	#X05_ADC_I_OUT_07
 (6u)

	)

99 
	#X05_ADC_I_OUT_08
 (7u)

	)

100 
	#X05_ADC_U_IN_01
 (8u)

	)

101 
	#X05_ADC_U_IN_02
 (9u)

	)

102 
	#X05_ADC_U_IN_03
 (10u)

	)

103 
	#X05_ADC_U_IN_04
 (11u)

	)

106 
	#X05_SYS_COMPONENT_LIBRARY
 (0)

107 
	#X05_SYS_COMPONENT_FPGA
 (1)

108 
	#X05_SYS_COMPONENT_CHANNEL_MAX
 (2)

	)

116 #ifdeà
__ılu¥lus


117 
Çme¥aû
 
¡w_£pi


119 
	~"hµ/x05_sys.hµ
"

128 
sšt16
 
x05_sys_š™
();

129 
sšt16
 
x05_sys_g‘_compÚ’t_šfo
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_CompÚ’t
, 
T_x_sys_šfo
* cÚ¡ 
İt_Info
);

130 
sšt16
 
x05_sys_g‘_adc_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_MuxChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

131 
sšt16
 
x05_sys_£t_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_AdcChªÃl
, cÚ¡ ušt16 
ou16_F‹rCÚfig
);

132 
sšt16
 
x05_sys_g‘_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_AdcChªÃl
, ušt16* cÚ¡ 
İu16_F‹rCÚfig
);

137 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\intrinsics.h

18 #iâdeà
_INTRINSICS_H


19 
	#_INTRINSICS_H


	)

24 
	~"¡wty³s.h
"

27 #ifdeà
__ılu¥lus


67 #ifdeà
__ılu¥lus


68 
Çme¥aû
 
¡w_£pi


70 
	~"hµ/šŒšsics.hµ
"

86 
INLINE
 
nİ
()

88 
asm
 volatile ("nop" : : : "memory");

103 
INLINE
 
debug
()

105 
asm
 volatile ("debug" : : : "memory");

124 
INLINE
 
isync
()

126 
asm
 volatile ("isync" : : : "memory");

145 
INLINE
 
dsync
()

147 
asm
 volatile ("dsync" : : : "memory");

166 
INLINE
 
ušt32
 
g‘_b™
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
)

168 
ušt32
 
u32_B™
 = 0u;

170 
asm
 vŞ©("exŒ.u %0, %1, %2, 1" : "=d" (
u32_B™
è: "d" (
ou32_D©aReg
), "d" (
ou32_Pos
));

172  
u32_B™
;

193 
INLINE
 
ušt32
 
g‘_b™f›ld
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
)

195 
ušt32
 
u32_B™f›ld
 = 0u;

197 
asm
 volatile ("extr.u %0, %1, %2, %3"

198 : "=d" (
u32_B™f›ld
è: "d" (
ou32_D©aReg
), "d" (
ou32_Pos
), "i" (
ou8_Width
));

200  
u32_B™f›ld
;

221 
INLINE
 
ušt32
 
š£¹_b™
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, ušt32 
ou32_B™
)

223 
ušt32
 
u32_D©a
 = 0;

225 
asm
 volatile ("insert %0,%1,%2,%3,1"

226 : "=d" (
u32_D©a
è: "d" (
ou32_D©aReg
), "d" (
ou32_B™
), "d" (
ou32_Pos
));

228  
u32_D©a
;

250 
INLINE
 
ušt32
 
š£¹_b™f›ld
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
,

251 
ušt32
 
ou32_B™f›ld
)

253 
ušt32
 
u32_D©a
 = 0;

255 
asm
 volatile ("insert %0,%1,%2,%3,%4"

256 : "=d" (
u32_D©a
è: "d" (
ou32_D©aReg
), "d" (
ou32_B™f›ld
), "d" (
ou32_Pos
), "i" (
ou8_Width
));

258  
u32_D©a
;

278 
INLINE
 
modify_mask
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Mask
, ušt32 
ou32_D©a
)

280 
asm
 volatile (" mov %%d12, %2 #†oad data into D12 \n\t" \

283 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Mask
), "d" (
ou32_D©a
) : "d12", "d13", "memory");

302 
INLINE
 
modify_b™
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Pos
, ušt32 
ou32_B™
)

304 
asm
 volatile (" imask %%e12, %2, %1, 1 #†oad bit mask‡nd data into E12 \n\t" \

306 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Pos
), "d" (
ou32_B™
) : "d12", "d13", "memory");

326 
INLINE
 
modify_b™f›ld
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
, ušt32 
ou32_D©a
)

328 
asm
 volatile (" imask %%e12, %2, %1, %3 #†oad bit mask‡nd data into E12 \n\t" \

330 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Pos
), "d" (
ou32_D©a
), "i" (
ou8_Width
) : "d12", "d13", "memory");

351 
INLINE
 
ušt32
 
sw­_ušt32
(vŞ©ušt32 *
İu32_RegPŒ
, ušt32 
ou32_D©a
)

353 
asm
 vŞ©("sw­.w [%1]0,%0" : "=d" (
ou32_D©a
è: "a" (
İu32_RegPŒ
), "0" (ou32_Data) : "memory");

355  
ou32_D©a
;

374 
INLINE
 
ušt32
 
msb_pos
(ušt32 
ou32_V®ue
)

376 
ušt32
 
u32_B™PosMSB
 = 0u;

378 
asm
 vŞ©("şz %0,%1" : "=d" (
u32_B™PosMSB
è: "d" (
ou32_V®ue
));

380 
u32_B™PosMSB
 = (31u - u32_BitPosMSB);

382  
u32_B™PosMSB
;

402 
INLINE
 
ušt32
 
mš_u32
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

404 
ušt32
 
u32_Mš
 = 0u;

406 
asm
 vŞ©("mš.u %0, %1, %2" : "=d" (
u32_Mš
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
));

408  
u32_Mš
;

428 
INLINE
 
sšt32
 
mš_s32
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

430 
sšt32
 
s32_Mš
 = 0u;

432 
asm
 vŞ©("mš %0, %1, %2" : "=d" (
s32_Mš
è: "d" (
os32_D©a1
), "d" (
os32_D©a2
));

434  
s32_Mš
;

454 
INLINE
 
ušt32
 
max_u32
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

456 
ušt32
 
u32_Max
 = 0u;

458 
asm
 vŞ©("max.u %0, %1, %2" : "=d" (
u32_Max
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
));

460  
u32_Max
;

480 
INLINE
 
sšt32
 
max_s32
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

482 
sšt32
 
s32_Max
 = 0;

484 
asm
 vŞ©("max %0, %1, %2" : "=d" (
s32_Max
è: "d" (
os32_D©a1
), "d" (
os32_D©a2
));

486  
s32_Max
;

507 
INLINE
 
ušt32
 
æßt_to_ušt32
(cÚ¡ 
æßt32
 
of32_D©a
)

509 
ušt32
 
u32_ResuÉ
 = 0u;

511 
asm
 vŞ©("áou %0,%1" : "=d" (
u32_ResuÉ
è: "d" (
of32_D©a
));

513  
u32_ResuÉ
;

534 
INLINE
 
sšt32
 
æßt_to_sšt32
(cÚ¡ 
æßt32
 
of32_D©a
)

536 
sšt32
 
s32_ResuÉ
 = 0;

538 
asm
 vŞ©("áo˜%0,%1" : "=d" (
s32_ResuÉ
è: "d" (
of32_D©a
));

540  
s32_ResuÉ
;

561 
INLINE
 
æßt32
 
madd_f32
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
)

563 
æßt32
 
f32_ResuÉ
 = 0.0f;

565 
asm
 vŞ©("madd.à%0, %3, %1, %2" : "=d" (
f32_ResuÉ
)

566 : "d" (
of32_MuÉ1
), "d" (
of32_MuÉ2
), "d" (
of32_Add
));

567  
f32_ResuÉ
;

589 
INLINE
 
æßt32
 
msub_f32
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
)

591 
æßt32
 
f32_ResuÉ
 = 0.0f;

593 
asm
 vŞ©("msub.à%0, %3, %1, %2" : "=d" (
f32_ResuÉ
)

594 : "d" (
of32_MuÉ1
), "d" (
of32_MuÉ2
), "d" (
of32_Mšu’d
));

595  
f32_ResuÉ
;

619 
INLINE
 
ušt32
 
subs_u32
(cÚ¡ ušt32 
ou32_Mšu’d
, cÚ¡ ušt32 
ou32_SubŒah’d
)

621 
ušt32
 
u32_ResuÉ
 = 0;

623 
asm
 vŞ©("subs.u %0, %1, %2" : "=d" (
u32_ResuÉ
è: "d" (
ou32_Mšu’d
), "d" (
ou32_SubŒah’d
));

625  
u32_ResuÉ
;

651 
INLINE
 
sšt32
 
subs_s32
(cÚ¡ sšt32 
os32_Mšu’d
, cÚ¡ sšt32 
os32_SubŒah’d
)

653 
sšt32
 
s32_ResuÉ
 = 0;

655 
asm
 vŞ©("sub %0, %1, %2" : "=d" (
s32_ResuÉ
è: "d" (
os32_Mšu’d
), "d" (
os32_SubŒah’d
));

657  
s32_ResuÉ
;

681 
INLINE
 
ušt32
 
adds_u32
(cÚ¡ ušt32 
ou32_Summªd1
, cÚ¡ ušt32 
ou32_Summªd2
)

683 
ušt32
 
u32_ResuÉ
 = 0;

685 
asm
 vŞ©("adds.u %0, %1, %2" : "=d" (
u32_ResuÉ
è: "d" (
ou32_Summªd1
), "d" (
ou32_Summªd2
));

687  
u32_ResuÉ
;

713 
INLINE
 
sšt32
 
adds_s32
(cÚ¡ sšt32 
os32_Summªd1
, cÚ¡ sšt32 
os32_Summªd2
)

715 
sšt32
 
s32_ResuÉ
 = 0;

717 
asm
 vŞ©("add %0, %1, %2" : "=d" (
s32_ResuÉ
è: "d" (
os32_Summªd1
), "d" (
os32_Summªd2
));

719  
s32_ResuÉ
;

738 
INLINE
 * 
ušt32_to_±r
(cÚ¡ 
ušt32
 
ou32_UIÁ32
)

740 *
pvVoid
 = 0;

743 
asm
 vŞ©("mov.¨%0, %1" : "÷" (
pvVoid
è: "d" (
ou32_UIÁ32
));

745  
pvVoid
;

764 
INLINE
 
ušt32
 
±r_to_ušt32
(cÚ¡ vŞ©*
İv_Void
)

766 
ušt32
 
u32_UIÁ32
 = 0u;

769 
asm
 vŞ©("mov.d %0, %1" : "=d" (
u32_UIÁ32
è: "a" (
İv_Void
));

771  
u32_UIÁ32
;

790 
INLINE
 
ušt32
 
±r_addr_diff
(cÚ¡ vŞ©* 
İv_Void1
, cÚ¡ vŞ©* 
İv_Void2
)

792 
ušt32
 
u32_Diff
 = 0u;

794 
asm
 volatile ( "sub.a %%a15, %1, %2 # %1 = (%1 - %2) \n\t" \

797 : "=d" (
u32_Diff
è: "a" (
İv_Void1
), "a" (
İv_Void2
) : "a15");

799  
u32_Diff
;

819 
INLINE
 * 
±r_addr_off£t
(cÚ¡ vŞ©* 
İv_Void
, 
sšt32
 
os32_Off£t
)

821 *
pvVoidOff£t
 = 0;

823 
asm
 volatile ( "addsc.a %0, %1, %2, 0 # %0 = (%1 + %2) \n\t" \

824 : "÷" (
pvVoidOff£t
è: "a" (
İv_Void
), "d" (
os32_Off£t
));

826  
pvVoidOff£t
;

845 
INLINE
 
ušt32
 
d©a_diff_u32
 (cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

847 
ušt32
 
u32_Diff
 = 0;

849 
asm
 volatile ( "sub %0, %1, %2 # %1 = (%1 - %2) \n\t" \

851 : "=d" (
u32_Diff
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
) : "memory");

853  
u32_Diff
;

885 
INLINE
 
ÿche_wr™eback_šv®id©e
(cÚ¡ vŞ©
ušt8
 * cÚ¡ 
İu8_D©a
, 
ušt32
 
ou32_CouÁ
)

888 
asm
 volatile (" mov.a %%a15, %0 #†oad†oop counter \n\t"

892 : : "d" (
ou32_CouÁ
 >> 5), "a" (
İu8_D©a
) : "a15", "memory");

923 
INLINE
 
ÿche_šv®id©e
(cÚ¡ vŞ©
ušt8
 * cÚ¡ 
İu8_D©a
, 
ušt32
 
ou32_CouÁ
)

926 
asm
 volatile (" mov.a %%a15, %0 #†oad†oop counter \n\t"

930 : : "d" (
ou32_CouÁ
 >> 5), "a" (
İu8_D©a
) : "a15", "memory");

938 
INLINE
 
ušt32
 
umš
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
è
DEPRECATED
;

939 
INLINE
 
ušt32
 
umš
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

941  
mš_u32
(
ou32_D©a1
, 
ou32_D©a2
);

944 
INLINE
 
sšt32
 
smš
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
è
DEPRECATED
;

945 
INLINE
 
sšt32
 
smš
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

947  
mš_s32
(
os32_D©a1
, 
os32_D©a2
);

950 
INLINE
 
ušt32
 
umax
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
è
DEPRECATED
;

951 
INLINE
 
ušt32
 
umax
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

953  
max_u32
(
ou32_D©a1
, 
ou32_D©a2
);

956 
INLINE
 
sšt32
 
smax
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
è
DEPRECATED
;

957 
INLINE
 
sšt32
 
smax
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

959  
max_s32
(
os32_D©a1
, 
os32_D©a2
);

962 
INLINE
 
æßt32
 
madd_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
è
DEPRECATED
;

963 
INLINE
 
æßt32
 
madd_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
)

965  
madd_f32
(
of32_MuÉ1
, 
of32_MuÉ2
, 
of32_Add
);

968 
INLINE
 
æßt32
 
msub_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
è
DEPRECATED
;

969 
INLINE
 
æßt32
 
msub_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
)

971  
msub_f32
(
of32_MuÉ1
, 
of32_MuÉ2
, 
of32_Mšu’d
);

979 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\memtypes.h

18 #iâdeà
_MEMTYPES_H


19 
	#_MEMTYPES_H


	)

22 #ifdeà
__ılu¥lus


32 
	#ALIGNED
(
®ign
è
	`__©Œibu‹__
 ((
	`®igÃd
 (align)))

33 

	)

54 
	#X_MEM_ROM_DATA
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".romd©a")))

	)

56 
	#X_MEM_LIB_VERSION
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".libv”siÚ")))

	)

58 
	#X_MEM_LIB_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

59 
	#X_MEM_APPLICATION_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".­¶iÿtiÚ_šfo")))

	)

63 
	#MEM_PROT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.data")))

65 
	#MEM_PROT_BSS
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.bss,\"aw\",@nobits #")))

66 
	#MEM_PROT_NOINIT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.noinit,\"aw\",@nobits #")))

67 
	#MEM_NOINIT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".noinit,\"aw\",@nobits #")))

68 
	#MEM_EXTROM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".rodata_e")))

69 
	#MEM_INTROM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".rodata_i")))

70 

	)

75 
	#MEM_SMALL
 
	`__©Œibu‹__
((
	`£ùiÚ
(".sdata")))

76 
	#MEM_SMALL_BSS
 
	`__©Œibu‹__
((
	`£ùiÚ
(".sbss")))

77 
	#MEM_SMALL_CONST
 cÚ¡ 
	`__©Œibu‹__
((
	`a£ùiÚ
(".sdata.rodata","f=as")))

78 

	)

84 
	#LONGCALL
 
	`__©Œibu‹__
((
lÚgÿÎ
))

	)

88 
	#CODERAM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".cod”am","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

91 
	#INTROM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".‹xt_i","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

93 
	#EXTROM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".‹xt_e","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

97 
	#ALIAS
(
func
è
	`__©Œibu‹__
 ((
	`®Ÿs
 (#func)))

	)

108 
	#MEM_DRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dram")))

109 
	#MEM_DRAM_CONST
 cÚ¡ 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dram_c")))

110 
	#MEM_DPRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dpram")))

111 
	#MEM_SBRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sbram")))

112 
	#MEM_SRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sram")))

113 
	#MEM_SRAM_CONST
 cÚ¡ 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sram_c")))

114 

	)

117 
	#MEM_ABS
 
	`__©Œibu‹__
 ((
	`a£ùiÚ
(".zdata","f=awz")))

118 
	#MEM_ABS_BSS
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".zbss","f=awz")))

119 

	)

122 
	#FASTRAM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".ç¡¿m","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

123 
	#INTROM_ABS
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".abs.text_i","a=4","f=x")))

124 

	)

125 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stdtypes.h

18 #iâdeà
_STDTYPES_H


19 
	#_STDTYPES_H


	)

24 
	~<¡ddef.h
>

27 #ifdeà
__ılu¥lus


36 
	#STR
(
s
) #s

37 
	#XSTR
(
s
è
	`STR
(s)

38 

	)

39 
	#TRUE
 1

40 
	#FALSE
 0

41 

	)

42 
	#ON
 1

43 
	#OFF
 0

44 

	)

45 
	#HIGH
 1

46 
	#LOW
 0

47 

	)

52 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stwerrors.h

18 #iâdeà
_STWERRORS_H


19 
	#_STWERRORS_H


	)

25 #ifdeà
__ılu¥lus


27 
Çme¥aû
 
	g¡w_”rÜs


29 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_NO_ERR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(0);

30 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_UNKNOWN_ERR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-1);

31 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_WARN
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-2);

32 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_DEFAULT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-3);

33 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_BUSY
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-4);

34 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_RANGE
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-5);

35 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_OVERFLOW
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-6);

36 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_RD_WR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-7);

37 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_NOACT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-8);

38 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_COM
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-9);

39 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_CONFIG
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-10);

40 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_CHECKSUM
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-11);

41 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_TIMEOUT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-12);

42 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_IN_PROGRESS
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-13);

48 
	#C_NO_ERR
 ( 0 )

	)

49 
	#C_UNKNOWN_ERR
 (-1 )

	)

50 
	#C_WARN
 (-2 )

	)

51 
	#C_DEFAULT
 (-3 )

	)

52 
	#C_BUSY
 (-4 )

	)

53 
	#C_RANGE
 (-5 )

	)

54 
	#C_OVERFLOW
 (-6 )

	)

55 
	#C_RD_WR
 (-7 )

	)

56 
	#C_NOACT
 (-8 )

	)

57 
	#C_COM
 (-9 )

	)

58 
	#C_CONFIG
 (-10)

	)

59 
	#C_CHECKSUM
 (-11)

	)

60 
	#C_TIMEOUT
 (-12)

	)

61 
	#C_IN_PROGRESS
 (-13)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stwtypes.h

18 #iâdeà
_STWTYPES_H


19 
	#_STWTYPES_H


	)

22 #ifdeà
__ılu¥lus


31 
	#NO_INLINE
 
	`__©Œibu‹__
((
nošlše
))

32 
	#ALWAYS_INLINE
 
	`__©Œibu‹__
((
®ways_šlše
))

33 
	#INLINE
 
šlše
 
ALWAYS_INLINE


34 

	)

36 
	#DEPRECATED
 
	`__©Œibu‹__
((
d•»ÿ‹d
))

	)

39 
	#WEAK
 
	`__©Œibu‹__
((
w—k
))

	)

41 #ifdeà
__ılu¥lus


42 
Çme¥aû
 
¡w_ty³s


48 
	tušt8
;

49 sigÃd 
	tsšt8
;

50 
	tušt16
;

51 sigÃd 
	tsšt16
;

52 
	tušt32
;

53 sigÃd 
	tsšt32
;

54 
	tušt64
;

55 sigÃd 
	tsšt64
;

57 
	tæßt32
;

58 
	tæßt64
;

63 
	tušŠ
;

64 sigÃd 
	tsšŠ
;

65 
	tch¬n
;

73 #ifdeà
__ılu¥lus


75 
boŞ
 
	tboŞ—n
;

76 
	#_b™
 
boŞ


77 

	)

80 
ušt8
 
	tboŞ—n
;

84 #ifdeà
__ılu¥lus


90 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_can.h

19 #iâdeà
_X_CAN_H


20 
	#_X_CAN_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_ÿn_ty³s.h
"

27 #ifdeà
__ılu¥lus


33 
	#X_CAN_CH_MAX
 (4)

	)

35 
	#X_CAN_BUS_01
 (0)

36 
	#X_CAN_BUS_02
 (1)

37 
	#X_CAN_BUS_03
 (2)

38 
	#X_CAN_BUS_04
 (3)

39 

	)

46 #ifdeà
__ılu¥lus


47 
Çme¥aû
 
¡w_£pi


49 
	~"hµ/x_ÿn.hµ
"

59 
sšt16
 
x_ÿn_£lf_‹¡
();

60 
sšt16
 
x_ÿn_bus_şo£
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

61 
sšt16
 
x_ÿn_bus_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_ÿn_bus_¡©us
 * cÚ¡ 
İt_Stus
);

62 
sšt16
 
x_ÿn_bus_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
);

63 
sšt16
 
x_ÿn_bus_š™_ext
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
,

64 cÚ¡ 
ušt16
 
ou16_Sam¶ePošt
, ušt16* cÚ¡ 
İu16_AùSam¶ePošt
);

65 
sšt16
 
x_ÿn_bus_g‘_§m¶e_pošt
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_AùSam¶ePošt
);

66 
sšt16
 
x_ÿn_bus_š™_çu»_ÿÎback
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

67 cÚ¡ 
PR_x_ÿn_bus_Fau»C®lback
 
İr_Fau»C®lback
);

68 
sšt16
 
x_ÿn_bus_³rfÜm_busoff_»cov”y
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

69 
sšt16
 
x_ÿn_obj_ş—r_buf
(* cÚ¡ 
İv_HªdË
);

70 
sšt16
 
x_ÿn_obj_şo£
(* cÚ¡ 
İv_HªdË
);

71 
sšt16
 
x_ÿn_obj_g‘_buf_couÁ
(cÚ¡ * cÚ¡ 
İv_HªdË
, 
ušt16
 * cÚ¡ 
İu16_CouÁ
);

72 
sšt16
 
x_ÿn_obj_g‘_msg
(cÚ¡ * cÚ¡ 
İv_HªdË
, 
T_x_ÿn_msg
 * cÚ¡ 
İt_Msg
);

73 
sšt16
 
x_ÿn_obj_g‘_¡©us
(* cÚ¡ 
İv_HªdË
, 
T_x_ÿn_obj_¡©us
 * cÚ¡ 
İt_Stus
);

74 
sšt16
 
x_ÿn_obj_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_ÿn_obj_cÚfig
 * cÚ¡ 
İt_CÚfig
,

75 ** cÚ¡ 
İpv_HªdË
);

76 
sšt16
 
x_ÿn_obj_£nd_msg
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_msg
 * cÚ¡ 
İt_Msg
);

77 
sšt16
 
x_ÿn_obj_£nd_¹r_»q
(cÚ¡ * cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Id
);

78 
sšt16
 
x_ÿn_obj_£t_·u£
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt16
 
ou16_Pau£
);

79 
sšt16
 
x_ÿn_obj_£t_f‹r
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Com·»Id
,

80 cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Mask
);

81 
sšt16
 
x_ÿn_bus_chªge_busoff_time
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Time1
, cÚ¡ ušt16 
ou16_Time2
,

82 cÚ¡ 
ušt16
 
ou16_Time3
, cÚ¡ ušt16 
ou16_Time4
, cÚ¡ ušt16 
ou16_Time5
,

83 cÚ¡ 
ušt16
 
ou16_Wa™Time
);

84 
sšt16
 
x_ÿn_bus_lock
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

85 
sšt16
 
x_ÿn_bus_£t_masks
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_11B™Mask
, cÚ¡ ušt32 
ou32_29B™Mask
);

86 
sšt16
 
x_ÿn_obj_š™_g©eway
(cÚ¡ 
ušt16
 
ou16_ChªÃlSrc
, cÚ¡ ušt16 
ou16_ChªÃlD¡
,

87 cÚ¡ 
T_x_ÿn_g©eway_cÚfig
 * cÚ¡ 
İt_CÚfig
, ** cÚ¡ 
İpv_HªdË
);

88 
sšt16
 
x_ÿn_obj_lock
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt8
 
ou8_OnOff
);

89 
sšt16
 
x_ÿn_obj_£t_auto_»¥Ú£
(cÚ¡ * cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_can_types.h

23 #iâdeà
_X_CAN_TYPES_H


24 
	#_X_CAN_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


39 
	#X_CAN_BUS_FAILURE_NONE
 0x0000u

40 
	#X_CAN_BUS_FAILURE_ACTIVE
 0x0000u

41 
	#X_CAN_BUS_FAILURE_BUSWARN
 0x0001u

42 
	#X_CAN_BUS_FAILURE_BUSOFF
 0x0002u

43 
	#X_CAN_BUS_LOCKED
 0x0100u

44 

	)

45 
	#X_CAN_OBJ_TYPE_RX
 0

46 
	#X_CAN_OBJ_TYPE_TX
 1

47 
	#X_CAN_OBJ_TYPE_TX_RTR
 2

48 
	#X_CAN_OBJ_TYPE_GATEWAY
 3

49 

	)

50 
	#X_CAN_OBJ_NO_INIT
 0

51 
	#X_CAN_OBJ_IN_USE
 1

52 
	#X_CAN_OBJ_LOCKED
 2

53 

	)

54 
	#X_CAN_DIRECTION_RX
 0

55 
	#X_CAN_DIRECTION_TX
 1

56 

	)

57 
	#X_CAN_GATEWAY_RTR_NO
 0

58 
	#X_CAN_GATEWAY_RTR_DEST
 1

59 
	#X_CAN_GATEWAY_RTR_PASS
 2

60 

	)

68 #ifdeà
__ılu¥lus


69 
Çme¥aû
 
¡w_£pi


71 
	~"hµ/x_ÿn_ty³s.hµ
"

83 
ušt32
 
u32_Id
;

84 
ušt8
 
u8_Xtd
;

85 } 
	tT_x_ÿn_id
;

91 
T_x_ÿn_id
 
t_Id
;

92 
ušt8
 
u8_Dlc
;

93 
ušt32
 
u32_Time
;

94 
ušt8
 
au8_D©a
[8];

96 } 
	tT_x_ÿn_msg
;

129 (*
PR_x_ÿn_bus_Fau»C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

130 cÚ¡ 
	tušt16
 
	tou16_BusS‹
);

197 
sšt16
 (*
	tPR_x_ÿn_obj_IÁ”ru±C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

198 cÚ¡ * cÚ¡ 
	tİv_HªdË
, 
	tT_x_ÿn_msg
 * cÚ¡ 
	tİt_CªMsg
,

199 cÚ¡ 
	tušt16
 
	tou16_DœeùiÚ
);

212 
ušt32
 
u32_B™¿‹
;

213 vŞ©
ušt32
 
u32_La¡E¼ÜTime
;

214 vŞ©
ušt16
 
u16_BusS‹
;

215 }
	tT_x_ÿn_bus_¡©us
;

268 
T_x_ÿn_id
 
t_Id
;

269 
ušt8
 
u8_MsgTy³
;

270 
ušt16
 
u16_Pau£
;

271 
ušt16
 
u16_SoáBufãr
;

272 
ušt16
 
u16_H¬dBufãr
;

273 
ušt32
 
u32_C®lbackP¬am‘”
;

274 
PR_x_ÿn_obj_IÁ”ru±C®lback
 
´_C®lback
;

275 }
	tT_x_ÿn_obj_cÚfig
;

283 
T_x_ÿn_obj_cÚfig
 
t_CÚfig
;

284 vŞ©
ušt32
 
u32_La¡IÁ”ru±Time
;

285 
ušt16
 
u16_Numb”Msgs
;

286 
ušt8
 
u8_U§ge
;

287 vŞ©
ušt8
 
u8_MsgLo¡FÏg
;

288 vŞ©
ušt8
 
u8_Ov”æowCouÁ
;

289 }
	tT_x_ÿn_obj_¡©us
;

354 
ušŠ
 
q_CİyDlc
 : 1;

355 
ušŠ
 
q_CİyId
 : 1;

356 
ušŠ
 
q_CİyD©a
 : 1;

357 
ušŠ
 
q_AutoTX
 : 1;

358 
ušŠ
 
q_AÎIdTy³
 : 1;

359 
ušŠ
 
un_RTRMode
 : 2;

363 } 
	tT_x_ÿn_g©eway_cÚŒŞ
;

404 
T_x_ÿn_g©eway_cÚŒŞ
 
t_G©ewayCÚŒŞ
;

405 
ušt16
 
u16_H¬dBufãr
;

406 
T_x_ÿn_id
 
t_G©ewayId
;

407 
T_x_ÿn_id
 
t_G©ewayMask
;

408 
T_x_ÿn_msg
 
t_G©ewayMsg
;

409 
ušt32
 
u32_C®lbackP¬am‘”
;

410 
PR_x_ÿn_obj_IÁ”ru±C®lback
 
´_C®lback
;

411 } 
	tT_x_ÿn_g©eway_cÚfig
;

417 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eb.h

19 #iâdeà
_X_EB_H


20 
	#_X_EB_H


	)

26 #ifdeà
__ılu¥lus


34 
	#X_EXPBOARD_SLOT_A
 (0)

35 
	#X_EXPBOARD_SLOT_B
 (1)

36 
	#X_EXPBOARD_SLOT_C
 (2)

37 
	#X_EXPBOARD_NUM_SLOTS
 (3)

38 

	)

40 
	#X_EXPBOARD_SLOT0
 (0)

41 
	#X_EXPBOARD_SLOT1
 (1)

42 
	#X_EXPBOARD_SLOT2
 (2)

43 

	)

45 
	#X_EXPBOARD_CHANNEL_01
 (0)

46 
	#X_EXPBOARD_CHANNEL_02
 (1)

47 
	#X_EXPBOARD_CHANNEL_03
 (2)

48 
	#X_EXPBOARD_CHANNEL_04
 (3)

49 
	#X_EXPBOARD_CHANNEL_05
 (4)

50 
	#X_EXPBOARD_CHANNEL_06
 (5)

51 
	#X_EXPBOARD_CHANNEL_07
 (6)

52 
	#X_EXPBOARD_CHANNEL_08
 (7)

53 
	#X_EXPBOARD_CHANNEL_09
 (8)

54 
	#X_EXPBOARD_CHANNEL_10
 (9)

55 
	#X_EXPBOARD_CHANNEL_11
 (10)

56 
	#X_EXPBOARD_CHANNEL_12
 (11)

57 
	#X_EXPBOARD_CHANNEL_13
 (12)

58 
	#X_EXPBOARD_CHANNEL_14
 (13)

59 

	)

61 
	#X_EXPBOARD_PWR_OPT
 (12)

62 
	#X_EXPBOARD_POWER
 (13)

63 

	)

65 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eep.h

19 #iâdeà
_X_EEP_H


20 
	#_X_EEP_H


	)

24 
	~"x_“p_ty³s.h
"

25 
	~"x_¡dty³s.h
"

28 #ifdeà
__ılu¥lus


42 #ifdeà
__ılu¥lus


43 
Çme¥aû
 
¡w_£pi


45 
	~"hµ/x_“p.hµ
"

51 
sšt16
 
x_“p_»ad
ĞcÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_CouÁ
, 
ušt8
* cÚ¡ 
İu8_D©a
 );

52 
sšt16
 
x_“p_wr™e
ĞcÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
 );

53 
sšt16
 
x_“p_æush
( );

54 
sšt16
 
x_“p_g‘_¡©us
(cÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_Size
, 
T_x_“p_¡©us
* cÚ¡ 
İt_Stus
);

59 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eep_types.h

23 #iâdeà
_X_EEP_TYPES_H


24 
	#_X_EEP_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


47 #ifdeà
__ılu¥lus


48 
Çme¥aû
 
¡w_£pi


50 
	~"hµ/x_“p_ty³s.hµ
"

57 
ušt32
 
u32_E•romSizeBy‹
;

58 
ušt32
 
u32_PageSizeBy‹
;

59 
ušt32
 
u32_O³nD©aPages
;

60 
ušt32
 
u32_FauÉyD©aPages
;

61 } 
	tT_x_“p_¡©us
;

66 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err.h

18 #iâdeà
_X_ERR_H


19 
	#_X_ERR_H


	)

22 
	~"¡wty³s.h
"

23 
	~"x_”r_ty³s.h
"

24 
	~"x_”r_defšes.h
"

27 #ifdeà
__ılu¥lus


32 
	#X_ERR_WARNING
 (1)

33 
	#X_ERR_ERROR
 (2)

34 
	#X_ERR_INTERNAL
 (3)

35 

	)

44 #ifdeà
__ılu¥lus


45 
Çme¥aû
 
¡w_£pi


47 
	~"hµ/x_”r.hµ
"

57 
x_”r_š™
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_”r_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

58 
T_x_”r_hªdË
* 
x_”r_g‘_hªdË
();

65 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err_defines.h

18 #iâdeà
_ESX3XM_LIB_2_03R1_DEF_H


19 
	#_ESX3XM_LIB_2_03R1_DEF_H


	)

23 
	#X_CAN_IDX
 (0)

	)

24 
	#X_CAN_BUS_CHANGE_BUSOFF_TIME_IDX
 (0)

	)

25 
	#X_CAN_BUS_CLOSE_IDX
 (1)

	)

26 
	#X_CAN_BUS_GET_STATUS_IDX
 (2)

	)

27 
	#X_CAN_BUS_INIT_IDX
 (3)

	)

28 
	#X_CAN_BUS_INIT_FAILURE_CALLBACK_IDX
 (4)

	)

29 
	#X_CAN_BUS_LOCK_IDX
 (5)

	)

30 
	#X_CAN_BUS_PERFORM_BUSOFF_RECOVERY_IDX
 (6)

	)

31 
	#X_CAN_BUS_SET_MASKS_IDX
 (8)

	)

32 
	#X_CAN_OBJ_CLEAR_BUF_IDX
 (9)

	)

33 
	#X_CAN_OBJ_CLOSE_IDX
 (10)

	)

34 
	#X_CAN_OBJ_GET_BUF_COUNT_IDX
 (11)

	)

35 
	#X_CAN_OBJ_GET_MSG_IDX
 (12)

	)

36 
	#X_CAN_OBJ_GET_STATUS_IDX
 (13)

	)

37 
	#X_CAN_OBJ_INIT_IDX
 (14)

	)

38 
	#X_CAN_OBJ_INIT_GATEWAY_IDX
 (15)

	)

39 
	#X_CAN_OBJ_LOCK_IDX
 (16)

	)

40 
	#X_CAN_OBJ_SEND_MSG_IDX
 (17)

	)

41 
	#X_CAN_OBJ_SEND_RTR_REQ_IDX
 (18)

	)

42 
	#X_CAN_OBJ_SET_AUTO_RESPONSE_IDX
 (19)

	)

43 
	#X_CAN_OBJ_SET_FILTER_IDX
 (20)

	)

44 
	#X_CAN_OBJ_SET_PAUSE_IDX
 (21)

	)

45 
	#X_CAN_SELF_TEST_IDX
 (22)

	)

46 
	#X_CAN_BUS_INIT_EXT_IDX
 (23)

	)

47 
	#X_CAN_BUS_GET_SAMPLE_POINT_IDX
 (24)

	)

49 
	#X_EEP_IDX
 (1)

	)

50 
	#X_EEP_FLUSH_IDX
 (0)

	)

51 
	#X_EEP_READ_IDX
 (1)

	)

52 
	#X_EEP_WRITE_IDX
 (2)

	)

53 
	#X_EEP_GET_STATUS_IDX
 (3)

	)

55 
	#X_IN_IDX
 (2)

	)

56 
	#X_IN_GET_DUTY_CYCLE_IDX
 (0)

	)

57 
	#X_IN_GET_FREQUENCY_IDX
 (1)

	)

58 
	#X_IN_GET_RAW_VALUE_IDX
 (2)

	)

59 
	#X_IN_GET_STATUS_IDX
 (3)

	)

60 
	#X_IN_GET_VALUE_IDX
 (4)

	)

61 
	#X_IN_INIT_IDX
 (5)

	)

62 
	#X_IN_GET_COUNTER_IDX
 (6)

	)

63 
	#X_IN_SET_COUNTER_IDX
 (7)

	)

64 
	#X_IN_GET_COUNTER_DIRECTION_IDX
 (8)

	)

65 
	#X_T_IN_INIT_FREQUENCY_AVG_IDX
 (9)

	)

66 
	#X_T_IN_GET_FREQUENCY_AVG_IDX
 (10)

	)

68 
	#X_OS_IDX
 (3)

	)

69 
	#X_OS_INIT_IDX
 (4)

	)

70 
	#X_OS_INSTALL_TASK_IDX
 (5)

	)

71 
	#X_OS_INSTALL_TASK_EXT_IDX
 (6)

	)

72 
	#X_OS_SET_TASK_TIMER_EXT_IDX
 (7)

	)

73 
	#X_OS_SET_TASK_TIMER_IDX
 (8)

	)

74 
	#X_OS_START_IDX
 (9)

	)

75 
	#X_OS_CHECK_TASK_STACK_IDX
 (10)

	)

76 
	#X_OS_MBOX_INIT_IDX
 (11)

	)

77 
	#X_OS_MBOX_CLOSE_IDX
 (12)

	)

78 
	#X_OS_MBOX_GET_MESSAGE_IDX
 (13)

	)

79 
	#X_OS_MBOX_SEND_MESSAGE_IDX
 (14)

	)

80 
	#X_OS_MUTEX_INIT_IDX
 (15)

	)

81 
	#X_OS_MUTEX_CLOSE_IDX
 (16)

	)

82 
	#X_OS_MUTEX_GET_IDX
 (17)

	)

83 
	#X_OS_MUTEX_RELEASE_IDX
 (18)

	)

84 
	#X_OS_SEMA_INIT_IDX
 (19)

	)

85 
	#X_OS_SEMA_CLOSE_IDX
 (20)

	)

86 
	#X_OS_SEMA_GET_IDX
 (21)

	)

87 
	#X_OS_SEMA_RELEASE_IDX
 (22)

	)

88 
	#X_OS_SIGNAL_INIT_IDX
 (23)

	)

89 
	#X_OS_SIGNAL_CLOSE_IDX
 (24)

	)

90 
	#X_OS_SIGNAL_WAIT_FOR_IDX
 (25)

	)

91 
	#X_OS_SIGNAL_SEND_IDX
 (26)

	)

92 
	#X_OS_SUSPEND_TASK_IDX
 (30)

	)

93 
	#X_OS_RESUME_TASK_IDX
 (31)

	)

94 
	#X_OS_DELETE_TASK_IDX
 (32)

	)

95 
	#X_OS_CHECK_TASK_STACK_EXT_IDX
 (33)

	)

97 
	#X_OUT_IDX
 (4)

	)

98 
	#X_OUT_GET_CURRENT_IDX
 (0)

	)

99 
	#X_OUT_GET_STATUS_IDX
 (1)

	)

100 
	#X_OUT_INIT_IDX
 (2)

	)

101 
	#X_OUT_RESET_ERROR_IDX
 (3)

	)

102 
	#X_OUT_SET_FREQUENCY_IDX
 (4)

	)

103 
	#X_OUT_SET_VALUE_IDX
 (5)

	)

104 
	#X_OUT_SET_CONTROL_PARAMETERS_IDX
 (6)

	)

105 
	#X_OUT_GET_CONTROL_PARAMETERS_IDX
 (7)

	)

106 
	#X_OUT_SET_VALUE_RAMPING_IDX
 (8)

	)

107 
	#X_OUT_RELAY_INIT_IDX
 (20)

	)

108 
	#X_OUT_RELAY_SET_IDX
 (21)

	)

109 
	#X_OUT_RELAY_SET_ALL_IDX
 (22)

	)

110 
	#X_OUT_RELAY_GET_STATUS_IDX
 (23)

	)

111 
	#X_OUT_RELAY_RESET_ERROR_IDX
 (24)

	)

113 
	#X_SER_IDX
 (5)

	)

114 
	#X_SER_CLEAR_RX_BUF_IDX
 (0)

	)

115 
	#X_SER_CLEAR_TX_BUF_IDX
 (1)

	)

116 
	#X_SER_CLOSE_IDX
 (2)

	)

117 
	#X_SER_GET_RX_BUF_COUNT_IDX
 (3)

	)

118 
	#X_SER_GET_STATUS_IDX
 (4)

	)

119 
	#X_SER_GET_TX_BUF_COUNT_IDX
 (5)

	)

120 
	#X_SER_INIT_IDX
 (6)

	)

121 
	#X_SER_INIT_RX_BUF_IDX
 (7)

	)

122 
	#X_SER_INIT_TX_BUF_IDX
 (8)

	)

123 
	#X_SER_READ_IDX
 (9)

	)

124 
	#X_SER_SET_BITRATE_IDX
 (10)

	)

125 
	#X_SER_WRITE_IDX
 (11)

	)

126 
	#X_SER_WRITE_STRING_IDX
 (12)

	)

128 
	#X_SYS_IDX
 (6)

	)

129 
	#X_SYS_CLOSE_IDX
 (0)

	)

130 
	#X_SYS_GET_ADC_FILTER_IDX
 (2)

	)

131 
	#X_SYS_GET_ADC_VALUE_IDX
 (3)

	)

132 
	#X_SYS_GET_ADC_VALUE_SCALED_IDX
 (4)

	)

133 
	#X_SYS_GET_TEMPERATURE_IDX
 (6)

	)

134 
	#X_SYS_SET_ADC_FILTER_IDX
 (7)

	)

135 
	#X_SYS_SET_ALL_RELAYS_IDX
 (8)

	)

136 
	#X_SYS_SET_BEEPER_IDX
 (9)

	)

137 
	#X_SYS_SET_LED_IDX
 (10)

	)

138 
	#X_SYS_SET_RELAY_IDX
 (11)

	)

139 
	#X_SYS_SET_SENSOR_SUPPLY_IDX
 (12)

	)

140 
	#X_SYS_STAY_ALIVE_IDX
 (13)

	)

141 
	#X_SYS_TRIGGER_CPU_WATCHDOG_IDX
 (14)

	)

142 
	#X_SYS_GET_ADC_RAW_VALUE_IDX
 (16)

	)

143 
	#X_SYS_GET_ADC_RAW_VALUE_SCALED_IDX
 (17)

	)

144 
	#X_SYS_INIT_IDX
 (18)

	)

145 
	#X_SYS_GET_SYSTEM_INFORMATION_IDX
 (19)

	)

146 
	#X_SYS_GET_IGNITION_IDX
 (20)

	)

147 
	#X_SYS_INIT_OFF_REACTION_IDX
 (21)

	)

148 
	#X_SYS_GET_COMPONENT_INFO_IDX
 (22)

	)

150 
	#X_UTI_IDX
 (7)

	)

151 
	#X_UTI_CALC_CRC_TRICORE_IDX
 (0)

	)

152 
	#X_UTI_CALC_CRC_16_IDX
 (1)

	)

153 
	#X_UTI_CALC_CRC_STW_IDX
 (2)

	)

155 
	#X_SSV_IDX
 (8)

	)

156 
	#X_SSV_INIT_IDX
 (0)

	)

157 
	#X_SSV_GET_STATUS_IDX
 (1)

	)

158 
	#X_SSV_TRIGGER_IDX
 (2)

	)

159 
	#X_SSV_RESET_IDX
 (3)

	)

160 
	#X_SSV_SET_TRIGGER_IDX
 (4)

	)

162 
	#X_TIM_IDX
 (9)

	)

163 
	#X_TIM_INIT_IDX
 (0)

	)

164 
	#X_TIM_CLOSE_IDX
 (1)

	)

165 
	#X_TIM_SET_IDX
 (2)

	)

167 
	#X_FL_IDX
 (11)

	)

168 
	#X_FL_GET_VERSION_IDX
 (1)

	)

169 
	#X_FL_GET_NUM_INTERFACES_IDX
 (2)

	)

170 
	#X_FL_GET_INTERFACE_PARAMETERS_IDX
 (3)

	)

171 
	#X_FL_SET_INTERFACE_PARAMETERS_IDX
 (4)

	)

172 
	#X_FL_GET_NUM_CHECKSUM_BLOCKS_IDX
 (5)

	)

173 
	#X_FL_GET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (6)

	)

174 
	#X_FL_SET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (7)

	)

175 
	#X_FL_GET_CHECKSUM_BLOCK_CHECK_IDX
 (8)

	)

176 
	#X_FL_SET_CHECKSUM_BLOCK_CHECK_IDX
 (9)

	)

177 
	#X_FL_GET_FINGER_PRINT_IDX
 (10)

	)

178 
	#X_FL_GET_CONTENT_CHANGED_FLAG_IDX
 (11)

	)

179 
	#X_FL_PERFORM_SIGNATURE_BLOCK_CHECK_IDX
 (12)

	)

180 
	#X_FL_RESET_CONTENT_CHANGED_FLAG_IDX
 (13)

	)

182 
	#X_MPU_IDX
 (12)

	)

183 
	#X_MPU_INIT_IDX
 (0)

	)

184 
	#X_MPU_GET_STATUS_IDX
 (1)

	)

186 
	#XS_CAN_IDX
 (100)

	)

187 
	#XS_CAN_BUS_CHANGE_BUSOFF_TIME_IDX
 (0)

	)

188 
	#XS_CAN_BUS_CLOSE_IDX
 (1)

	)

189 
	#XS_CAN_BUS_INIT_IDX
 (3)

	)

190 
	#XS_CAN_BUS_INIT_FAILURE_CALLBACK_IDX
 (4)

	)

191 
	#XS_CAN_BUS_LOCK_IDX
 (5)

	)

192 
	#XS_CAN_BUS_PERFORM_BUSOFF_RECOVERY_IDX
 (6)

	)

193 
	#XS_CAN_BUS_SET_MASKS_IDX
 (8)

	)

194 
	#XS_CAN_OBJ_CLEAR_BUF_IDX
 (9)

	)

195 
	#XS_CAN_OBJ_CLOSE_IDX
 (10)

	)

196 
	#XS_CAN_OBJ_GET_MSG_IDX
 (12)

	)

197 
	#XS_CAN_OBJ_GET_STATUS_IDX
 (13)

	)

198 
	#XS_CAN_OBJ_INIT_IDX
 (14)

	)

199 
	#XS_CAN_OBJ_INIT_GATEWAY_IDX
 (15)

	)

200 
	#XS_CAN_OBJ_LOCK_IDX
 (16)

	)

201 
	#XS_CAN_OBJ_SEND_MSG_IDX
 (17)

	)

202 
	#XS_CAN_OBJ_SEND_RTR_REQ_IDX
 (18)

	)

203 
	#XS_CAN_OBJ_SET_AUTO_RESPONSE_IDX
 (19)

	)

204 
	#XS_CAN_OBJ_SET_FILTER_IDX
 (20)

	)

205 
	#XS_CAN_OBJ_SET_PAUSE_IDX
 (21)

	)

206 
	#XS_CAN_SELF_TEST_IDX
 (22)

	)

207 
	#XS_CAN_OBJ_GET_EVENT_HANDLE_IDX
 (23)

	)

208 
	#XS_CAN_BUS_GET_BUSWARN_CHANNEL_IDX
 (24)

	)

209 
	#XS_CAN_BUS_GET_BUSOFF_CHANNEL_IDX
 (25)

	)

210 
	#XS_CAN_OBJ_EVENT_MASK_SET_IDX
 (26)

	)

211 
	#XS_CAN_BUS_INIT_EXT_IDX
 (27)

	)

212 
	#XS_CAN_BUS_GET_SAMPLE_POINT_IDX
 (28)

	)

214 
	#XS_EEP_IDX
 (101)

	)

215 
	#XS_EEP_FLUSH_IDX
 (0)

	)

216 
	#XS_EEP_WRITE_IDX
 (2)

	)

218 
	#XS_IN_IDX
 (102)

	)

219 
	#XS_IN_INIT_IDX
 (5)

	)

220 
	#XS_IN_SET_COUNTER_IDX
 (7)

	)

221 
	#XS_IN_GET_EVENT_CHANNEL_IDX
 (9)

	)

222 
	#XS_T_IN_INIT_FREQUENCY_AVG_IDX
 (10)

	)

224 
	#XS_OS_IDX
 (103)

	)

225 
	#XS_OS_SET_TASK_SAFETY_LEVEL_IDX
 (2)

	)

226 
	#XS_OS_GET_TASK_SAFETY_LEVEL_IDX
 (3)

	)

227 
	#XS_OS_INIT_IDX
 (4)

	)

228 
	#XS_OS_INSTALL_TASK_EXT_IDX
 (6)

	)

229 
	#XS_OS_SET_TASK_TIMER_EXT_IDX
 (7)

	)

230 
	#XS_OS_MBOX_INIT_IDX
 (11)

	)

231 
	#XS_OS_MBOX_CLOSE_IDX
 (12)

	)

232 
	#XS_OS_MBOX_GET_MESSAGE_IDX
 (13)

	)

233 
	#XS_OS_MBOX_SEND_MESSAGE_IDX
 (14)

	)

234 
	#XS_OS_MUTEX_INIT_IDX
 (15)

	)

235 
	#XS_OS_MUTEX_CLOSE_IDX
 (16)

	)

236 
	#XS_OS_MUTEX_GET_IDX
 (17)

	)

237 
	#XS_OS_MUTEX_RELEASE_IDX
 (18)

	)

238 
	#XS_OS_SEMA_INIT_IDX
 (19)

	)

239 
	#XS_OS_SEMA_CLOSE_IDX
 (20)

	)

240 
	#XS_OS_SEMA_GET_IDX
 (21)

	)

241 
	#XS_OS_SEMA_RELEASE_IDX
 (22)

	)

242 
	#XS_OS_SIGNAL_INIT_IDX
 (23)

	)

243 
	#XS_OS_SIGNAL_CLOSE_IDX
 (24)

	)

244 
	#XS_OS_SIGNAL_WAIT_FOR_IDX
 (25)

	)

245 
	#XS_OS_SIGNAL_SEND_IDX
 (26)

	)

246 
	#XS_OS_SUSPEND_TASK_IDX
 (30)

	)

247 
	#XS_OS_RESUME_TASK_IDX
 (31)

	)

248 
	#XS_OS_DELETE_TASK_IDX
 (32)

	)

249 
	#XS_OS_MBOX_INIT_UNPROTECTED_IDX
 (35)

	)

250 
	#XS_OS_MUTEX_INIT_UNPROTECTED_IDX
 (36)

	)

251 
	#XS_OS_SEMA_INIT_UNPROTECTED_IDX
 (37)

	)

252 
	#XS_OS_SIGNAL_INIT_UNPROTECTED_IDX
 (38)

	)

254 
	#XS_OUT_IDX
 (104)

	)

255 
	#XS_OUT_INIT_IDX
 (1)

	)

256 
	#XS_OUT_INIT_UNPROTECTED_IDX
 (2)

	)

257 
	#XS_OUT_RESET_ERROR_IDX
 (3)

	)

258 
	#XS_OUT_SET_FREQUENCY_IDX
 (4)

	)

259 
	#XS_OUT_SET_VALUE_IDX
 (5)

	)

260 
	#XS_OUT_SET_CONTROL_PARAMETERS_IDX
 (6)

	)

261 
	#XS_OUT_SET_VALUE_RAMPING_IDX
 (8)

	)

262 
	#XS_OUT_GET_OVERCURRENT_CHANNEL_IDX
 (9)

	)

263 
	#XS_OUT_GET_RECOVERY_CHANNEL_IDX
 (10)

	)

264 
	#XS_OUT_GET_EVENT_CHANNEL_IDX
 (11)

	)

265 
	#XS_OUT_RELAY_INIT_IDX
 (20)

	)

266 
	#XS_OUT_RELAY_SET_IDX
 (21)

	)

267 
	#XS_OUT_RELAY_SET_ALL_IDX
 (22)

	)

268 
	#XS_OUT_RELAY_RESET_ERROR_IDX
 (24)

	)

269 
	#XS_OUT_RELAY_GET_EVENT_CHANNEL_IDX
 (25)

	)

271 
	#XS_SER_IDX
 (105)

	)

272 
	#XS_SER_CLEAR_RX_BUF_IDX
 (0)

	)

273 
	#XS_SER_CLEAR_TX_BUF_IDX
 (1)

	)

274 
	#XS_SER_CLOSE_IDX
 (2)

	)

275 
	#XS_SER_GET_STATUS_IDX
 (4)

	)

276 
	#XS_SER_INIT_IDX
 (6)

	)

277 
	#XS_SER_INIT_RX_BUF_IDX
 (7)

	)

278 
	#XS_SER_INIT_TX_BUF_IDX
 (8)

	)

279 
	#XS_SER_READ_IDX
 (9)

	)

280 
	#XS_SER_SET_BITRATE_IDX
 (10)

	)

281 
	#XS_SER_WRITE_IDX
 (11)

	)

282 
	#XS_SER_WRITE_STRING_IDX
 (12)

	)

284 
	#XS_SYS_IDX
 (106)

	)

285 
	#XS_SYS_CLOSE_IDX
 (0)

	)

286 
	#XS_SYS_SET_ADC_FILTER_IDX
 (7)

	)

287 
	#XS_SYS_SET_ALL_RELAYS_IDX
 (8)

	)

288 
	#XS_SYS_SET_LED_IDX
 (10)

	)

289 
	#XS_SYS_SET_RELAY_IDX
 (11)

	)

290 
	#XS_SYS_SET_SENSOR_SUPPLY_IDX
 (12)

	)

291 
	#XS_SYS_STAY_ALIVE_IDX
 (13)

	)

292 
	#XS_SYS_TRIGGER_CPU_WATCHDOG_IDX
 (14)

	)

293 
	#XS_SYS_INIT_OFF_REACTION_IDX
 (21)

	)

295 
	#XS_SSV_IDX
 (108)

	)

296 
	#XS_SSV_INIT_IDX
 (0)

	)

297 
	#XS_SSV_GET_STATUS_IDX
 (1)

	)

298 
	#XS_SSV_SET_TRIGGER_IDX
 (4)

	)

300 
	#XS_ERR_IDX
 (110)

	)

301 
	#XS_ERR_INIT_IDX
 (0)

	)

302 
	#XS_ERR_GET_ERR_EVENT_IDX
 (1)

	)

303 
	#XS_ERR_CLOSE_IDX
 (2)

	)

305 
	#XS_FL_IDX
 (111)

	)

306 
	#XS_FL_SET_INTERFACE_PARAMETERS_IDX
 (4)

	)

307 
	#XS_FL_SET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (7)

	)

308 
	#XS_FL_SET_CHECKSUM_BLOCK_CHECK_IDX
 (9)

	)

309 
	#XS_FL_RESET_CONTENT_CHANGED_FLAG_IDX
 (13)

	)

311 
	#XS_MPU_IDX
 (112)

	)

312 
	#XS_MPU_INIT_IDX
 (0)

	)

313 
	#XS_MPU_GET_MEM_PROTECTION_IDX
 (1)

	)

315 
	#XS_DP_IDX
 (113)

	)

316 
	#XS_DP_INIT_IDX
 (0)

	)

317 
	#XS_DP_GET_INSTANCE_IDX
 (1)

	)

318 
	#XS_DP_WRITE_IDX
 (2)

	)

319 
	#XS_DP_READ_IDX
 (3)

	)

321 
	#XS_AM_IDX
 (114)

	)

322 
	#XS_AM_INIT_IDX
 (0)

	)

323 
	#XS_AM_MODULE_SET_PERMISSION_IDX
 (1)

	)

324 
	#XS_AM_FUNCTION_SET_PERMISSION_IDX
 (3)

	)

325 
	#XS_AM_DATAPOOL_SET_PERMISSION_IDX
 (4)

	)

327 
	#XS_EB_IDX
 (115)

	)

328 
	#XS_EB_ENABLE_NONINTERFERING_ACCESS_IDX
 (0)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err_types.h

23 #iâdeà
_X_ERR_TYPES_H


24 
	#_X_ERR_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


47 #ifdeà
__ılu¥lus


48 
Çme¥aû
 
¡w_£pi


50 
	~"hµ/x_”r_ty³s.hµ
"

57 
ch¬n
 
aú_Name
[16];

58 
ch¬n
 
aú_V”siÚ
[16];

59 } 
	tT_x_”r_lib¿ry
;

63 cÚ¡ 
T_x_”r_lib¿ry
 * 
±_Lib¿ry
;

64 
ušt16
 
u16_Lib¿ryId
;

65 
ušt16
 
u16_A»aNameIndex
;

66 
ušt16
 
u16_FunùiÚNameIndex
;

67 
ušt16
 
u16_E¼ÜIndex
;

68 
sšt16
 
s16_E¼ÜCode
;

69 
ušt32
 
u32_D‘a
;

70 } 
	tT_x_”r_”rÜ
;

84 (*
PR_x_”r_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tT_x_”r_”rÜ
* cÚ¡ 
	tİt_E¼Ü
,

85 cÚ¡ 
	tušt16
 
	tou16_IÁ”ru±Lev–
);

90 cÚ¡ 
T_x_”r_lib¿ry
 * 
±_Lib¿ry
;

91 
ušt16
 
u16_Lib¿ryId
;

92 
ušt32
 
u32_C®lbackP¬am‘”
;

93 
PR_x_”r_E¼ÜC®lback
 
´_E¼ÜHªdËr
;

94 } 
	tT_x_”r_hªdË
;

99 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_esx3xm.h

19 #iâdeà
_X_ESX3XM_H


20 
	#_X_ESX3XM_H


	)

27 
	~"x_ÿn.h
"

28 
	~"x_“p.h
"

29 
	~"x_”r.h
"

30 
	~"x_æ.h
"

31 
	~"x_š.h
"

32 
	~"x_lib.h
"

33 
	~"x_eb.h
"

34 
	~"x_os.h
"

35 
	~"x_out.h
"

36 
	~"x_£r.h
"

37 
	~"x_ssv.h
"

38 
	~"x_sys.h
"

39 
	~"x_tim.h
"

40 
	~"x_mpu.h
"

41 
	~"x_uti.h
"

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_fl.h

19 #iâdeà
_X_FL_H


20 
	#_X_FL_H


	)

24 
	~"x_¡dty³s.h
"

25 
	~"x_æ_ty³s.h
"

28 #ifdeà
__ılu¥lus


34 
	#X_FL_IF_01
 (0U)

	)

35 
	#X_FL_IF_02
 (1U)

	)

36 
	#X_FL_IF_03
 (2U)

	)

37 
	#X_FL_IF_04
 (3U)

	)

38 
	#X_FL_IF_05
 (4U)

	)

48 #ifdeà
__ılu¥lus


49 
Çme¥aû
 
¡w_£pi


51 
	~"hµ/x_æ.hµ
"

59 
ušt32
 
u32_S¹Add»ss
;

60 
ušt32
 
u32_EndAdd»ss
;

61 } 
	tT_x_æ_A»a
;

65 
ušt8
 
au8_SigÇtu»
[8];

66 } 
	tT_x_æ_SigÇtu»
;

70 
ch¬n
 
aú_Magic
[11];

71 
ušt8
 
u8_SŒuùV”siÚ
;

72 
ušt16
 
u16_SŒuùSize
;

73 
ušt8
 
au8_Re£rved1
[2];

74 
ušt16
 
u16_SigÇtu»AlgÜ™hm
;

75 
ušt8
 
u8_Re£rved2
;

76 
ušt8
 
u8_NumOfA»as
;

77 
T_x_æ_A»a
 
©_A»as
[2];

78 
T_x_æ_SigÇtu»
 
©_SigÇtu»s
[2];

79 } 
	tT_x_æ_maš_sigÇtu»_block
;

82 
T_x_æ_maš_sigÇtu»_block
 cÚ¡ 
gt_AµliÿtiÚSigÇtu»Block
;

85 
sšt16
 
x_æ_g‘_v”siÚ
(
ušt16
 * cÚ¡ 
İu16_V”siÚ
);

87 
sšt16
 
x_æ_g‘_num_š‹rçûs
(
ušt16
 * cÚ¡ 
İu16_NumIÁ”çûs
);

88 
sšt16
 
x_æ_g‘_š‹rçû_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_IÁ”çûNumb”
,

89 
T_x_æ_š‹rçû_·¿m‘”s
 * cÚ¡ 
İt_P¬am‘”s
);

90 
sšt16
 
x_æ_£t_š‹rçû_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_IÁ”çûNumb”
,

91 cÚ¡ 
T_x_æ_š‹rçû_·¿m‘”s
 * cÚ¡ 
İt_P¬am‘”s
);

94 
sšt16
 
x_æ_g‘_num_checksum_blocks
(
ušt16
 * cÚ¡ 
İu16_NumBlocks
);

97 
sšt16
 
x_æ_g‘_checksum_block_add»s£s
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
,

98 
T_x_æ_checksum_block_add»s£s
 * cÚ¡ 
İt_ChecksumBlockAdd»s£s
);

99 
sšt16
 
x_æ_£t_checksum_block_add»s£s
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
,

100 cÚ¡ 
T_x_æ_checksum_block_add»s£s
 * cÚ¡ 
İt_ChecksumBlockAdd»s£s
);

103 
sšt16
 
x_æ_g‘_checksum_block_check
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
, 
ušt8
 * cÚ¡ 
İu8_OnOff
);

104 
sšt16
 
x_æ_£t_checksum_block_check
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
, cÚ¡ 
ušt8
 
ou8_OnOff
);

107 
sšt16
 
x_æ_g‘_fšg”_´št
(
T_x_æ_fšg”_´št
 * cÚ¡ 
İt_Fšg”Pršt
);

110 
sšt16
 
x_æ_g‘_cÚ‹Á_chªged_æag
(
ušt8
 * cÚ¡ 
İu8_ChªgeS‹
);

111 
sšt16
 
x_æ_»£t_cÚ‹Á_chªged_æag
();

112 
sšt16
 
x_æ_³rfÜm_sigÇtu»_block_check
(cÚ¡ * cÚ¡ 
İv_SigÇtu»Block
);

117 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_fl_types.h

22 #iâdeà
_X_FL_TYPES_H


23 
	#_X_FL_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


46 #ifdeà
__ılu¥lus


47 
Çme¥aû
 
¡w_£pi


49 
	~"hµ/x_æ_ty³s.hµ
"

57 
ušt32
 
u32_CommB™¿‹
;

58 
ušt32
 
u32_CommID
;

59 
ušt8
 
u8_CommTy³
;

60 
ušt8
 
u8_LoÿlID
;

61 
ušt8
 
u8_EÇbËd
;

62 
ušt32
 
u32_CÚŒŞID
;

63 } 
	tT_x_æ_š‹rçû_·¿m‘”s
;

70 
ušt32
 
u32_S¹Add»ss
;

71 
ušt32
 
u32_EndAdd»ss
;

72 } 
	tT_x_æ_checksum_block_add»s£s
;

80 
ušt8
 
u8_CheckOn
;

81 
ušt32
 
u32_S¹Add»ss
;

82 
ušt32
 
u32_EndAdd»ss
;

83 
ušt32
 
u32_Checksum
;

84 } 
	tT_x_æ_checksum_block_¡©us
;

90 
ušt8
 
u8_SecÚds
;

91 
ušt8
 
u8_Mšu‹s
;

92 
ušt8
 
u8_Hours
;

93 } 
	tT_x_æ_fšg”_´št_time
;

98 
ušt8
 
u8_Day
;

99 
ušt8
 
u8_MÚth
;

100 
ušt8
 
u8_Y—r
;

101 } 
	tT_x_æ_fšg”_´št_d©e
;

108 
T_x_æ_fšg”_´št_time
 
t_Time
;

109 
T_x_æ_fšg”_´št_d©e
 
t_D©e
;

110 
ušt8
 
au8_U£rName
[17];

111 
ušt32
 
u32_Checksum
;

112 } 
	tT_x_æ_fšg”_´št
;

119 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_in.h

18 #iâdeà
_X_IN_H


19 
	#_X_IN_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


32 
	#X_IN_CH_MAX
 (15u)

33 

	)

34 
	#X_IN_01
 (0u)

35 
	#X_IN_02
 (1u)

36 
	#X_IN_03
 (2u)

37 
	#X_IN_04
 (3u)

38 
	#X_IN_05
 (4u)

39 
	#X_IN_06
 (5u)

40 
	#X_IN_07
 (6u)

41 
	#X_IN_08
 (7u)

42 
	#X_IN_09
 (8u)

43 
	#X_IN_10
 (9u)

44 
	#X_IN_11
 (10u)

45 
	#X_IN_12
 (11u)

46 
	#X_IN_13
 (12u)

47 
	#X_IN_14
 (13u)

48 
	#X_IN_15
 (14u)

49 

	)

51 
	#X_IN_TYPE_DIGITAL
 (0x0000u)

52 
	#X_IN_TYPE_EVENT_RISING
 (0x0001u)

53 
	#X_IN_TYPE_EVENT_FALLING
 (0x0002u)

54 
	#X_IN_TYPE_EVENT_BOTH
 (0x0003u)

55 
	#X_IN_TYPE_FREQUENCY
 (0x0004u)

56 
	#X_IN_TYPE_INCREMENTAL
 (0x0008u)

57 
	#X_IN_TYPE_CURRENT
 (0x0030u)

58 
	#X_IN_TYPE_VOLTAGE_5V
 (0x0040u)

59 
	#X_IN_TYPE_VOLTAGE_10V
 (0x0050u)

60 
	#X_IN_TYPE_VOLTAGE_40V
 (0x0070u)

61 

	)

62 
	#X_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

63 
	#X_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

64 

	)

69 
	#X_IN_CIRCUIT_PULL_UP
 (0x0002u)

70 
	#X_IN_CIRCUIT_NO_PULL_UP
 (0x0000u)

71 
	#X_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

72 
	#X_IN_CIRCUIT_NO_PULL_DOWN
 (0x0000u)

73 

	)

74 
	#X_IN_COUNTER_DIR_UP
 1

75 
	#X_IN_COUNTER_DIR_DOWN
 0

76 

	)

77 
	#X_IN_FREQ_AVG_SAMPLES_MIN
 1

78 
	#X_IN_FREQ_AVG_SAMPLES_MAX
 56

79 
	#X_IN_FREQ_AVG_MODE_EXCLUDE_MIN
 (0x0001u)

80 
	#X_IN_FREQ_AVG_MODE_EXCLUDE_MAX
 (0x0002u)

81 
	#X_IN_FREQ_AVG_MIN
 2500

82 
	#X_IN_FREQ_AVG_MAX
 20000000

83 

	)

92 #ifdeà
__ılu¥lus


93 
Çme¥aû
 
¡w_£pi


95 
	~"hµ/x_š.hµ
"

104 
ušt16
 
u16_IÅutTy³
;

105 
ušt16
 
u16_IÅutCœcu™
;

106 
ušt16
 
u16_F‹rCÚfig
;

107 
ušt16
 
u16_Dig™®S‹
;

108 
ušt16
 
u16_AdcV®ue
;

109 
sšt32
 
s32_SÿËdV®ue
;

110 } 
	tT_x_š_¡©us
;

114 
ušt16
 
u16_AvgSam¶es
;

115 
ušt16
 
u16_AvgMode
;

116 
ušt16
 
u16_F‹rCÚfigUs
;

117 
ušt16
 
u16_Vœtu®P”iodTh»shŞd
;

119 
ušt32
 
u32_MšF»qu’cy
;

120 
ušt32
 
u32_MaxF»qu’cy
;

121 } 
	tT_x_t_š_äeq_avg_cÚfig
;

127 (*
PR_x_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
);

132 
sšt16
 
x_š_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

133 cÚ¡ 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

134 cÚ¡ 
PR_x_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

135 
sšt16
 
x_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

136 
sšt16
 
x_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

137 
sšt16
 
x_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_š_¡©us
* cÚ¡ 
İt_Stus
);

138 
sšt16
 
x_š_g‘_äequ’cy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_F»qu’cy
);

139 
sšt16
 
x_š_g‘_duty_cyşe
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_DutyCyşe
);

140 
sšt16
 
x_š_g‘_couÁ”
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_CouÁ”
);

141 
sšt16
 
x_š_£t_couÁ”
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_CouÁ”
);

142 
sšt16
 
x_š_g‘_couÁ”_dœeùiÚ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt8
* cÚ¡ 
İu8_CÁDœ
);

143 
sšt16
 
x_t_š_š™_äequ’cy_avg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_t_š_äeq_avg_cÚfig
* cÚ¡ 
İt_CÚfig
);

144 
sšt16
 
x_t_š_g‘_äequ’cy_avg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_F»qu’cy
);

149 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_lib.h

19 #iâdeà
_X_LIB_H


20 
	#_X_LIB_H


	)

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_LIB_VERSION_STRING
 "ESX3XM LIB"

36 
	#X_LIB_VERSION_MAJOR
 2

37 
	#X_LIB_VERSION_MINOR
 3

38 
	#X_LIB_VERSION_RELEASE
 1

39 

	)

44 
	#X_LIB_MEM_BIOS_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

46 
	#X_LIB_MEM_DRIVER_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

48 
	#X_LIB_MEM_APPL_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".­¶iÿtiÚ_šfo")))

	)

52 
	#X_LIB_INFO_BIOS_MAGIC
 "Lx_?z21"

	)

54 
	#X_LIB_INFO_DRIVER_MAGIC
 "Lx_?z22"

	)

56 
	#X_LIB_INFO_APPL_MAGIC
 "Lx_?z2."

	)

58 
	#X_LIB_INFO_STRUCT_VERSION
 (0x01u)

	)

59 
	#X_LIB_INFO_CONTAINS_DEVICE_ID
 (0x01u)

	)

60 
	#X_LIB_INFO_CONTAINS_DATE_TIME
 (0x02u)

	)

61 
	#X_LIB_INFO_CONTAINS_PROJECT_NAME
 (0x04u)

	)

62 
	#X_LIB_INFO_CONTAINS_PROJECT_VERSION
 (0x08u)

	)

63 
	#X_LIB_INFO_CONTAINS_ADDITIONAL_INFO
 (0x10u)

	)

64 
	#X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
 (0xFFu)

	)

65 
	#X_LIB_INFO_DEVICE_ID
 "Y_ESX3XM"

66 

	)

69 #iâdeà
__GNUC_PATCHLEVEL__


71 
	#__GNUC_PATCHLEVEL__
 0

	)

118 #ifdeà
__ılu¥lus


119 
Çme¥aû
 
¡w_£pi


121 
	~"hµ/x_lib.hµ
"

129 
ch¬n
 
aú_Magic
[7];

130 
ušt8
 
u8_SŒuùV”siÚ
;

131 
ušt8
 
u8_CÚ‹ÁM­
;

135 
ch¬n
 
aú_DeviûID
[16];

136 
ch¬n
 
aú_D©e
[11];

137 
ch¬n
 
aú_Time
[8];

138 
ch¬n
 
aú_ProjeùName
[15];

139 
ch¬n
 
aú_ProjeùV”siÚ
[10];

140 
ušt8
 
u8_L’Add™iÚ®Info
;

141 
ch¬n
 
aú_Add™iÚ®Info
[
X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
];

142 } 
	tT_x_lib_šfo
;

147 
ch¬n
 
aú_Name
[16];

148 
ch¬n
 
aú_V”siÚSŒšg
[16];

149 
ušt8
 
u8_MajÜV”siÚ
;

150 
ušt8
 
u8_MšÜV”siÚ
;

151 
ušt16
 
u16_R–—£
;

152 
ušt16
 
u16_T¬g‘Id
;

153 
ušt16
 
u16_T¬g‘V”siÚ
;

154 
ušt16
 
u16_Comp”MajÜV”siÚ
;

155 
ušt16
 
u16_Comp”MšÜV”siÚ
;

156 
ušt32
 
u32_Comp”R–—£
;

157 
ch¬n
 
aú_D©e
[11];

158 
ch¬n
 
aú_Time
[8];

159 } 
	tT_x_lib_v”siÚ
;

167 
sšt16
 
x_lib_g‘_v”siÚ
(
T_x_lib_v”siÚ
* cÚ¡ 
İt_V”siÚ
);

172 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_mpu.h

19 #iâdeà
_X_MPU_H


20 
	#_X_MPU_H


	)

24 
	~"x_¡dty³s.h
"

25 
	~"x_mpu_ty³s.h
"

27 #ifdeà
__ılu¥lus


41 #ifdeà
__ılu¥lus


42 
Çme¥aû
 
¡w_£pi


44 
	~"hµ/x_mpu.hµ
"

56 
sšt16
 
x_mpu_š™
(cÚ¡ 
ušt32
 
ou32_P¬’tMemCÏss
, cÚ¡ ušt32 
ou32_Size1By
, ušt32 * cÚ¡ 
İu32_PrÙeùedMemCÏss
);

57 
sšt16
 
x_mpu_g‘_¡©us
(
T_x_mpu_¡©us
 * cÚ¡ 
İt_Stus
);

62 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_mpu_types.h

23 #iâdeà
_X_MPU_TYPES_H


24 
	#_X_MPU_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


38 
	#X_MPU_MODE_ACTIVE
 (0x0001u)

	)

39 
	#X_MPU_MODE_SAFETY_LAYER_USED
 (0x0002u)

	)

49 #ifdeà
__ılu¥lus


50 
Çme¥aû
 
¡w_£pi


52 
	~"hµ/x_mpu_ty³s.hµ
"

59 
ušt16
 
u16_MpuMode
;

60 
ušt32
 
u32_Size
;

61 
ušt32
 
u32_P¬’tMemCÏss
;

62 
ušt32
 
u32_PrÙeùedMemCÏss
;

63 } 
	tT_x_mpu_¡©us
;

69 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os.h

18 #iâdeà
_X_OS_H


19 
	#_X_OS_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_os_ty³s.h
"

27 
	~"x_os_mbox.h
"

28 
	~"x_os_mu‹x.h
"

29 
	~"x_os_£ma.h
"

30 
	~"x_os_sigÇl.h
"

33 #ifdeà
__ılu¥lus


41 
	#X_OS_HEAP_DEFAULT
 ((
ušt16
)
gu32_MemCÏssDeçuÉ
)

42 
	#X_OS_HEAP_FAST
 ((
ušt16
)
gu32_MemCÏssSysIÁ”n
)

43 

	)

52 #ifdeà
__ılu¥lus


53 
Çme¥aû
 
¡w_£pi


55 
	~"hµ/x_os.hµ
"

64 
ušt16
 
u16_PriÜ™y
;

65 
PR_x_os_sk
 
´_Task
;

66 * 
pv_P¬am‘”
;

67 
ušt32
 
u32_TimeD–ay
;

68 
ušt32
 
u32_TimeIÁ”v®
;

69 
ušt32
 
u32_SckSize
;

70 
ušt32
 
u32_P”missiÚs
;

71 } 
	tT_x_os_sk_cÚfig
;

75 cÚ¡ 
ušt32
 
gu32_MemCÏssDeçuÉ
;

76 cÚ¡ 
ušt32
 
gu32_MemCÏssSysIÁ”n
;

80 
sšt16
 
x_os_š™
(cÚ¡ 
ušt32
 
ou32_MemCÏss
);

81 
sšt16
 
x_os_¡¬t
(cÚ¡ 
ušt32
 
ou32_Tim”Tick_us
);

82 
sšt16
 
x_os_š¡®l_sk
(cÚ¡ 
ušt16
 
ou16_PriÜ™y
, cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
,

83 cÚ¡ 
ušt32
 
ou32_TimeD–ay
, cÚ¡ 
PR_x_os_sk
 
İr_Task
, cÚ¡ ušt32 
ou32_SckSize
);

84 
sšt16
 
x_os_£t_sk_tim”
(cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
, cÚ¡ ušt32 
ou32_TimeD–ay
);

85 
x_os_wa™_fÜ_ev’ts
();

86 
x_os_wa™_³riod
();

87 
x_os_¦“p
(cÚ¡ 
ušt32
 
ou32_TimeD–ay
);

88 
ušt32
 
x_os_’‹r_ü™iÿl
();

89 
x_os_Ëave_ü™iÿl
(cÚ¡ 
ušt32
 
ou32_P»viousS‹
);

90 
x_os_£t_ev’t_mask
(cÚ¡ 
ušt32
 
ou32_NewEv’tMask
);

91 
x_os_g‘_ev’t_mask
(
ušt32
* cÚ¡ 
İu32_Ev’tMask
);

92 
x_os_£t_ev’ts
(cÚ¡ 
ušt32
 
ou32_NewEv’ts
);

93 
ušt32
 
x_os_g‘_ev’ts
();

94 
sšt16
 
x_os_check_sk_¡ack
(
ušt32
* cÚ¡ 
İu32_Unu£dSckSize
);

95 
sšt16
 
x_os_g‘_¡©us
(
T_x_os_¡©us
 * cÚ¡ 
İt_Stus
);

99 
sšt16
 
x_os_š¡®l_sk_ext
(cÚ¡ 
T_x_os_sk_cÚfig
 * cÚ¡ 
İt_TaskCÚfig
, ** 
İpv_HªdË
);

100 
sšt16
 
x_os_£t_sk_tim”_ext
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
, cÚ¡ ušt32 
ou32_TimeD–ay
);

101 
sšt16
 
x_os_check_sk_¡ack_ext
(* cÚ¡ 
İv_HªdË
, 
ušt32
* cÚ¡ 
İu32_Unu£dSckSize
);

103 
sšt16
 
x_os_su¥’d_sk
(* cÚ¡ 
İv_HªdË
);

104 
sšt16
 
x_os_»sume_sk
(* cÚ¡ 
İv_HªdË
);

105 
sšt16
 
x_os_d–‘e_sk
(* cÚ¡ 
İv_HªdË
);

111 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_mbox.h

18 #iâdeà
_X_OS_MBOX_H


19 
	#_X_OS_MBOX_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_MBOX_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_MBOX_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_mbox.hµ
"

79 
sšt16
 
x_os_mbox_š™
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, * cÚ¡ 
İv_Mes§ge
);

98 
sšt16
 
x_os_mbox_şo£
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
);

120 
sšt16
 
x_os_mbox_g‘_mes§ge
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, ** cÚ¡ 
İpv_Mes§ge
, cÚ¡ 
ušt32
 
ou32_TimeOut
);

142 
sšt16
 
x_os_mbox_£nd_mes§ge
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, * cÚ¡ 
İv_Mes§ge
, cÚ¡ 
ušt16
 
ou16_O±iÚs
);

148 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_mutex.h

18 #iâdeà
_X_OS_MUTEX_H


19 
	#_X_OS_MUTEX_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_MUTEX_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_MUTEX_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_mu‹x.hµ
"

78 
sšt16
 
x_os_mu‹x_š™
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

97 
sšt16
 
x_os_mu‹x_şo£
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

119 
sšt16
 
x_os_mu‹x_g‘
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
, cÚ¡ 
ušt32
 
ou32_TimeOut
);

137 
sšt16
 
x_os_mu‹x_»Ëa£
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

143 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_sema.h

18 #iâdeà
_X_OS_SEMA_H


19 
	#_X_OS_SEMA_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_SEMA_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_SEMAPHORE_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_£ma.hµ
"

80 
sšt16
 
x_os_£ma_š™
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
, cÚ¡ 
ušt16
 
ou16_CouÁ
);

99 
sšt16
 
x_os_£ma_şo£
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
);

120 
sšt16
 
x_os_£ma_g‘
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
, cÚ¡ 
ušt32
 
ou32_Timeout
);

138 
sšt16
 
x_os_£ma_»Ëa£
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
);

143 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_signal.h

18 #iâdeà
_X_OS_SIGNAL_H


19 
	#_X_OS_SIGNAL_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_SIGNAL_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_SIGNAL_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_sigÇl.hµ
"

79 
sšt16
 
x_os_sigÇl_š™
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇls
);

98 
sšt16
 
x_os_sigÇl_şo£
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
);

124 
sšt16
 
x_os_sigÇl_wa™_fÜ
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇlMask
, cÚ¡ 
ušt16
 
ou16_Mode
,

125 
ušt32
* cÚ¡ 
İu32_SigÇls
, cÚ¡ ušt32 
ou32_TimeOut
);

144 
sšt16
 
x_os_sigÇl_£nd
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇls
, cÚ¡ ušt32 
ou32_SigÇlMask
);

150 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_types.h

23 #iâdeà
_X_OS_TYPES_H


24 
	#_X_OS_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


39 
	#X_OS_NOT_INIT
 (0)

40 
	#X_OS_INIT
 (1)

41 
	#X_OS_RUNNING
 (2)

42 

	)

44 
	#X_OS_TASK_FLAGREG_NUM
 (4)

45 
	#X_OS_TASK_FLAGREG_SIZE
 (32)

46 
	#X_OS_MAX_TASK
 (
X_OS_TASK_FLAGREG_NUM
*
X_OS_TASK_FLAGREG_SIZE
)

47 
	#X_OS_MAX_TASK_PRIO
 (
X_OS_MAX_TASK
-1)

48 

	)

49 
	#X_OS_NOWAIT
 (0xFFFFFFFFu)

	)

52 
	#X_OS_MBOX_SEND_DEFAULT
 (0)

53 
	#X_OS_MBOX_SEND_BROADCAST
 (1)

54 

	)

57 
	#X_OS_SIGNAL_MODE_ANY
 (0)

58 
	#X_OS_SIGNAL_MODE_ALL
 (1)

59 
	#X_OS_SIGNAL_MODE_RESET
 (2)

60 

	)

62 
	#X_OS_EVENT_01
 (0x00000001u)

	)

63 
	#X_OS_EVENT_02
 (0x00000002u)

	)

64 
	#X_OS_EVENT_03
 (0x00000004u)

	)

65 
	#X_OS_EVENT_04
 (0x00000008u)

	)

66 
	#X_OS_EVENT_05
 (0x00000010u)

	)

67 
	#X_OS_EVENT_06
 (0x00000020u)

	)

68 
	#X_OS_EVENT_07
 (0x00000040u)

	)

69 
	#X_OS_EVENT_08
 (0x00000080u)

	)

70 
	#X_OS_EVENT_09
 (0x00000100u)

	)

71 
	#X_OS_EVENT_10
 (0x00000200u)

	)

72 
	#X_OS_EVENT_11
 (0x00000400u)

	)

73 
	#X_OS_EVENT_12
 (0x00000800u)

	)

74 
	#X_OS_EVENT_13
 (0x00001000u)

	)

75 
	#X_OS_EVENT_14
 (0x00002000u)

	)

76 
	#X_OS_EVENT_15
 (0x00004000u)

	)

77 
	#X_OS_EVENT_16
 (0x00008000u)

	)

78 
	#X_OS_EVENT_17
 (0x00010000u)

	)

79 
	#X_OS_EVENT_18
 (0x00020000u)

	)

80 
	#X_OS_EVENT_19
 (0x00040000u)

	)

81 
	#X_OS_EVENT_20
 (0x00080000u)

	)

82 
	#X_OS_EVENT_21
 (0x00100000u)

	)

83 
	#X_OS_EVENT_22
 (0x00200000u)

	)

84 
	#X_OS_EVENT_23
 (0x00400000u)

	)

85 
	#X_OS_EVENT_24
 (0x00800000u)

	)

86 
	#X_OS_EVENT_25
 (0x01000000u)

	)

87 
	#X_OS_EVENT_26
 (0x02000000u)

	)

88 
	#X_OS_EVENT_27
 (0x04000000u)

	)

89 
	#X_OS_EVENT_28
 (0x08000000u)

	)

90 
	#X_OS_EVENT_29
 (0x10000000u)

	)

91 
	#X_OS_EVENT_30
 (0x20000000u)

	)

92 
	#X_OS_EVENT_31
 (0x40000000u)

	)

93 
	#X_OS_EVENT_32
 (0x80000000u)

	)

104 #ifdeà
__ılu¥lus


105 
Çme¥aû
 
¡w_£pi


107 
	~"hµ/x_os_ty³s.hµ
"

185 (*
PR_x_os_sk
)(* cÚ¡ 
	tİv_TaskP¬am‘”
);

190 
ušt16
 
u16_Ev’tTy³
;

191 
ušt16
 
u16_CouÁ
;

192 * 
pv_Mes§ge
;

193 
ušt32
 
au32_Wa™šgTask
[
X_OS_TASK_FLAGREG_NUM
];

194 } 
	tT_x_os_ev’t_ty³
;

199 
ušt16
 
u16_S‹
;

200 
ušt16
 
u16_TaskCouÁ
;

201 
ušt32
 
u32_MemCÏss
;

202 
ušt32
 
u32_Tim”TickUs
;

203 } 
	tT_x_os_¡©us
;

206 
T_x_os_ev’t_ty³
 
	tT_x_os_mbox
;

207 
T_x_os_ev’t_ty³
 
	tT_x_os_mu‹x
;

208 
T_x_os_ev’t_ty³
 
	tT_x_os_£ma
;

209 
T_x_os_ev’t_ty³
 
	tT_x_os_sigÇl
;

214 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_out.h

18 #iâdeà
_X_OUT_H


19 
	#_X_OUT_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_out_»Ïy.h
"

26 #ifdeà
__ılu¥lus


33 
	#X_OUT_CH_MAX
 (8u)

34 

	)

35 
	#X_OUT_01
 (0u)

36 
	#X_OUT_02
 (1u)

	)

37 
	#X_OUT_03
 (2u)

	)

38 
	#X_OUT_04
 (3u)

	)

39 
	#X_OUT_05
 (4u)

	)

40 
	#X_OUT_06
 (5u)

	)

41 
	#X_OUT_07
 (6u)

	)

42 
	#X_OUT_08
 (7u)

	)

44 
	#X_OUT_TYPE_DIGITAL
 (0u)

45 
	#X_OUT_TYPE_PWM
 (1u)

46 
	#X_OUT_TYPE_CONTROL_CURRENT
 (2u)

47 

	)

48 
	#X_OUT_STATE_OVERCURRENT
 (0x0001u)

49 
	#X_OUT_STATE_PWR_OVERVOLTAGE
 (0x0002u)

50 
	#X_OUT_STATE_PWR_GND_ERROR
 (0x0004u)

51 
	#X_OUT_STATE_PWR_OVERCURRENT
 (0x0008u)

52 
	#X_OUT_STATE_PWR_SSV_ERROR
 (0x0010u)

53 
	#X_OUT_STATE_PWR_EB_WD_ERROR
 (0x0020u)

54 
	#X_OUT_STATE_PWR_EB_HW_ERROR
 (0x0040u)

55 
	#X_OUT_STATE_DIGITAL_FB
 (0x0100u)

56 

	)

58 
	#X_OUT_STATE_OVERVOLTAGE
 
X_OUT_STATE_PWR_OVERVOLTAGE


	)

59 
	#X_OUT_STATE_GND_ERROR
 
X_OUT_STATE_PWR_GND_ERROR


	)

60 
	#X_OUT_STATE_UB_OVERCURRENT
 
X_OUT_STATE_PWR_OVERCURRENT


	)

61 
	#X_OUT_STATE_SSV_ERROR
 
X_OUT_STATE_PWR_SSV_ERROR


	)

62 
	#X_OUT_STATE_WD_ERROR
 
X_OUT_STATE_PWR_EB_WD_ERROR


	)

66 
	#X_OUT_RESET_ERROR_UB_01
 (0x1000u)

67 

	)

68 
	#X_OUT_EVENT_OVERCURRENT
 (0u)

69 
	#X_OUT_EVENT_RECOVERY
 (1u)

70 

	)

72 
	#X_OUT_VALUE_CONTROL_100_PERCENT
 (0x7FFFFFFF)

73 

	)

81 #ifdeà
__ılu¥lus


82 
Çme¥aû
 
¡w_£pi


84 
	~"hµ/x_out.hµ
"

93 
ušt16
 
u16_OuutTy³
;

94 
sšt32
 
s32_MaxV®ue
;

95 
sšt32
 
s32_OutV®ue
;

96 
ušt32
 
u32_OutF»qu’cy
;

97 
ušt32
 
u32_S‘Time
;

98 
ušt32
 
u32_OutS‹
;

99 } 
	tT_x_out_¡©us
;

103 
sšt32
 
s32_S‘pošt
;

104 
sšt32
 
s32_P_V®ue
;

105 
sšt16
 
s16_I_V®ue
;

106 
sšt16
 
s16_D_V®ue
;

107 
sšt16
 
s16_Sam¶eTime
;

108 
sšt16
 
s16_OuutLim™Mš
;

109 
sšt16
 
s16_OuutLim™Max
;

110 } 
	tT_x_out_pid_·¿m‘”s
;

116 (*
PR_x_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

117 cÚ¡ 
	tušt16
 
	tou16_Ev’t
);

122 
sšt16
 
x_out_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
, cÚ¡ 
sšt32
 
os32_MaxV®ue
,

123 cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

124 
sšt16
 
x_out_£t_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

125 
sšt16
 
x_out_g‘_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

126 
sšt16
 
x_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

127 
sšt16
 
x_out_£t_äequ’cy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

128 
sšt16
 
x_out_g‘_cu¼’t
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_Cu¼’t
);

129 
sšt16
 
x_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_¡©us
 * cÚ¡ 
İt_Stus
);

130 
sšt16
 
x_out_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

131 
sšt16
 
x_out_£t_v®ue_¿mpšg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
,

132 cÚ¡ 
ušt32
 
ou32_D–Ouut
, cÚ¡ ušt32 
ou32_D–Time
);

136 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_out_relay.h

18 #iâdeà
_X_OUT_RELAY_H


19 
	#_X_OUT_RELAY_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_out.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_OUT_RELAY_CH_MAX
 (1u)

35 
	#X_OUT_RELAY_01
 (0u)

36 

	)

38 
	#X_OUT_RELAY_STATE_OVERCURRENT
 (0x0001u)

39 
	#X_OUT_RELAY_STATE_OVERVOLTAGE
 (0x0002u)

40 
	#X_OUT_RELAY_STATE_GND_ERROR
 (0x0004u)

41 
	#X_OUT_RELAY_STATE_SSV_ERROR
 (0x0008u)

42 
	#X_OUT_RELAY_STATE_EB_WD_ERROR
 (0x0010u)

43 
	#X_OUT_RELAY_STATE_EB_HW_ERROR
 (0x0020u)

44 

	)

45 
	#X_OUT_RELAY_EVENT_RECOVERY
 (0x0000u)

46 
	#X_OUT_RELAY_EVENT_OVERCURRENT
 (0x0001u)

47 
	#X_OUT_RELAY_EVENT_OVERVOLTAGE
 (0x0002u)

48 
	#X_OUT_RELAY_EVENT_GND_ERROR
 (0x0004u)

49 
	#X_OUT_RELAY_EVENT_SSV_ERROR
 (0x0008u)

50 
	#X_OUT_RELAY_EVENT_EB_WD_ERROR
 (0x0010u)

51 
	#X_OUT_RELAY_EVENT_EB_HW_ERROR
 (0x0020u)

52 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x_out_»Ïy.hµ
"

73 
ušt8
 
u8_OnOff
;

74 
sšt32
 
s32_VŞgeUb
;

75 
sšt32
 
s32_VŞgeUc
;

76 
sšt32
 
s32_Cu¼’tI
;

77 
ušt16
 
u16_R–ayS‹
;

78 
ušt16
 
u16_E¼ÜFÏgs
;

79 } 
	tT_x_out_»Ïy_¡©us
;

82 (*
PR_x_out_E¼ÜR–ayC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

83 cÚ¡ 
	tušt16
 
	tou16_Ev’t
);

87 
ušt32
 
u32_C®lbackP¬am‘”
;

88 
PR_x_out_E¼ÜR–ayC®lback
 
´_E¼ÜC®lback
;

89 } 
	tT_x_out_»Ïy_cÚfig
;

94 
sšt16
 
x_out_»Ïy_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_out_»Ïy_cÚfig
 * cÚ¡ 
İt_CÚfig
);

95 
sšt16
 
x_out_»Ïy_£t
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 
sšt16
 
x_out_»Ïy_£t_®l
(cÚ¡ 
ušt8
 
ou8_OnOff
);

97 
sšt16
 
x_out_»Ïy_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_»Ïy_¡©us
 * cÚ¡ 
İt_Stus
);

98 
sšt16
 
x_out_»Ïy_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

103 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ser.h

18 #iâdeà
_X_SER_H


19 
	#_X_SER_H


	)

23 
	~"x_£r_ty³s.h
"

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_SER_CH_MAX
 (1u)

35 
	#X_SER_01
 (0u)

36 

	)

44 #ifdeà
__ılu¥lus


45 
Çme¥aû
 
¡w_£pi


47 
	~"hµ/x_£r.hµ
"

56 
sšt16
 
x_£r_š™
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
, cÚ¡ ušt16 
ou16_Mode
,

57 cÚ¡ 
ušt16
 
ou16_StİB™s
, cÚ¡ 
ušt32
 
ou32_E¼ÜC®lbackP¬am‘”
,

58 cÚ¡ 
PR_x_£r_E¼ÜC®lback
 
İr_E¼ÜC®lback
 );

59 
sšt16
 
x_£r_şo£
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

60 
sšt16
 
x_£r_š™_rx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_BufSize
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

61 cÚ¡ 
PR_x_£r_Ev’tC®lback
 
İr_Ev’tC®lback
 );

62 
sšt16
 
x_£r_š™_tx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_BufSize
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

63 cÚ¡ 
PR_x_£r_Ev’tC®lback
 
İr_Ev’tC®lback
 );

64 
sšt16
 
x_£r_ş—r_rx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

65 
sšt16
 
x_£r_ş—r_tx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

66 
sšt16
 
x_£r_g‘_rx_buf_couÁ
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_CouÁ
 );

67 
sšt16
 
x_£r_g‘_tx_buf_couÁ
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_CouÁ
 );

68 
sšt16
 
x_£r_»ad
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_CouÁ
, 
ušt8
* cÚ¡ 
İu8_D©a
 );

69 
sšt16
 
x_£r_wr™e
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
 );

70 
sšt16
 
x_£r_wr™e_¡ršg
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ch¬n
* cÚ¡ 
İú_SŒšg
 );

71 
sšt16
 
x_£r_£t_b™¿‹
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
 );

72 
sšt16
 
x_£r_g‘_¡©us
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_£r_¡©us
* cÚ¡ 
İt_Stus
 );

77 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ser_types.h

23 #iâdeà
_X_SER_TYPES_H


24 
	#_X_SER_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


39 
	#X_SER_MODE_7DB_EVEN_PARITY
 (0x0023u)

40 
	#X_SER_MODE_7DB_ODD_PARITY
 (0x1023u)

41 
	#X_SER_MODE_8DB_EVEN_PARITY
 (0x0027u)

42 
	#X_SER_MODE_8DB_ODD_PARITY
 (0x1027u)

43 
	#X_SER_MODE_8DB_NO_PARITY
 (0x0001u)

44 

	)

46 
	#X_SER_STATUS_PARITY_ERR
 (0x01u)

47 
	#X_SER_STATUS_FRAME_ERR
 (0x02u)

48 
	#X_SER_STATUS_OVERRUN
 (0x04u)

49 
	#X_SER_STATUS_RXFIFO_OVERRUN
 (0x08u)

50 
	#X_SER_STATUS_TXFIFO_OVERRUN
 (0x10u)

51 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x_£r_ty³s.hµ
"

99 (*
PR_x_£r_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_P¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

100 cÚ¡ 
	tušt32
 
	tou32_Stus
);

139 (*
PR_x_£r_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_P¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
, cÚ¡ 
	tušt8
 
	tou8_D©a
);

159 
ušt32
 
u32_B™¿‹
;

160 
ušt16
 
u16_Mode
;

161 
ušt16
 
u16_Stİb™
;

162 
ušt32
 
u32_Stus
;

163 
ušt16
 
u16_RxBufSize
;

164 
ušt16
 
u16_TxBufSize
;

165 } 
	tT_x_£r_¡©us
;

170 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ssv.h

18 #iâdeà
_X_SSV_H


19 
	#_X_SSV_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


37 
	#X_SSV_ERR_UEMAX
 (0x00000001u)

38 
	#X_SSV_ERR_UEMIN
 (0x00000002u)

39 
	#X_SSV_ERR_USYSMAX
 (0x00000004u)

40 
	#X_SSV_ERR_USYSMIN
 (0x00000008u)

41 
	#X_SSV_ERR_WD_USER
 (0x00000010u)

42 
	#X_SSV_ERR_WD_SYS
 (0x00000020u)

43 
	#X_SSV_ERR_HDRST
 (0x00000040u)

44 
	#X_SSV_ERR_CONFIG
 (0x00000080u)

45 

	)

47 
	#X_SSV_CPU_RESET_PWON
 (0x00000001u)

48 
	#X_SSV_CPU_RESET_SSV
 (0x00000002u)

49 
	#X_SSV_CPU_RESET_SOFT
 (0x00000004u)

50 
	#X_SSV_CPU_RESET_WD
 (0x00000008u)

51 

	)

53 
	#X_SSV_CPURST_UEMAX
 (
X_SSV_ERR_UEMAX
 << 8)

54 
	#X_SSV_CPURST_UEMIN
 (
X_SSV_ERR_UEMIN
 << 8)

55 
	#X_SSV_CPURST_USYSMAX
 (
X_SSV_ERR_USYSMAX
 << 8)

56 
	#X_SSV_CPURST_USYSMIN
 (
X_SSV_ERR_USYSMIN
 << 8)

57 
	#X_SSV_CPURST_WD_USER
 (
X_SSV_ERR_WD_USER
 << 8)

58 
	#X_SSV_CPURST_WD_SYS
 (
X_SSV_ERR_WD_SYS
 << 8)

59 
	#X_SSV_CPURST_HDRST
 (
X_SSV_ERR_HDRST
 << 8)

60 
	#X_SSV_CPURST_CONFIG
 (
X_SSV_ERR_CONFIG
 << 8)

61 

	)

63 
	#X_SSV_RESET_POR
 (0x00010000u)

64 
	#X_SSV_RESET_EXTR
 (0x00020000u)

65 
	#X_SSV_RESET_BOR
 (0x00040000u)

66 
	#X_SSV_RESET_WDR
 (0x00080000u)

67 
	#X_SSV_RESET_JTR
 (0x00100000u)

68 
	#X_SSV_RESET_SOFT
 (0x00800000u)

69 

	)

71 
	#X_SSV_TRIGGER
 (0u)

72 
	#X_SSV_TRIGGER_AUTO
 (1u)

73 
	#X_SSV_SET_TRIGGER_LO
 (0u)

74 
	#X_SSV_SET_TRIGGER_HI
 (1u)

75 

	)

83 #ifdeà
__ılu¥lus


84 
Çme¥aû
 
¡w_£pi


86 
	~"hµ/x_ssv.hµ
"

95 
ušt16
 
u16_WDmš
;

96 
ušt16
 
u16_WDmax
;

97 
ušt8
 
u8_UEmš
;

98 
ušt8
 
u8_UEmax
;

99 
ušt8
 
u8_R–Off
;

100 
ušt8
 
u8_Re£t
;

101 } 
	tT_x_ssv_cÚfig
;

105 
ušt16
 
u16_V”siÚ
;

106 
ušt16
 
u16_SysE¼Ü
;

107 
ušt32
 
u32_La¡Re£t
;

108 } 
	tT_x_ssv_¡©us
;

114 
sšt16
 
x_ssv_š™
(cÚ¡ 
T_x_ssv_cÚfig
* cÚ¡ 
İt_Su³rvisÜCÚfig
);

115 
sšt16
 
x_ssv_g‘_¡©us
(
T_x_ssv_¡©us
* cÚ¡ 
İt_Su³rvisÜStus
);

116 
sšt16
 
x_ssv_Œigg”
(cÚ¡ 
ušt16
 
ou16_Trigg”Ty³
);

117 
sšt16
 
x_ssv_£t_Œigg”
(cÚ¡ 
ušt16
 
ou16_Trigg”S‹
);

118 
x_ssv_»£t
();

123 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_stdtypes.h

20 #iâdeà
_X_STDTYPES_H


21 
	#_X_STDTYPES_H


	)

25 
	~"¡wty³s.h
"

26 
	~"¡w”rÜs.h
"

27 
	~"¡dty³s.h
"

28 
	~"memty³s.h
"

31 #ifdeà
__ılu¥lus


38 
	#X_OFF
 (0)

39 
	#X_ON
 (1)

40 

	)

46 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_sys.h

18 #iâdeà
_X_SYS_H


19 
	#_X_SYS_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_sys_adc.h
"

27 #ifdeà
__ılu¥lus


35 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

36 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

53 
	#X_SYS_RELAY_CH_MAX
 (1u)

54 
	#X_SYS_RELAY_01
 (0u)

55 

	)

56 
	#X_SYS_SENSOR_SUPPLY_CH_MAX
 (1u)

57 
	#X_SYS_SENSOR_SUPPLY_01
 (0u)

58 

	)

59 
	#X_SYS_LED_CH_MAX
 (1u)

60 
	#X_SYS_LED_01
 (0u)

61 
	#X_SYS_LED_COLOR_RED
 (0u)

62 
	#X_SYS_LED_COLOR_ORANGE
 (35u)

63 
	#X_SYS_LED_COLOR_YELLOW
 (70u)

64 
	#X_SYS_LED_COLOR_GREEN
 (100u)

65 

	)

66 
	#X_SYS_TEMP_CH_MAX
 (2u)

67 
	#X_SYS_TEMP_BOARD
 (0u)

68 
	#X_SYS_TEMP_CPU
 (1u)

69 

	)

70 
	#X_SYS_CPUWD_OFF
 (0xF0A5u)

71 

	)

73 
	#X_SYS_HW_VERSION_A
 0x0000

74 
	#X_SYS_HW_VERSION_C
 0x0001

75 
	#X_SYS_HW_VERSION_C2
 0x0002

76 

	)

77 
	#X_SYS_COMPONENT_LIBRARY
 (0)

78 
	#X_SYS_COMPONENT_FLASH_LOADER
 (1)

79 
	#X_SYS_COMPONENT_EEPROM_MAPPING
 (2)

80 
	#X_SYS_COMPONENT_SSV
 (3)

81 
	#X_SYS_COMPONENT_SSV_PROGRAM
 (4)

82 
	#X_SYS_COMPONENT_EXT_FLASH_BOOT
 (5)

83 
	#X_SYS_COMPONENT_MAINBOARD
 (6)

84 
	#X_SYS_COMPONENT_CPU
 (7)

85 
	#X_SYS_COMPONENT_MAINBOARD_FPGA
 (8)

86 
	#X_SYS_COMPONENT_MODULE_FPGA
 (9)

87 
	#X_SYS_COMPONENT_CHANNEL_MAX
 (10)

	)

97 #ifdeà
__ılu¥lus


98 
Çme¥aû
 
¡w_£pi


100 
	~"hµ/x_sys.hµ
"

109 
ušt16
 
u16_Ty³
;

110 
ušt16
 
u16_V”siÚ
;

111 } 
	tT_x_sys_šfo
;

115 
ušt16
 
u16_ExpBßrdId
;

116 
ušt16
 
u16_A¹işeV”siÚ
;

117 
ušt32
 
u32_A¹işeNumb”
;

118 
ušt16
 
u16_SwIÁ”çû
;

119 
ch¬n
 
aú_S”ŸlNumb”
[14];

120 } 
	tT_x_sys_expbßrd_šfo
;

124 
ušt16
 
u16_CÏss
;

125 
ušt16
 
u16_Id
;

126 
ušt32
 
u32_Add»ss
;

127 } 
	tT_x_sys_Œ­
;

131 
ušt8
 
au8_S”ŸlNumb”
[6];

132 
ušt32
 
u32_A¹işeNumb”
;

133 
ch¬n
 
aú_DeviûID
[17];

134 
ušt8
 
au8_CommissiÚšgD©e
[3];

135 
ušt8
 
au8_La¡Te¡D©e
[3];

136 
ch¬n
 
aú_Com·nyID
[6];

137 
ch¬n
 
aú_A¹işeV”siÚ
[17];

138 
ch¬n
 
aú_IÁ”ÇlS”ŸlNumb”
[11];

139 } 
	tT_x_sys_logi¡ic_d©a
;

144 
ušt16
 
u16_Lše
;

145 
sšt16
 
s16_E¼Ü
;

146 } 
	tT_x_sys_š™_”r
;

151 
T_x_sys_šfo
 
t_MašbßrdInfo
;

152 
T_x_sys_šfo
 
t_CpuInfo
;

153 
T_x_sys_šfo
 
t_Su³rvisÜInfo
;

154 
T_x_sys_expbßrd_šfo
 
©_ExpBßrdInfo
[6];

155 
T_x_sys_logi¡ic_d©a
 
t_Logi¡icD©a
;

156 
ušt16
 
u16_CpuF»q
;

157 
ušt16
 
u16_SysF»q
;

158 
ušt32
 
u32_RamSize
;

159 
ušt32
 
u32_RomSize
;

160 
ušt32
 
u32_E•romSize
;

161 
ušt32
 
u32_H—pSize
;

162 
ušt32
 
u32_H—pSizeIÁ”Çl
;

163 
ušt32
 
u32_La¡Re£t
;

164 
T_x_sys_Œ­
 
t_La¡T¿p
;

165 
T_x_sys_š™_”r
 
t_In™E¼
;

166 } 
	tT_x_sys_sy¡em_šfÜm©iÚ
;

171 (*
PR_x_sys_OffR—ùiÚC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
);

176 
sšt16
 
x_sys_š™
(
T_x_sys_sy¡em_šfÜm©iÚ
* cÚ¡ 
İt_SysInfo
);

177 
sšt16
 
x_sys_g‘_sy¡em_šfÜm©iÚ
(
T_x_sys_sy¡em_šfÜm©iÚ
 * cÚ¡ 
İt_SysInfo
);

178 
sšt16
 
x_sys_g‘_compÚ’t_šfo
(cÚ¡ 
ušt16
 
ou16_CompÚ’t
, 
T_x_sys_šfo
 * cÚ¡ 
İt_Info
);

180 
sšt16
 
x_sys_š™_off_»aùiÚ
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_sys_OffR—ùiÚC®lback
 
İr_OffC®lback
);

182 
sšt16
 
x_sys_şo£
();

183 
x_sys_»£t
();

184 
sšt16
 
x_sys_Œigg”_ıu_w©chdog
(cÚ¡ 
ušt16
 
ou16_WDTimeout
);

185 
ušt32
 
x_sys_’‹r_ü™iÿl
(è
ALIAS
(
x_os_’‹r_ü™iÿl
);

186 
x_sys_Ëave_ü™iÿl
(cÚ¡ 
ušt32
 
ou32_P»viousS‹
è
ALIAS
(
x_os_Ëave_ü™iÿl
);

188 
sšt16
 
x_sys_g‘_ign™iÚ
(
ušt8
* cÚ¡ 
İu8_OnOff
);

189 
sšt16
 
x_sys_¡ay_®ive
(cÚ¡ 
ušt8
 
ou8_OnOff
);

190 
sšt16
 
x_sys_£t_»Ïy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

191 
sšt16
 
x_sys_£t_®l_»Ïys
(cÚ¡ 
ušt8
 
ou8_OnOff
);

192 
sšt16
 
x_sys_£t_b“³r
(cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

193 
sšt16
 
x_sys_£t_Ëd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
, cÚ¡ ušt16 
ou16_CŞÜ
);

194 
sšt16
 
x_sys_£t_£nsÜ_suµly
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_VŞge
);

195 
sšt16
 
x_sys_g‘_‹m³¿tu»
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, sšt16* cÚ¡ 
İs16_V®ue
);

197 
sšt16
 
x_sys_g‘_adc_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_V®ue
);

198 
sšt16
 
x_sys_g‘_adc_¿w_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

199 
sšt16
 
x_sys_g‘_adc_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_V®ue
);

200 
sšt16
 
x_sys_g‘_adc_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

201 
sšt16
 
x_sys_£t_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_F‹r
 );

202 
sšt16
 
x_sys_g‘_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_F‹r
);

204 
ušt32
 
x_sys_g‘_time_ms
();

205 
ušt64
 
x_sys_g‘_time_us
();

206 
x_sys_d–ay_us
(cÚ¡ 
ušt32
 
ou32_D–ay_us
);

207 
ušt64
 
x_sys_g‘_tim”
();

212 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_sys_adc.h

18 #iâdeà
_X_SYS_ADC_H


19 
	#_X_SYS_ADC_H


	)

22 #ifdeà
__ılu¥lus


32 
	#X_ADC_CH_MAX
 (113U)

33 

	)

38 
	#X_ADC_I_PWM1
 (0U)

39 
	#X_ADC_I_PWM2
 (1U)

40 
	#X_ADC_I_PWM3
 (2U)

41 
	#X_ADC_I_PWM4
 (3U)

42 
	#X_ADC_I_PWM5
 (4U)

43 
	#X_ADC_I_PWM6
 (5U)

44 
	#X_ADC_I_PWM7
 (6U)

45 
	#X_ADC_I_PWM8
 (7U)

46 
	#X_ADC_EXPBOARD_A_AN4
 (8U)

47 
	#X_ADC_EXPBOARD_A_AN5
 (9U)

48 
	#X_ADC_EXPBOARD_A_AN6
 (10U)

49 
	#X_ADC_EXPBOARD_A_AN7
 (11U)

50 
	#X_ADC_EXPBOARD_A_AN8
 (12U)

51 
	#X_ADC_EXPBOARD_A_AN9
 (13U)

52 
	#X_ADC_2V56
 (14U)

53 
	#X_ADC_3V02_A
 (15U)

54 

	)

56 
	#X_ADC_I_DOUT9
 (16U)

57 
	#X_ADC_I_DOUT10
 (17U)

58 
	#X_ADC_I_DOUT11
 (18U)

59 
	#X_ADC_I_DOUT12
 (19U)

60 
	#X_ADC_U_DOUT9
 (20U)

61 
	#X_ADC_U_DOUT10
 (21U)

62 
	#X_ADC_U_DOUT11
 (22U)

63 
	#X_ADC_U_DOUT12
 (23U)

64 
	#X_ADC_EXPBOARD_B_AN4
 (24U)

65 
	#X_ADC_EXPBOARD_B_AN5
 (25U)

66 
	#X_ADC_EXPBOARD_B_AN6
 (26U)

67 
	#X_ADC_EXPBOARD_B_AN7
 (27U)

68 
	#X_ADC_1V50_A
 (28U)

69 
	#X_ADC_0V97_A
 (29U)

70 
	#X_ADC_EXPBOARD_A_AN10
 (30U)

71 
	#X_ADC_EXPBOARD_A_AN11
 (31U)

72 

	)

74 
	#X_ADC_I_PWM1_B
 (32U)

75 
	#X_ADC_I_PWM2_B
 (33U)

76 
	#X_ADC_I_PWM3_B
 (34U)

77 
	#X_ADC_I_PWM4_B
 (35U)

78 
	#X_ADC_I_PWM5_B
 (36U)

79 
	#X_ADC_I_PWM6_B
 (37U)

80 
	#X_ADC_I_PWM7_B
 (38U)

81 
	#X_ADC_I_PWM8_B
 (39U)

82 
	#X_ADC_EXPBOARD_C_AN4
 (40U)

83 
	#X_ADC_EXPBOARD_C_AN5
 (41U)

84 
	#X_ADC_1V65_A
 (42U)

85 
	#X_ADC_2V14_A
 (43U)

86 
	#X_ADC_EXPBOARD_B_AN8
 (44U)

87 
	#X_ADC_EXPBOARD_B_AN9
 (45U)

88 
	#X_ADC_EXPBOARD_B_AN10
 (46U)

89 
	#X_ADC_EXPBOARD_B_AN11
 (47U)

90 

	)

92 
	#X_ADC_I_DOUT9_B
 (48U)

93 
	#X_ADC_I_DOUT10_B
 (49U)

94 
	#X_ADC_I_DOUT11_B
 (50U)

95 
	#X_ADC_I_DOUT12_B
 (51U)

96 
	#X_ADC_U_DOUT9_B
 (52U)

97 
	#X_ADC_U_DOUT10_B
 (53U)

98 
	#X_ADC_U_DOUT11_B
 (54U)

99 
	#X_ADC_U_DOUT12_B
 (55U)

100 
	#X_ADC_2V05
 (56U)

101 
	#X_ADC_MIN
 (57U)

102 
	#X_ADC_EXPBOARD_C_AN6
 (58U)

103 
	#X_ADC_EXPBOARD_C_AN7
 (59U)

104 
	#X_ADC_EXPBOARD_C_AN8
 (60U)

105 
	#X_ADC_EXPBOARD_C_AN9
 (61U)

106 
	#X_ADC_EXPBOARD_C_AN10
 (62U)

107 
	#X_ADC_EXPBOARD_C_AN11
 (63U)

108 

	)

110 
	#X_ADC_0V97_B
 (64U)

111 
	#X_ADC_AIN5
 (65U)

112 
	#X_ADC_AIN4
 (66U)

113 
	#X_ADC_AIN9
 (67U)

114 
	#X_ADC_EXPBOARD_A_AN0
 (68U)

115 
	#X_ADC_AIN8
 (69U)

116 
	#X_ADC_EXPBOARD_A_AN2
 (70U)

117 
	#X_ADC_EXPBOARD_A_AN1
 (71U)

118 
	#X_ADC_1V90
 (72U)

119 
	#X_ADC_AIN13
 (73U)

120 
	#X_ADC_AIN12
 (74U)

121 
	#X_ADC_1V25
 (75U)

122 

	)

124 
	#X_ADC_AIN1
 (76U)

125 
	#X_ADC_0V55
 (77U)

126 
	#X_ADC_UE
 (78U)

127 
	#X_ADC_AIN10
 (79U)

128 
	#X_ADC_EXPBOARD_B_AN0
 (80U)

129 
	#X_ADC_I_UB1
 (81U)

130 
	#X_ADC_2V14_B
 (82U)

131 
	#X_ADC_EXPBOARD_B_AN1
 (83U)

132 
	#X_ADC_EXPBOARD_A_AN3
 (84U)

133 
	#X_ADC_AIN14
 (85U)

134 
	#X_ADC_1V65_B
 (86U)

135 
	#X_ADC_TEMP_BOARD
 (87U)

136 

	)

138 
	#X_ADC_AIN2
 (88U)

139 
	#X_ADC_AIN6
 (89U)

140 
	#X_ADC_U_EXT1
 (90U)

141 
	#X_ADC_1V50_B
 (91U)

142 
	#X_ADC_EXPBOARD_C_AN0
 (92U)

143 
	#X_ADC_0V25
 (93U)

144 
	#X_ADC_EXPBOARD_B_AN2
 (94U)

145 
	#X_ADC_2V50
 (95U)

146 
	#X_ADC_EXPBOARD_B_AN3
 (96U)

147 
	#X_ADC_AIN15
 (97U)

148 
	#X_ADC_U_UB1
 (98U)

149 
	#X_ADC_U_UC1
 (99U)

150 

	)

152 
	#X_ADC_AIN3
 (100U)

153 
	#X_ADC_AIN7
 (101U)

154 
	#X_ADC_0V82
 (102U)

155 
	#X_ADC_AIN11
 (103U)

156 
	#X_ADC_3V02_B
 (104U)

157 
	#X_ADC_EXPBOARD_A_AN12
 (105U)

158 
	#X_ADC_EXPBOARD_C_AN2
 (106U)

159 
	#X_ADC_EXPBOARD_C_AN1
 (107U)

160 
	#X_ADC_EXPBOARD_C_AN3
 (108U)

161 
	#X_ADC_0V06
 (109U)

162 
	#X_ADC_EXPBOARD_B_AN12
 (110U)

163 
	#X_ADC_EXPBOARD_C_AN12
 (111U)

164 

	)

165 
	#X_ADC_TEMP_CPU
 (112U)

166 

	)

169 
	#X_ADC_12V
 
X_ADC_1V90


170 
	#X_ADC_6V0_A
 
X_ADC_3V02_A


171 
	#X_ADC_6V0_B
 
X_ADC_3V02_B


172 
	#X_ADC_5V0
 
X_ADC_2V50


173 
	#X_ADC_5VANA_A
 
X_ADC_2V14_A


174 
	#X_ADC_5VANA_B
 
X_ADC_2V14_B


175 
	#X_ADC_3V5
 
X_ADC_0V55


176 
	#X_ADC_UEBU
 
X_ADC_1V65_A


177 
	#X_ADC_3V3
 
X_ADC_1V65_B


178 
	#X_ADC_USSV_A
 
X_ADC_0V97_A


179 
	#X_ADC_USSV_B
 
X_ADC_0V97_B


180 
	#X_ADC_UAREF
 
X_ADC_0V25


181 
	#X_ADC_UDREF
 
X_ADC_0V82


182 

	)

184 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_tim.h

19 #iâdeà
_X_TIM_H


20 
	#_X_TIM_H


	)

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_TIM_CH_MAX
 (1u)

35 

	)

36 
	#X_TIM_PRIO_MAX
 (1u)

37 
	#X_TIM_PRIO_01
 (0u)

38 

	)

39 
	#X_TIM_DELAY_MAX
 (0xFFFFu)

40 
	#X_TIM_CYCLE_MAX
 (0xFFFFu)

41 

	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_tim.hµ
"

61 (*
PR_x_tim_Tim”C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, * cÚ¡ 
	tİv_HªdË
);

66 
sšt16
 
x_tim_š™
(cÚ¡ 
ušt16
 
ou16_PriÜ™y
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

67 cÚ¡ 
PR_x_tim_Tim”C®lback
 
İr_Tim”C®lback
, ** cÚ¡ 
İpv_HªdË
);

68 
sšt16
 
x_tim_şo£
(* cÚ¡ 
İv_HªdË
);

69 
sšt16
 
x_tim_£t
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt32
 
ou32_D–ayTime
, cÚ¡ ušt32 
ou32_CyşeTime
);

74 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_uti.h

18 #iâdeà
_X_UTI_H


19 
	#_X_UTI_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


40 #ifdeà
__ılu¥lus


41 
Çme¥aû
 
¡w_£pi


43 
	~"hµ/x_uti.hµ
"

70 
sšt16
 
x_uti_ÿlc_üc_16
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
, 
ušt16
* cÚ¡ 
İu16_Crc
);

95 
sšt16
 
x_uti_ÿlc_üc_¡w
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
, 
ušt16
* cÚ¡ 
İu16_Crc
);

120 
sšt16
 
x_uti_ÿlc_üc_ŒicÜe
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ ušt32* cÚ¡ 
İu32_D©a
, ušt32* cÚ¡ 
İu32_Crc
);

125 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\AppConfig.h

1 #iâdeà
_APPCONFIG_H


2 
	#_APPCONFIG_H


	)

4 
	~"x_sys.h
"

5 
	~"x_lib.h
"

6 
	~"x_mpu.h
"

7 
	~"x_æ.h
"

8 
	~"x_os.h
"

9 
	~"m©h.h
"

10 
	~"DeviûOD.h
"

11 
	~"CommIÁ”çû.h
"

12 
	~"DriveIÁ”çû.h
"

13 
	~"RemÙeCÚŒŞIÁ”çû.h
"

14 
	~"SaãtyIÁ”çû.h
"

15 
	~"MuÉiIOIÁ”çû.h
"

16 
	~"T¿ckšg.h
"

17 
	~"MESCÚfig.h
"

22 
	#PrioDrv›SysCÚŒŞ
 1

	)

23 
	#PrioDriveSysMªage
 3

	)

25 
	#PrioT¿ckšgCÚŒŞ
 2

	)

27 
	#PrioRemÙeCÚŒŞ
 4

	)

28 
	#PrioSaãty
 6

	)

29 
	#PrioIOPÜt
 5

	)

30 
	#PrioRemÙeCÚŒŞDi¥Ïy
 8

	)

31 
	#PrioT¿ckšgMªage
 7

	)

33 
	#Ev’t_DriveSysCÚŒŞ
 
X_OS_EVENT_01


	)

34 
	#Ev’t_AutoDriveCÚŒŞ
 
X_OS_EVENT_02


	)

35 
	#Ev’t_RC
 
X_OS_EVENT_03


	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\MESConfig.h

1 #iâdeà
_MESCÚfig_H


2 
	#_MESCÚfig_H


	)

7 
	#Ma¡”CPU
 1

	)

12 
	#pi
 3.1416

	)

13 
	#Rad2G¿d
 (180.0/
pi
)

	)

14 
	#G¿d2Rad
 (
pi
/180.0)

	)

16 
	#D
 0.739

17 
	#R
 0.225

18 
	#L
 2.63

19 
	#B
 1.03

20 
	#S
 2.82

21 
	#Sk1
 0.81

22 
	#Sk2
 3.3

23 
	#Lk
 0.625

24 
	#G‘r›b
 48.94

25 
	#Rmš2Dim
 (
B
/2.0+0.9)

	)

27 
	#FaùV2½m
 (
G‘r›b
*30.0/
pi
/
R
)

28 
	#RPM2Omega
 (1/
FaùV2½m
/
D
)

	)

29 
	#H®f_D
 (
D
/2.0)

	)

31 
	#AngËVÜAutoR—dy
 (
	`©ª
(
Lk
/
B
*2.0))

	)

32 
	#AngËBehšdAutoR—dy
 (
	`©ª
((
Lk
+
L
)/
B
*2.0))

	)

37 #ifdeà
Ma¡”CPU


38 
	#IDRemÙeCÚŒŞ
 0x04

	)

39 
	#BusChRemÙeCÚŒŞ
 0

	)

40 
	#IDInv”‹r111
 0x09

	)

41 
	#BusChInv”‹r111
 1

	)

42 
	#IDInv”‹r112
 0x0a

	)

43 
	#BusChInv”‹r112
 1

	)

44 
	#IDInv”‹r121
 0x0b

	)

45 
	#BusChInv”‹r121
 1

	)

46 
	#IDInv”‹r122
 0x0c

	)

47 
	#BusChInv”‹r122
 1

	)

48 
	#IDInv”‹r211
 0x10

	)

49 
	#BusChInv”‹r211
 1

	)

50 
	#IDInv”‹r212
 0x0f

	)

51 
	#BusChInv”‹r212
 1

	)

52 
	#IDInv”‹r221
 0x0e

	)

53 
	#BusChInv”‹r221
 1

	)

54 
	#IDInv”‹r222
 0x0d

	)

55 
	#BusChInv”‹r222
 1

	)

56 
	#IDCam”a1
 0x05

	)

57 
	#BusChCam”a1
 3

	)

58 
	#IDCam”a2
 0x06

	)

59 
	#BusChCam”a2
 3

	)

62 #ifdeà
SÏveCPU


63 
	#IDInv”‹rHyd¿ulic
 0x08

	)

64 
	#BusChInv”‹rHyd¿ulic
 1

	)

70 
	#NODE_START
 0x01

	)

71 
	#NODE_STOP
 0x02

	)

72 
	#NODE_PREOP
 0x80

	)

73 
	#NODE_RESET_APPL
 0x81

	)

74 
	#NODE_RESET_COM
 0x82

	)

79 
	#NMTStusNOT_ACTIVE
 0x00

	)

80 
	#NMTStusNOT_STARTED
 0x01

	)

81 
	#NMTStusALIVE
 0x02

	)

82 
	#NMTStusDEAD
 0x03

	)

87 
	#NodeStusUNKNOWN
 0x00

	)

88 
	#NodeStusDISCONNECTING
 0x01

	)

89 
	#NodeStusCONNECTING
 0x02

	)

90 
	#NodeStusPREPARING
 0x03

	)

91 
	#NodeStusPREPARED
 0x04

	)

92 
	#NodeStusOPERATIONAL
 0x05

	)

93 
	#NodeStusPRE_OPERATIONAL
 0x7f

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\main.c

21 
	~"AµCÚfig.h
"

28 
ušt32
 *
	gsysCyşeTime
;

29 
ušt32
 *
	gsysCÚŒŞWÜd
;

30 
ušt8
 *
	gsysStus
;

31 
ušt32
 *
	gsysCPUTem³¿tur
;

32 
ušt32
 *
	gsysCPUVŞgeUb1
;

33 
ušt32
 *
	gsysCPUCu¼’tUb1
;

34 
ušt32
 *
	gsysCPUVŞgeExt
;

35 
ušt32
 *
	gsysCPUVŞgeUC1
;

38 
ušt8
 *
	gsysD©eTimeSec
;

39 
ušt8
 *
	gsysD©eTimeMš
;

40 
ušt8
 *
	gsysD©eTimeHour
;

41 
ušt8
 *
	gsysD©eTimeDay
;

42 
ušt8
 *
	gsysD©eTimeMÚth
;

43 
ušt16
 *
	gsysD©eTimeY—r
;

45 
T_x_sys_sy¡em_šfÜm©iÚ
 
	gtSys
;

58 cÚ¡ 
T_x_lib_šfo
 
gt_AµInfo
 
	gX_MEM_APPLICATION_INFO
 =

60 
X_LIB_INFO_APPL_MAGIC
,

61 
X_LIB_INFO_STRUCT_VERSION
,

62 
X_LIB_INFO_CONTAINS_DEVICE_ID
 |

63 
X_LIB_INFO_CONTAINS_DATE_TIME
 |

64 
X_LIB_INFO_CONTAINS_PROJECT_NAME
 |

65 
X_LIB_INFO_CONTAINS_PROJECT_VERSION
 |

66 
X_LIB_INFO_CONTAINS_ADDITIONAL_INFO
,

67 
X_LIB_INFO_DEVICE_ID
,

68 
__DATE__
,

69 
__TIME__
,

72 
X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
,

80 
	$In™Sys
(){

81 
sšt16
 
s16_E¼Ü
;

83 
s16_E¼Ü
 = 
	`x_sys_š™
(&
tSys
);

84 
s16_E¼Ü
 |ğ
	`x02_sys_š™
();

85 
s16_E¼Ü
 |ğ
	`x05_sys_š™
();

87 ià(
s16_E¼Ü
 =ğ
C_NO_ERR
)

90 
	`x_sys_¡ay_®ive
(
X_ON
);

91 
	`x_sys_£t_®l_»Ïys
(
X_ON
);

95 
	`x_sys_d–ay_us
(1000000);

96 
	}
}

104 
	$maš
()

106 
ušt8
 
u8_Ign™iÚ
;

107 
ušt32
 
timeSmp_us
;

108 
ušt32
 
timeSmp_ms
;

109 
ušt16
 
u16_Temp
;

110 
sšt32
 
s32_Temp
;

111 
æßt32
 
f32_Temp
;

112 
ušt16
 
Addr
;

113 
ušt32
 
V”siÚNum
;

114 
	`In™Sys
();

117 
	`x_os_š™
(
X_OS_HEAP_DEFAULT
);

119 
	`In™TaskCommIÁ”çû
();

120 
	`In™DriveSys
();

121 
	`In™Saãty
();

122 
	`In™MuÉiIO
();

123 
	`In™RemÙeCÚŒŞ
();

124 
	`In™AutoDrive
();

126 
sysCyşeTime
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysCyşeTime
,
Ty³U32
,0); *sysCycleTime=0;

127 
sysStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,0); *sysStatus=0x00;

128 
sysCPUTem³¿tur
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUTem³¿tur
,
Ty³U32
,0); *sysCPUTemperatur=0;

129 
sysCPUVŞgeUb1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUb1
,
Ty³U32
,0); *sysCPUVoltageUb1=0;

130 
sysCPUCu¼’tUb1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUCu¼’tUb1
,
Ty³U32
,0); *sysCPUCurrentUb1=0;

131 
sysCPUVŞgeExt
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeExt
,
Ty³U32
,0); *sysCPUVoltageExt=0;

132 
sysCPUVŞgeUC1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUC1
,
Ty³U32
,0); *sysCPUVoltageUC1=0;

133 
sysCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCÚŒŞWÜd
,
Ty³U32
,0); *sysControlWord=0;

135 
sysD©eTimeSec
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime1
,
Ty³U8
,0);

136 
sysD©eTimeMš
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime1
,
Ty³U8
,1);

137 
sysD©eTimeHour
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime1
,
Ty³U8
,2);

138 
sysD©eTimeDay
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime1
,
Ty³U8
,3);

139 
sysD©eTimeMÚth
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime2
,
Ty³U8
,0);

140 
sysD©eTimeY—r
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyD©eTime2
,
Ty³U16
,1);

142 
V”siÚNum
=
NodeHWV”siÚ
;

143 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexHwty³
,&
Addr
,&
V”siÚNum
,
S‘OD
);

144 
V”siÚNum
=
NodeS”ŸlNumm”
;

145 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexS”Nr
,&
Addr
,&
V”siÚNum
,
S‘OD
);

147 
	`x_os_¡¬t
(200);

148 
timeSmp_ms
=
	`x_sys_g‘_time_ms
();

150 
TRUE
)

152 
timeSmp_us
=(
ušt32
)(
	`x_sys_g‘_time_us
());

154 
	`x_sys_g‘_ign™iÚ
(&
u8_Ign™iÚ
);

156 ià(
u8_Ign™iÚ
!=0x01)

159 *
sysStus
&=~0x01;

160 
	`x_sys_d–ay_us
(3000000);

161 
	`x_sys_şo£
();

164 *
sysStus
|=0x01;

166 if(*
sysCÚŒŞWÜd
&0x00000004){

167 *
sysCÚŒŞWÜd
&=~0x00000004;

168 
	`x_sys_d–ay_us
(500000);

169 
	`x_sys_şo£
();

172 
	`TaskCommIÁ”çû
();

173 
	`TaskRemÙeCÚŒŞAwake
();

174 
	`TaskDriveSysAwake
();

177 
	`x_sys_g‘_‹m³¿tu»
(
X_SYS_TEMP_CPU
,&
u16_Temp
); *
sysCPUTem³¿tur
=(
ušt32
)u16_Temp*100;

178 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_UB1
,&
s32_Temp
); *
sysCPUVŞgeUb1
=(
ušt32
)s32_Temp;

179 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_I_UB1
,&
s32_Temp
); *
sysCPUCu¼’tUb1
=(
ušt32
)s32_Temp/1000;

180 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_EXT1
,&
s32_Temp
); *
sysCPUVŞgeExt
=(
ušt32
)s32_Temp;

181 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_UC1
,&
s32_Temp
); *
sysCPUVŞgeUC1
=(
ušt32
)s32_Temp;

183 *
sysCyşeTime
=(
ušt32
)(
	`x_sys_g‘_time_us
())-
timeSmp_us
;

220 
	}
}

	@
1
.
0
103
9889
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenComm.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenComm.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CANopenDeviceConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CommInterface.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\CommInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\PDOConfig.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_base.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_eb10.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_eb10_sl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_sl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\col2_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\CommPort\col2\templates\col2_config.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveControl.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSys.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\DriveSystem\DriveSysManage.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_Manage.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_Manage.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\EEProm_manager\eep_memmap.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIO.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIO.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIOConfig.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\MultiIO\MultiIOInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\DeviceOD.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\DeviceOD.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\ODContent.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\OD\ODInfo.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControl.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\RemoteControl\RemoteControlInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\Safety.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\Safety.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSys.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSysData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyDriveSysData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyNormal.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLC.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLCData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Safety\SafetyPLCData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\Tracking.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\Tracking.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingControl.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\BSP\Tracking\TrackingInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_lib_string.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb02\x02_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_lib_string.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\eb05\x05_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\intrinsics.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\memtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stdtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stwerrors.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\stwtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_can.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_can_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eb.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eep.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_eep_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err_defines.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_err_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_esx3xm.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_fl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_fl_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_mpu.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_mpu_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_mbox.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_mutex.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_sema.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_signal.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_os_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_out_relay.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ser.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ser_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_ssv.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_stdtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_sys_adc.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_tim.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\libs\esx3xm\x_uti.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\AppConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\MESConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWMaster\src\main.c
