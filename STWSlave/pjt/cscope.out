cscope 16 $HOME\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\pjt"               0000264564
	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenComm.c

1 
	~"CANİ’Comm.h
"

4 
C®lback
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, * cÚ¡ 
İv_HªdË
);

5 
sšt16
 
StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
);

6 
sšt16
 
G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
);

7 
SyncIn™
();

8 
NMTIn™
();

9 
NMTMªagem’t
();

10 
sšt16
 
Re£tNode
();

13 * 
	gmpv_Bus
[4];

14 * 
	gİpv_Tim”
;

18 * 
	gSDOS”v”hªdË1
;

19 * 
	gSDOS”v”hªdË2
;

20 * 
	gSDOS”v”hªdË3
;

21 * 
	gSDOS”v”hªdË4
;

23 
SyncTy³
 
	gSyncP¬a1
;

24 
SyncTy³
 
	gSyncP¬a2
;

25 
SyncTy³
 
	gSyncP¬a3
;

26 
SyncTy³
 
	gSyncP¬a4
;

28 
TimeTy³
 
	gCANİ’Tim”
;

30 
NMTTy³
 
	gNodeNMTStus
[
NMTEÁry
];

33 
ušt8
 *
	gCANBusStus
;

42 
	$CANİ’CommIn™
(){

43 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig1
;

44 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig2
;

45 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig3
;

46 
T_cŞ2_cÚfig
 
t_Lib¿ryCÚfig4
;

47 
ušt32
 
Tim”C®lbackP¬am‘”
=0;

48 
ušt32
 
V®ue
;

49 
ušt16
 
ODMemAdr
;

50 
sšt16
 
”r
;

52 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl1
,
DeçuÉBaud¿‹
);

53 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl2
,
DeçuÉBaud¿‹
);

54 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl3
,
DeçuÉBaud¿‹
);

55 
	`x_ÿn_bus_š™
(
CANO³nBusChªÃl4
,
DeçuÉBaud¿‹
);

57 
t_Lib¿ryCÚfig1
.
u16_ChªÃl
 = 
CANO³nBusChªÃl1
;

58 
t_Lib¿ryCÚfig1
.
u16_TxFifo
 = 
CANTxFIFOSize
;

59 
t_Lib¿ryCÚfig1
.
u16_RxFifo
 = 
CANRxFIFOSize
;

61 
t_Lib¿ryCÚfig2
.
u16_ChªÃl
 = 
CANO³nBusChªÃl2
;

62 
t_Lib¿ryCÚfig2
.
u16_TxFifo
 = 
CANTxFIFOSize
;

63 
t_Lib¿ryCÚfig2
.
u16_RxFifo
 = 
CANRxFIFOSize
;

65 
t_Lib¿ryCÚfig3
.
u16_ChªÃl
 = 
CANO³nBusChªÃl3
;

66 
t_Lib¿ryCÚfig3
.
u16_TxFifo
 = 
CANTxFIFOSize
;

67 
t_Lib¿ryCÚfig3
.
u16_RxFifo
 = 
CANRxFIFOSize
;

69 
t_Lib¿ryCÚfig4
.
u16_ChªÃl
 = 
CANO³nBusChªÃl4
;

70 
t_Lib¿ryCÚfig4
.
u16_TxFifo
 = 
CANTxFIFOSize
;

71 
t_Lib¿ryCÚfig4
.
u16_RxFifo
 = 
CANRxFIFOSize
;

73 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig1
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[0]);

74 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig2
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[1]);

75 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig3
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[2]);

76 
	`cŞ2_š™
(&
t_Lib¿ryCÚfig4
,
DeçuÉSDOTimeOut
,
DeçuÉNodeID
,&
mpv_Bus
[3]);

78 
	`ODMemIn™
();

80 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[0],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË1
);

81 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[1],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË2
);

82 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[2],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË3
);

83 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[3],
RxSDO_COB
+
DeçuÉNodeID
,&
SDOS”v”hªdË4
);

85 
	`StÜeLßdOD
(0x0000,0x00,
LßdODFromEEP
);

86 
	`PDOLi¡S‘up
();

88 
CANİ’Tim”
.
tick
=0;

92 
CANİ’Tim”
.
Timeout
=
DeçuÉTimeout
;

95 
	`NMTIn™
();

97 
	`SyncIn™
();

99 
CANBusStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,1); *CANBusStatus=0x00;

101 
	`x_tim_š™
 (
X_TIM_PRIO_01
,
Tim”C®lbackP¬am‘”
,
C®lback
,&
İpv_Tim”
);

102 
	`x_tim_£t
(
İpv_Tim”
,
D–ayTime
,
CyşeTime
);

103 
	}
}

111 
	$CANBusChk
(){

112 
T_x_ÿn_bus_¡©us
 
t_Stus
;

114 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_01
,&
t_Stus
);

115 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x01;

116 *
CANBusStus
|=0x01;

118 
	`x_ÿn_bus_g‘_¡©us
 (
X_CAN_BUS_02
,&
t_Stus
);

119 if(
t_Stus
.
u16_BusS‹
!=
X_CAN_BUS_FAILURE_BUSOFF
è*
CANBusStus
&=~0x02;

120 *
CANBusStus
|=0x02;

121 
	}
}

129 
sšt16
 
	$Re£tNode
(){

130 
sšt16
 
”rÜcode
;

131 
ušt16
 
Addr
;

132 
ušt32
 
‹mp
;

133 
ušt16
 
i
;

134 
ušt32
 
Baud¿‹Code
;

136 
i
=0;i<
ODMemL’gth
;i++){

137 
ODMem
[
i
]=0;

140 
DeçuÉBaud¿‹
){

141 125000: 
Baud¿‹Code
=0;;

142 250000: 
Baud¿‹Code
=1;;

143 500000: 
Baud¿‹Code
=2;;

144 800000: 
Baud¿‹Code
=3;;

145 1000000: 
Baud¿‹Code
=4;;

148 
‹mp
=
NodeHWV”siÚ
;

149 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexHwty³
,&
Addr
,&
‹mp
,
S‘OD
);

150 
‹mp
=
NodeS”ŸlNumm”
;

151 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexS”Nr
,&
Addr
,&
‹mp
,
S‘OD
);

152 
‹mp
=(
ušt32
)
DeçuÉNodeID
+((ušt32)
DeçuÉH—¹b—tTime
<<8)+(
Baud¿‹Code
<<24);

153 
”rÜcode
=
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexNodeP¬am
,&
Addr
,&
‹mp
,
S‘OD
);

155  
”rÜcode
;

156 
	}
}

164 
	$CANİ’P¬aUpd©e
(
ušt16
 
šdex
,
ušt8
 
subšdex
){

165 
ušt16
 
ODMemAddr
;

166 
ušt32
 
V®ue
;

169 if((
šdex
>=
DevP¬aS¹Index
)&&(index<(DevParaStartIndex+0x0100))){

170 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

171 
subšdex
){

172 
SubšdexCÚŒŞWÜd
:

173 if(
V®ue
==0x00000001){

174 
V®ue
&=~0x00000001;

175 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

176 
	`StÜeLßdOD
(0x0000,0x00,
StÜeODToEEP
);

178 if(
V®ue
==0x00000002){

179 
V®ue
&=~0x00000002;

180 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

181 
	`Re£tNode
();

182 
	`StÜeLßdOD
(0x0000,0x00,
StÜeODToEEP
);

187 
	}
}

197 
	$SDOHªdË
(){

198 
ušt8
 
D©a
[8];

199 
ušt8
 
L’gth
=8;

200 
sšt16
 
”rcode
;

201 
ušt16
 
šdex
;

202 
ušt8
 
subšdex
;

203 
ušt16
 
ODMemAddr
;

204 
ušt32
 
V®ue
;

207 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË1
,&
D©a
[0],&
L’gth
);

208 if(
”rcode
==
C_NO_ERR
){

209 
šdex
=
D©a
[2];

210 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

211 
subšdex
=
D©a
[3];

213 if(
D©a
[0]==0x40){

214 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

215 
D©a
[0]=0x43;

216 
D©a
[4]=
V®ue
&0xff;

217 
D©a
[5]=(
V®ue
>>8)&0xff;

218 
D©a
[6]=(
V®ue
>>16)&0xff;

219 
D©a
[7]=(
V®ue
>>24)&0xff;

222 if(
D©a
[0]==0x23){

223 
V®ue
=
D©a
[7];

224 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

225 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

226 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

227 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

228 
D©a
[0]=0x60;

229 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

231 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[0], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

235 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË2
,&
D©a
[0],&
L’gth
);

236 if(
”rcode
==
C_NO_ERR
){

237 
šdex
=
D©a
[2];

238 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

239 
subšdex
=
D©a
[3];

241 if(
D©a
[0]==0x40){

242 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

243 
D©a
[0]=0x43;

244 
D©a
[4]=
V®ue
&0xff;

245 
D©a
[5]=(
V®ue
>>8)&0xff;

246 
D©a
[6]=(
V®ue
>>16)&0xff;

247 
D©a
[7]=(
V®ue
>>24)&0xff;

250 if(
D©a
[0]==0x23){

251 
V®ue
=
D©a
[7];

252 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

253 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

254 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

255 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

256 
D©a
[0]=0x60;

257 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

259 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[1], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

263 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË3
,&
D©a
[0],&
L’gth
);

264 if(
”rcode
==
C_NO_ERR
){

265 
šdex
=
D©a
[2];

266 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

267 
subšdex
=
D©a
[3];

269 if(
D©a
[0]==0x40){

270 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

271 
D©a
[0]=0x43;

272 
D©a
[4]=
V®ue
&0xff;

273 
D©a
[5]=(
V®ue
>>8)&0xff;

274 
D©a
[6]=(
V®ue
>>16)&0xff;

275 
D©a
[7]=(
V®ue
>>24)&0xff;

278 if(
D©a
[0]==0x23){

279 
V®ue
=
D©a
[7];

280 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

281 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

282 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

283 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

284 
D©a
[0]=0x60;

285 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

287 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[2], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

290 
”rcode
=
	`cŞ2_pdo_»ad
(
SDOS”v”hªdË4
,&
D©a
[0],&
L’gth
);

291 if(
”rcode
==
C_NO_ERR
){

292 
šdex
=
D©a
[2];

293 
šdex
=(
ušt16
)
D©a
[1]+(index<<8);

294 
subšdex
=
D©a
[3];

296 if(
D©a
[0]==0x40){

297 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
, 
G‘OD
);

298 
D©a
[0]=0x43;

299 
D©a
[4]=
V®ue
&0xff;

300 
D©a
[5]=(
V®ue
>>8)&0xff;

301 
D©a
[6]=(
V®ue
>>16)&0xff;

302 
D©a
[7]=(
V®ue
>>24)&0xff;

305 if(
D©a
[0]==0x23){

306 
V®ue
=
D©a
[7];

307 
V®ue
=(
ušt32
)
D©a
[6]+(Value<<8);

308 
V®ue
=(
ušt32
)
D©a
[5]+(Value<<8);

309 
V®ue
=(
ušt32
)
D©a
[4]+(Value<<8);

310 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
V®ue
,
S‘OD
);

311 
D©a
[0]=0x60;

312 
	`CANİ’P¬aUpd©e
(
šdex
,
subšdex
);

314 
	`cŞ2_pdo_wr™e
(
mpv_Bus
[3], 
TxSDO_COB
+
DeçuÉNodeID
,&
D©a
[0],8);

316 
	}
}

324 
sšt16
 
	$PDOHªdË
(){

325 
ušt8
 
PDOL’
;

326 
ušt8
 
D©a
[8];

327 
ušt16
 
iTPDO
,
iRPDO
;

328 
ušt16
 
iD©a
;

329 
sšt16
 
PDOR—dResuÉ
;

330 
sšt16
 
”rÜcode
=0;

332 
PDOL’
=8;

335 
iTPDO
=0;iTPDO<
MaxNrTPDO
;iTPDO++){

336 if(
TPDOLi¡
[
iTPDO
].
’abË
==
Di§bË
) ;

338 if(
TPDOLi¡
[
iTPDO
].
S’dTrigg”
==1){

339 
TPDOLi¡
[
iTPDO
].
S’dTrigg”
=0;

341 if(
TPDOLi¡
[
iTPDO
].
D©aCouÁ
==0) ;

342 
iD©a
=0;iD©a<
PDOL’
;iData++){

343 if(
iD©a
<
TPDOLi¡
[
iTPDO
].
D©aCouÁ
è
D©a
[iData]=*TPDOList[iTPDO].Data[iData];

344 
D©a
[
iD©a
]=0;

346 
”rÜcode
=
	`cŞ2_pdo_wr™e
(
mpv_Bus
[
TPDOLi¡
[
iTPDO
].
BusNumb”
],TPDOLi¡[iTPDO].
COBID
,&
D©a
[0],8);

351 
iRPDO
=0;iRPDO<
MaxNrRPDO
;iRPDO++){

352 if(
RPDOLi¡
[
iRPDO
].
’abË
==
Di§bË
) ;

353 
PDOR—dResuÉ
=
	`cŞ2_pdo_»ad
(
RPDOLi¡
[
iRPDO
].
RPDOHªdË
,&
D©a
[0],&
PDOL’
);

355 if(
PDOR—dResuÉ
==
C_NO_ERR
){

356 if(
RPDOLi¡
[
iRPDO
].
D©aCouÁ
==0) ;

358 
iD©a
=0;iD©a<
RPDOLi¡
[
iRPDO
].
D©aCouÁ
;iData++){

359 *
RPDOLi¡
[
iRPDO
].
D©a
[
iD©a
]=Data[iData];

363  
”rÜcode
;

364 
	}
}

372 
	$TaskCANİ’
(){

373 
	`cŞ2_sk
(
mpv_Bus
[0]);

374 
	`cŞ2_sk
(
mpv_Bus
[1]);

375 
	`cŞ2_sk
(
mpv_Bus
[2]);

376 
	`cŞ2_sk
(
mpv_Bus
[3]);

377 
	`NMTMªagem’t
();

378 
	`SDOHªdË
();

379 
	`PDOHªdË
();

380 
	`CANBusChk
();

381 
	}
}

389 
	$SyncIn™
(){

390 
ušt32
 
v®ue
=0;

391 
ušt16
 
ODMemAddr
;

393 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexCÚfigSync12
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

394 
SyncP¬a1
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

395 
SyncP¬a1
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

396 
SyncP¬a2
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+2;

397 
SyncP¬a2
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+3;

399 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexCÚfigSync34
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

400 
SyncP¬a3
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

401 
SyncP¬a3
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

402 
SyncP¬a4
.
Stus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+2;

403 
SyncP¬a4
.
TimeWnd
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+3;

404 
	}
}

412 
	$SyncHªdË
(){

413 
ušt8
 
D©a
=0;

416 if((*
SyncP¬a1
.
Stus
)&
SyncEÇbË
){

417 if(
CANİ’Tim”
.
tick
==*
SyncP¬a1
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[0],0x80,&
D©a
,0);

421 if((*
SyncP¬a2
.
Stus
)&
SyncEÇbË
){

422 if(
CANİ’Tim”
.
tick
==*
SyncP¬a2
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[1],0x80,&
D©a
,0);

426 if((*
SyncP¬a3
.
Stus
)&
SyncEÇbË
){

427 if(
CANİ’Tim”
.
tick
==*
SyncP¬a3
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[2],0x80,&
D©a
,0);

431 if((*
SyncP¬a4
.
Stus
)&
SyncEÇbË
){

432 if(
CANİ’Tim”
.
tick
==*
SyncP¬a4
.
TimeWnd
è
	`cŞ2_pdo_wr™e
(
mpv_Bus
[3],0x80,&
D©a
,0);

434 
	}
}

443 
	$C®lback
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, * cÚ¡ 
İv_HªdË
){

444 *
Opv
;

445 
ušt32
 
IÅutP¬am‘”
;

446 
ušt16
 
i
;

448 
IÅutP¬am‘”
=
ou32_C®lbackP¬am‘”
;

449 
Opv
=
İv_HªdË
;

452 
	`SyncHªdË
();

455 
CANİ’Tim”
.
tick
++;

456 if(
CANİ’Tim”
.
tick
==CANİ’Tim”.
Timeout
){

457 
CANİ’Tim”
.
tick
=0;

459 
i
=0;i<
MaxNrTPDO
;i++){

460 if(!
TPDOLi¡
[
i
].
’abË
) ;

461 if(
TPDOLi¡
[
i
].
tim”
>=(TPDOLi¡[i].
Ev’tTime
)){

462 
TPDOLi¡
[
i
].
S’dTrigg”
=1;

463 
TPDOLi¡
[
i
].
tim”
=0;

465 
TPDOLi¡
[
i
].
tim”
++;

468 
	}
}

478 
	$NMTIn™
(){

479 
ušt32
 
v®ue
;

480 
ušt16
 
ODMemAddr
;

481 
ušt16
 
iNMT
;

483 
	`G‘S‘OD
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

484 
NodeNMTStus
[0].
NMTStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
];

485 
NodeNMTStus
[0].
NodeStus
=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+1;

486 
	`G‘S‘OD
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNMT
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

487 
NodeNMTStus
[0].
NMTS’d
=(
ušt16
 *)&
ODMem
[
ODMemAddr
];

488 
NodeNMTStus
[0].
NodeID
=
IDInv”‹rHyd¿ulic
;

489 
NodeNMTStus
[0].
BusChªÃl
=
BusChInv”‹rHyd¿ulic
;

492 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

493 
	`cŞ2_h—¹b—t_»gi¡”_cÚsum”
(
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
],NodeNMTStus[iNMT].
NodeID
,5000);

495 
	}
}

503 
	$NMTMªagem’t
(){

504 
ušt16
 
tmp
;

505 
ušt8
 
cmdNMT
;

506 
ušt16
 
iNMT
;

509 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

510 
	`cŞ2_nmt_g‘_¦ave_¡©us
(
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
],NodeNMTStus[iNMT].
NodeID
, NodeNMTStus[iNMT].
NMTStus
, NodeNMTStus[iNMT].
NodeStus
);

513 
iNMT
=0;iNMT<
NMTEÁry
;iNMT++){

514 
tmp
=*
NodeNMTStus
[
iNMT
].
NMTS’d
;

515 ià(
tmp
&0x0001){

516 
cmdNMT
=(
ušt8
)(
tmp
>>8);

517 
	`cŞ2_nmt_£nd
 (
mpv_Bus
[
NodeNMTStus
[
iNMT
].
BusChªÃl
], NodeNMTStus[iNMT].
NodeID
,
cmdNMT
);

518 *
NodeNMTStus
[
iNMT
].
NMTS’d
=0x0000;

522 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenComm.h

1 #iâdeà
_CANOPENCOMM_H


2 
	#_CANOPENCOMM_H


	)

3 
	~"¡wty³s.h
"

4 
	~"DeviûOD.h
"

5 
	~"ODCÚ‹Á.h
"

6 
	~"CANİ’DeviûCÚfig.h
"

7 
	~"MESCÚfig.h
"

8 
	~"cŞ2.h
"

9 
	~"x_sys.h
"

10 
	~"x_tim.h
"

15 
	#EÇbË
 0x01

	)

16 
	#Di§bË
 0x00

	)

18 
	#TxPDO
 0x00

	)

19 
	#RxPDO
 0x01

	)

21 
	#DœIn
 0x00

	)

22 
	#DœOut
 0x01

	)

27 *
mpv_Bus
[4];

32 #ifdeà
Ma¡”CPU


33 
	#NMTEÁry
 (
NrOfMÙÜInv”‹r
+
NrOfRemÙeCÚŒŞ
)

	)

36 #ifdeà
SÏveCPU


37 
	#NMTEÁry
 (
NrOfHubSys
)

	)

43 
ušt8
 *
	mNMTStus
;

44 
ušt8
 *
	mNodeStus
;

45 
ušt16
 *
	mNMTS’d
;

46 
ušt8
 
	mNodeID
;

47 
ušt16
 
	mBusChªÃl
;

48 }
	tNMTTy³
;

53 
	#NodeHWV”siÚ
 101

	)

54 
	#NodeS”ŸlNumm”
 10

	)

56 #ifdeà
Ma¡”CPU


57 
	#DeçuÉNodeID
 0x002

	)

60 #ifdeà
SÏveCPU


61 
	#DeçuÉNodeID
 0x003

	)

64 
	#DeçuÉWifiModuËID
 0x001

	)

65 
	#DeçuÉSDOTimeOut
 500

	)

66 
	#DeçuÉH—¹b—tTime
 0

	)

71 
	#SyncEÇbË
 0x01

	)

74 
ušt8
 *
	mStus
;

75 
ušt8
 *
	mTimeWnd
;

76 }
	tSyncTy³
;

78 
SyncTy³
 
SyncP¬a1
;

79 
SyncTy³
 
SyncP¬a2
;

80 
SyncTy³
 
SyncP¬a3
;

81 
SyncTy³
 
SyncP¬a4
;

85 
	#TxSDO_COB
 0x580

	)

86 
	#RxSDO_COB
 0x600

	)

88 
	#RemÙeTxSDO_COB
 0x600

	)

89 
	#RemÙeRxSDO_COB
 0x580

	)

95 
	#MaxNrTPDO
 16

	)

96 
	#MaxNrRPDO
 16

	)

98 
	#DeçuÉT¿nsmissiÚTy³
 0x00

	)

99 
	#DeçuÉEv’tTime
 40

100 

	)

102 
ušt16
 
	mCOBID
;

103 
ušt8
 
	m’abË
;

104 
ušt16
 
	mEv’tTime
;

105 
ušt16
 
	mtim”
;

106 
ušt16
 
	mS’dTrigg”
;

107 
ušt16
 
	mD©aCouÁ
;

108 
ušt16
 
	mBusNumb”
;

109 
ušt8
 *
	mD©a
[8];

110 }
	tTPDOTy³
;

113 
ušt16
 
	mCOBID
;

114 
ušt8
 
	m’abË
;

115 
ušt16
 
	mD©aCouÁ
;

116 
ušt16
 
	mBusNumb”
;

117 
ušt8
 *
	mD©a
[8];

118 *
	mRPDOHªdË
;

119 }
	tRPDOTy³
;

121 
TPDOTy³
 
TPDOLi¡
[
MaxNrTPDO
];

122 
RPDOTy³
 
RPDOLi¡
[
MaxNrRPDO
];

128 
	#CyşeTime
 1

	)

129 
	#D–ayTime
 0

	)

131 
	#DeçuÉTimeout
 200

	)

134 
ušt32
 
	mtick
;

135 
ušt32
 
	mTimeout
;

136 }
	tTimeTy³
;

138 
TimeTy³
 
CANİ’Tim”
;

143 
CANİ’CommIn™
();

144 
TaskCANİ’
();

145 
PDOLi¡S‘up
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenDeviceConfig.h

1 #iâdeà
_CANOPENDEVICECONFIG_H


2 
	#_CANOPENDEVICECONFIG_H


	)

4 
	~"x_ÿn.h
"

6 
	#CANTxFIFOSize
 256

	)

7 
	#CANRxFIFOSize
 256

	)

9 
	#CANO³nBusChªÃl1
 
X_CAN_BUS_01


	)

10 
	#CANO³nBusChªÃl2
 
X_CAN_BUS_02


	)

11 
	#CANO³nBusChªÃl3
 
X_CAN_BUS_03


	)

12 
	#CANO³nBusChªÃl4
 
X_CAN_BUS_04


	)

13 
	#DeçuÉBaud¿‹
 250000u

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CommInterface.c

1 
	~"CANİ’Comm.h
"

2 
	~"DeviûOD.h
"

3 
	~"CommIÁ”çû.h
"

4 
	~"AµCÚfig.h
"

6 
	#DeçuÉIÁ”çûEv’tTime
 80

	)

8 
	$In™TaskCommIÁ”çû
(){

9 
	`CANİ’CommIn™
();

10 
	}
}

12 
	$TaskCommIÁ”çû
(){

13 
	`TaskCANİ’
();

14 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CommInterface.h

1 #iâdeà
_COMMINTERFACE_H


2 
	#_COMMINTERFACE_H


	)

3 
	~"¡wty³s.h
"

5 
In™TaskCommIÁ”çû
();

6 
TaskCommIÁ”çû
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\PDOConfig.c

1 
	~"CANİ’Comm.h
"

3 
TPDOTy³
 
	gTPDOLi¡
[
MaxNrTPDO
];

4 
RPDOTy³
 
	gRPDOLi¡
[
MaxNrRPDO
];

6 
	$PDOLi¡S‘up
(){

7 
ušt16
 
ODMemAddr
;

8 
ušt16
 
Index
;

9 
ušt8
 
Subšdex
;

10 
ušt16
 
tmp
;

11 
ušt32
 
V®ue
;

12 
ušt16
 
iBy‹
;

16 
TPDOLi¡
[0].
’abË
=1;

17 
TPDOLi¡
[0].
COBID
=0x304;

18 
TPDOLi¡
[0].
BusNumb”
=0;

19 
TPDOLi¡
[0].
Ev’tTime
=1;

20 
TPDOLi¡
[0].
D©aCouÁ
=0;

22 
V®ue
=0x63000704;

23 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

24 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

25 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

26 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

27 
iBy‹
=0;iBy‹<
tmp
;iByte++){

28 
TPDOLi¡
[0].
D©a
[TPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

29 
TPDOLi¡
[0].
D©aCouÁ
++;}

31 
V®ue
=0x63000804;

32 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

33 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

34 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

35 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

36 
iBy‹
=0;iBy‹<
tmp
;iByte++){

37 
TPDOLi¡
[0].
D©a
[TPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

38 
TPDOLi¡
[0].
D©aCouÁ
++;}

43 
TPDOLi¡
[1].
’abË
=1;

44 
TPDOLi¡
[1].
COBID
=0x504;

45 
TPDOLi¡
[1].
BusNumb”
=0;

46 
TPDOLi¡
[1].
Ev’tTime
=1;

47 
TPDOLi¡
[1].
D©aCouÁ
=0;

49 
V®ue
=0x63000904;

50 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

51 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

52 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

53 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

54 
iBy‹
=0;iBy‹<
tmp
;iByte++){

55 
TPDOLi¡
[1].
D©a
[TPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

56 
TPDOLi¡
[1].
D©aCouÁ
++;}

58 
V®ue
=0x63000a04;

59 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

60 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

61 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

62 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

63 
iBy‹
=0;iBy‹<
tmp
;iByte++){

64 
TPDOLi¡
[1].
D©a
[TPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

65 
TPDOLi¡
[1].
D©aCouÁ
++;}

70 
TPDOLi¡
[2].
’abË
=1;

71 
TPDOLi¡
[2].
COBID
=0x204;

72 
TPDOLi¡
[2].
BusNumb”
=0;

73 
TPDOLi¡
[2].
Ev’tTime
=3;

74 
TPDOLi¡
[2].
D©aCouÁ
=0;

76 
V®ue
=0x63000504;

77 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

78 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

79 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

80 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

81 
iBy‹
=0;iBy‹<
tmp
;iByte++){

82 
TPDOLi¡
[2].
D©a
[TPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

83 
TPDOLi¡
[2].
D©aCouÁ
++;}

85 
V®ue
=0x63000604;

86 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

87 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

88 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

89 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

90 
iBy‹
=0;iBy‹<
tmp
;iByte++){

91 
TPDOLi¡
[2].
D©a
[TPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

92 
TPDOLi¡
[2].
D©aCouÁ
++;}

97 
TPDOLi¡
[3].
’abË
=1;

98 
TPDOLi¡
[3].
COBID
=0x208;

99 
TPDOLi¡
[3].
BusNumb”
=1;

100 
TPDOLi¡
[3].
Ev’tTime
=1;

101 
TPDOLi¡
[3].
D©aCouÁ
=0;

103 
V®ue
=0x61000104;

104 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

105 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

106 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

107 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

108 
iBy‹
=0;iBy‹<
tmp
;iByte++){

109 
TPDOLi¡
[3].
D©a
[TPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

110 
TPDOLi¡
[3].
D©aCouÁ
++;}

112 
V®ue
=0x61000204;

113 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

114 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

115 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

116 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

117 
iBy‹
=0;iBy‹<
tmp
;iByte++){

118 
TPDOLi¡
[3].
D©a
[TPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

119 
TPDOLi¡
[3].
D©aCouÁ
++;}

124 
TPDOLi¡
[4].
’abË
=1;

125 
TPDOLi¡
[4].
COBID
=0x183;

126 
TPDOLi¡
[4].
BusNumb”
=0;

127 
TPDOLi¡
[4].
Ev’tTime
=1;

128 
TPDOLi¡
[4].
D©aCouÁ
=0;

130 
V®ue
=0x64002204;

131 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

132 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

133 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

134 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

135 
iBy‹
=0;iBy‹<
tmp
;iByte++){

136 
TPDOLi¡
[4].
D©a
[TPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

137 
TPDOLi¡
[4].
D©aCouÁ
++;}

139 
V®ue
=0x65001904;

140 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

141 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

142 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

143 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

144 
iBy‹
=0;iBy‹<
tmp
;iByte++){

145 
TPDOLi¡
[4].
D©a
[TPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

146 
TPDOLi¡
[4].
D©aCouÁ
++;}

152 
RPDOLi¡
[0].
’abË
=1;

153 
RPDOLi¡
[0].
COBID
=0x184;

154 
RPDOLi¡
[0].
BusNumb”
=0;

155 
RPDOLi¡
[0].
D©aCouÁ
=0;

156 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[0].
BusNumb”
], RPDOLi¡[0].
COBID
, &RPDOLi¡[0].
RPDOHªdË
);

158 
V®ue
=0x63000104;

159 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

160 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

161 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

162 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

163 
iBy‹
=0;iBy‹<
tmp
;iByte++){

164 
RPDOLi¡
[0].
D©a
[RPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

165 
RPDOLi¡
[0].
D©aCouÁ
++;}

167 
V®ue
=0x63000204;

168 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

169 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

170 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

171 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

172 
iBy‹
=0;iBy‹<
tmp
;iByte++){

173 
RPDOLi¡
[0].
D©a
[RPDOLi¡[0].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

174 
RPDOLi¡
[0].
D©aCouÁ
++;}

179 
RPDOLi¡
[1].
’abË
=1;

180 
RPDOLi¡
[1].
COBID
=0x284;

181 
RPDOLi¡
[1].
BusNumb”
=0;

182 
RPDOLi¡
[1].
D©aCouÁ
=0;

183 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[1].
BusNumb”
], RPDOLi¡[1].
COBID
, &RPDOLi¡[1].
RPDOHªdË
);

185 
V®ue
=0x63000304;

186 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

187 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

188 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

189 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

190 
iBy‹
=0;iBy‹<
tmp
;iByte++){

191 
RPDOLi¡
[1].
D©a
[RPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

192 
RPDOLi¡
[1].
D©aCouÁ
++;}

194 
V®ue
=0x63000404;

195 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

196 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

197 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

198 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

199 
iBy‹
=0;iBy‹<
tmp
;iByte++){

200 
RPDOLi¡
[1].
D©a
[RPDOLi¡[1].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

201 
RPDOLi¡
[1].
D©aCouÁ
++;}

206 
RPDOLi¡
[2].
’abË
=1;

207 
RPDOLi¡
[2].
COBID
=0x188;

208 
RPDOLi¡
[2].
BusNumb”
=1;

209 
RPDOLi¡
[2].
D©aCouÁ
=0;

210 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[2].
BusNumb”
], RPDOLi¡[2].
COBID
, &RPDOLi¡[2].
RPDOHªdË
);

212 
V®ue
=0x61000304;

213 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

214 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

215 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

216 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

217 
iBy‹
=0;iBy‹<
tmp
;iByte++){

218 
RPDOLi¡
[2].
D©a
[RPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

219 
RPDOLi¡
[2].
D©aCouÁ
++;}

221 
V®ue
=0x61000404;

222 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

223 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

224 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

225 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

226 
iBy‹
=0;iBy‹<
tmp
;iByte++){

227 
RPDOLi¡
[2].
D©a
[RPDOLi¡[2].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

228 
RPDOLi¡
[2].
D©aCouÁ
++;}

233 
RPDOLi¡
[3].
’abË
=1;

234 
RPDOLi¡
[3].
COBID
=0x288;

235 
RPDOLi¡
[3].
BusNumb”
=1;

236 
RPDOLi¡
[3].
D©aCouÁ
=0;

237 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[3].
BusNumb”
], RPDOLi¡[3].
COBID
, &RPDOLi¡[3].
RPDOHªdË
);

239 
V®ue
=0x61000504;

240 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

241 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

242 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

243 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

244 
iBy‹
=0;iBy‹<
tmp
;iByte++){

245 
RPDOLi¡
[3].
D©a
[RPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

246 
RPDOLi¡
[3].
D©aCouÁ
++;}

248 
V®ue
=0x61000604;

249 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

250 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

251 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

252 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

253 
iBy‹
=0;iBy‹<
tmp
;iByte++){

254 
RPDOLi¡
[3].
D©a
[RPDOLi¡[3].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

255 
RPDOLi¡
[3].
D©aCouÁ
++;}

260 
RPDOLi¡
[4].
’abË
=1;

261 
RPDOLi¡
[4].
COBID
=0x182;

262 
RPDOLi¡
[4].
BusNumb”
=0;

263 
RPDOLi¡
[4].
D©aCouÁ
=0;

264 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[4].
BusNumb”
], RPDOLi¡[4].
COBID
, &RPDOLi¡[4].
RPDOHªdË
);

266 
V®ue
=0x64000004;

267 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

268 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

269 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

270 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

271 
iBy‹
=0;iBy‹<
tmp
;iByte++){

272 
RPDOLi¡
[4].
D©a
[RPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

273 
RPDOLi¡
[4].
D©aCouÁ
++;}

275 
V®ue
=0x65006a04;

276 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

277 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

278 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

279 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

280 
iBy‹
=0;iBy‹<
tmp
;iByte++){

281 
RPDOLi¡
[4].
D©a
[RPDOLi¡[4].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

282 
RPDOLi¡
[4].
D©aCouÁ
++;}

287 
RPDOLi¡
[5].
’abË
=1;

288 
RPDOLi¡
[5].
COBID
=0x192;

289 
RPDOLi¡
[5].
BusNumb”
=0;

290 
RPDOLi¡
[5].
D©aCouÁ
=0;

291 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[5].
BusNumb”
], RPDOLi¡[5].
COBID
, &RPDOLi¡[5].
RPDOHªdË
);

293 
V®ue
=0x63000c04;

294 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

295 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

296 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

297 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

298 
iBy‹
=0;iBy‹<
tmp
;iByte++){

299 
RPDOLi¡
[5].
D©a
[RPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

300 
RPDOLi¡
[5].
D©aCouÁ
++;}

302 
V®ue
=0x63000d04;

303 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

304 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

305 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

306 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

307 
iBy‹
=0;iBy‹<
tmp
;iByte++){

308 
RPDOLi¡
[5].
D©a
[RPDOLi¡[5].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

309 
RPDOLi¡
[5].
D©aCouÁ
++;}

314 
RPDOLi¡
[6].
’abË
=1;

315 
RPDOLi¡
[6].
COBID
=0x202;

316 
RPDOLi¡
[6].
BusNumb”
=0;

317 
RPDOLi¡
[6].
D©aCouÁ
=0;

318 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[6].
BusNumb”
], RPDOLi¡[6].
COBID
, &RPDOLi¡[6].
RPDOHªdË
);

320 
V®ue
=0x63000e04;

321 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

322 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

323 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

324 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

325 
iBy‹
=0;iBy‹<
tmp
;iByte++){

326 
RPDOLi¡
[6].
D©a
[RPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

327 
RPDOLi¡
[6].
D©aCouÁ
++;}

329 
V®ue
=0x63000f04;

330 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

331 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

332 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

333 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

334 
iBy‹
=0;iBy‹<
tmp
;iByte++){

335 
RPDOLi¡
[6].
D©a
[RPDOLi¡[6].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

336 
RPDOLi¡
[6].
D©aCouÁ
++;}

341 
RPDOLi¡
[7].
’abË
=1;

342 
RPDOLi¡
[7].
COBID
=0x212;

343 
RPDOLi¡
[7].
BusNumb”
=0;

344 
RPDOLi¡
[7].
D©aCouÁ
=0;

345 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[7].
BusNumb”
], RPDOLi¡[7].
COBID
, &RPDOLi¡[7].
RPDOHªdË
);

347 
V®ue
=0x65003104;

348 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

349 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

350 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

351 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

352 
iBy‹
=0;iBy‹<
tmp
;iByte++){

353 
RPDOLi¡
[7].
D©a
[RPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

354 
RPDOLi¡
[7].
D©aCouÁ
++;}

356 
V®ue
=0x65003204;

357 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

358 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

359 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

360 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

361 
iBy‹
=0;iBy‹<
tmp
;iByte++){

362 
RPDOLi¡
[7].
D©a
[RPDOLi¡[7].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

363 
RPDOLi¡
[7].
D©aCouÁ
++;}

368 
RPDOLi¡
[8].
’abË
=1;

369 
RPDOLi¡
[8].
COBID
=0x222;

370 
RPDOLi¡
[8].
BusNumb”
=0;

371 
RPDOLi¡
[8].
D©aCouÁ
=0;

372 
	`cŞ2_pdo_»gi¡”
(
mpv_Bus
[
RPDOLi¡
[8].
BusNumb”
], RPDOLi¡[8].
COBID
, &RPDOLi¡[8].
RPDOHªdË
);

374 
V®ue
=0x65003304;

375 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

376 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

377 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

378 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

379 
iBy‹
=0;iBy‹<
tmp
;iByte++){

380 
RPDOLi¡
[8].
D©a
[RPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

381 
RPDOLi¡
[8].
D©aCouÁ
++;}

383 
V®ue
=0x65003404;

384 
Index
=(
ušt16
)((
V®ue
&0xffff0000)>>16);

385 
Subšdex
=(
ušt16
)((
V®ue
&0x0000ff00)>>8);

386 
tmp
 = (
ušt16
)(
V®ue
 & 0x000000ff);

387 
	`G‘S‘OD
(
Index
,
Subšdex
,&
ODMemAddr
,&
V®ue
,
G‘OD
);

388 
iBy‹
=0;iBy‹<
tmp
;iByte++){

389 
RPDOLi¡
[8].
D©a
[RPDOLi¡[8].
D©aCouÁ
]=(
ušt8
 *)&
ODMem
[
ODMemAddr
]+
iBy‹
;

390 
RPDOLi¡
[8].
D©aCouÁ
++;}

394 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2.h

15 #iâdeà
_COL2_H


16 
	#_COL2_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

24 
	~"cŞ2_ba£.h
"

25 
	~"cŞ2_¦.h
"

26 
	~"cŞ2_eb10.h
"

27 
	~"cŞ2_eb10_¦.h
"

30 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

31 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

38 
ušt16
 
u16_ChªÃl
;

39 
ušt16
 
u16_TxFifo
;

40 
ušt16
 
u16_RxFifo
;

41 } 
	tT_cŞ2_cÚfig
;

48 
sšt16
 
cŞ2_š™
(cÚ¡ 
T_cŞ2_cÚfig
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

49 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

55 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_base.h

15 #iâdeà
_COL2_BASE_H


16 
	#_COL2_BASE_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

24 
	~"cŞ2_ty³s.h
"

29 
	#COL2_NMT_CAN_ID
 (0x00u)

30 
	#COL2_SYNC_CAN_ID
 (0x80u)

31 
	#COL2_EMCY_BASE_CAN_ID
 (0x80u)

32 
	#COL2_TIME_STAMP_CAN_ID
 (0x100u)

33 
	#COL2_TPDO1_BASE_CAN_ID
 (0x180u)

34 
	#COL2_RPDO1_BASE_CAN_ID
 (0x200u)

35 
	#COL2_TPD02_BASE_CAN_ID
 (0x280u)

36 
	#COL2_RPDO2_BASE_CAN_ID
 (0x300u)

37 
	#COL2_TPDO3_BASE_CAN_ID
 (0x380u)

38 
	#COL2_RPDO3_BASE_CAN_ID
 (0x400u)

39 
	#COL2_TPDO4_BASE_CAN_ID
 (0x480u)

40 
	#COL2_RPDO4_BASE_CAN_ID
 (0x500u)

41 
	#COL2_TSDO_BASE_CAN_ID
 (0x580u)

42 
	#COL2_RSDO_BASE_CAN_ID
 (0x600u)

43 
	#COL2_NMT_BASE_CAN_ID
 (0x700u)

44 

	)

46 
	#COL2_SDO_ERR_TOGGLE
 (0x05030000UL)

	)

47 
	#COL2_SDO_ERR_SDO_TIMEOUT
 (0x05040000UL)

	)

48 
	#COL2_SDO_ERR_SPECIFIER_INVALID
 (0x05040001UL)

	)

49 
	#COL2_SDO_ERR_INVALID_BLOCKSIZE
 (0x05040002UL)

	)

50 
	#COL2_SDO_ERR_INVALID_SEQUENCE
 (0x05040003UL)

	)

51 
	#COL2_SDO_ERR_CRC
 (0x05040004UL)

	)

52 
	#COL2_SDO_ERR_OUT_OF_MEMORY
 (0x05040005UL)

	)

53 
	#COL2_SDO_ERR_UNSUPP_ACCESS
 (0x06010000UL)

	)

54 
	#COL2_SDO_ERR_READING_WO
 (0x06010001UL)

	)

55 
	#COL2_SDO_ERR_WRITING_RO
 (0x06010002UL)

	)

56 
	#COL2_SDO_ERR_INDEX_INVALID
 (0x06020000UL)

	)

57 
	#COL2_SDO_ERR_NO_MAP
 (0x06040041UL)

	)

58 
	#COL2_SDO_ERR_PDO_TOO_LONG
 (0x06040042UL)

	)

59 
	#COL2_SDO_ERR_GENERAL_INCOMP
 (0x06040047UL)

	)

60 
	#COL2_SDO_ERR_HARDWARE
 (0x06060000UL)

	)

61 
	#COL2_SDO_ERR_DATASIZE
 (0x06070010UL)

	)

62 
	#COL2_SDO_ERR_DATA_TYPE_TOO_HIGH
 (0x06070012UL)

	)

63 
	#COL2_SDO_ERR_DATA_TYPE_TOO_LOW
 (0x06070013UL)

	)

64 
	#COL2_SDO_ERR_SUBINDEX_INVALID
 (0x06090011UL)

	)

65 
	#COL2_SDO_ERR_RANGE_EXCEEDED
 (0x06090030UL)

	)

66 
	#COL2_SDO_ERR_VALUE_TOO_HIGH
 (0x06090031UL)

	)

67 
	#COL2_SDO_ERR_VALUE_TOO_LOW
 (0x06090032UL)

	)

68 
	#COL2_SDO_ERR_MAX_MIN_CONFLICT
 (0x06090036UL)

	)

69 
	#COL2_SDO_ERR_GENERAL_ERROR
 (0x08000000UL)

	)

70 
	#COL2_SDO_ERR_DATA_TRANSFER
 (0x08000020UL)

	)

71 
	#COL2_SDO_ERR_LOCAL_CONTROL
 (0x08000021UL)

	)

72 
	#COL2_SDO_ERR_DEVICE_STATE
 (0x08000022UL)

	)

73 
	#COL2_SDO_ERR_OD_ERROR
 (0x08000023UL)

	)

76 
	#COL2_NMT_NODE_START
 (0x01)

77 
	#COL2_NMT_NODE_STOP
 (0x02)

78 
	#COL2_NMT_NODE_PREOP
 (0x80)

79 
	#COL2_NMT_NODE_RESET_APPL
 (0x81)

80 
	#COL2_NMT_NODE_RESET_COM
 (0x82)

81 

	)

83 
	#COL2_NMT_STATUS_NOT_ACTIVE
 (0)

84 
	#COL2_NMT_STATUS_NOT_STARTED
 (1)

85 
	#COL2_NMT_STATUS_ALIVE
 (2)

86 
	#COL2_NMT_STATUS_DEAD
 (3)

87 

	)

88 
	#COL2_NG_NODE_UNKNOWN
 (0x00)

90 
	#COL2_NG_NODE_DISCONNECTING
 (0x01)

91 
	#COL2_NG_NODE_CONNECTING
 (0x02)

92 
	#COL2_NG_NODE_PREPARING
 (0x03)

93 
	#COL2_NG_NODE_PREPARED
 (0x04)

94 
	#COL2_NG_NODE_OPERATIONAL
 (0x05)

95 
	#COL2_NG_NODE_PRE_OPERATIONAL
 (0x7F)

96 

	)

102 vŞ©cÚ¡ 
ušt8
 
gu8_cŞ2_NumSuµÜ‹dBus£s
;

103 
T_cŞ2_ÃtwÜk
 
g©_cŞ2_N‘wÜks
[];

108 
sšt16
 
cŞ2_şo£
(* cÚ¡ 
İv_BusHªdË
);

109 
sšt16
 
cŞ2_sk
(* cÚ¡ 
İv_BusHªdË
);

112 
sšt16
 
cŞ2_gu¬dšg_»gi¡”_¦ave
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

113 cÚ¡ 
ušt16
 
ou16_Gu¬dTimeMS
, cÚ¡ 
ušt8
 
ou8_LiãTimeFaùÜ
);

114 
sšt16
 
cŞ2_h—¹b—t_š™
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_ProduûrTimeMS
);

115 
sšt16
 
cŞ2_h—¹b—t_»gi¡”_cÚsum”
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

116 cÚ¡ 
ušt16
 
ou16_CÚsum”TimeMS
);

117 
sšt16
 
cŞ2_nmt_g‘_¦ave_¡©us
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

118 
ušt8
 * cÚ¡ 
İu8_NMTStus
, ušt8 * cÚ¡ 
İu8_NodeStus
);

119 
sšt16
 
cŞ2_nmt_£nd
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ ušt8 
ou8_NMTCommªd
);

122 
sšt16
 
cŞ2_emcy_»ad
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, ušt8 * cÚ¡ 
İu8_D©a
,

123 
ušt8
 * cÚ¡ 
İu8_DLC
);

126 
sšt16
 
cŞ2_pdo_»gi¡”
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_COBID
, ** cÚ¡ 
İpv_PDOHªdË
);

127 
sšt16
 
cŞ2_pdo_wr™e
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt16
 
ou16_COBID
, cÚ¡ 
ušt8
 * cÚ¡ 
İu8_D©a
,

128 cÚ¡ 
ušt8
 
ou8_Dlc
);

129 
sšt16
 
cŞ2_pdo_»ad
(* cÚ¡ 
İv_PDOHªdË
, 
ušt8
 * cÚ¡ 
İu8_D©a
, ušt8 * cÚ¡ 
İu8_Dlc
);

130 #iâdeà
COL2_NO_TIMESTAMPS_AVAILABLE


131 
sšt16
 
cŞ2_pdo_»ad_time¡am³d
(* cÚ¡ 
İv_PDOHªdË
, 
ušt8
 * cÚ¡ 
İu8_D©a
, ušt8 * cÚ¡ 
İu8_Dlc
,

132 
ušt32
 * cÚ¡ 
İu32_TimeSmp
);

136 
sšt16
 
cŞ2_sdo_wr™e
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ 
ušt16
 
ou16_Index
,

137 cÚ¡ 
ušt8
 
ou8_SubIndex
, cÚ¡ 
ušt32
 
ou32_D©a
, cÚ¡ ušt8 
ou8_CouÁ
);

138 
sšt16
 
cŞ2_sdo_»ad
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
, cÚ¡ 
ušt16
 
ou16_Index
,

139 cÚ¡ 
ušt8
 
ou8_SubIndex
, 
ušt32
 * cÚ¡ 
İu32_D©a
, ušt8 * cÚ¡ 
İu8_CouÁ
);

140 
sšt16
 
cŞ2_sdo_g‘_Ï¡_”rÜ
(* cÚ¡ 
İv_BusHªdË
, cÚ¡ 
ušt8
 
ou8_NodeID
,

141 
ušt32
 * cÚ¡ 
İu32_E¼ÜCode
);

144 
ušt16
 
cŞ2_lib¿ry_g‘_v”siÚ
();

147 
ušt32
 
cŞ2_uti_g‘_time_ms
(* cÚ¡ 
İv_BusHªdË
);

153 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_eb10.h

15 #iâdeà
_COL2_EB10_H


16 
	#_COL2_EB10_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_SlÙ
;

32 
ušt16
 
u16_ChªÃl
;

33 
ušt16
 
u16_TxFifo
;

34 
ušt16
 
u16_RxFifo
;

35 } 
	tT_cŞ2_cÚfig_eb10
;

42 
sšt16
 
cŞ2_š™_eb10
(cÚ¡ 
T_cŞ2_cÚfig_eb10
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

43 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

49 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_eb10_sl.h

15 #iâdeà
_COL2_EB10SL_H


16 
	#_COL2_EB10SL_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_SlÙ
;

32 
ušt16
 
u16_ChªÃl
;

33 
ušt16
 
u16_TxFifo
;

34 
ušt16
 
u16_RxFifo
;

35 } 
	tT_cŞ2_cÚfig_eb10_¦
;

42 
sšt16
 
cŞ2_š™_eb10_¦
(cÚ¡ 
T_cŞ2_cÚfig_eb10_¦
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

43 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

49 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_sl.h

15 #iâdeà
_COL2_SLAPI_H


16 
	#_COL2_SLAPI_H


	)

18 #ifdeà
__ılu¥lus


23 
	~"¡wty³s.h
"

31 
ušt16
 
u16_ChªÃl
;

32 
ušt16
 
u16_TxFifo
;

33 
ušt16
 
u16_RxFifo
;

34 } 
	tT_cŞ2_cÚfig_¦
;

41 
sšt16
 
cŞ2_š™_¦
(cÚ¡ 
T_cŞ2_cÚfig_¦
 * cÚ¡ 
İt_CÚfig
, cÚ¡ 
ušt16
 
ou16_SDOTimeoutMS
,

42 cÚ¡ 
ušt8
 
ou8_OwnNodeID
, ** cÚ¡ 
İpv_BusHªdË
);

48 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_types.h

17 #iâdeà
_COL2_TYPES_H


18 
	#_COL2_TYPES_H


	)

20 #ifdeà
__ılu¥lus


25 
	~"¡wty³s.h
"

30 
	#COL2_MAX_NUM_OF_SLAVES
 (127)

31 
	#COL2_MAX_NUM_OF_RX_PDOS
 (64)

32 
	#COL2_NUM_CAN_IDS
 (0x800)

	)

42 
ušt8
 
u8_NewD©a
;

44 
ušt8
 
u8_DLC
;

45 
ušt16
 
u16_ID
;

46 
ušt8
 
au8_D©a
[8];

47 
ušt32
 
u32_Time
;

48 } 
	tT_cŞ2_cob
;

53 
ušt8
 
u8_SDOS‹
;

54 
ušt8
 
au8_Re¥Ú£
[8];

55 
ušt32
 
u32_SDOReque¡Time
;

56 } 
	tT_cŞ2_sdo_¡©e
;

61 
ušt8
 
u8_S”viû
;

62 
ušt8
 
u8_Index
;

63 } 
	tT_cŞ2_id
;

70 
ušt8
 
u8_Gu¬dMode
;

71 
ušt8
 
u8_NMTStus
;

72 
ušt8
 
u8_NodeStus
;

73 
ušt8
 
u8_Gu¬dStus
;

74 
ušt8
 
u8_LiãTimeFaùÜ
;

75 
ušt16
 
u16_Gu¬dTime
;

76 
ušt32
 
u32_ReXTime
;

77 
ušt32
 
u32_ReqTime1¡
;

80 
T_cŞ2_sdo_¡©e
 
t_SDOS‹
;

83 
T_cŞ2_cob
 
t_EMCY
;

84 } 
	tT_cŞ2_node
;

89 
ušt32
 
u32_Magic
;

90 
T_cŞ2_node
 
©_SÏves
[
COL2_MAX_NUM_OF_SLAVES
];

92 
ušt8
 
u8_OwnNodeID
;

93 
ušt8
 
u8_NumOfRegi¡”edPDOs
;

94 
ušt8
 
u8_NumOfRegi¡”edGu¬dšgs
;

96 
T_cŞ2_cob
 
©_PDOLi¡
[
COL2_MAX_NUM_OF_RX_PDOS
];

98 
ušt8
 
au8_Gu¬dšgs
[
COL2_MAX_NUM_OF_SLAVES
];

100 
ušt32
 
u32_SDOTimeout
;

101 
ušt16
 
u16_H—¹B—tProduûrTime
;

102 
ušt32
 
u32_NextH—¹B—tS’dTime
;

105 
T_cŞ2_id
 
©_IDs
[
COL2_NUM_CAN_IDS
];

107 * 
pv_Driv”
;

108 } 
	tT_cŞ2_ÃtwÜk
;

119 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\templates\col2_config.c

23 
	~"cŞ2_ba£.h
"

27 
	#COL2_NUM_SUPPORTED_CAN_BUSSES
 4

	)

29 #ià
COL2_NUM_SUPPORTED_CAN_BUSSES
 > 255

30 
	gE¼Ü


42 vŞ©cÚ¡ 
ušt8
 
	ggu8_cŞ2_NumSuµÜ‹dBus£s
 = 
COL2_NUM_SUPPORTED_CAN_BUSSES
;

45 
T_cŞ2_ÃtwÜk
 
	gg©_cŞ2_N‘wÜks
[
COL2_NUM_SUPPORTED_CAN_BUSSES
];

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_Manage.c

1 
	~"“p_Mªage.h
"

2 
	~"¡wty³s.h
"

3 
	~"x_“p.h
"

5 
sšt16
 
	$EEPD©aStÜe
(
ušt32
 
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
){

6 
i
;

7 
ušt8
 
D©a
[
NBy‹
];

9 
i
=0;i<
NBy‹
;i++){

10 
D©a
[
i
]=(
ušt8
)((
V®ue
>>8*i)&0xff);

12  
	`x_“p_wr™e
(
EEPAddr
,
NBy‹
,&
D©a
[0]);

13 
	}
}

15 
sšt16
 
	$EEPD©aLßd
(
ušt32
 *
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
){

16 
i
;

17 
ušt8
 
D©a
[
NBy‹
];

18 
ušt32
 
tmp
=0;

19 
ušt16
 
”rcode
;

21 
”rcode
=
	`x_“p_»ad
 (
EEPAddr
,
NBy‹
,&
D©a
[0]);

22 
i
=0;i<
NBy‹
;i++){

23 
tmp
ñmp+((
ušt32
)
D©a
[
NBy‹
-1-
i
]<<8*(NByte-1-i));

25 *
V®ue
=
tmp
;

26  
”rcode
;

27 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_Manage.h

1 #iâdeà
_EEP_MANAGE_H


2 
	#_EEP_MANAGE_H


	)

4 
	~"¡wty³s.h
"

5 
	~"x_sys.h
"

7 
sšt16
 
EEPD©aStÜe
(
ušt32
 
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
);

8 
sšt16
 
EEPD©aLßd
(
ušt32
 *
V®ue
, 
ušt16
 
NBy‹
, ušt32 
EEPAddr
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_memmap.h

1 #iâdeà
_EEP_MEMMAP_H


2 
	#_EEP_MEMMAP_H


	)

5 
	#CANO³nEEPS¹Addr
 8

	)

6 
	#CANO³nEEPMemSize
 2048

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystem.c

1 
	~"HubSy¡em.h
"

2 
	~"HubSy¡emD©a.h
"

3 
	~"HubSy¡emIÁ”çû.h
"

5 
	#MaxToggËCouÁ”
 2

	)

6 
	#MaxHeight
 125.0

	)

7 
	#MšHeight
 10.0

	)

8 
	#DiffHeight
 (
MaxHeight
-
MšHeight
)

	)

16 
	$In™IÁ”çûHubSys
(){

19 
šputHubSy¡emCÚŒŞWÜd
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emCÚŒŞWÜd
,
Ty³U32
,0); *inputHubSystemControlWord=0;

20 
šputHubSy¡emG‘SaãtyCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0);

23 
šputHyd¿ulicMÙÜStusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputHydraulicMotorStatusByte=0;

24 
šputHyd¿ulicMÙÜAùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputHydraulicMotorActualSpeed=0;

25 
šputHyd¿ulicInv”‹rNMTStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,0); *inputHydraulicInverterNMTStatus=0;

26 
šputHyd¿ulicInv”‹rNodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputHydraulicInverterNodeStatus=0;

28 
šputHeightS’sÜ11
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut01
,
Ty³U16
,0); *inputHeightSensor11=0;

29 
šputHeightS’sÜ12
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut02
,
Ty³U16
,0); *inputHeightSensor12=0;

30 
šputHeightS’sÜ21
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut04
,
Ty³U16
,0); *inputHeightSensor21=0;

31 
šputHeightS’sÜ22
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut03
,
Ty³U16
,0); *inputHeightSensor22=0;

32 
šputHyd¿ulicTem³¿tu»
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut14
,
Ty³U16
,0); *inputHydraulicTemperature=0;

34 
šputP»ssu»S’sÜV®ueAx–11
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut10
,
Ty³U16
,0); *inputPressureSensorValueAxel11=0;

35 
šputP»ssu»S’sÜV®ueAx–12
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut11
,
Ty³U16
,0); *inputPressureSensorValueAxel12=0;

36 
šputP»ssu»S’sÜV®ueAx–21
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut13
,
Ty³U16
,0); *inputPressureSensorValueAxel21=0;

37 
šputP»ssu»S’sÜV®ueAx–22
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut12
,
Ty³U16
,0); *inputPressureSensorValueAxel22=0;

38 
šputP»ssu»S’sÜV®ueMaš
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexIÅut09
,
Ty³U16
,0); *inputPressureSensorValueMain=0;

40 
šputHeightS’sÜ11FaùA
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ11FaùA
,
Ty³S32
,0);

41 
šputHeightS’sÜ11FaùB
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ11FaùB
,
Ty³S32
,0);

42 
šputHeightS’sÜ12FaùA
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ12FaùA
,
Ty³S32
,0);

43 
šputHeightS’sÜ12FaùB
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ12FaùB
,
Ty³S32
,0);

44 
šputHeightS’sÜ21FaùA
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ21FaùA
,
Ty³S32
,0);

45 
šputHeightS’sÜ21FaùB
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ21FaùB
,
Ty³S32
,0);

46 
šputHeightS’sÜ22FaùA
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ22FaùA
,
Ty³S32
,0);

47 
šputHeightS’sÜ22FaùB
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightS’sÜ22FaùB
,
Ty³S32
,0);

49 
šputAx–11CÚŒŞKp
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKpAx–11
,
Ty³S32
,0);

50 
šputAx–11CÚŒŞKi
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKiAx–11
,
Ty³S32
,0);

51 
šputAx–12CÚŒŞKp
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKpAx–12
,
Ty³S32
,0);

52 
šputAx–12CÚŒŞKi
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKiAx–12
,
Ty³S32
,0);

53 
šputAx–21CÚŒŞKp
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKpAx–21
,
Ty³S32
,0);

54 
šputAx–21CÚŒŞKi
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKiAx–21
,
Ty³S32
,0);

55 
šputAx–22CÚŒŞKp
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKpAx–22
,
Ty³S32
,0);

56 
šputAx–22CÚŒŞKi
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexCÚŒŞKiAx–22
,
Ty³S32
,0);

58 
šputDeçuÉHyd¿ulicMÙÜRPM
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexDeçuÉHyd¿ulicMÙÜRPM
,
Ty³S16
,0);

59 
šputMšHeight
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexDeçuÉMšHeight
,
Ty³U32
,0);

60 
šputMaxHeight
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexDeçuÉMaxHeight
,
Ty³U32
,0);

63 
ouutHyd¿ulicMÙÜCÚŒŞWÜd
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³U16
,0); *outputHydraulicMotorControlWord=0;

64 
ouutS‘Hyd¿ulicMÙÜS³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rRPDO1LowDWÜd
,
Ty³S16
,1); *outputSetHydraulicMotorSpeed=0;

65 
ouutHyd¿ulicInv”‹rNMT
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNMT
,
Ty³U16
,0); *outputHydraulicInverterNMT=0;

67 
ouutS‘By·ssV®ve
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut26
,
Ty³U32
,0); *outputSetBypassValve&=0xffff0000;

69 
ouutS‘PWMV®veHubRai£Ax–11
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut01
,
Ty³U32
,0); *outputSetPWMValveHubRaiseAxel11&=0xffff0000;

70 
ouutS‘PWMV®veHubRai£Ax–12
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut03
,
Ty³U32
,0); *outputSetPWMValveHubRaiseAxel12&=0xffff0000;

71 
ouutS‘PWMV®veHubRai£Ax–21
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut07
,
Ty³U32
,0); *outputSetPWMValveHubRaiseAxel21&=0xffff0000;

72 
ouutS‘PWMV®veHubRai£Ax–22
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut05
,
Ty³U32
,0); *outputSetPWMValveHubRaiseAxel22&=0xffff0000;

74 
ouutS‘PWMV®veHubSškAx–11
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut02
,
Ty³U32
,0); *outputSetPWMValveHubSinkAxel11&=0xffff0000;

75 
ouutS‘PWMV®veHubSškAx–12
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut04
,
Ty³U32
,0); *outputSetPWMValveHubSinkAxel12&=0xffff0000;

76 
ouutS‘PWMV®veHubSškAx–21
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut08
,
Ty³U32
,0); *outputSetPWMValveHubSinkAxel21&=0xffff0000;

77 
ouutS‘PWMV®veHubSškAx–22
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut06
,
Ty³U32
,0); *outputSetPWMValveHubSinkAxel22&=0xffff0000;

80 
ouutAx–11HubAùu®Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–11
,
Ty³U32
,0); *outputAxel11HubActualHeight=0;

81 
ouutAx–12HubAùu®Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–12
,
Ty³U32
,0); *outputAxel12HubActualHeight=0;

82 
ouutAx–21HubAùu®Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–21
,
Ty³U32
,0); *outputAxel21HubActualHeight=0;

83 
ouutAx–22HubAùu®Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–22
,
Ty³U32
,0); *outputAxel22HubActualHeight=0;

86 
ouutS³edHubAx–11
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–11
,
Ty³S32
,0); *outputSpeedHubAxel11=0;

87 
ouutS³edHubAx–12
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–12
,
Ty³S32
,0); *outputSpeedHubAxel12=0;

88 
ouutS³edHubAx–21
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–21
,
Ty³S32
,0); *outputSpeedHubAxel21=0;

89 
ouutS³edHubAx–22
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–22
,
Ty³S32
,0); *outputSpeedHubAxel22=0;

92 
ouutP»ssu»Ax–11
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–11
,
Ty³S32
,0); *outputPressureAxel11=0;

93 
ouutP»ssu»Ax–12
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–12
,
Ty³S32
,0); *outputPressureAxel12=0;

94 
ouutP»ssu»Ax–21
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–21
,
Ty³S32
,0); *outputPressureAxel21=0;

95 
ouutP»ssu»Ax–22
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–22
,
Ty³S32
,0); *outputPressureAxel22=0;

96 
ouutP»ssu»Maš
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜPump
,
Ty³S32
,0); *outputPressureMain=0;

99 
ouutHubWeight
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexWeight
,
Ty³S32
,0); *outputHubWeight=0;

100 
ouutHubCGPosL
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexXV®ueCG
,
Ty³S32
,0); *outputHubCGPosL=0;

101 
ouutHubCGPosB
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexYV®ueCG
,
Ty³S32
,0); *outputHubCGPosB=0;

103 
ouutHubStus
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emT–eg¿mm
,
Ty³U8
,0); *outputHubStatus=0x00;

104 
ouutHubHeight
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emT–eg¿mm
,
Ty³U8
,1); *outputHubHeight=0;

107 
ouutMašTem³¿tu»
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexAùu®Tem³¿tu»
,
Ty³S32
,0); *outputMainTemperature=0;

108 
	}
}

118 
	$S‘HubV®ueG’”©e
(){

119 
ušt32
 
loÿl_time¡amp
;

120 
ušt16
 
tmp
;

121 
æßt32
 
S‘HeightP”ûÁ
;

123 
tmp
=(
ušt16
)((*
šputHubSy¡emCÚŒŞWÜd
&0xffff0000)>>16);

124 
S‘HeightP”ûÁ
=(
æßt32
)
tmp
/100.0;

125 
HubVœtu®Height
=
S‘HeightP”ûÁ
*
DiffHeight
+
MšHeight
;

128 if(*
šputHubSy¡emCÚŒŞWÜd
&
KeyHubSy¡emHeb’
){

129 
HubMode
=
KeyHubModeHeb’
;

130 
loÿl_time¡amp
=
	`x_sys_g‘_time_ms
();

132 if(*
šputHubSy¡emCÚŒŞWÜd
&
KeyHubSy¡emSšk’
){

133 
HubMode
=
KeyHubModeSšk’
;

134 
loÿl_time¡amp
=
	`x_sys_g‘_time_ms
();

137 if(
	`x_sys_g‘_time_ms
()-
loÿl_time¡amp
>2000){

138 
HubMode
=
KeyHubModeStİ
;

141 
	}
}

149 
	$HubP¬am‘”Upd©e
(){

150 
ušt16
 
upd©eFÏg
;

151 
æßt32
 
S’sÜV®ue
;

153 if(
upd©eFÏg
>30){

154 
upd©eFÏg
=0;

155 
HubS”sÜ11FaùA
=(
æßt32
)(*
šputHeightS’sÜ11FaùA
)*0.001;

156 
HubS”sÜ11FaùB
=(
æßt32
)(*
šputHeightS’sÜ11FaùB
)*0.001;

158 
HubS”sÜ12FaùA
=(
æßt32
)(*
šputHeightS’sÜ12FaùA
)*0.001;

159 
HubS”sÜ12FaùB
=(
æßt32
)(*
šputHeightS’sÜ12FaùB
)*0.001;

161 
HubS”sÜ21FaùA
=(
æßt32
)(*
šputHeightS’sÜ21FaùA
)*0.001;

162 
HubS”sÜ21FaùB
=(
æßt32
)(*
šputHeightS’sÜ21FaùB
)*0.001;

164 
HubS”sÜ22FaùA
=(
æßt32
)(*
šputHeightS’sÜ22FaùA
)*0.001;

165 
HubS”sÜ22FaùB
=(
æßt32
)(*
šputHeightS’sÜ22FaùB
)*0.001;

167 
CÚŒŞËrD©’Ax–11
.
kp
=(
æßt32
)(*
šputAx–11CÚŒŞKp
)*0.001;

168 
CÚŒŞËrD©’Ax–11
.
ki
=(
æßt32
)(*
šputAx–11CÚŒŞKi
)*0.001;

169 
CÚŒŞËrD©’Ax–12
.
kp
=(
æßt32
)(*
šputAx–12CÚŒŞKp
)*0.001;

170 
CÚŒŞËrD©’Ax–12
.
ki
=(
æßt32
)(*
šputAx–12CÚŒŞKi
)*0.001;

171 
CÚŒŞËrD©’Ax–21
.
kp
=(
æßt32
)(*
šputAx–21CÚŒŞKp
)*0.001;

172 
CÚŒŞËrD©’Ax–21
.
ki
=(
æßt32
)(*
šputAx–21CÚŒŞKi
)*0.001;

173 
CÚŒŞËrD©’Ax–22
.
kp
=(
æßt32
)(*
šputAx–22CÚŒŞKp
)*0.001;

174 
CÚŒŞËrD©’Ax–22
.
ki
=(
æßt32
)(*
šputAx–22CÚŒŞKi
)*0.001;

176 
upd©eFÏg
++;

178 
S’sÜV®ue
=(
æßt32
)(*
šputHyd¿ulicTem³¿tu»
-4000)*0.001;

179 *
ouutMašTem³¿tu»
=(
sšt32
)(12500.0*
S’sÜV®ue
-50000.0);

181 
S’sÜV®ue
=(
æßt32
)(*
šputP»ssu»S’sÜV®ueAx–11
-4000)*0.001;

182 *
ouutP»ssu»Ax–11
=(
sšt32
)(15625.0*
S’sÜV®ue
);

183 
S’sÜV®ue
=(
æßt32
)(*
šputP»ssu»S’sÜV®ueAx–12
-4000)*0.001;

184 *
ouutP»ssu»Ax–12
=(
sšt32
)(15625.0*
S’sÜV®ue
);

185 
S’sÜV®ue
=(
æßt32
)(*
šputP»ssu»S’sÜV®ueAx–21
-4000)*0.001;

186 *
ouutP»ssu»Ax–21
=(
sšt32
)(15625.0*
S’sÜV®ue
);

187 
S’sÜV®ue
=(
æßt32
)(*
šputP»ssu»S’sÜV®ueAx–22
-4000)*0.001;

188 *
ouutP»ssu»Ax–22
=(
sšt32
)(15625.0*
S’sÜV®ue
);

189 
S’sÜV®ue
=(
æßt32
)(*
šputP»ssu»S’sÜV®ueMaš
-4000)*0.001;

190 *
ouutP»ssu»Maš
=(
sšt32
)(15625.0*
S’sÜV®ue
);

192 *
ouutHubWeight
=*
ouutP»ssu»Ax–11
+*
ouutP»ssu»Ax–12
+*
ouutP»ssu»Ax–21
+*
ouutP»ssu»Ax–22
;

193 if(*
ouutHubWeight
!=0){

194 *
ouutHubCGPosL
=(
sšt32
)((
æßt32
)(*
ouutP»ssu»Ax–21
+*
ouutP»ssu»Ax–22
)*
L
/((æßt32)(*
ouutHubWeight
))*1000.0);

195 *
ouutHubCGPosB
=(
sšt32
)((
æßt32
)(*
ouutP»ssu»Ax–12
+*
ouutP»ssu»Ax–22
)*
B
/((æßt32)(*
ouutHubWeight
))*1000.0);

197 *
ouutHubWeight
=*outputHubWeight/4;

199 if((*
ouutS‘By·ssV®ve
&0x0000ffff)==0è*
ouutHubStus
|=
KeyHubToMa¡”IsStİ
;

200 *
ouutHubStus
&=~
KeyHubToMa¡”IsStİ
;

202 if(*
šputHubSy¡emG‘SaãtyCÚŒŞWÜd
&
KeyHubSy¡emG‘SaãtyOÆySšk’
è*
ouutHubStus
|=
KeyHubToMa¡”OÆySšk’
;

203 *
ouutHubStus
&=~
KeyHubToMa¡”OÆySšk’
;

204 if(*
šputHubSy¡emG‘SaãtyCÚŒŞWÜd
&
KeyHubSy¡emG‘SaãtyStİ
è*
ouutHubStus
|=
KeyHubToMa¡”StİReq
;

205 *
ouutHubStus
&=~
KeyHubToMa¡”StİReq
;

209 ià(*
šputHyd¿ulicInv”‹rNodeStus
==
NodeStusPRE_OPERATIONAL
){

210 *
ouutHyd¿ulicInv”‹rNMT
=
NODE_START
;

211 *
ouutHyd¿ulicInv”‹rNMT
=(*outputHydraulicInverterNMT<<8)+0x0001;

213 
	}
}

221 
	$Task_HubSysMªage
(* 
¬gv
){

222 
¬gv
=argv;

223 
Ts_Hub
=0.02*()
MaxToggËCouÁ”
;

224 
TRUE
){

225 if(*
šputHubSy¡emCÚŒŞWÜd
&
KeyHubSy¡emEÇbË
){

226 
	`S‘HubV®ueG’”©e
();

227 
	`S¹HubInv”‹r
();

230 
	`StİHubInv”‹r
();

232 
	`HubP¬am‘”Upd©e
();

233 if(
HubSysTick
>0) HubSysTick--;

234 
	`x_os_wa™_fÜ_ev’ts
();

236 
	}
}

244 
	$In™HubSy¡em
(){

245 
	`In™IÁ”çûHubSys
();

246 
	`x_os_š¡®l_sk
(
PrioHubSySCÚŒŞ
, 0, 0, 
Task_HubSysCÚŒŞ
, 256);

247 
	`x_os_š¡®l_sk
(
PrioHubSysMªage
, 500, 0, 
Task_HubSysMªage
, 128);

248 
	}
}

256 
	$HubSysAwake
(){

257 
HubSy¡emToggËB™
[0]=*
šputHyd¿ulicMÙÜStusBy‹
&0x80;

258 if(
HubSy¡emToggËB™
[0]!=HubSy¡emToggËB™[1]è
HubSy¡emToggËCouÁ”
++;

259 if(
HubSy¡emToggËCouÁ”
>=
MaxToggËCouÁ”
){

260 
	`x_os_£t_ev’ts
(
Ev’t_HubSysCÚŒŞ
);

261 
HubSy¡emToggËCouÁ”
=0;

263 
HubSy¡emToggËB™
[1]=HubSystemToggleBit[0];

270 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystem.h

1 #iâdeà
_HUBSYSTEM_H


2 
	#_HUBSYSTEM_H


	)

3 
	~"¡wty³s.h
"

4 
	~"DeviûOD.h
"

5 
	~"AµCÚfig.h
"

6 
	~"MESCÚfig.h
"

14 
S¹HubInv”‹r
();

22 
StİHubInv”‹r
();

30 
Task_HubSysCÚŒŞ
(* 
¬gv
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemControl.c

1 
	~"HubSy¡em.h
"

2 
	~"HubSy¡emD©a.h
"

4 
	#CÚŒŞWÜdDriveEÇbË
 0x0001

	)

5 
	#CÚŒŞWÜdCÚùÜEÇbË
 0x0002

	)

6 
	#CÚŒŞWÜdSaãStİAùive
 0x0040

	)

7 
	#CÚŒŞWÜdRe£tFauÉ
 0x8000

	)

8 
	#PšCÚŒŞWÜdTe¡Mode
 0x01000000

	)

10 
	#v®veMaxPWMUp
 8000.0

	)

11 
	#v®veMaxPWMDown
 8000.0

	)

12 
	#v®veMšPWM
 2700.0

	)

13 
	#v®veD—dPWM
 1000.0

	)

14 
	#v®veDiffPWMUp
 (
v®veMaxPWMUp
-
v®veMšPWM
)

	)

15 
	#v®veDiffPWMDown
 (
v®veMaxPWMDown
-
v®veMšPWM
)

	)

16 
	#HeightD—dZÚe
 1

	)

17 
	#S‹pPWMUp
 500

	)

18 
	#S‹pPWMDown
 500

	)

20 
ušt16
 
	gStİMÙÜFÏg
;

27 
	$S¹HubInv”‹r
(){

28 
sšt16
 
tmpRPM
;

29 
sšt16
 
£tRPM
;

31 if(*
šputHyd¿ulicMÙÜStusBy‹
&
KeyPum³CŒlWÜdSaãStİ
) {

32 *
ouutHyd¿ulicMÙÜCÚŒŞWÜd
=0x0000;

33 
HubSysTick
=8;

35 *
ouutHyd¿ulicMÙÜCÚŒŞWÜd
=0x0001;

37 if(
HubMode
==
KeyHubModeHeb’
è
£tRPM
=*
šputDeçuÉHyd¿ulicMÙÜRPM
;

38 if(
HubMode
==
KeyHubModeSšk’
è
£tRPM
=*
šputDeçuÉHyd¿ulicMÙÜRPM
/3;

39 {
£tRPM
=0;
HubSysTick
=8;}

41 *
ouutS‘Hyd¿ulicMÙÜS³ed
=
£tRPM
;

43 if((*
ouutS‘By·ssV®ve
&
PšCÚŒŞWÜdTe¡Mode
)==0){

44 if(
HubSysTick
==0è*
ouutS‘By·ssV®ve
=(*outputSetBypassValve&0xffff0000)+0x00000001;

45 *
ouutS‘By·ssV®ve
&=0xffff0000;

48 
	}
}

56 
	$StİHubInv”‹r
(){

57 if((*
ouutS‘By·ssV®ve
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetBypassValve&=0xffff0000;

58 *
ouutHyd¿ulicMÙÜCÚŒŞWÜd
=0x0000;

59 
HubSysTick
=8;

60 
	}
}

68 
æßt32
 
	$MaxHubDiff
(
ušt8
 
iAx–
){

69 
æßt32
 
»sV®ue
;

70 
æßt32
 
tmp
;

71 
æßt32
 
k
;

73 
k
=1.0;

74 if(
iAx–
==1){

75 
»sV®ue
=(
æßt32
)(*
ouutAx–11HubAùu®Height
)-(æßt32)(*
ouutAx–12HubAùu®Height
);

76 if(
»sV®ue
<0.0)  0.0;

77 
tmp
=(
æßt32
)(*
ouutAx–11HubAùu®Height
)-(æßt32)(*
ouutAx–21HubAùu®Height
);

78 if(
»sV®ue
<
tmp
)„esValue=tmp;

79 
tmp
=(
æßt32
)(*
ouutAx–11HubAùu®Height
)-(æßt32)(*
ouutAx–22HubAùu®Height
);

80 if(
»sV®ue
<
tmp
)„esValue=tmp;

81  
»sV®ue
;

85 if(
iAx–
==2){

86 
»sV®ue
=(
æßt32
)(*
ouutAx–12HubAùu®Height
)-(æßt32)(*
ouutAx–11HubAùu®Height
);

87  (
»sV®ue
*
k
);

89 if(
iAx–
==3){

90 
»sV®ue
=(
æßt32
)(*
ouutAx–21HubAùu®Height
)-(æßt32)(*
ouutAx–11HubAùu®Height
);

91  (
»sV®ue
*
k
);

93 if(
iAx–
==4){

94 
»sV®ue
=(
æßt32
)(*
ouutAx–22HubAùu®Height
)-(æßt32)(*
ouutAx–11HubAùu®Height
);

95  (
»sV®ue
*
k
);

97 
	}
}

105 
	$S‘HubHeight
(){

106 
ušt8
 
£tæag
;

107 
ušt8
 
§m¶šg¿‹
;

108 
ušt16
 
heb’FÏg
,
noAddFÏg
;

109 
æßt32
 
tmp
;

110 
æßt32
 
MašR©e
;

112 
heb’FÏg
=1;

113 
§m¶šg¿‹
=5;

114 
MašR©e
=0.4;

116 if(
£tæag
==
§m¶šg¿‹
){

117 
£tæag
=0;

118 if(
HubMode
==
KeyHubModeHeb’
){

119 
noAddFÏg
=0;

120 if((
HubVœtu®Height
-
Ax–11HubS‘Height
)>5.0è
noAddFÏg
=1;

121 if((
HubVœtu®Height
-
Ax–12HubS‘Height
)>5.0è
noAddFÏg
=1;

122 if((
HubVœtu®Height
-
Ax–21HubS‘Height
)>5.0è
noAddFÏg
=1;

123 if((
HubVœtu®Height
-
Ax–22HubS‘Height
)>5.0è
noAddFÏg
=1;

124 if(
noAddFÏg
è*
ouutHubStus
|=
KeyHubToMa¡”S‘HeightNoAdd
;

125 *
ouutHubStus
&=~
KeyHubToMa¡”S‘HeightNoAdd
;

127 if((
HubVœtu®Height
-
Ax–11HubS‘Height
)>0.0){

128 
tmp
=(
HubVœtu®Height
-(
æßt32
)(*
ouutAx–11HubAùu®Height
))*0.5;

129 if(
tmp
>5.0)mp=5.0;

130 
tmp
=
MašR©e
*tmp-(1.0-MašR©e)*
	`MaxHubDiff
(1);

131 if(
tmp
>5.0)mp=5.0;

132 if(
tmp
<=0.5)mp=0.5;

133 
Ax–11HubS‘Height
+=
tmp
;

135 if((
HubVœtu®Height
-
Ax–12HubS‘Height
)>0.0){

136 
tmp
=(
HubVœtu®Height
-(
æßt32
)(*
ouutAx–12HubAùu®Height
))*0.5;

137 if(
tmp
>5.0)mp=5.0;

138 
tmp
=
MašR©e
*tmp-(1.0-MašR©e)*
	`MaxHubDiff
(2);

139 if(
tmp
>5.0)mp=5.0;

140 if(
tmp
<=0.5)mp=0.5;

141 
Ax–12HubS‘Height
+=
tmp
;

143 if((
HubVœtu®Height
-
Ax–21HubS‘Height
)>0.0){

144 
tmp
=(
HubVœtu®Height
-(
æßt32
)(*
ouutAx–21HubAùu®Height
))*0.5;

145 if(
tmp
>5.0)mp=5.0;

146 
tmp
=
MašR©e
*tmp-(1.0-MašR©e)*
	`MaxHubDiff
(3);

147 if(
tmp
>5.0)mp=5.0;

148 if(
tmp
<=0.5)mp=0.5;

149 
Ax–21HubS‘Height
+=
tmp
;

151 if((
HubVœtu®Height
-
Ax–22HubS‘Height
)>0.0){

152 
tmp
=(
HubVœtu®Height
-(
æßt32
)(*
ouutAx–22HubAùu®Height
))*0.5;

153 if(
tmp
>5.0)mp=5.0;

154 
tmp
=
MašR©e
*tmp-(1.0-MašR©e)*
	`MaxHubDiff
(4);

155 if(
tmp
>5.0)mp=5.0;

156 if(
tmp
<=0.5)mp=0.5;

157 
Ax–22HubS‘Height
+=
tmp
;

160 if(
HubMode
==
KeyHubModeSšk’
){

161 if(
CÚŒŞËrD©’Ax–11
.
ek
<-5.0è
heb’FÏg
=0;

162 if(
CÚŒŞËrD©’Ax–12
.
ek
<-5.0è
heb’FÏg
=0;

163 if(
CÚŒŞËrD©’Ax–21
.
ek
<-5.0è
heb’FÏg
=0;

164 if(
CÚŒŞËrD©’Ax–22
.
ek
<-5.0è
heb’FÏg
=0;

166 
noAddFÏg
=0;

167 if((
HubVœtu®Height
-
Ax–11HubS‘Height
)<-5.0è
noAddFÏg
=1;

168 if((
HubVœtu®Height
-
Ax–12HubS‘Height
)<-5.0è
noAddFÏg
=1;

169 if((
HubVœtu®Height
-
Ax–21HubS‘Height
)<-5.0è
noAddFÏg
=1;

170 if((
HubVœtu®Height
-
Ax–22HubS‘Height
)<-5.0è
noAddFÏg
=1;

171 if(
noAddFÏg
è*
ouutHubStus
|=
KeyHubToMa¡”S‘HeightNoAdd
;

172 *
ouutHubStus
&=~
KeyHubToMa¡”S‘HeightNoAdd
;

174 if((
HubVœtu®Height
-
Ax–11HubS‘Height
)<-1.0){

175 if(
heb’FÏg
è
Ax–11HubS‘Height
-=1.0;

177 if((
HubVœtu®Height
-
Ax–12HubS‘Height
)<-1.0){

178 if(
heb’FÏg
è
Ax–12HubS‘Height
-=1.0;

180 if((
HubVœtu®Height
-
Ax–21HubS‘Height
)<-1.0){

181 if(
heb’FÏg
è
Ax–21HubS‘Height
-=1.0;

183 if((
HubVœtu®Height
-
Ax–22HubS‘Height
)<-1.0){

184 if(
heb’FÏg
è
Ax–22HubS‘Height
-=1.0;

188 if(
£tæag
<
§m¶šg¿‹
) setflag++;

190 
	}
}

198 
	$G‘HubM—su»m’t
(){

199 
æßt32
 
HubHeightOldV®ve
[4];

200 
æßt32
 
S’sÜV®ue
;

201 
æßt32
 
V®ue
;

203 
S’sÜV®ue
=(
æßt32
)(*
šputHeightS’sÜ11
);

204 
V®ue
=
S’sÜV®ue
*
HubS”sÜ11FaùA
+
HubS”sÜ11FaùB
;

205 *
ouutAx–11HubAùu®Height
=(
ušt32
)
V®ue
;

206 
Ax–11HubS³ed
=(
V®ue
-
HubHeightOldV®ve
[0])/
Ts_Hub
;

207 *
ouutS³edHubAx–11
=(
sšt32
)(
Ax–11HubS³ed
*1000.0);

208 
HubHeightOldV®ve
[0]=
V®ue
;

211 
S’sÜV®ue
=(
æßt32
)(*
šputHeightS’sÜ12
);

212 
V®ue
=
S’sÜV®ue
*
HubS”sÜ12FaùA
+
HubS”sÜ12FaùB
;

213 *
ouutAx–12HubAùu®Height
=(
ušt32
)
V®ue
;

214 
Ax–12HubS³ed
=(
V®ue
-
HubHeightOldV®ve
[1])/
Ts_Hub
;

215 *
ouutS³edHubAx–12
=(
sšt32
)(
Ax–12HubS³ed
*1000.0);

216 
HubHeightOldV®ve
[1]=
V®ue
;

218 
S’sÜV®ue
=(
æßt32
)(*
šputHeightS’sÜ21
);

219 
V®ue
=
S’sÜV®ue
*
HubS”sÜ21FaùA
+
HubS”sÜ21FaùB
;

220 *
ouutAx–21HubAùu®Height
=(
ušt32
)
V®ue
;

221 
Ax–21HubS³ed
=(
V®ue
-
HubHeightOldV®ve
[2])/
Ts_Hub
;

222 *
ouutS³edHubAx–21
=(
sšt32
)(
Ax–21HubS³ed
*1000.0);

223 
HubHeightOldV®ve
[2]=
V®ue
;

225 
S’sÜV®ue
=(
æßt32
)(*
šputHeightS’sÜ22
);

226 
V®ue
=
S’sÜV®ue
*
HubS”sÜ22FaùA
+
HubS”sÜ22FaùB
;

227 *
ouutAx–22HubAùu®Height
=(
ušt32
)
V®ue
;

228 
Ax–22HubS³ed
=(
V®ue
-
HubHeightOldV®ve
[3])/
Ts_Hub
;

229 *
ouutS³edHubAx–22
=(
sšt32
)(
Ax–22HubS³ed
*1000.0);

230 
HubHeightOldV®ve
[3]=
V®ue
;

232 *
ouutHubHeight
=(
ušt8
)*
ouutAx–11HubAùu®Height
;

233 
	}
}

241 
	$»£tAÎCÚŒŞËr
(){

242 
CÚŒŞËrD©’Ax–11
.
ek_1
=0.0;

243 
CÚŒŞËrD©’Ax–12
.
ek_1
=0.0;

244 
CÚŒŞËrD©’Ax–21
.
ek_1
=0.0;

245 
CÚŒŞËrD©’Ax–22
.
ek_1
=0.0;

246 
CÚŒŞËrD©’Ax–11
.
yk_1
=0.0;

247 
CÚŒŞËrD©’Ax–12
.
yk_1
=0.0;

248 
CÚŒŞËrD©’Ax–21
.
yk_1
=0.0;

249 
CÚŒŞËrD©’Ax–22
.
yk_1
=0.0;

251 if((*
ouutS‘PWMV®veHubRai£Ax–11
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubRaiseAxel11&=0xffff0000;

252 if((*
ouutS‘PWMV®veHubRai£Ax–12
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubRaiseAxel12&=0xffff0000;

253 if((*
ouutS‘PWMV®veHubRai£Ax–21
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubRaiseAxel21&=0xffff0000;

254 if((*
ouutS‘PWMV®veHubRai£Ax–22
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubRaiseAxel22&=0xffff0000;

256 if((*
ouutS‘PWMV®veHubSškAx–11
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubSinkAxel11&=0xffff0000;

257 if((*
ouutS‘PWMV®veHubSškAx–12
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubSinkAxel12&=0xffff0000;

258 if((*
ouutS‘PWMV®veHubSškAx–21
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubSinkAxel21&=0xffff0000;

259 if((*
ouutS‘PWMV®veHubSškAx–22
&
PšCÚŒŞWÜdTe¡Mode
)==0) *outputSetPWMValveHubSinkAxel22&=0xffff0000;

260 
	}
}

267 
	$CÚŒŞËrAx–11
(){

268 
æßt32
 
D–Yk
;

269 
æßt32
 
D–Yi
;

270 
ušt32
 
PWMOuut
;

272 
CÚŒŞËrD©’Ax–11
.
ek
=
Ax–11HubS‘Height
-(
æßt32
)(*
ouutAx–11HubAùu®Height
);

273 if(
HubMode
==
KeyHubModeHeb’
){

274 if(
CÚŒŞËrD©’Ax–11
.
ek
<
HeightD—dZÚe
){

275 
CÚŒŞËrD©’Ax–11
.
ek
=0.0;

276 
CÚŒŞËrD©’Ax–11
.
yk_1
=0.0;

277 
StİMÙÜFÏg
++;

279 
D–Yk
=
CÚŒŞËrD©’Ax–11
.
kp
*(CÚŒŞËrD©’Ax–11.
ek
-CÚŒŞËrD©’Ax–11.
ek_1
);

280 
D–Yi
=
CÚŒŞËrD©’Ax–11
.
ek
*CÚŒŞËrD©’Ax–11.
ki
*
Ts_Hub
;

281 if(
CÚŒŞËrD©’Ax–11
.
yk_1
+
D–Yk
+
D–Yi
>=1.0èCÚŒŞËrD©’Ax–11.
yk
=1.0;

282 if(
CÚŒŞËrD©’Ax–11
.
yk_1
+
D–Yk
+
D–Yi
<=0.0èCÚŒŞËrD©’Ax–11.
yk
=0.0;

283 
CÚŒŞËrD©’Ax–11
.
yk
=CÚŒŞËrD©’Ax–11.
yk_1
+
D–Yk
+
D–Yi
;

285 if(
CÚŒŞËrD©’Ax–11
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMUp
*CÚŒŞËrD©’Ax–11.yk+
v®veMšPWM
);

286 
PWMOuut
=
v®veD—dPWM
;

288 if(
PWMOuut
>
CÚŒŞËrD©’Ax–11
.
PWM1
èCÚŒŞËrD©’Ax–11.PWM1+=
S‹pPWMUp
;

289 if(
PWMOuut
<
CÚŒŞËrD©’Ax–11
.
PWM1
èCÚŒŞËrD©’Ax–11.PWM1-=
S‹pPWMUp
;

290 if(
CÚŒŞËrD©’Ax–11
.
yk
==0.0èCÚŒŞËrD©’Ax–11.
PWM1
=
PWMOuut
;

292 if((*
ouutS‘PWMV®veHubRai£Ax–11
&
PšCÚŒŞWÜdTe¡Mode
)==0)

293 *
ouutS‘PWMV®veHubRai£Ax–11
=(*ouutS‘PWMV®veHubRai£Ax–11&0xffff0000)+
CÚŒŞËrD©’Ax–11
.
PWM1
;

294 if((*
ouutS‘PWMV®veHubSškAx–11
&
PšCÚŒŞWÜdTe¡Mode
)==0)

295 *
ouutS‘PWMV®veHubSškAx–11
&=0xffff0000;

297 if(
HubMode
==
KeyHubModeSšk’
){

298 if(
CÚŒŞËrD©’Ax–11
.
ek
>(0.0-
HeightD—dZÚe
)){

299 
CÚŒŞËrD©’Ax–11
.
ek
=0.0;

300 
CÚŒŞËrD©’Ax–11
.
yk_1
=0.0;

301 
StİMÙÜFÏg
++;

303 
D–Yk
=
CÚŒŞËrD©’Ax–11
.
kp
*(CÚŒŞËrD©’Ax–11.
ek
-CÚŒŞËrD©’Ax–11.
ek_1
);

304 
D–Yi
=
CÚŒŞËrD©’Ax–11
.
ek
*CÚŒŞËrD©’Ax–11.
ki
*
Ts_Hub
;

305 if(
CÚŒŞËrD©’Ax–11
.
yk_1
+
D–Yk
+
D–Yi
>=0.0èCÚŒŞËrD©’Ax–11.
yk
=0.0;

306 if(
CÚŒŞËrD©’Ax–11
.
yk_1
+
D–Yk
+
D–Yi
<=-1.0èCÚŒŞËrD©’Ax–11.
yk
=-1.0;

307 
CÚŒŞËrD©’Ax–11
.
yk
=CÚŒŞËrD©’Ax–11.
yk_1
+
D–Yk
+
D–Yi
;

309 if(
CÚŒŞËrD©’Ax–11
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMDown
*(0.0-CÚŒŞËrD©’Ax–11.yk)+
v®veMšPWM
);

310 
PWMOuut
=
v®veD—dPWM
;

312 if(
PWMOuut
>
CÚŒŞËrD©’Ax–11
.
PWM2
èCÚŒŞËrD©’Ax–11.PWM2+=
S‹pPWMDown
;

313 if(
PWMOuut
<
CÚŒŞËrD©’Ax–11
.
PWM2
èCÚŒŞËrD©’Ax–11.PWM2-=
S‹pPWMDown
;

314 if(
CÚŒŞËrD©’Ax–11
.
yk
==0.0èCÚŒŞËrD©’Ax–11.
PWM2
=
PWMOuut
;

316 if((*
ouutS‘PWMV®veHubRai£Ax–11
&
PšCÚŒŞWÜdTe¡Mode
)==0)

317 *
ouutS‘PWMV®veHubRai£Ax–11
&=0xffff0000;

318 if((*
ouutS‘PWMV®veHubSškAx–11
&
PšCÚŒŞWÜdTe¡Mode
)==0)

319 *
ouutS‘PWMV®veHubSškAx–11
=(*ouutS‘PWMV®veHubSškAx–11&0xffff0000)+
CÚŒŞËrD©’Ax–11
.
PWM2
;

321 
CÚŒŞËrD©’Ax–11
.
ek_1
=CÚŒŞËrD©’Ax–11.
ek
;

322 
CÚŒŞËrD©’Ax–11
.
yk_1
=CÚŒŞËrD©’Ax–11.
yk
;

323 
	}
}

331 
	$CÚŒŞËrAx–12
(){

332 
æßt32
 
D–Yk
;

333 
æßt32
 
D–Yi
;

334 
ušt32
 
PWMOuut
;

336 
CÚŒŞËrD©’Ax–12
.
ek
=
Ax–12HubS‘Height
-(
æßt32
)(*
ouutAx–12HubAùu®Height
);

337 if(
HubMode
==
KeyHubModeHeb’
){

338 if(
CÚŒŞËrD©’Ax–12
.
ek
<
HeightD—dZÚe
){

339 
CÚŒŞËrD©’Ax–12
.
ek
=0.0;

340 
CÚŒŞËrD©’Ax–12
.
yk_1
=0.0;

341 
StİMÙÜFÏg
++;

343 
D–Yk
=
CÚŒŞËrD©’Ax–12
.
kp
*(CÚŒŞËrD©’Ax–12.
ek
-CÚŒŞËrD©’Ax–12.
ek_1
);

344 
D–Yi
=
CÚŒŞËrD©’Ax–12
.
ek
*CÚŒŞËrD©’Ax–12.
ki
*
Ts_Hub
;

345 if(
CÚŒŞËrD©’Ax–12
.
yk_1
+
D–Yk
+
D–Yi
>=1.0èCÚŒŞËrD©’Ax–12.
yk
=1.0;

346 if(
CÚŒŞËrD©’Ax–12
.
yk_1
+
D–Yk
+
D–Yi
<=0.0èCÚŒŞËrD©’Ax–12.
yk
=0.0;

347 
CÚŒŞËrD©’Ax–12
.
yk
=CÚŒŞËrD©’Ax–12.
yk_1
+
D–Yk
+
D–Yi
;

349 if(
CÚŒŞËrD©’Ax–12
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMUp
*CÚŒŞËrD©’Ax–12.yk+
v®veMšPWM
);

350 
PWMOuut
=
v®veD—dPWM
;

352 if(
PWMOuut
>
CÚŒŞËrD©’Ax–12
.
PWM1
èCÚŒŞËrD©’Ax–12.PWM1+=
S‹pPWMUp
;

353 if(
PWMOuut
<
CÚŒŞËrD©’Ax–12
.
PWM1
èCÚŒŞËrD©’Ax–12.PWM1-=
S‹pPWMUp
;

354 if(
CÚŒŞËrD©’Ax–12
.
yk
==0.0èCÚŒŞËrD©’Ax–12.
PWM1
=
PWMOuut
;

356 if((*
ouutS‘PWMV®veHubRai£Ax–12
&
PšCÚŒŞWÜdTe¡Mode
)==0)

357 *
ouutS‘PWMV®veHubRai£Ax–12
=(*ouutS‘PWMV®veHubRai£Ax–12&0xffff0000)+
CÚŒŞËrD©’Ax–12
.
PWM1
;

358 if((*
ouutS‘PWMV®veHubSškAx–12
&
PšCÚŒŞWÜdTe¡Mode
)==0)

359 *
ouutS‘PWMV®veHubSškAx–12
&=0xffff0000;

361 if(
HubMode
==
KeyHubModeSšk’
){

362 if(
CÚŒŞËrD©’Ax–12
.
ek
>(0.0-
HeightD—dZÚe
)){

363 
CÚŒŞËrD©’Ax–12
.
ek
=0.0;

364 
CÚŒŞËrD©’Ax–12
.
yk_1
=0.0;

365 
StİMÙÜFÏg
++;

367 
D–Yk
=
CÚŒŞËrD©’Ax–12
.
kp
*(CÚŒŞËrD©’Ax–12.
ek
-CÚŒŞËrD©’Ax–12.
ek_1
);

368 
D–Yi
=
CÚŒŞËrD©’Ax–12
.
ek
*CÚŒŞËrD©’Ax–12.
ki
*
Ts_Hub
;

369 if(
CÚŒŞËrD©’Ax–12
.
yk_1
+
D–Yk
+
D–Yi
>=0.0èCÚŒŞËrD©’Ax–12.
yk
=0.0;

370 if(
CÚŒŞËrD©’Ax–12
.
yk_1
+
D–Yk
+
D–Yi
<=-1.0èCÚŒŞËrD©’Ax–12.
yk
=-1.0;

371 
CÚŒŞËrD©’Ax–12
.
yk
=CÚŒŞËrD©’Ax–12.
yk_1
+
D–Yk
+
D–Yi
;

373 if(
CÚŒŞËrD©’Ax–12
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMDown
*(0.0-CÚŒŞËrD©’Ax–12.yk)+
v®veMšPWM
);

374 
PWMOuut
=
v®veD—dPWM
;

376 if(
PWMOuut
>
CÚŒŞËrD©’Ax–12
.
PWM2
èCÚŒŞËrD©’Ax–12.PWM2+=
S‹pPWMDown
;

377 if(
PWMOuut
<
CÚŒŞËrD©’Ax–12
.
PWM2
èCÚŒŞËrD©’Ax–12.PWM2-=
S‹pPWMDown
;

378 if(
CÚŒŞËrD©’Ax–12
.
yk
==0.0èCÚŒŞËrD©’Ax–12.
PWM2
=
PWMOuut
;

380 if((*
ouutS‘PWMV®veHubRai£Ax–12
&
PšCÚŒŞWÜdTe¡Mode
)==0)

381 *
ouutS‘PWMV®veHubRai£Ax–12
&=0xffff0000;

382 if((*
ouutS‘PWMV®veHubSškAx–12
&
PšCÚŒŞWÜdTe¡Mode
)==0)

383 *
ouutS‘PWMV®veHubSškAx–12
=(*ouutS‘PWMV®veHubSškAx–12&0xffff0000)+
CÚŒŞËrD©’Ax–12
.
PWM2
;

385 
CÚŒŞËrD©’Ax–12
.
ek_1
=CÚŒŞËrD©’Ax–12.
ek
;

386 
CÚŒŞËrD©’Ax–12
.
yk_1
=CÚŒŞËrD©’Ax–12.
yk
;

387 
	}
}

395 
	$CÚŒŞËrAx–21
(){

396 
æßt32
 
D–Yk
;

397 
æßt32
 
D–Yi
;

398 
ušt32
 
PWMOuut
;

400 
CÚŒŞËrD©’Ax–21
.
ek
=
Ax–21HubS‘Height
-(
æßt32
)(*
ouutAx–21HubAùu®Height
);

401 if(
HubMode
==
KeyHubModeHeb’
){

402 if(
CÚŒŞËrD©’Ax–21
.
ek
<
HeightD—dZÚe
){

403 
CÚŒŞËrD©’Ax–21
.
ek
=0.0;

404 
CÚŒŞËrD©’Ax–21
.
yk_1
=0.0;

405 
StİMÙÜFÏg
++;

407 
D–Yk
=
CÚŒŞËrD©’Ax–21
.
kp
*(CÚŒŞËrD©’Ax–21.
ek
-CÚŒŞËrD©’Ax–21.
ek_1
);

408 
D–Yi
=
CÚŒŞËrD©’Ax–21
.
ek
*CÚŒŞËrD©’Ax–21.
ki
*
Ts_Hub
;

409 if(
CÚŒŞËrD©’Ax–21
.
yk_1
+
D–Yk
+
D–Yi
>=1.0èCÚŒŞËrD©’Ax–21.
yk
=1.0;

410 if(
CÚŒŞËrD©’Ax–21
.
yk_1
+
D–Yk
+
D–Yi
<=0.0èCÚŒŞËrD©’Ax–21.
yk
=0.0;

411 
CÚŒŞËrD©’Ax–21
.
yk
=CÚŒŞËrD©’Ax–21.
yk_1
+
D–Yk
+
D–Yi
;

413 if(
CÚŒŞËrD©’Ax–21
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMUp
*CÚŒŞËrD©’Ax–21.yk+
v®veMšPWM
);

414 
PWMOuut
=
v®veD—dPWM
;

416 if(
PWMOuut
>
CÚŒŞËrD©’Ax–21
.
PWM1
èCÚŒŞËrD©’Ax–21.PWM1+=
S‹pPWMUp
;

417 if(
PWMOuut
<
CÚŒŞËrD©’Ax–21
.
PWM1
èCÚŒŞËrD©’Ax–21.PWM1-=
S‹pPWMUp
;

418 if(
CÚŒŞËrD©’Ax–21
.
yk
==0.0èCÚŒŞËrD©’Ax–21.
PWM1
=
PWMOuut
;

420 if((*
ouutS‘PWMV®veHubRai£Ax–21
&
PšCÚŒŞWÜdTe¡Mode
)==0)

421 *
ouutS‘PWMV®veHubRai£Ax–21
=(*ouutS‘PWMV®veHubRai£Ax–21&0xffff0000)+
CÚŒŞËrD©’Ax–21
.
PWM1
;

422 if((*
ouutS‘PWMV®veHubSškAx–21
&
PšCÚŒŞWÜdTe¡Mode
)==0)

423 *
ouutS‘PWMV®veHubSškAx–21
&=0xffff0000;

425 if(
HubMode
==
KeyHubModeSšk’
){

426 if(
CÚŒŞËrD©’Ax–21
.
ek
>(0.0-
HeightD—dZÚe
)){

427 
CÚŒŞËrD©’Ax–21
.
ek
=0.0;

428 
CÚŒŞËrD©’Ax–21
.
yk_1
=0.0;

429 
StİMÙÜFÏg
++;

431 
D–Yk
=
CÚŒŞËrD©’Ax–21
.
kp
*(CÚŒŞËrD©’Ax–21.
ek
-CÚŒŞËrD©’Ax–21.
ek_1
);

432 
D–Yi
=
CÚŒŞËrD©’Ax–21
.
ek
*CÚŒŞËrD©’Ax–21.
ki
*
Ts_Hub
;

433 if(
CÚŒŞËrD©’Ax–21
.
yk_1
+
D–Yk
+
D–Yi
>=0.0èCÚŒŞËrD©’Ax–21.
yk
=0.0;

434 if(
CÚŒŞËrD©’Ax–21
.
yk_1
+
D–Yk
+
D–Yi
<=-1.0èCÚŒŞËrD©’Ax–21.
yk
=-1.0;

435 
CÚŒŞËrD©’Ax–21
.
yk
=CÚŒŞËrD©’Ax–21.
yk_1
+
D–Yk
+
D–Yi
;

437 if(
CÚŒŞËrD©’Ax–21
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMDown
*(0.0-CÚŒŞËrD©’Ax–21.yk)+
v®veMšPWM
);

438 
PWMOuut
=
v®veD—dPWM
;

440 if(
PWMOuut
>
CÚŒŞËrD©’Ax–21
.
PWM2
èCÚŒŞËrD©’Ax–21.PWM2+=
S‹pPWMDown
;

441 if(
PWMOuut
<
CÚŒŞËrD©’Ax–21
.
PWM2
èCÚŒŞËrD©’Ax–21.PWM2-=
S‹pPWMDown
;

442 if(
CÚŒŞËrD©’Ax–21
.
yk
==0.0èCÚŒŞËrD©’Ax–21.
PWM2
=
PWMOuut
;

444 if((*
ouutS‘PWMV®veHubRai£Ax–21
&
PšCÚŒŞWÜdTe¡Mode
)==0)

445 *
ouutS‘PWMV®veHubRai£Ax–21
&=0xffff0000;

446 if((*
ouutS‘PWMV®veHubSškAx–21
&
PšCÚŒŞWÜdTe¡Mode
)==0)

447 *
ouutS‘PWMV®veHubSškAx–21
=(*ouutS‘PWMV®veHubSškAx–21&0xffff0000)+
CÚŒŞËrD©’Ax–21
.
PWM2
;

449 
CÚŒŞËrD©’Ax–21
.
ek_1
=CÚŒŞËrD©’Ax–21.
ek
;

450 
CÚŒŞËrD©’Ax–21
.
yk_1
=CÚŒŞËrD©’Ax–21.
yk
;

451 
	}
}

459 
	$CÚŒŞËrAx–22
(){

460 
æßt32
 
D–Yk
;

461 
æßt32
 
D–Yi
;

462 
ušt32
 
PWMOuut
;

464 
CÚŒŞËrD©’Ax–22
.
ek
=
Ax–22HubS‘Height
-(
æßt32
)(*
ouutAx–22HubAùu®Height
);

465 if(
HubMode
==
KeyHubModeHeb’
){

466 if(
CÚŒŞËrD©’Ax–22
.
ek
<
HeightD—dZÚe
){

467 
CÚŒŞËrD©’Ax–22
.
ek
=0.0;

468 
CÚŒŞËrD©’Ax–22
.
yk_1
=0.0;

469 
StİMÙÜFÏg
++;

471 
D–Yk
=
CÚŒŞËrD©’Ax–22
.
kp
*(CÚŒŞËrD©’Ax–22.
ek
-CÚŒŞËrD©’Ax–22.
ek_1
);

472 
D–Yi
=
CÚŒŞËrD©’Ax–22
.
ek
*CÚŒŞËrD©’Ax–22.
ki
*
Ts_Hub
;

473 if(
CÚŒŞËrD©’Ax–22
.
yk_1
+
D–Yk
+
D–Yi
>=1.0èCÚŒŞËrD©’Ax–22.
yk
=1.0;

474 if(
CÚŒŞËrD©’Ax–22
.
yk_1
+
D–Yk
+
D–Yi
<=0.0èCÚŒŞËrD©’Ax–22.
yk
=0.0;

475 
CÚŒŞËrD©’Ax–22
.
yk
=CÚŒŞËrD©’Ax–22.
yk_1
+
D–Yk
+
D–Yi
;

477 if(
CÚŒŞËrD©’Ax–22
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMUp
*CÚŒŞËrD©’Ax–22.yk+
v®veMšPWM
);

478 
PWMOuut
=
v®veD—dPWM
;

480 if(
PWMOuut
>
CÚŒŞËrD©’Ax–22
.
PWM1
èCÚŒŞËrD©’Ax–22.PWM1+=
S‹pPWMUp
;

481 if(
PWMOuut
<
CÚŒŞËrD©’Ax–22
.
PWM1
èCÚŒŞËrD©’Ax–22.PWM1-=
S‹pPWMUp
;

482 if(
CÚŒŞËrD©’Ax–22
.
yk
==0.0èCÚŒŞËrD©’Ax–22.
PWM1
=
PWMOuut
;

484 if((*
ouutS‘PWMV®veHubRai£Ax–22
&
PšCÚŒŞWÜdTe¡Mode
)==0)

485 *
ouutS‘PWMV®veHubRai£Ax–22
=(*ouutS‘PWMV®veHubRai£Ax–22&0xffff0000)+
CÚŒŞËrD©’Ax–22
.
PWM1
;

486 if((*
ouutS‘PWMV®veHubSškAx–22
&
PšCÚŒŞWÜdTe¡Mode
)==0)

487 *
ouutS‘PWMV®veHubSškAx–22
&=0xffff0000;

489 if(
HubMode
==
KeyHubModeSšk’
){

490 if(
CÚŒŞËrD©’Ax–22
.
ek
>(0.0-
HeightD—dZÚe
)){

491 
CÚŒŞËrD©’Ax–22
.
ek
=0.0;

492 
CÚŒŞËrD©’Ax–22
.
yk_1
=0.0;

493 
StİMÙÜFÏg
++;

495 
D–Yk
=
CÚŒŞËrD©’Ax–22
.
kp
*(CÚŒŞËrD©’Ax–22.
ek
-CÚŒŞËrD©’Ax–22.
ek_1
);

496 
D–Yi
=
CÚŒŞËrD©’Ax–22
.
ek
*CÚŒŞËrD©’Ax–22.
ki
*
Ts_Hub
;

497 if(
CÚŒŞËrD©’Ax–22
.
yk_1
+
D–Yk
+
D–Yi
>=0.0èCÚŒŞËrD©’Ax–22.
yk
=0.0;

498 if(
CÚŒŞËrD©’Ax–22
.
yk_1
+
D–Yk
+
D–Yi
<=-1.0èCÚŒŞËrD©’Ax–22.
yk
=-1.0;

499 
CÚŒŞËrD©’Ax–22
.
yk
=CÚŒŞËrD©’Ax–22.
yk_1
+
D–Yk
+
D–Yi
;

501 if(
CÚŒŞËrD©’Ax–22
.
yk
!=0.0è
PWMOuut
=(
ušt32
)(
v®veDiffPWMDown
*(0.0-CÚŒŞËrD©’Ax–22.yk)+
v®veMšPWM
);

502 
PWMOuut
=
v®veD—dPWM
;

504 if(
PWMOuut
>
CÚŒŞËrD©’Ax–22
.
PWM2
èCÚŒŞËrD©’Ax–22.PWM2+=
S‹pPWMDown
;

505 if(
PWMOuut
<
CÚŒŞËrD©’Ax–22
.
PWM2
èCÚŒŞËrD©’Ax–22.PWM2-=
S‹pPWMDown
;

506 if(
CÚŒŞËrD©’Ax–22
.
yk
==0.0èCÚŒŞËrD©’Ax–22.
PWM2
=
PWMOuut
;

508 if((*
ouutS‘PWMV®veHubRai£Ax–22
&
PšCÚŒŞWÜdTe¡Mode
)==0)

509 *
ouutS‘PWMV®veHubRai£Ax–22
&=0xffff0000;

510 if((*
ouutS‘PWMV®veHubSškAx–22
&
PšCÚŒŞWÜdTe¡Mode
)==0)

511 *
ouutS‘PWMV®veHubSškAx–22
=(*ouutS‘PWMV®veHubSškAx–22&0xffff0000)+
CÚŒŞËrD©’Ax–22
.
PWM2
;

513 
CÚŒŞËrD©’Ax–22
.
ek_1
=CÚŒŞËrD©’Ax–22.
ek
;

514 
CÚŒŞËrD©’Ax–22
.
yk_1
=CÚŒŞËrD©’Ax–22.
yk
;

515 
	}
}

523 
	$Task_HubSysCÚŒŞ
(* 
¬gv
){

524 
¬gv
=argv;

525 
ušt32
 
u32_Ev’ts
;

527 
	`x_os_£t_ev’t_mask
(
Ev’t_HubSysCÚŒŞ
);

529 
TRUE
){

530 
	`x_os_wa™_fÜ_ev’ts
();

531 
u32_Ev’ts
 = 
	`x_os_g‘_ev’ts
();

532 if((
u32_Ev’ts
&
Ev’t_HubSysCÚŒŞ
)!=0){

533 
	`G‘HubM—su»m’t
();

534 if(*
šputHubSy¡emCÚŒŞWÜd
&
KeyHubSy¡emEÇbË
){

535 
StİMÙÜFÏg
=0;

536 
	`S‘HubHeight
();

537 
	`CÚŒŞËrAx–11
();

538 
	`CÚŒŞËrAx–12
();

539 
	`CÚŒŞËrAx–21
();

540 
	`CÚŒŞËrAx–22
();

542 if(
HubMode
==
KeyHubModeStİ
)

543 
	`»£tAÎCÚŒŞËr
();

550 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemData.c

1 
	~"HubSy¡emD©a.h
"

4 
ušt8
 
	gHubSy¡emToggËB™
[2];

5 
ušt16
 
	gHubSy¡emToggËCouÁ”
;

8 
æßt32
 
	gTs_Hub
;

11 
ušt16
 
	gHubSysTick
;

14 
ušt8
 
	gHubMode
;

17 
æßt32
 
	gAx–11HubS‘Height
;

18 
æßt32
 
	gAx–12HubS‘Height
;

19 
æßt32
 
	gAx–21HubS‘Height
;

20 
æßt32
 
	gAx–22HubS‘Height
;

22 
æßt32
 
	gAx–11HubS³ed
;

23 
æßt32
 
	gAx–12HubS³ed
;

24 
æßt32
 
	gAx–21HubS³ed
;

25 
æßt32
 
	gAx–22HubS³ed
;

28 
æßt32
 
	gHubS”sÜ11FaùA
;

29 
æßt32
 
	gHubS”sÜ11FaùB
;

31 
æßt32
 
	gHubS”sÜ12FaùA
;

32 
æßt32
 
	gHubS”sÜ12FaùB
;

34 
æßt32
 
	gHubS”sÜ21FaùA
;

35 
æßt32
 
	gHubS”sÜ21FaùB
;

37 
æßt32
 
	gHubS”sÜ22FaùA
;

38 
æßt32
 
	gHubS”sÜ22FaùB
;

40 
æßt32
 
	gHubVœtu®Height
;

42 
Ty³HubCÚŒŞËrD©’
 
	gCÚŒŞËrD©’Ax–11
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0,0};

43 
Ty³HubCÚŒŞËrD©’
 
	gCÚŒŞËrD©’Ax–12
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0,0};

44 
Ty³HubCÚŒŞËrD©’
 
	gCÚŒŞËrD©’Ax–21
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0,0};

45 
Ty³HubCÚŒŞËrD©’
 
	gCÚŒŞËrD©’Ax–22
={0.0f,0.0f,0.0f,0.0f,0.0f,0.0f,0,0};

53 
ušt32
 *
	gšputHubSy¡emCÚŒŞWÜd
;

56 
ušt32
 *
	gšputHubSy¡emG‘SaãtyCÚŒŞWÜd
;

59 
ušt16
 *
	gšputHubSysSam¶šgTime
;

62 
ušt8
 *
	gšputHyd¿ulicMÙÜStusBy‹
;

65 
sšt16
 *
	gšputHyd¿ulicMÙÜAùu®S³ed
;

68 
ušt8
 *
	gšputHyd¿ulicInv”‹rNMTStus
;

71 
ušt8
 *
	gšputHyd¿ulicInv”‹rNodeStus
;

74 
ušt16
 *
	gšputHyd¿ulicTem³¿tu»
;

77 
sšt16
 *
	gšputDeçuÉHyd¿ulicMÙÜRPM
;

80 
ušt32
 *
	gšputMaxHeight
;

83 
ušt32
 *
	gšputMšHeight
;

86 
ušt16
 *
	gšputHeightS’sÜ11
;

87 
ušt16
 *
	gšputHeightS’sÜ12
;

88 
ušt16
 *
	gšputHeightS’sÜ21
;

89 
ušt16
 *
	gšputHeightS’sÜ22
;

92 
sšt32
 *
	gšputHeightS’sÜ11FaùA
;

93 
sšt32
 *
	gšputHeightS’sÜ11FaùB
;

94 
sšt32
 *
	gšputHeightS’sÜ11FaùC
;

95 
sšt32
 *
	gšputHeightS’sÜ11FaùD
;

96 
sšt32
 *
	gšputHeightS’sÜ12FaùA
;

97 
sšt32
 *
	gšputHeightS’sÜ12FaùB
;

98 
sšt32
 *
	gšputHeightS’sÜ12FaùC
;

99 
sšt32
 *
	gšputHeightS’sÜ12FaùD
;

100 
sšt32
 *
	gšputHeightS’sÜ21FaùA
;

101 
sšt32
 *
	gšputHeightS’sÜ21FaùB
;

102 
sšt32
 *
	gšputHeightS’sÜ21FaùC
;

103 
sšt32
 *
	gšputHeightS’sÜ21FaùD
;

104 
sšt32
 *
	gšputHeightS’sÜ22FaùA
;

105 
sšt32
 *
	gšputHeightS’sÜ22FaùB
;

106 
sšt32
 *
	gšputHeightS’sÜ22FaùC
;

107 
sšt32
 *
	gšputHeightS’sÜ22FaùD
;

110 
ušt16
 *
	gšputP»ssu»S’sÜV®ueAx–11
;

111 
ušt16
 *
	gšputP»ssu»S’sÜV®ueAx–12
;

112 
ušt16
 *
	gšputP»ssu»S’sÜV®ueAx–21
;

113 
ušt16
 *
	gšputP»ssu»S’sÜV®ueAx–22
;

114 
ušt16
 *
	gšputP»ssu»S’sÜV®ueMaš
;

117 
sšt32
 *
	gšputAx–11CÚŒŞKp
;

118 
sšt32
 *
	gšputAx–11CÚŒŞKi
;

121 
sšt32
 *
	gšputAx–12CÚŒŞKp
;

122 
sšt32
 *
	gšputAx–12CÚŒŞKi
;

125 
sšt32
 *
	gšputAx–21CÚŒŞKp
;

126 
sšt32
 *
	gšputAx–21CÚŒŞKi
;

129 
sšt32
 *
	gšputAx–22CÚŒŞKp
;

130 
sšt32
 *
	gšputAx–22CÚŒŞKi
;

136 
ušt16
 *
	gouutHyd¿ulicMÙÜCÚŒŞWÜd
;

139 
sšt16
 *
	gouutS‘Hyd¿ulicMÙÜS³ed
;

142 
ušt16
 *
	gouutHyd¿ulicInv”‹rNMT
;

145 
ušt32
 *
	gouutS‘By·ssV®ve
;

148 
ušt32
 *
	gouutAx–11HubAùu®Height
;

149 
ušt32
 *
	gouutAx–12HubAùu®Height
;

150 
ušt32
 *
	gouutAx–21HubAùu®Height
;

151 
ušt32
 *
	gouutAx–22HubAùu®Height
;

154 
sšt32
 *
	gouutS³edHubAx–11
;

155 
sšt32
 *
	gouutS³edHubAx–12
;

156 
sšt32
 *
	gouutS³edHubAx–21
;

157 
sšt32
 *
	gouutS³edHubAx–22
;

161 
sšt32
 *
	gouutP»ssu»Ax–11
;

162 
sšt32
 *
	gouutP»ssu»Ax–12
;

163 
sšt32
 *
	gouutP»ssu»Ax–21
;

164 
sšt32
 *
	gouutP»ssu»Ax–22
;

165 
sšt32
 *
	gouutP»ssu»Maš
;

168 
sšt32
 *
	gouutHubCGPosL
;

169 
sšt32
 *
	gouutHubCGPosB
;

172 
sšt32
 *
	gouutHubWeight
;

175 
ušt8
 *
	gouutHubHeight
;

178 
ušt8
 *
	gouutHubStus
;

181 
sšt32
 *
	gouutMašTem³¿tu»
;

184 
ušt32
 *
	gouutS‘PWMV®veHubRai£Ax–11
;

185 
ušt32
 *
	gouutS‘PWMV®veHubRai£Ax–12
;

186 
ušt32
 *
	gouutS‘PWMV®veHubRai£Ax–21
;

187 
ušt32
 *
	gouutS‘PWMV®veHubRai£Ax–22
;

190 
ušt32
 *
	gouutS‘PWMV®veHubSškAx–11
;

191 
ušt32
 *
	gouutS‘PWMV®veHubSškAx–12
;

192 
ušt32
 *
	gouutS‘PWMV®veHubSškAx–21
;

193 
ušt32
 *
	gouutS‘PWMV®veHubSškAx–22
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemData.h

1 #iâdeà
_HUBSYSTEMDATA_H


2 
	#_HUBSYSTEMDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	#KeyHubSy¡emNÜm®Mode
 0x00000000

	)

6 
	#KeyHubSy¡emEÇbË
 0x00000004

	)

7 
	#KeyHubSy¡emIsStİ
 0x00000008

	)

8 
	#KeyHubSy¡emTe¡Mode
 0x00000010

	)

9 
	#KeyHubSy¡emHeb’
 0x00000100

	)

10 
	#KeyHubSy¡emSšk’
 0x00000200

	)

12 
	#KeyHubSy¡emG‘SaãtyOÆySšk’
 0x00000400

	)

13 
	#KeyHubSy¡emG‘SaãtyStİ
 0x00000800

	)

15 
	#KeyHubToMa¡”IsStİ
 0x01

	)

16 
	#KeyHubToMa¡”OÆySšk’
 0x02

	)

17 
	#KeyHubToMa¡”S‘HeightNoAdd
 0x04

	)

18 
	#KeyHubToMa¡”StİReq
 0x08

	)

20 
	#KeyHubModeStİ
 0x00

	)

21 
	#KeyHubModeHeb’
 0x01

	)

22 
	#KeyHubModeSšk’
 0x02

	)

25 
	#KeyPum³CŒlWÜdSaãStİ
 0x40

	)

29 
æßt32
 
	mek
;

30 
æßt32
 
	myk
;

31 
æßt32
 
	myk_1
;

32 
æßt32
 
	mek_1
;

33 
æßt32
 
	mkp
;

34 
æßt32
 
	mki
;

35 
ušt32
 
	mPWM1
;

36 
ušt32
 
	mPWM2
;

37 }
	tTy³HubCÚŒŞËrD©’
;

39 
Ty³HubCÚŒŞËrD©’
 
CÚŒŞËrD©’Ax–11
;

40 
Ty³HubCÚŒŞËrD©’
 
CÚŒŞËrD©’Ax–12
;

41 
Ty³HubCÚŒŞËrD©’
 
CÚŒŞËrD©’Ax–21
;

42 
Ty³HubCÚŒŞËrD©’
 
CÚŒŞËrD©’Ax–22
;

45 
ušt8
 
HubSy¡emToggËB™
[2];

46 
ušt16
 
HubSy¡emToggËCouÁ”
;

49 
æßt32
 
Ts_Hub
;

52 
ušt16
 
HubSysTick
;

55 
ušt8
 
HubMode
;

58 
æßt32
 
Ax–11HubS‘Height
;

59 
æßt32
 
Ax–12HubS‘Height
;

60 
æßt32
 
Ax–21HubS‘Height
;

61 
æßt32
 
Ax–22HubS‘Height
;

63 
æßt32
 
Ax–11HubS³ed
;

64 
æßt32
 
Ax–12HubS³ed
;

65 
æßt32
 
Ax–21HubS³ed
;

66 
æßt32
 
Ax–22HubS³ed
;

69 
æßt32
 
HubS”sÜ11FaùA
;

70 
æßt32
 
HubS”sÜ11FaùB
;

72 
æßt32
 
HubS”sÜ12FaùA
;

73 
æßt32
 
HubS”sÜ12FaùB
;

75 
æßt32
 
HubS”sÜ21FaùA
;

76 
æßt32
 
HubS”sÜ21FaùB
;

78 
æßt32
 
HubS”sÜ22FaùA
;

79 
æßt32
 
HubS”sÜ22FaùB
;

81 
æßt32
 
HubVœtu®Height
;

90 
ušt32
 *
šputHubSy¡emCÚŒŞWÜd
;

93 
ušt32
 *
šputHubSy¡emG‘SaãtyCÚŒŞWÜd
;

96 
ušt16
 *
šputHubSysSam¶šgTime
;

99 
ušt8
 *
šputHyd¿ulicMÙÜStusBy‹
;

102 
sšt16
 *
šputHyd¿ulicMÙÜAùu®S³ed
;

105 
ušt8
 *
šputHyd¿ulicInv”‹rNMTStus
;

108 
ušt8
 *
šputHyd¿ulicInv”‹rNodeStus
;

111 
ušt16
 *
šputHyd¿ulicTem³¿tu»
;

114 
sšt16
 *
šputDeçuÉHyd¿ulicMÙÜRPM
;

117 
ušt32
 *
šputMaxHeight
;

120 
ušt32
 *
šputMšHeight
;

123 
ušt16
 *
šputHeightS’sÜ11
;

124 
ušt16
 *
šputHeightS’sÜ12
;

125 
ušt16
 *
šputHeightS’sÜ21
;

126 
ušt16
 *
šputHeightS’sÜ22
;

129 
sšt32
 *
šputHeightS’sÜ11FaùA
;

130 
sšt32
 *
šputHeightS’sÜ11FaùB
;

131 
sšt32
 *
šputHeightS’sÜ11FaùC
;

132 
sšt32
 *
šputHeightS’sÜ11FaùD
;

133 
sšt32
 *
šputHeightS’sÜ12FaùA
;

134 
sšt32
 *
šputHeightS’sÜ12FaùB
;

135 
sšt32
 *
šputHeightS’sÜ12FaùC
;

136 
sšt32
 *
šputHeightS’sÜ12FaùD
;

137 
sšt32
 *
šputHeightS’sÜ21FaùA
;

138 
sšt32
 *
šputHeightS’sÜ21FaùB
;

139 
sšt32
 *
šputHeightS’sÜ21FaùC
;

140 
sšt32
 *
šputHeightS’sÜ21FaùD
;

141 
sšt32
 *
šputHeightS’sÜ22FaùA
;

142 
sšt32
 *
šputHeightS’sÜ22FaùB
;

143 
sšt32
 *
šputHeightS’sÜ22FaùC
;

144 
sšt32
 *
šputHeightS’sÜ22FaùD
;

147 
ušt16
 *
šputP»ssu»S’sÜV®ueAx–11
;

148 
ušt16
 *
šputP»ssu»S’sÜV®ueAx–12
;

149 
ušt16
 *
šputP»ssu»S’sÜV®ueAx–21
;

150 
ušt16
 *
šputP»ssu»S’sÜV®ueAx–22
;

151 
ušt16
 *
šputP»ssu»S’sÜV®ueMaš
;

154 
sšt32
 *
šputAx–11CÚŒŞKp
;

155 
sšt32
 *
šputAx–11CÚŒŞKi
;

158 
sšt32
 *
šputAx–12CÚŒŞKp
;

159 
sšt32
 *
šputAx–12CÚŒŞKi
;

162 
sšt32
 *
šputAx–21CÚŒŞKp
;

163 
sšt32
 *
šputAx–21CÚŒŞKi
;

166 
sšt32
 *
šputAx–22CÚŒŞKp
;

167 
sšt32
 *
šputAx–22CÚŒŞKi
;

174 
ušt16
 *
ouutHyd¿ulicMÙÜCÚŒŞWÜd
;

177 
sšt16
 *
ouutS‘Hyd¿ulicMÙÜS³ed
;

180 
ušt16
 *
ouutHyd¿ulicInv”‹rNMT
;

183 
ušt32
 *
ouutS‘By·ssV®ve
;

186 
ušt32
 *
ouutAx–11HubAùu®Height
;

187 
ušt32
 *
ouutAx–12HubAùu®Height
;

188 
ušt32
 *
ouutAx–21HubAùu®Height
;

189 
ušt32
 *
ouutAx–22HubAùu®Height
;

192 
sšt32
 *
ouutS³edHubAx–11
;

193 
sšt32
 *
ouutS³edHubAx–12
;

194 
sšt32
 *
ouutS³edHubAx–21
;

195 
sšt32
 *
ouutS³edHubAx–22
;

198 
sšt32
 *
ouutP»ssu»Ax–11
;

199 
sšt32
 *
ouutP»ssu»Ax–12
;

200 
sšt32
 *
ouutP»ssu»Ax–21
;

201 
sšt32
 *
ouutP»ssu»Ax–22
;

202 
sšt32
 *
ouutP»ssu»Maš
;

205 
sšt32
 *
ouutHubCGPosL
;

206 
sšt32
 *
ouutHubCGPosB
;

209 
sšt32
 *
ouutHubWeight
;

212 
ušt8
 *
ouutHubHeight
;

215 
ušt8
 *
ouutHubStus
;

218 
sšt32
 *
ouutMašTem³¿tu»
;

221 
ušt32
 *
ouutS‘PWMV®veHubRai£Ax–11
;

222 
ušt32
 *
ouutS‘PWMV®veHubRai£Ax–12
;

223 
ušt32
 *
ouutS‘PWMV®veHubRai£Ax–21
;

224 
ušt32
 *
ouutS‘PWMV®veHubRai£Ax–22
;

227 
ušt32
 *
ouutS‘PWMV®veHubSškAx–11
;

228 
ušt32
 *
ouutS‘PWMV®veHubSškAx–12
;

229 
ušt32
 *
ouutS‘PWMV®veHubSškAx–21
;

230 
ušt32
 *
ouutS‘PWMV®veHubSškAx–22
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemInterface.h

1 #iâdeà
_HUBSYSTEMINTERFACE_H


2 
	#_HUBSYSTEMINTERFACE_H


	)

12 
In™IÁ”çûHubSys
();

19 
HubSysAwake
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIO.c

1 
	~"MuÉiIO.h
"

3 
	#S’sÜReã»nûVŞt
 10000

	)

5 
ušt32
 *
	gIOPÜtIÅutA¼ay
[
NumOfIÅut
];

6 
ušt32
 *
	gIOPÜtOuutA¼ay
[
NumOfOuut
];

8 
	#IÅutCfgNoCfg
 0x0000

	)

9 
	#IÅutCfgDig™®
 0x0001

	)

10 
	#IÅutCfgVŞge5V
 0x0002

	)

11 
	#IÅutCfgVŞge10V
 0x0003

	)

12 
	#IÅutCfgVŞge40V
 0x0004

	)

13 
	#IÅutCfgCu¼’t
 0x0005

	)

14 
	#IÅutCfgEv’tRisšg
 0x0006

	)

15 
	#IÅutCfgEv’tF®lšg
 0x0007

	)

16 
	#IÅutCfgEv’tBÙh
 0x0008

	)

17 
	#IÅutCfgF»quez
 0x0009

	)

18 
	#IÅutCfgInüem’l
 0x000a

	)

20 
	#OuutCfgNoCfg
 0x0000

	)

21 
	#OuutCfgDig™®
 0x0001

	)

22 
	#OuutCfgPWM
 0x0002

	)

23 
	#OuutCfgCu¼’t
 0x0003

	)

31 
	$MuÉiIOMašBßrdIn™
(){

32 
ušt16
 
iPÜt
;

33 
	`x_sys_£t_£nsÜ_suµly
(
X_SYS_SENSOR_SUPPLY_01
, 
S’sÜReã»nûVŞt
);

34 
	`x_out_»Ïy_£t_®l
(
X_ON
);

37 
iPÜt
=0;

38 
iPÜt
<15){

39 
šputCÚfig
[
iPÜt
][1]){

40 
IÅutCfgDig™®
:

41 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0],
X_IN_TYPE_DIGITAL
,0,(
X_IN_CIRCUIT_ACTIVE_HIGH
|
X_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

42 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

44 
IÅutCfgVŞge10V
:

45 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0], 
X_IN_TYPE_VOLTAGE_10V
, 
šputF‹rCfg
[iPÜt], 0u, 0u, 
NULL
);

46 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgVŞge10V
<<16;

48 
IÅutCfgCu¼’t
:

49 
	`x_š_š™
(
šputCÚfig
[
iPÜt
][0], 
X_IN_TYPE_CURRENT
, 0u, 0u, 0u, 
NULL
);

50 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgCu¼’t
<<16;

52 
IÅutCfgNoCfg
:

53 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

56 
iPÜt
++;

58 
iPÜt
=0;

60 
iPÜt
<8){

61 
ouutCÚfig
[
iPÜt
][1]){

62 
OuutCfgDig™®
:

63 
	`x_out_š™
(
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_DIGITAL
, 0u, 0u, 
NULL
);

64 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

66 
OuutCfgPWM
:

67 
	`x_out_š™
(
ouutCÚfig
[
iPÜt
][0], 
X_OUT_TYPE_PWM
, 10000u, 0u, 
NULL
);

68 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgPWM
<<16;

70 
OuutCfgNoCfg
:

71 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

74 
iPÜt
++;

76 
	}
}

84 
	$MuÉiIOEB05In™
(){

85 
ušt16
 
iPÜt
;

86 
iPÜt
=15;

87 
	`x05_out_£t_»Ïy
 (
X_EXPBOARD_SLOT_A
, 
X05_OUT_RELAY_01
, 
X05_ON
);

89 
iPÜt
<
NumOfIÅut
){

90 if(
šputCÚfig
[
iPÜt
][1]!=
IÅutCfgNoCfg
){

91 
	`x05_š_š™
(
X_EXPBOARD_SLOT_A
,
šputCÚfig
[
iPÜt
][0],
X05_IN_TYPE_DIGITAL
,0,(
X05_IN_CIRCUIT_ACTIVE_HIGH
|
X05_IN_CIRCUIT_PULL_DOWN
),0,
NULL
);

92 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgDig™®
<<16;

95 *
IOPÜtIÅutA¼ay
[
iPÜt
]=(
ušt32
)
IÅutCfgNoCfg
<<16;

96 
iPÜt
++;

99 
iPÜt
=8;

100 
iPÜt
<
NumOfOuut
){

101 if(
ouutCÚfig
[
iPÜt
][1]!=
OuutCfgNoCfg
){

102 
	`x05_out_š™
(
X_EXPBOARD_SLOT_A
,
ouutCÚfig
[
iPÜt
][0],
X05_OUT_TYPE_DIGITAL
,0,0,
NULL
);

103 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgDig™®
<<16;

106 *
IOPÜtOuutA¼ay
[
iPÜt
]=(
ušt32
)
OuutCfgNoCfg
<<16;

107 
iPÜt
++;

109 
	}
}

117 
sšt16
 
	$m—nF‹r
(
ušt16
 
šputNum
, 
sšt32
 
V®ue
, sšt32 *
ouutV®ue
){

118 if(
šputNum
>=16)  -1;

119 *
ouutV®ue
=(
šputF‹rCfg
[
šputNum
]+
V®ue
)/2;

120 
šputF‹rCfg
[
šputNum
]=*
ouutV®ue
;

122 
	}
}

130 
	$Task_IOPÜt
(* 
¬gv
){

131 
ušt16
 
æag
;

132 
ušt16
 
iPÜt
;

133 
sšt32
 
DIV®ue
;

134 
sšt32
 
TmpV®ue
;

135 
¬gv
=argv;

136 
ušt16
 
tmpCFGTy³
;

138 
æag
=0;

140 
TRUE
){

141 if(
æag
==0){

142 
iPÜt
=0;iPort<15;iPort++){

143 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

144 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

145 
	`x_š_g‘_v®ue
(
šputCÚfig
[
iPÜt
][0],&
DIV®ue
);

146 
	`m—nF‹r
(
iPÜt
, 
DIV®ue
, &
TmpV®ue
);

147 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

148 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
TmpV®ue
;

150 
iPÜt
=0;iPort<8;iPort++){

151 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

152 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

153 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

154 
	`x_out_£t_v®ue
 (
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

157 if(
æag
==1){

158 
iPÜt
=15;iPÜt<
NumOfIÅut
;iPort++){

159 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtIÅutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

160 if(
tmpCFGTy³
==
IÅutCfgNoCfg
) ;

161 
	`x05_š_g‘_v®ue
(
X_EXPBOARD_SLOT_A
, 
šputCÚfig
[
iPÜt
][0] ,&
DIV®ue
);

162 *
IOPÜtIÅutA¼ay
[
iPÜt
]&=0xffff0000;

163 *
IOPÜtIÅutA¼ay
[
iPÜt
]+=(
ušt32
)
DIV®ue
;

165 
iPÜt
=8;iPÜt<
NumOfOuut
;iPort++){

166 
tmpCFGTy³
=(
ušt16
)((*
IOPÜtOuutA¼ay
[
iPÜt
]&0x00ff0000)>>16);

167 if(
tmpCFGTy³
==
OuutCfgNoCfg
) ;

168 
DIV®ue
=(
sšt32
)(*
IOPÜtOuutA¼ay
[
iPÜt
]&0x0000ffff);

169 
	`x05_out_£t_v®ue
(
X_EXPBOARD_SLOT_A
, 
ouutCÚfig
[
iPÜt
][0], 
DIV®ue
);

172 
æag
++;

173 if(
æag
==2) flag=0;

175 
	`x_os_wa™_fÜ_ev’ts
();

177 
	}
}

185 
	$In™MuÉiIO
(){

186 
ušt8
 
i
;

187 
ušt8
 
S¹Subšdex
;

190 
S¹Subšdex
=
SubšdexIÅut01
;

191 
i
=0;i<
NumOfIÅut
;i++){

192 
IOPÜtIÅutA¼ay
[
i
]=
	`BšdODMem
(
IOPÜtS¹Index
,
S¹Subšdex
+i,
Ty³U32
,0);

193 *
IOPÜtIÅutA¼ay
[
i
]=0x00000000;

197 
S¹Subšdex
=
SubšdexOuut01
;

198 
i
=0;i<
NumOfOuut
;i++){

199 
IOPÜtOuutA¼ay
[
i
]=
	`BšdODMem
(
IOPÜtS¹Index
,
S¹Subšdex
+i,
Ty³U32
,0);

200 *
IOPÜtOuutA¼ay
[
i
]=0x00000000;

203 
	`MuÉiIOMašBßrdIn™
();

204 
	`MuÉiIOEB05In™
();

205 
	`x_os_š¡®l_sk
(
PrioIOPÜt
, 2, 1, 
Task_IOPÜt
, 256);

206 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIO.h

1 #iâdeà
_MULTIIO_H


2 
	#_MULTIIO_H


	)

4 
	~"¡wty³s.h
"

5 
	~"DeviûOD.h
"

6 
	~"AµCÚfig.h
"

7 
	~"x_š.h
"

8 
	~"x_out.h
"

9 
	~"x_sys.h
"

10 
	~"x_eb.h
"

11 
	~"x05_sys.h
"

12 
	~"x05_š.h
"

13 
	~"x05_out.h
"

15 
	#NumOfIÅut
 19

	)

16 
	#NumOfOuut
 16

	)

18 
	#IÅutCfgNoCfg
 0x0000

	)

19 
	#IÅutCfgDig™®
 0x0001

	)

20 
	#IÅutCfgVŞge5V
 0x0002

	)

21 
	#IÅutCfgVŞge10V
 0x0003

	)

22 
	#IÅutCfgVŞge40V
 0x0004

	)

23 
	#IÅutCfgCu¼’t
 0x0005

	)

24 
	#IÅutCfgEv’tRisšg
 0x0006

	)

25 
	#IÅutCfgEv’tF®lšg
 0x0007

	)

26 
	#IÅutCfgEv’tBÙh
 0x0008

	)

27 
	#IÅutCfgF»quez
 0x0009

	)

28 
	#IÅutCfgInüem’l
 0x000a

	)

30 
	#OuutCfgNoCfg
 0x0000

	)

31 
	#OuutCfgDig™®
 0x0001

	)

32 
	#OuutCfgPWM
 0x0002

	)

33 
	#OuutCfgCu¼’t
 0x0003

	)

35 
ušt16
 
šputCÚfig
[
NumOfIÅut
][2];

36 
sšt32
 
šputF‹rCfg
[15];

37 
ušt16
 
ouutCÚfig
[
NumOfOuut
][2];

39 
MuÉiIOIn™
();

40 
MuÉiIOTask
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIOConfig.c

1 
	~"MuÉiIO.h
"

4 
ušt16
 
	gšputCÚfig
[
NumOfIÅut
][2]={

5 
X_IN_01
,
IÅutCfgVŞge10V
,

6 
X_IN_02
,
IÅutCfgVŞge10V
,

7 
X_IN_03
,
IÅutCfgVŞge10V
,

8 
X_IN_04
,
IÅutCfgVŞge10V
,

9 
X_IN_05
,
IÅutCfgNoCfg
,

10 
X_IN_06
,
IÅutCfgNoCfg
,

11 
X_IN_07
,
IÅutCfgNoCfg
,

12 
X_IN_08
,
IÅutCfgNoCfg
,

13 
X_IN_09
,
IÅutCfgCu¼’t
,

14 
X_IN_10
,
IÅutCfgCu¼’t
,

15 
X_IN_11
,
IÅutCfgCu¼’t
,

16 
X_IN_12
,
IÅutCfgCu¼’t
,

17 
X_IN_13
,
IÅutCfgCu¼’t
,

18 
X_IN_14
,
IÅutCfgCu¼’t
,

19 
X_IN_15
,
IÅutCfgNoCfg
,

20 
X05_IN_01
,
IÅutCfgNoCfg
,

21 
X05_IN_02
,
IÅutCfgNoCfg
,

22 
X05_IN_03
,
IÅutCfgNoCfg
,

23 
X05_IN_04
,
IÅutCfgNoCfg


26 
sšt32
 
	gšputF‹rCfg
[15]={

46 
ušt16
 
	gouutCÚfig
[
NumOfOuut
][2]={

47 
X_OUT_01
,
OuutCfgPWM
,

48 
X_OUT_02
,
OuutCfgPWM
,

49 
X_OUT_03
,
OuutCfgPWM
,

50 
X_OUT_04
,
OuutCfgPWM
,

51 
X_OUT_05
,
OuutCfgPWM
,

52 
X_OUT_06
,
OuutCfgPWM
,

53 
X_OUT_07
,
OuutCfgPWM
,

54 
X_OUT_08
,
OuutCfgPWM
,

55 
X05_OUT_01
,
OuutCfgNoCfg
,

56 
X05_OUT_02
,
OuutCfgNoCfg
,

57 
X05_OUT_03
,
OuutCfgDig™®
,

58 
X05_OUT_04
,
OuutCfgNoCfg
,

59 
X05_OUT_05
,
OuutCfgNoCfg
,

60 
X05_OUT_06
,
OuutCfgNoCfg
,

61 
X05_OUT_07
,
OuutCfgDig™®
,

62 
X05_OUT_08
,
OuutCfgDig™®


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIOInterface.h

1 #iâdeà
_MULTIIOINTERFACE_H


2 
	#_MULTIIOINTERFACE_H


	)

13 
In™MuÉiIO
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\DeviceOD.c

1 
	~"“p_memm­.h
"

2 
	~"“p_Mªage.h
"

3 
	~"DeviûOD.h
"

7 
ušt32
 
	gODMem
[
ODMemL’gth
];

15 
ušt16
 
	gODMemM­Li¡
[2][
ODMemM­Li¡L’gth
];

22 
	$ODMemIn™
(){

23 
ušt16
 
i
;

24 
ušt16
 
couÁ
=0;

26 
ODMemM­Li¡
[0][0]=
DevP¬aS¹Index
;

27 
ODMemM­Li¡
[1][0]=
NrEÁryDevP¬a
;

28 
couÁ
++;

30 #ifdeà
DriveModuËS¹Index


31 
ODMemM­Li¡
[0][
couÁ
]=
DriveModuËS¹Index
;

32 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryDriveModuË
;

33 
couÁ
++;

36 #ifdeà
Inv”‹rS¹Index


37 
i
=0;i<
NrOfMÙÜInv”‹r
;i++){

38 
ODMemM­Li¡
[0][
couÁ
]=
Inv”‹rS¹Index
+
i
;

39 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryInv”‹r
;

40 
couÁ
++;

44 #ifdeà
IOPÜtS¹Index


45 
ODMemM­Li¡
[0][
couÁ
]=
IOPÜtS¹Index
;

46 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryIOPÜt
;

47 
couÁ
++;

50 #ifdeà
RemÙeCÚŒŞS¹Index


51 
ODMemM­Li¡
[0][
couÁ
]=
RemÙeCÚŒŞS¹Index
;

52 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryRemÙeCÚŒŞ
;

53 
couÁ
++;

56 #ifdeà
HubSy¡emS¹Index


57 
ODMemM­Li¡
[0][
couÁ
]=
HubSy¡emS¹Index
;

58 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryHubSy¡em
;

59 
couÁ
++;

62 #ifdeà
SaãtyS¹Index


63 
ODMemM­Li¡
[0][
couÁ
]=
SaãtyS¹Index
;

64 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁrySaãty
;

65 
couÁ
++;

68 #ifdeà
AutoDriveS¹Index


69 
ODMemM­Li¡
[0][
couÁ
]=
AutoDriveS¹Index
;

70 
ODMemM­Li¡
[1][
couÁ
]=
NrEÁryAutoDrive
;

71 
couÁ
++;

74 
i
=0;i<
ODMemL’gth
;i++){

75 
ODMem
[
i
]=0;

77 
	}
}

91 
sšt16
 
	$G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
){

92 
ušt16
 
ODMemAddr
=0;

93 
ušt16
 
SubIdxR–Addr
;

94 
ušt16
 
iODIndex
;

95 
ušt8
 
i
;

97 
SubIdxR–Addr
=(
ušt16
)
subšdex
;

98 
iODIndex
=0;iODIndex<
ODMemM­Li¡L’gth
;iODIndex++){

99 if(
ODMemM­Li¡
[0][
iODIndex
]==
šdex
){

100 
i
=0x00;i<
ODMemM­Li¡
[1][
iODIndex
];i++){

101 if(
i
==
SubIdxR–Addr
){

102 if(
İt
==
G‘OD
)

103 *
v®ue
=
ODMem
[
ODMemAddr
];

104 if(
İt
==
S‘OD
)

105 
ODMem
[
ODMemAddr
]=*
v®ue
;

106 *
Addr
=
ODMemAddr
;

107  
C_NO_ERR
;

109 
ODMemAddr
++;

111  
C_RANGE
;

113 
ODMemAddr
+=
ODMemM­Li¡
[1][
iODIndex
];

115  
C_RANGE
;

116 
	}
}

129 
sšt16
 
	$StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
){

130 
ušt16
 
ODMemAddr
;

131 
ušt16
 
SizeOfD©aTy³
=4;

132 
ušt16
 
i
;

133 
ušt32
 
D©a
;

134 
sšt16
 
”rcode
=0;

135 
ušt16
 
StÜeL’gth
;

137 
StÜeL’gth
=
ODMemL’gth
;

138 if(
šdex
==0){

139 
i
=0;i<
StÜeL’gth
;i++){

140 if(
İt
==
StÜeODToEEP
)

141 
”rcode
=
	`EEPD©aStÜe
(
ODMem
[
i
],
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+i*SizeOfDataType);

142 if(
İt
==
LßdODFromEEP
)

143 
”rcode
=
	`EEPD©aLßd
(&
ODMem
[
i
],
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+i*SizeOfDataType);

144 if(
”rcode
!=
C_NO_ERR
)

145  
”rcode
;

149 if(
İt
==
StÜeODToEEP
){

150 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
G‘OD
);

151 if(
”rcode
!=
C_NO_ERR
)

152  
”rcode
;

153 
”rcode
=
	`EEPD©aStÜe
(
D©a
,
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+
ODMemAddr
*SizeOfDataType);

154 if(
”rcode
!=
C_NO_ERR
)

155  
”rcode
;

157 if(
İt
==
LßdODFromEEP
){

158 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
G‘OD
);

159 if(
”rcode
!=
C_NO_ERR
)

160  
”rcode
;

161 
”rcode
=
	`EEPD©aLßd
(&
D©a
,
SizeOfD©aTy³
,
CANO³nEEPS¹Addr
+
ODMemAddr
*SizeOfDataType);

162 if(
”rcode
!=
C_NO_ERR
)

163  
”rcode
;

164 
”rcode
=
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
D©a
,
S‘OD
);

165 if(
”rcode
!=
C_NO_ERR
)

166  
”rcode
;

170 
	}
}

178 * 
	$BšdODMem
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 
D©aTy³
,ušt16 
Pos
){

179 
ušt32
 
v®ue
;

180 
ušt16
 
ODMemAddr
;

182 
	`G‘S‘OD
(
šdex
,
subšdex
,&
ODMemAddr
,&
v®ue
,
G‘OD
);

184 
D©aTy³
){

185 0:  (
sšt8
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

186 1:  (
ušt8
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

187 2:  (
sšt16
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

188 3:  (
ušt16
 *)&
ODMem
[
ODMemAddr
]+
Pos
;

189 4:  &
ODMem
[
ODMemAddr
];

190 5:  (
sšt32
 *)&
ODMem
[
ODMemAddr
];

191 6:  (
æßt32
 *)&
ODMem
[
ODMemAddr
];

194 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\DeviceOD.h

1 #iâdeà
_DEVICEOD_H


2 
	#_DEVICEOD_H


	)

3 
	~"CANİ’Comm.h
"

4 
	~"ODCÚ‹Á.h
"

5 
	~"ODInfo.h
"

10 
	eOD_O±
{

11 
	mG‘OD
,

12 
	mS‘OD
,

13 
	mStÜeODToEEP
,

14 
	mLßdODFromEEP
,

20 
	#Ty³S8
 0

	)

21 
	#Ty³U8
 1

	)

22 
	#Ty³S16
 2

	)

23 
	#Ty³U16
 3

	)

24 
	#Ty³U32
 4

	)

25 
	#Ty³S32
 5

	)

26 
	#Ty³F32
 6

	)

32 
ušt32
 
ODMem
[
ODMemL’gth
];

40 
ušt16
 
ODMemM­Li¡
[2][
ODMemM­Li¡L’gth
];

45 
ODMemIn™
();

46 
sšt16
 
G‘S‘OD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 *
Addr
, 
ušt32
 *
v®ue
, 
OD_O±
 
İt
);

47 
sšt16
 
StÜeLßdOD
(
ušt16
 
šdex
,
ušt8
 
subšdex
,
OD_O±
 
İt
);

48 * 
BšdODMem
(
ušt16
 
šdex
,
ušt8
 
subšdex
,ušt16 
D©aTy³
,ušt16 
Pos
);

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\ODContent.h

1 #iâdeà
_ODCONTENT_H


2 
	#_ODCONTENT_H


	)

8 
	#DevP¬aS¹Index
 0x1000

	)

9 
	#NrEÁryDevP¬a
 15

	)

12 
	#SubšdexHwty³
 0x00

	)

13 
	#SubšdexS”Nr
 0x01

	)

14 
	#SubšdexCÚŒŞWÜd
 0x02

	)

15 
	#SubšdexNodeP¬am
 0x03

16 
	#SubšdexCÚfigSync12
 0x04

17 
	#SubšdexCÚfigSync34
 0x05

18 
	#SubšdexCPUTem³¿tur
 0x06

	)

19 
	#SubšdexCPUVŞgeUb1
 0x07

	)

20 
	#SubšdexCPUCu¼’tUb1
 0x08

	)

21 
	#SubšdexCPUVŞgeExt
 0x09

	)

22 
	#SubšdexCPUVŞgeUC1
 0x0a

	)

23 
	#SubšdexSysStus
 0x0b

24 
	#SubšdexSysCyşeTime
 0x0c

	)

25 
	#SubšdexSysD©eTime1
 0x0d

	)

26 
	#SubšdexSysD©eTime2
 0x0e

	)

30 
	#DriveModuËS¹Index
 0x6000

	)

31 
	#NrEÁryDriveModuË
 1

	)

34 
	#SubšdexDriveSysCÚŒŞWÜd
 0x00

	)

38 
	#Inv”‹rS¹Index
 0x6100

	)

39 
	#NrEÁryInv”‹r
 8

	)

42 
	#SubšdexInv”‹rNodeStus
 0x00

	)

43 
	#SubšdexInv”‹rRPDO1LowDWÜd
 0x01

	)

44 
	#SubšdexInv”‹rRPDO1HighDWÜd
 0x02

	)

45 
	#SubšdexInv”‹rTPDO1LowDWÜd
 0x03

	)

46 
	#SubšdexInv”‹rTPDO1HighDWÜd
 0x04

	)

47 
	#SubšdexInv”‹rTPDO2LowDWÜd
 0x05

	)

48 
	#SubšdexInv”‹rTPDO2HighDWÜd
 0x06

	)

49 
	#SubšdexInv”‹rNMT
 0x07

	)

53 
	#IOPÜtS¹Index
 0x6200

	)

54 
	#NrEÁryIOPÜt
 36

	)

57 
	#SubšdexIOPÜtCÚŒŞWÜd
 0x00

	)

58 
	#SubšdexIÅut01
 0x01

	)

59 
	#SubšdexIÅut02
 0x02

	)

60 
	#SubšdexIÅut03
 0x03

	)

61 
	#SubšdexIÅut04
 0x04

	)

62 
	#SubšdexIÅut05
 0x05

	)

63 
	#SubšdexIÅut06
 0x06

	)

64 
	#SubšdexIÅut07
 0x07

	)

65 
	#SubšdexIÅut08
 0x08

	)

66 
	#SubšdexIÅut09
 0x09

	)

67 
	#SubšdexIÅut10
 0x0a

	)

68 
	#SubšdexIÅut11
 0x0b

	)

69 
	#SubšdexIÅut12
 0x0c

	)

70 
	#SubšdexIÅut13
 0x0d

	)

71 
	#SubšdexIÅut14
 0x0e

	)

72 
	#SubšdexIÅut15
 0x0f

	)

73 
	#SubšdexIÅut36
 0x10

	)

74 
	#SubšdexIÅut37
 0x11

	)

75 
	#SubšdexIÅut38
 0x12

	)

76 
	#SubšdexIÅut39
 0x13

	)

79 
	#SubšdexOuut01
 0x14

	)

80 
	#SubšdexOuut02
 0x15

	)

81 
	#SubšdexOuut03
 0x16

	)

82 
	#SubšdexOuut04
 0x17

	)

83 
	#SubšdexOuut05
 0x18

	)

84 
	#SubšdexOuut06
 0x19

	)

85 
	#SubšdexOuut07
 0x1a

	)

86 
	#SubšdexOuut08
 0x1b

	)

87 
	#SubšdexOuut24
 0x1c

	)

88 
	#SubšdexOuut25
 0x1d

	)

89 
	#SubšdexOuut26
 0x1e

	)

90 
	#SubšdexOuut27
 0x1f

	)

91 
	#SubšdexOuut28
 0x20

	)

92 
	#SubšdexOuut29
 0x21

	)

93 
	#SubšdexOuut30
 0x22

	)

94 
	#SubšdexOuut31
 0x23

	)

98 
	#RemÙeCÚŒŞS¹Index
 0x6300

	)

99 
	#NrEÁryRemÙeCÚŒŞ
 18

	)

102 
	#SubšdexRemÙeCŒlNodeStus
 0x00

	)

103 
	#SubšdexRemÙeCŒlTPDO1LowDWÜd
 0x01

104 
	#SubšdexRemÙeCŒlTPDO1HighDWÜd
 0x02

	)

105 
	#SubšdexRemÙeCŒlTPDO2LowDWÜd
 0x03

106 
	#SubšdexRemÙeCŒlTPDO2HighDWÜd
 0x04

	)

107 
	#SubšdexRemÙeCŒlRPDO1LowDWÜd
 0x05

108 
	#SubšdexRemÙeCŒlRPDO1HighDWÜd
 0x06

	)

109 
	#SubšdexRemÙeCŒlRPDO2LowDWÜd
 0x07

110 
	#SubšdexRemÙeCŒlRPDO2HighDWÜd
 0x08

	)

111 
	#SubšdexRemÙeCŒlRPDO4LowDWÜd
 0x09

112 
	#SubšdexRemÙeCŒlRPDO4HighDWÜd
 0x0a

	)

113 
	#SubšdexRemÙeCŒlNMT
 0x0b

	)

116 
	#SubšdexRemÙeCŒlRPDO1LowDWORD
 0x0c

	)

117 
	#SubšdexRemÙeCŒlRPDO1HighDWORD
 0x0d

	)

118 
	#SubšdexRemÙeCŒlRPDO2LowDWORD
 0x0e

	)

119 
	#SubšdexRemÙeCŒlRPDO2HighDWORD
 0x0f

	)

120 
	#SubšdexRemÙeCŒlRPDO3LowDWORD
 0x10

	)

121 
	#SubšdexRemÙeCŒlRPDO3HighDWORD
 0x11

	)

125 
	#HubSy¡emS¹Index
 0x6400

	)

126 
	#NrEÁryHubSy¡em
 39

	)

129 
	#SubšdexHubSy¡emCÚŒŞWÜd
 0x00

133 
	#SubšdexHeightHubAx–11
 0x01

	)

134 
	#SubšdexHeightHubAx–12
 0x02

	)

135 
	#SubšdexHeightHubAx–21
 0x03

	)

136 
	#SubšdexHeightHubAx–22
 0x04

	)

137 
	#SubšdexP»ssu»S’sÜPump
 0x05

	)

138 
	#SubšdexP»ssu»S’sÜAx–11
 0x06

	)

139 
	#SubšdexP»ssu»S’sÜAx–12
 0x07

	)

140 
	#SubšdexP»ssu»S’sÜAx–21
 0x08

	)

141 
	#SubšdexP»ssu»S’sÜAx–22
 0x09

	)

144 
	#SubšdexCÚŒŞKpAx–11
 0x0a

	)

145 
	#SubšdexCÚŒŞKiAx–11
 0x0b

	)

146 
	#SubšdexCÚŒŞKpAx–12
 0x0c

	)

147 
	#SubšdexCÚŒŞKiAx–12
 0x0d

	)

148 
	#SubšdexCÚŒŞKpAx–21
 0x0e

	)

149 
	#SubšdexCÚŒŞKiAx–21
 0x0f

	)

150 
	#SubšdexCÚŒŞKpAx–22
 0x10

	)

151 
	#SubšdexCÚŒŞKiAx–22
 0x11

	)

154 
	#SubšdexHeightS’sÜ11FaùA
 0x12

	)

155 
	#SubšdexHeightS’sÜ11FaùB
 0x13

	)

156 
	#SubšdexHeightS’sÜ12FaùA
 0x14

	)

157 
	#SubšdexHeightS’sÜ12FaùB
 0x15

	)

158 
	#SubšdexHeightS’sÜ21FaùA
 0x16

	)

159 
	#SubšdexHeightS’sÜ21FaùB
 0x17

	)

160 
	#SubšdexHeightS’sÜ22FaùA
 0x18

	)

161 
	#SubšdexHeightS’sÜ22FaùB
 0x19

	)

164 
	#SubšdexTem³¿tu»S’sÜ
 0x1a

	)

165 
	#SubšdexAùu®Tem³¿tu»
 0x1b

	)

168 
	#SubšdexDeçuÉHyd¿ulicMÙÜRPM
 0x1c

	)

169 
	#SubšdexDeçuÉMaxHeight
 0x1d

	)

170 
	#SubšdexDeçuÉMšHeight
 0x1e

	)

173 
	#SubšdexWeight
 0x1f

	)

174 
	#SubšdexXV®ueCG
 0x20

	)

175 
	#SubšdexYV®ueCG
 0x21

	)

178 
	#SubšdexHubSy¡emT–eg¿mm
 0x22

179 

	)

181 
	#SubšdexHubS³edAx–11
 0x23

	)

182 
	#SubšdexHubS³edAx–12
 0x24

	)

183 
	#SubšdexHubS³edAx–21
 0x25

	)

184 
	#SubšdexHubS³edAx–22
 0x26

	)

188 
	#SaãtyS¹Index
 0x6500

	)

189 
	#NrEÁrySaãty
 108

	)

192 
	#SubšdexNumOfE¼Ü
 0x00

	)

195 
	#SubšdexE¼ÜRegi¡”01
 0x01

	)

196 
	#SubšdexE¼ÜRegi¡”02
 0x02

	)

197 
	#SubšdexE¼ÜRegi¡”03
 0x03

	)

198 
	#SubšdexE¼ÜRegi¡”04
 0x04

	)

199 
	#SubšdexE¼ÜRegi¡”05
 0x05

	)

200 
	#SubšdexE¼ÜRegi¡”06
 0x06

	)

201 
	#SubšdexE¼ÜRegi¡”07
 0x07

	)

202 
	#SubšdexE¼ÜRegi¡”08
 0x08

	)

203 
	#SubšdexE¼ÜRegi¡”09
 0x09

	)

204 
	#SubšdexE¼ÜRegi¡”10
 0x0a

	)

205 
	#SubšdexE¼ÜRegi¡”11
 0x0b

	)

206 
	#SubšdexE¼ÜRegi¡”12
 0x0c

	)

207 
	#SubšdexE¼ÜRegi¡”13
 0x0d

	)

208 
	#SubšdexE¼ÜRegi¡”14
 0x0e

	)

209 
	#SubšdexE¼ÜRegi¡”15
 0x0f

	)

210 
	#SubšdexE¼ÜRegi¡”16
 0x10

	)

211 
	#SubšdexE¼ÜRegi¡”17
 0x11

	)

212 
	#SubšdexE¼ÜRegi¡”18
 0x12

	)

213 
	#SubšdexE¼ÜRegi¡”19
 0x13

	)

214 
	#SubšdexE¼ÜRegi¡”20
 0x14

	)

215 
	#SubšdexE¼ÜRegi¡”21
 0x15

	)

216 
	#SubšdexE¼ÜRegi¡”22
 0x16

	)

217 
	#SubšdexE¼ÜRegi¡”23
 0x17

	)

218 
	#SubšdexE¼ÜRegi¡”24
 0x18

	)

219 
	#SubšdexE¼ÜRegi¡”25
 0x19

	)

220 
	#SubšdexE¼ÜRegi¡”26
 0x1a

	)

221 
	#SubšdexE¼ÜRegi¡”27
 0x1b

	)

222 
	#SubšdexE¼ÜRegi¡”28
 0x1c

	)

223 
	#SubšdexE¼ÜRegi¡”29
 0x1d

	)

224 
	#SubšdexE¼ÜRegi¡”30
 0x1e

	)

225 
	#SubšdexE¼ÜRegi¡”31
 0x1f

	)

226 
	#SubšdexE¼ÜRegi¡”32
 0x20

	)

229 
	#SubšdexE¼ÜRegi¡”01Time¡amp1
 0x21

	)

230 
	#SubšdexE¼ÜRegi¡”01Time¡amp2
 0x22

	)

231 
	#SubšdexE¼ÜRegi¡”02Time¡amp1
 0x23

	)

232 
	#SubšdexE¼ÜRegi¡”02Time¡amp2
 0x24

	)

233 
	#SubšdexE¼ÜRegi¡”03Time¡amp1
 0x25

	)

234 
	#SubšdexE¼ÜRegi¡”03Time¡amp2
 0x26

	)

235 
	#SubšdexE¼ÜRegi¡”04Time¡amp1
 0x27

	)

236 
	#SubšdexE¼ÜRegi¡”04Time¡amp2
 0x28

	)

237 
	#SubšdexE¼ÜRegi¡”05Time¡amp1
 0x29

	)

238 
	#SubšdexE¼ÜRegi¡”05Time¡amp2
 0x2a

	)

239 
	#SubšdexE¼ÜRegi¡”06Time¡amp1
 0x2b

	)

240 
	#SubšdexE¼ÜRegi¡”06Time¡amp2
 0x2c

	)

241 
	#SubšdexE¼ÜRegi¡”07Time¡amp1
 0x2d

	)

242 
	#SubšdexE¼ÜRegi¡”07Time¡amp2
 0x2e

	)

243 
	#SubšdexE¼ÜRegi¡”08Time¡amp1
 0x2f

	)

244 
	#SubšdexE¼ÜRegi¡”08Time¡amp2
 0x30

	)

245 
	#SubšdexE¼ÜRegi¡”09Time¡amp1
 0x31

	)

246 
	#SubšdexE¼ÜRegi¡”09Time¡amp2
 0x32

	)

247 
	#SubšdexE¼ÜRegi¡”10Time¡amp1
 0x33

	)

248 
	#SubšdexE¼ÜRegi¡”10Time¡amp2
 0x34

	)

249 
	#SubšdexE¼ÜRegi¡”11Time¡amp1
 0x35

	)

250 
	#SubšdexE¼ÜRegi¡”11Time¡amp2
 0x36

	)

251 
	#SubšdexE¼ÜRegi¡”12Time¡amp1
 0x37

	)

252 
	#SubšdexE¼ÜRegi¡”12Time¡amp2
 0x38

	)

253 
	#SubšdexE¼ÜRegi¡”13Time¡amp1
 0x39

	)

254 
	#SubšdexE¼ÜRegi¡”13Time¡amp2
 0x3a

	)

255 
	#SubšdexE¼ÜRegi¡”14Time¡amp1
 0x3b

	)

256 
	#SubšdexE¼ÜRegi¡”14Time¡amp2
 0x3c

	)

257 
	#SubšdexE¼ÜRegi¡”15Time¡amp1
 0x3d

	)

258 
	#SubšdexE¼ÜRegi¡”15Time¡amp2
 0x3e

	)

259 
	#SubšdexE¼ÜRegi¡”16Time¡amp1
 0x3f

	)

260 
	#SubšdexE¼ÜRegi¡”16Time¡amp2
 0x40

	)

261 
	#SubšdexE¼ÜRegi¡”17Time¡amp1
 0x41

	)

262 
	#SubšdexE¼ÜRegi¡”17Time¡amp2
 0x42

	)

263 
	#SubšdexE¼ÜRegi¡”18Time¡amp1
 0x43

	)

264 
	#SubšdexE¼ÜRegi¡”18Time¡amp2
 0x44

	)

265 
	#SubšdexE¼ÜRegi¡”19Time¡amp1
 0x45

	)

266 
	#SubšdexE¼ÜRegi¡”19Time¡amp2
 0x46

	)

267 
	#SubšdexE¼ÜRegi¡”20Time¡amp1
 0x47

	)

268 
	#SubšdexE¼ÜRegi¡”20Time¡amp2
 0x48

	)

269 
	#SubšdexE¼ÜRegi¡”21Time¡amp1
 0x49

	)

270 
	#SubšdexE¼ÜRegi¡”21Time¡amp2
 0x4a

	)

271 
	#SubšdexE¼ÜRegi¡”22Time¡amp1
 0x4b

	)

272 
	#SubšdexE¼ÜRegi¡”22Time¡amp2
 0x4c

	)

273 
	#SubšdexE¼ÜRegi¡”23Time¡amp1
 0x4d

	)

274 
	#SubšdexE¼ÜRegi¡”23Time¡amp2
 0x4e

	)

275 
	#SubšdexE¼ÜRegi¡”24Time¡amp1
 0x4f

	)

276 
	#SubšdexE¼ÜRegi¡”24Time¡amp2
 0x50

	)

277 
	#SubšdexE¼ÜRegi¡”25Time¡amp1
 0x51

	)

278 
	#SubšdexE¼ÜRegi¡”25Time¡amp2
 0x52

	)

279 
	#SubšdexE¼ÜRegi¡”26Time¡amp1
 0x53

	)

280 
	#SubšdexE¼ÜRegi¡”26Time¡amp2
 0x54

	)

281 
	#SubšdexE¼ÜRegi¡”27Time¡amp1
 0x55

	)

282 
	#SubšdexE¼ÜRegi¡”27Time¡amp2
 0x56

	)

283 
	#SubšdexE¼ÜRegi¡”28Time¡amp1
 0x57

	)

284 
	#SubšdexE¼ÜRegi¡”28Time¡amp2
 0x58

	)

285 
	#SubšdexE¼ÜRegi¡”29Time¡amp1
 0x59

	)

286 
	#SubšdexE¼ÜRegi¡”29Time¡amp2
 0x5a

	)

287 
	#SubšdexE¼ÜRegi¡”30Time¡amp1
 0x5b

	)

288 
	#SubšdexE¼ÜRegi¡”30Time¡amp2
 0x5c

	)

289 
	#SubšdexE¼ÜRegi¡”31Time¡amp1
 0x5d

	)

290 
	#SubšdexE¼ÜRegi¡”31Time¡amp2
 0x5e

	)

291 
	#SubšdexE¼ÜRegi¡”32Time¡amp1
 0x5f

	)

292 
	#SubšdexE¼ÜRegi¡”32Time¡amp2
 0x60

	)

295 
	#SubšdexMa¡”CPUE¼ÜRegi¡”01
 0x61

	)

296 
	#SubšdexMa¡”CPUE¼ÜRegi¡”02
 0x62

	)

297 
	#SubšdexMa¡”CPUE¼ÜRegi¡”03
 0x63

	)

298 
	#SubšdexMa¡”CPUE¼ÜRegi¡”04
 0x64

	)

299 
	#SubšdexMa¡”CPUE¼ÜRegi¡”05
 0x65

	)

300 
	#SubšdexMa¡”CPUE¼ÜRegi¡”06
 0x66

	)

301 
	#SubšdexMa¡”CPUE¼ÜRegi¡”07
 0x67

	)

302 
	#SubšdexMa¡”CPUE¼ÜRegi¡”08
 0x68

	)

306 
	#SubšdexSaãtyCÚŒŞWÜd
 0x69

	)

307 
	#SubšdexSaãtyCÚŒŞWÜdMa¡”
 0x6a

	)

308 
	#SubšdexSaãtyMa¡”NumOfE¼Ü
 0x6b

	)

312 
	#AutoDriveS¹Index
 0x6600

	)

313 
	#NrEÁryAutoDrive
 1

	)

316 
	#SubšdexAutoDriveCÚŒŞWÜd
 0x00

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\ODInfo.h

1 #iâdeà
_ODINFO_H


2 
	#_ODINFO_H


	)

8 
	#NrOfDriveSys
 1

	)

9 
	#NrOfMÙÜInv”‹r
 1

	)

10 
	#NrOfIOPÜtGroup
 1

	)

11 
	#NrOfRemÙeCÚŒŞ
 1

	)

12 
	#NrOfHubSys
 1

	)

13 
	#NrOfSaãty
 1

	)

14 
	#NrOfAutoDrive
 1

	)

19 
	#ODMemL’gth
 (
NrEÁryDevP¬a
+
NrEÁryDriveModuË
*
NrOfDriveSys
+
NrEÁryInv”‹r
*
NrOfMÙÜInv”‹r
+
NrEÁryIOPÜt
*
NrOfIOPÜtGroup
+
NrEÁryRemÙeCÚŒŞ
*
NrOfRemÙeCÚŒŞ
+
NrEÁryHubSy¡em
*
NrOfHubSys
+
NrEÁrySaãty
*
NrOfSaãty
+
NrEÁryAutoDrive
*
NrOfAutoDrive
)

	)

20 
	#ODMemM­Li¡L’gth
 (1+
NrOfDriveSys
+
NrOfMÙÜInv”‹r
+
NrOfIOPÜtGroup
+
NrOfRemÙeCÚŒŞ
+
NrOfHubSys
+
NrOfSaãty
+
NrOfAutoDrive
)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControl.c

1 
	~"RemÙeCÚŒŞ.h
"

2 
	~"RemÙeCÚŒŞIÁ”çû.h
"

3 
	~"RemÙeCÚŒŞD©a.h
"

6 
ušt32
 
	gŞdDig™®In
;

14 
	$In™IÁ”çûRemÙeCÚŒŞ
(){

15 
ušt16
 
i
;

16 
šputRemÙeCÚŒŞDig™®In
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO2LowDWÜd
,
Ty³U32
,0);

17 
šputRemÙeCÚŒŞToggË
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlTPDO2HighDWÜd
,
Ty³U8
,2);

19 
šputRCG‘SaãtyCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0); *inputRCGetSafetyControlWord=0x00000000;

20 
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜdMa¡”
,
Ty³U32
,0); *inputRCGetSafetyMasterControlWord=0x00000000;

21 
šputRCG‘HubSy¡emCÚŒŞWÜd
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emCÚŒŞWÜd
,
Ty³U32
,0); *inputRCGetHubSystemControlWord=0x00000000;

23 
ouutRemÙeCÚŒŞSŒšg0
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2LowDWÜd
,
Ty³U32
,0); *outputRemoteControlString0=0x00000000;

24 
ouutRemÙeCÚŒŞSŒšg1
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2HighDWÜd
,
Ty³U32
,0); *outputRemoteControlString1=0x00000000;

25 
ouutRemÙeCÚŒŞSŒšg2
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO4LowDWÜd
,
Ty³U32
,0); *outputRemoteControlString2=0x00000000;

26 
ouutRemÙeCÚŒŞSŒšg3
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO4HighDWÜd
,
Ty³U32
,0); *outputRemoteControlString3=0x00000000;

28 
šputRCG‘HubW”k11Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–11
,
Ty³U32
,0);

29 
šputRCG‘HubW”k12Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–12
,
Ty³U32
,0);

30 
šputRCG‘HubW”k21Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–21
,
Ty³U32
,0);

31 
šputRCG‘HubW”k22Height
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–22
,
Ty³U32
,0);

33 
šputRCG‘HubW”k11P»ssu»
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–11
,
Ty³S32
,0);

34 
šputRCG‘HubW”k12P»ssu»
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–12
,
Ty³S32
,0);

35 
šputRCG‘HubW”k21P»ssu»
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–21
,
Ty³S32
,0);

36 
šputRCG‘HubW”k22P»ssu»
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–22
,
Ty³S32
,0);

38 
šputRCFromMa¡”DriveSysAngË11
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1LowDWORD
,
Ty³S8
,0); *inputRCFromMasterDriveSysAngle11=0;

39 
šputRCFromMa¡”DriveSysAngË12
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1LowDWORD
,
Ty³S8
,1); *inputRCFromMasterDriveSysAngle12=0;

40 
šputRCFromMa¡”DriveSysAngË21
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1LowDWORD
,
Ty³S8
,2); *inputRCFromMasterDriveSysAngle21=0;

41 
šputRCFromMa¡”DriveSysAngË22
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1LowDWORD
,
Ty³S8
,3); *inputRCFromMasterDriveSysAngle22=0;

44 
šputRCFromMa¡”StusMES
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1HighDWORD
,
Ty³U8
,1); *inputRCFromMasterStatusMES=0x00;

45 
šputRCFromMa¡”StusExtMES
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2HighDWORD
,
Ty³U8
,1); *inputRCFromMasterStatusExtMES=0x00;

46 
šputRCFromMa¡”S‹”šgMode
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2HighDWORD
,
Ty³U8
,2); *inputRCFromMasterSteeringMode=0x00;

47 
šputRCFromMa¡”PageS‹
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1HighDWORD
,
Ty³U8
,3); *inputRCFromMasterPageState=0x00;

48 
šputRCFromMa¡”StusAutoDrive
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1HighDWORD
,
Ty³U8
,2); *inputRCFromMasterStatusAutoDrive=0x00;

49 
šputRCFromMa¡”S³edMES
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO1HighDWORD
,
Ty³S8
,0); *inputRCFromMasterSpeedMES=0;

52 
šputRCFromMa¡”Y1V®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2LowDWORD
,
Ty³S8
,0); *inputRCFromMasterY1Value=0;

53 
šputRCFromMa¡”Y2V®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2LowDWORD
,
Ty³S8
,1); *inputRCFromMasterY2Value=0;

54 
šputRCFromMa¡”XV®ue
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2LowDWORD
,
Ty³U16
,1); *inputRCFromMasterXValue=0;

56 
šputRCG‘E¼ÜNum
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexNumOfE¼Ü
,
Ty³U8
,0); *inputRCGetErrorNum=0;

57 
šputRCG‘Ma¡”CPUE¼ÜNum
=
	`BšdODMem
(
RemÙeCÚŒŞS¹Index
,
SubšdexRemÙeCŒlRPDO2HighDWORD
,
Ty³U8
,0); *inputRCGetMasterCPUErrorNum=0;

59 
i
=0;i<8;i++){

60 
šputRCG‘E¼ÜCode
[
i
]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01
+i,
Ty³U32
,0);

63 
i
=0;i<8;i++){

64 
šputRCG‘E¼ÜCodeMa¡”CPU
[
i
]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexMa¡”CPUE¼ÜRegi¡”01
+i,
Ty³U32
,0);

66 
	}
}

76 
	$G‘Bu‰ÚV®ue
(){

78 if((*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞSchutzR—lis
)==0è*
šputRCFromMa¡”StusExtMES
|=
KeyRCDi¥ÏyStusExtRCR–aisAus
;

79 *
šputRCFromMa¡”StusExtMES
&=~
KeyRCDi¥ÏyStusExtRCR–aisAus
;

81 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞM’uTa¡”Leá
){

82 if((
ŞdDig™®In
&
RemÙeCÚŒŞM’uTa¡”Leá
)==0è
RCReqWÜd
|=
KeyRCReqWÜdMeunTa¡”Leá
;

84 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞM’uTa¡”Right
){

85 if((
ŞdDig™®In
&
RemÙeCÚŒŞM’uTa¡”Right
)==0è
RCReqWÜd
|=
KeyRCReqWÜdMeunTa¡”Right
;

87 if(*
šputRemÙeCÚŒŞDig™®In
&
RemÙeCÚŒŞM’uTa¡”Push
) {

88 if((
ŞdDig™®In
&
RemÙeCÚŒŞM’uTa¡”Push
)==0è
RCReqWÜd
|=
KeyRCReqWÜdMeunTa¡”Push
;

90 
	}
}

99 
	$Task_RemÙeCÚŒŞ
(* 
¬gv
){

100 
¬gv
=argv;

101 
ušt32
 
u32_Ev’ts
;

103 
	`x_os_£t_ev’t_mask
(
Ev’t_RC
);

104 
akt_·ge
=0;

106 
TRUE
){

107 
	`x_os_wa™_fÜ_ev’ts
();

108 
u32_Ev’ts
 = 
	`x_os_g‘_ev’ts
();

109 if((
u32_Ev’ts
&
Ev’t_RC
)!=0){

110 
	`G‘Bu‰ÚV®ue
();

111 
ŞdDig™®In
=*
šputRemÙeCÚŒŞDig™®In
;

114 
	}
}

121 
	$Task_RemÙeCÚŒŞDi¥Ïy
(* 
¬gv
){

122 
¬gv
=argv;

124 
TRUE
){

125 
	`Di¥Ïy
();

126 
	`x_os_wa™_fÜ_ev’ts
();

128 
	}
}

138 
	$In™RemÙeCÚŒŞ
(){

139 
	`S‘PageIn™
();

141 
	`In™IÁ”çûRemÙeCÚŒŞ
();

142 
	`x_os_š¡®l_sk
(
PrioRemÙeCÚŒŞ
, 0, 0, 
Task_RemÙeCÚŒŞ
, 32);

143 
	`x_os_š¡®l_sk
(
PrioRemÙeCÚŒŞDi¥Ïy
, 150, 5, 
Task_RemÙeCÚŒŞDi¥Ïy
, 256);

144 
	}
}

153 
	$TaskRemÙeCÚŒŞAwake
(){

154 
ušt16
 
MaxRCToggËCouÁ”
=1;

155 
ušt8
 
OldToggËBy‹
;

156 
ušt16
 
RCtoggËcouÁ”
;

157 if(*
šputRemÙeCÚŒŞToggË
!=
OldToggËBy‹
) {

158 
RCtoggËcouÁ”
++;

159 
OldToggËBy‹
=*
šputRemÙeCÚŒŞToggË
;

162 if(
RCtoggËcouÁ”
>=
MaxRCToggËCouÁ”
){

163 
	`x_os_£t_ev’ts
(
Ev’t_RC
);

164 
RCtoggËcouÁ”
=0;

166 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControl.h

1 #iâdeà
_REMOTECONTROL_H


2 
	#_REMOTECONTROL_H


	)

4 
	~"x_sys.h
"

5 
	~"x_os.h
"

6 
	~"x_uti.h
"

7 
	~"DeviûOD.h
"

8 
	~"MESCÚfig.h
"

9 
	~"AµCÚfig.h
"

10 
	~"m©h.h
"

12 
	#RemÙeCÚŒŞSchutzR—lis
 0x00000100

	)

15 
Di¥Ïy
();

16 
S‘PageIn™
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlData.c

1 
	~"RemÙeCÚŒŞD©a.h
"

8 
ušt16
 
	gRCReqWÜd
;

11 
ušt32
 
	gRCAùu®Time
;

14 
ušt16
 
	gakt_·ge
;

21 
ušt32
 *
	gšputRCG‘SaãtyCÚŒŞWÜd
;

22 
ušt32
 *
	gšputRCG‘SaãtyMa¡”CÚŒŞWÜd
;

23 
ušt32
 *
	gšputRCG‘HubSy¡emCÚŒŞWÜd
;

25 
ušt8
 *
	gšputRemÙeCÚŒŞToggË
;

26 
ušt32
 *
	gšputRemÙeCÚŒŞDig™®In
;

29 
ušt32
 *
	gšputRCG‘HubW”k11Height
;

30 
ušt32
 *
	gšputRCG‘HubW”k12Height
;

31 
ušt32
 *
	gšputRCG‘HubW”k21Height
;

32 
ušt32
 *
	gšputRCG‘HubW”k22Height
;

35 
sšt32
 *
	gšputRCG‘HubW”k11P»ssu»
;

36 
sšt32
 *
	gšputRCG‘HubW”k12P»ssu»
;

37 
sšt32
 *
	gšputRCG‘HubW”k21P»ssu»
;

38 
sšt32
 *
	gšputRCG‘HubW”k22P»ssu»
;

41 
sšt8
 *
	gšputRCFromMa¡”DriveSysAngË11
;

42 
sšt8
 *
	gšputRCFromMa¡”DriveSysAngË12
;

43 
sšt8
 *
	gšputRCFromMa¡”DriveSysAngË21
;

44 
sšt8
 *
	gšputRCFromMa¡”DriveSysAngË22
;

47 
ušt8
 *
	gšputRCFromMa¡”StusMES
;

48 
ušt8
 *
	gšputRCFromMa¡”StusExtMES
;

49 
ušt8
 *
	gšputRCFromMa¡”PageS‹
;

50 
ušt8
 *
	gšputRCFromMa¡”StusAutoDrive
;

51 
ušt8
 *
	gšputRCFromMa¡”S‹”šgMode
;

52 
sšt8
 *
	gšputRCFromMa¡”S³edMES
;

55 
sšt8
 *
	gšputRCFromMa¡”Y1V®ue
;

56 
sšt8
 *
	gšputRCFromMa¡”Y2V®ue
;

57 
ušt16
 *
	gšputRCFromMa¡”XV®ue
;

60 
ušt8
 *
	gšputRCG‘E¼ÜNum
;

63 
ušt8
 *
	gšputRCG‘Ma¡”CPUE¼ÜNum
;

66 
ušt32
 *
	gšputRCG‘E¼ÜCode
[8];

69 
ušt32
 *
	gšputRCG‘E¼ÜCodeMa¡”CPU
[8];

75 
ušt32
 *
	gouutRemÙeCÚŒŞSŒšg0
;

76 
ušt32
 *
	gouutRemÙeCÚŒŞSŒšg1
;

77 
ušt32
 *
	gouutRemÙeCÚŒŞSŒšg2
;

78 
ušt32
 *
	gouutRemÙeCÚŒŞSŒšg3
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlData.h

1 #iâdeà
_REMOTECONTROLDATA_H


2 
	#_REMOTECONTROLDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	#RemÙeCÚŒŞM’uTa¡”Leá
 0x00000800

	)

6 
	#RemÙeCÚŒŞM’uTa¡”Right
 0x00000400

	)

7 
	#RemÙeCÚŒŞM’uTa¡”Push
 0x00001000

	)

9 
	#RemÙeCÚŒŞBu‰ÚNÙAus
 0x80000000

	)

11 
	#KeyRCG‘HubSy¡emNÜm®Mode
 0x00000000

	)

12 
	#KeyRCG‘HubSy¡emTe¡Mode
 0x00000001

	)

13 
	#KeyRCS‘HubSysEÇbË
 0x00000004

	)

14 
	#KeyRCG‘HubSysIsStİ
 0x00000008

	)

15 
	#KeyRCS‘HubSysHeb’
 0x00000100

	)

16 
	#KeyRCS‘HubSysSšk’
 0x00000200

	)

17 
	#KeyRCS‘HubSysAutoIn™
 0x00000400

	)

19 
	#KeyRCG‘SaãtyIsE¼Ü
 0x00000001

	)

20 
	#KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
 0x00000002

	)

21 
	#KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
 0x00001000

	)

22 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1W¬n
 0x00000008

	)

23 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1Stİ
 0x00000010

	)

24 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2W¬n
 0x00000020

	)

25 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2Stİ
 0x00000040

	)

26 
	#KeyRCG‘SaãtySysLa£rsÿÂ”1Slow
 0x00000400

	)

27 
	#KeyRCG‘SaãtySysLa£rsÿÂ”2Slow
 0x00000800

	)

28 
	#KeyRCG‘SaãtyHubSysStİ
 0x00000100

	)

29 
	#KeyRCG‘SaãtySy¡emS³¼n
 0x00008000

	)

31 
	#KeyRCReqWÜdMeunTa¡”Push
 0x0010

	)

32 
	#KeyRCReqWÜdMeunTa¡”Leá
 0x0020

	)

33 
	#KeyRCReqWÜdMeunTa¡”Right
 0x0040

	)

35 
	#KeyRCDi¥ÏyStusCrossDrive
 0x01

	)

36 
	#KeyRCDi¥ÏyStusZ”oS‘
 0x02

	)

37 
	#KeyRCDi¥ÏyStusP¬k
 0x04

	)

38 
	#KeyRCDi¥ÏyStusPageUpd©e
 0x08

	)

39 
	#KeyRCDi¥ÏyStusIsE¼Ü
 0x10

	)

40 
	#KeyRCDi¥ÏyStusIsS‹”šgMÙiÚ
 0x20

	)

41 
	#KeyRCDi¥ÏyStusNÙAus
 0x40

	)

42 
	#KeyRCDi¥ÏyStusLadung
 0x80

	)

44 
	#KeyRCDi¥ÏyStusExtCrossIsSw™ch
 0x01

	)

45 
	#KeyRCDi¥ÏyStusExtRCR–aisAus
 0x02

	)

46 
	#KeyRCDi¥ÏyStusExtLSD—ktiv
 0x04

	)

48 
	#KeyRCDi¥ÏyAutoStusDriveFÜw¬d
 0x01

	)

49 
	#KeyRCDi¥ÏyAutoStusDriveBackw¬d
 0x02

	)

50 
	#KeyRCDi¥ÏyAutoStusK1BªdFšd
 0x04

	)

51 
	#KeyRCDi¥ÏyAutoStusK2BªdFšd
 0x08

	)

52 
	#KeyRCDi¥ÏyAutoStusAutoIn™
 0x10

	)

53 
	#KeyRCDi¥ÏyAutoStusAutoStİZÚe
 0x20

	)

55 
	#KeyRCDi¥ÏyPageS‹In™
 0x00

	)

56 
	#KeyRCDi¥ÏyPageS‹R—dy
 0x01

	)

57 
	#KeyRCDi¥ÏyPageS‹Run
 0x02

	)

58 
	#KeyRCDi¥ÏyPageS‹Hub
 0x03

	)

59 
	#KeyRCDi¥ÏyPageS‹Auto
 0x04

	)

60 
	#KeyRCDi¥ÏyPageS‹NÙF®l
 0x05

	)

62 
	#KeyRCDi¥ÏyS‹”šgModeP¬k
 0x00

	)

63 
	#KeyRCDi¥ÏyS‹”šgModeVÜd”¿d
 0x01

	)

64 
	#KeyRCDi¥ÏyS‹”šgModeHš‹¼ad
 0x02

	)

65 
	#KeyRCDi¥ÏyS‹”šgModeK»bsgªg
 0x03

	)

66 
	#KeyRCDi¥ÏyS‹”šgModeRundgªg
 0x04

	)

67 
	#KeyRCDi¥ÏyS‹”šgModeAÎ¿d
 0x05

	)

74 
ušt32
 
RCAùu®Time
;

77 
ušt16
 
RCReqWÜd
;

80 
ušt16
 
akt_·ge
;

86 
ušt32
 *
šputRCG‘SaãtyCÚŒŞWÜd
;

87 
ušt32
 *
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
;

88 
ušt32
 *
šputRCG‘HubSy¡emCÚŒŞWÜd
;

91 
ušt8
 *
šputRemÙeCÚŒŞToggË
;

92 
ušt32
 *
šputRemÙeCÚŒŞDig™®In
;

95 
ušt32
 *
šputRCG‘HubW”k11Height
;

96 
ušt32
 *
šputRCG‘HubW”k12Height
;

97 
ušt32
 *
šputRCG‘HubW”k21Height
;

98 
ušt32
 *
šputRCG‘HubW”k22Height
;

101 
sšt32
 *
šputRCG‘HubW”k11P»ssu»
;

102 
sšt32
 *
šputRCG‘HubW”k12P»ssu»
;

103 
sšt32
 *
šputRCG‘HubW”k21P»ssu»
;

104 
sšt32
 *
šputRCG‘HubW”k22P»ssu»
;

107 
sšt8
 *
šputRCFromMa¡”DriveSysAngË11
;

108 
sšt8
 *
šputRCFromMa¡”DriveSysAngË12
;

109 
sšt8
 *
šputRCFromMa¡”DriveSysAngË21
;

110 
sšt8
 *
šputRCFromMa¡”DriveSysAngË22
;

113 
ušt8
 *
šputRCFromMa¡”StusMES
;

114 
ušt8
 *
šputRCFromMa¡”StusExtMES
;

115 
ušt8
 *
šputRCFromMa¡”PageS‹
;

116 
ušt8
 *
šputRCFromMa¡”StusAutoDrive
;

117 
ušt8
 *
šputRCFromMa¡”S‹”šgMode
;

118 
sšt8
 *
šputRCFromMa¡”S³edMES
;

121 
sšt8
 *
šputRCFromMa¡”Y1V®ue
;

122 
sšt8
 *
šputRCFromMa¡”Y2V®ue
;

123 
ušt16
 *
šputRCFromMa¡”XV®ue
;

126 
ušt8
 *
šputRCG‘E¼ÜNum
;

129 
ušt8
 *
šputRCG‘Ma¡”CPUE¼ÜNum
;

132 
ušt32
 *
šputRCG‘E¼ÜCode
[8];

135 
ušt32
 *
šputRCG‘E¼ÜCodeMa¡”CPU
[8];

140 
ušt32
 *
ouutRemÙeCÚŒŞSŒšg0
;

141 
ušt32
 *
ouutRemÙeCÚŒŞSŒšg1
;

142 
ušt32
 *
ouutRemÙeCÚŒŞSŒšg2
;

143 
ušt32
 *
ouutRemÙeCÚŒŞSŒšg3
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplay.c

1 
	~"RemÙeCÚŒŞ.h
"

2 
	~"RemÙeCÚŒŞD©a.h
"

3 
	~"RemÙeCÚŒŞDi¥ÏyE¼ÜText.h
"

5 
ušt32
 
	grow
,
	gcŞumn
;

6 
ušt16
 
	gtmpRowUpd©e
;

8 
ušt8
 
	gascii_Num
[10]={0x30,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39};

10 
ušt8
 
	gPageIn™
[8][20]={

21 
ušt8
 
	gUpd©ePoštS‹In™
[2]={6,13};

23 
ušt8
 
	gPageR—dy
[8][20]={

34 
ušt8
 
	gPageRun
[8][20]={

45 
ušt8
 
	gUpd©ePoštS‹Run
[9][2]={6,15,

55 
ušt8
 
	gPageHub
[8][20]={

66 
ušt8
 
	gUpd©ePoštS‹Hub
[11][2]={2,1,

77 
ušt8
 
	gPageAuto
[8][20]={

88 
ušt8
 
	gUpd©ePoštS‹Auto
[6][2]={2,4,

95 
ušt8
 
	gPageE¼Ü
[8][20]={

106 
ušt8
 
	gUpd©ePoštS‹E¼Ü
[5][2]={1,1,

112 
ušt8
 
	gPageNÙF®l
[8][20]={

133 
sšt16
 
	$G‘NumE¼ÜTextLi¡
(
ušt32
 
E¼Ücode
){

134 
sšt16
 
iI‹m
;

135 
iI‹m
=0;iI‹m<
L’gthOfE¼ÜLi¡
;iItem++){

136 if(
E¼ÜCodeLi¡
[
iI‹m
]==
E¼Ücode
)  iItem;

139 
	}
}

147 
	$Di¥ÏyPageIn™
(){

148 
ušt16
 
i
;

149 
ušt16
 
SŒCŞ
;

151 if(
cŞumn
<18è
SŒCŞ
=column;

152 
SŒCŞ
=
cŞumn
-4;

154 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
row
+1)+((ušt32)(
SŒCŞ
+1)<<8);

155 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

156 *
ouutRemÙeCÚŒŞSŒšg2
=(
ušt32
)(20*(
row
+4)+
SŒCŞ
)<<8;

157 *
ouutRemÙeCÚŒŞSŒšg3
=0x00000000;

159 
i
=2;i<8;i++){

160 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹In™
){

161 if(
i
<4){

162 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageIn™
[
row
][
SŒCŞ
+
i
-2]<<i*8);

163 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageIn™
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

166 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageIn™
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

167 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageIn™
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

170 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹R—dy
)&&(
akt_·ge
==0)){

171 if(
i
<4){

172 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageR—dy
[
row
][
SŒCŞ
+
i
-2]<<i*8);

173 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageR—dy
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

176 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageR—dy
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

177 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageR—dy
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

180 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Run
)&&(
akt_·ge
==0)){

181 if(
i
<4){

182 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageRun
[
row
][
SŒCŞ
+
i
-2]<<i*8);

183 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageRun
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

186 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageRun
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

187 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageRun
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

190 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Hub
)&&(
akt_·ge
==0)){

191 if(
i
<4){

192 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageHub
[
row
][
SŒCŞ
+
i
-2]<<i*8);

193 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageHub
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

196 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageHub
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

197 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageHub
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

200 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Auto
)&&(
akt_·ge
==0)){

201 if(
i
<4){

202 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageAuto
[
row
][
SŒCŞ
+
i
-2]<<i*8);

203 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageAuto
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

206 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageAuto
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

207 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageAuto
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

210 if((*
šputRCFromMa¡”PageS‹
!=
KeyRCDi¥ÏyPageS‹In™
)&&(
akt_·ge
==1)){

211 if(
i
<4){

212 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageE¼Ü
[
row
][
SŒCŞ
+
i
-2]<<i*8);

213 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageE¼Ü
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

216 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageE¼Ü
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

217 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageE¼Ü
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

220 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹NÙF®l
){

221 if(
i
<4){

222 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageNÙF®l
[
row
][
SŒCŞ
+
i
-2]<<i*8);

223 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageNÙF®l
[
row
+4][
SŒCŞ
+
i
-2]<<i*8);

226 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageNÙF®l
[
row
][
SŒCŞ
+
i
-2]<<(i-4)*8);

227 *
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageNÙF®l
[
row
+4][
SŒCŞ
+
i
-2]<<(i-4)*8);

231 
cŞumn
+=6;

232 if(
cŞumn
>=20){

233 
cŞumn
=0;

234 
row
++;

235 if(
row
>=4)„ow=0;

237 
	}
}

245 
	$Di¥ÏyPageUpd©e
(){

246 
ušt16
 
i
;

247 
ušt8
 
iE¼ÜText
;

249 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹In™
){

250 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
Upd©ePoštS‹In™
[0])+((uint32)(UpdatePointStateInit[1])<<8);

251 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

252 *
ouutRemÙeCÚŒŞSŒšg2
=0x20200000;

253 *
ouutRemÙeCÚŒŞSŒšg3
=0x20202020;

254 
i
=2;i<8;i++){

255 if(
i
<4è*
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageIn™
[
Upd©ePoštS‹In™
[0]-1][UpdatePointStateInit[1]-3+i]<<i*8);

256 *
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageIn™
[
Upd©ePoštS‹In™
[0]-1][Upd©ePoštS‹In™[1]-3+
i
]<<(i-4)*8);

259 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Run
)&&(
akt_·ge
==0)){

260 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
Upd©ePoštS‹Run
[
tmpRowUpd©e
][0])+((uint32)(UpdatePointStateRun[tmpRowUpdate][1])<<8);

261 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

262 *
ouutRemÙeCÚŒŞSŒšg2
=0x20200000;

263 *
ouutRemÙeCÚŒŞSŒšg3
=0x20202020;

264 
i
=2;i<8;i++){

265 if(
i
<4è*
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageRun
[
Upd©ePoštS‹Run
[
tmpRowUpd©e
][0]-1][UpdatePointStateRun[tmpRowUpdate][1]-3+i]<<i*8);

267 if(
Upd©ePoštS‹Run
[
tmpRowUpd©e
][1]<19è*
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageRun
[Upd©ePoštS‹Run[tmpRowUpd©e][0]-1][Upd©ePoštS‹Run[tmpRowUpd©e][1]-3+
i
]<<(i-4)*8);

270 
tmpRowUpd©e
++;

271 if(
tmpRowUpd©e
>=9)mpRowUpdate=0;

273 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Hub
)&&(
akt_·ge
==0)){

274 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
Upd©ePoštS‹Hub
[
tmpRowUpd©e
][0])+((uint32)(UpdatePointStateHub[tmpRowUpdate][1])<<8);

275 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

276 *
ouutRemÙeCÚŒŞSŒšg2
=0x20200000;

277 *
ouutRemÙeCÚŒŞSŒšg3
=0x20202020;

278 
i
=2;i<8;i++){

279 if(
i
<4è*
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageHub
[
Upd©ePoštS‹Hub
[
tmpRowUpd©e
][0]-1][UpdatePointStateHub[tmpRowUpdate][1]-3+i]<<i*8);

281 if(
Upd©ePoštS‹Hub
[
tmpRowUpd©e
][1]<19è*
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageHub
[Upd©ePoštS‹Hub[tmpRowUpd©e][0]-1][Upd©ePoštS‹Hub[tmpRowUpd©e][1]-3+
i
]<<(i-4)*8);

284 
tmpRowUpd©e
++;

285 if(
tmpRowUpd©e
>=11)mpRowUpdate=0;

287 if((*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Auto
)&&(
akt_·ge
==0)){

288 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
Upd©ePoštS‹Auto
[
tmpRowUpd©e
][0])+((uint32)(UpdatePointStateAuto[tmpRowUpdate][1])<<8);

289 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

290 *
ouutRemÙeCÚŒŞSŒšg2
=0x20200000;

291 *
ouutRemÙeCÚŒŞSŒšg3
=0x20202020;

292 
i
=2;i<8;i++){

293 if(
i
<4è*
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageAuto
[
Upd©ePoštS‹Auto
[
tmpRowUpd©e
][0]-1][UpdatePointStateAuto[tmpRowUpdate][1]-3+i]<<i*8);

295 if(
Upd©ePoštS‹Auto
[
tmpRowUpd©e
][1]<19è*
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageAuto
[Upd©ePoštS‹Auto[tmpRowUpd©e][0]-1][Upd©ePoštS‹Auto[tmpRowUpd©e][1]-3+
i
]<<(i-4)*8);

298 
tmpRowUpd©e
++;

299 if(
tmpRowUpd©e
>=6)mpRowUpdate=0;

301 if((*
šputRCFromMa¡”PageS‹
!=
KeyRCDi¥ÏyPageS‹In™
)&&(
akt_·ge
==1)){

302 if(*
šputRCFromMa¡”PageS‹
!=
KeyRCDi¥ÏyPageS‹NÙF®l
){

303 *
ouutRemÙeCÚŒŞSŒšg0
=(
ušt32
)(
Upd©ePoštS‹E¼Ü
[
tmpRowUpd©e
][0])+((uint32)(UpdatePointStateError[tmpRowUpdate][1])<<8);

304 *
ouutRemÙeCÚŒŞSŒšg1
=0x00000000;

305 if(
iE¼ÜText
<0x3c) iErrorText=0x3c;

306 *
ouutRemÙeCÚŒŞSŒšg2
=(
ušt32
)(
iE¼ÜText
)<<8;

307 *
ouutRemÙeCÚŒŞSŒšg3
=0x00000000;

308 
i
=2;i<8;i++){

309 if(
i
<4) {

310 *
ouutRemÙeCÚŒŞSŒšg0
+=((
ušt32
)
PageE¼Ü
[
Upd©ePoštS‹E¼Ü
[
tmpRowUpd©e
][0]-1][Upd©ePoštS‹E¼Ü[tmpRowUpd©e][1]-3+
i
]<<i*8);

311 *
ouutRemÙeCÚŒŞSŒšg2
+=((
ušt32
)
PageE¼Ü
[3+(
iE¼ÜText
-0x3c)/19][(iE¼ÜText-0x3c)%19]<<
i
*8);

314 if(
Upd©ePoštS‹E¼Ü
[
tmpRowUpd©e
][1]<19è*
ouutRemÙeCÚŒŞSŒšg1
+=((
ušt32
)
PageE¼Ü
[Upd©ePoštS‹E¼Ü[tmpRowUpd©e][0]-1][Upd©ePoštS‹E¼Ü[tmpRowUpd©e][1]-3+
i
]<<(i-4)*8);

315 if(((
iE¼ÜText
-0x3c)%19)<18è*
ouutRemÙeCÚŒŞSŒšg3
+=((
ušt32
)
PageE¼Ü
[3+(iE¼ÜText-0x3c)/19][(iE¼ÜText-0x3c)%19]<<(
i
-4)*8);

317 
iE¼ÜText
++;

318 if(
iE¼ÜText
>0x8b){

319 
iE¼ÜText
=0x3c;

323 
tmpRowUpd©e
++;

324 if(
tmpRowUpd©e
>=5)mpRowUpdate=0;

327 
	}
}

335 
	$Di¥ÏyIn™
(){

336 
ušt32
 
timeSmpIn™Anim©iÚ
;

337 if((
RCAùu®Time
-
timeSmpIn™Anim©iÚ
)>1000){

338 
timeSmpIn™Anim©iÚ
=
RCAùu®Time
;

339 if(
PageIn™
[5][14]==0x2e){PageInit[5][13]=0x20;PageInit[5][14]=0x20;}

340 if(
PageIn™
[5][13]==0x2e)PageInit[5][14]=0x2e;

341 if(
PageIn™
[5][13]==0x20)PageInit[5][13]=0x2e;

344 
	}
}

353 
	$Di¥ÏyR—dy
(){

382 
PageR—dy
[5][5]=0x20;

383 
PageR—dy
[5][6]=0x20;

384 
PageR—dy
[5][7]=0x42;

385 
PageR—dy
[5][8]=0x65;

386 
PageR—dy
[5][9]=0x72;

387 
PageR—dy
[5][10]=0x65;

388 
PageR—dy
[5][11]=0x69;

389 
PageR—dy
[5][12]=0x74;

390 
PageR—dy
[5][13]=0x20;

391 
PageR—dy
[5][14]=0x20;

392 
	}
}

400 
	$Di¥ÏyRun
(){

401 
ušt16
 
æag
;

402 
sšt32
 
tmp
;

404 if(
æag
==5){

405 
tmp
=*
šputRCFromMa¡”DriveSysAngË11
;

406 if(
tmp
>9||tmp<-9){

407 if(
tmp
<0) {

408 
PageRun
[1][0]=0x2d;

409 
tmp
=0-tmp;

411 
PageRun
[1][0]=0x20;

412 
PageRun
[1][1]=
ascii_Num
[
tmp
/10];

413 
PageRun
[1][2]=
ascii_Num
[
tmp
%10];

416 
PageRun
[1][0]=0x20;

417 if(
tmp
<0) {

418 
PageRun
[1][1]=0x2d;

419 
tmp
=0-tmp;

421 
PageRun
[1][1]=0x20;

422 
PageRun
[1][2]=
ascii_Num
[
tmp
%10];

425 
tmp
=*
šputRCFromMa¡”DriveSysAngË12
;

426 if(
tmp
>9||tmp<-9){

427 if(
tmp
<0) {

428 
PageRun
[1][6]=0x2d;

429 
tmp
=0-tmp;

431 
PageRun
[1][6]=0x20;

432 
PageRun
[1][7]=
ascii_Num
[
tmp
/10];

433 
PageRun
[1][8]=
ascii_Num
[
tmp
%10];

436 
PageRun
[1][6]=0x20;

437 if(
tmp
<0) {

438 
PageRun
[1][7]=0x2d;

439 
tmp
=0-tmp;

441 
PageRun
[1][7]=0x20;

442 
PageRun
[1][8]=
ascii_Num
[
tmp
%10];

445 if(
æag
==4){

446 
tmp
=*
šputRCFromMa¡”DriveSysAngË21
;

447 if(
tmp
>9||tmp<-9){

448 if(
tmp
<0) {

449 
PageRun
[7][0]=0x2d;

450 
tmp
=0-tmp;

452 
PageRun
[7][0]=0x20;

453 
PageRun
[7][1]=
ascii_Num
[
tmp
/10];

454 
PageRun
[7][2]=
ascii_Num
[
tmp
%10];

457 
PageRun
[7][0]=0x20;

458 if(
tmp
<0) {

459 
PageRun
[7][1]=0x2d;

460 
tmp
=0-tmp;

462 
PageRun
[7][1]=0x20;

463 
PageRun
[7][2]=
ascii_Num
[
tmp
%10];

466 
tmp
=*
šputRCFromMa¡”DriveSysAngË22
;

467 if(
tmp
>9||tmp<-9){

468 if(
tmp
<0) {

469 
PageRun
[7][6]=0x2d;

470 
tmp
=0-tmp;

472 
PageRun
[7][6]=0x20;

473 
PageRun
[7][7]=
ascii_Num
[
tmp
/10];

474 
PageRun
[7][8]=
ascii_Num
[
tmp
%10];

477 
PageRun
[7][6]=0x20;

478 if(
tmp
<0) {

479 
PageRun
[7][7]=0x2d;

480 
tmp
=0-tmp;

482 
PageRun
[7][7]=0x20;

483 
PageRun
[7][8]=
ascii_Num
[
tmp
%10];

486 if(
æag
==3){

487 if((*
šputRCG‘E¼ÜNum
+*
šputRCG‘Ma¡”CPUE¼ÜNum
)>0){

488 
PageRun
[5][15]=0x45;

489 
PageRun
[5][16]=0x72;

490 
PageRun
[5][17]=0x72;

491 
PageRun
[5][18]=0x6f;

492 
PageRun
[5][19]=0x72;

495 
PageRun
[5][15]=0x20;

496 
PageRun
[5][16]=0x20;

497 
PageRun
[5][17]=0x20;

498 
PageRun
[5][18]=0x20;

499 
PageRun
[5][19]=0x20;

502 if(
æag
==2){

503 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
){

504 
PageRun
[1][5]=0x20;

507 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”1Stİ
è
PageRun
[1][5]=0x2d;

509 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”1W¬n
è
PageRun
[1][5]=0x21;

510 
PageRun
[1][5]=0x78;

513 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
){

514 
PageRun
[7][5]=0x20;

517 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”2Stİ
è
PageRun
[7][5]=0x2d;

519 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”2W¬n
è
PageRun
[7][5]=0x21;

520 
PageRun
[7][5]=0x78;

523 if(*
šputRCFromMa¡”StusExtMES
&
KeyRCDi¥ÏyStusExtLSD—ktiv
){

524 
PageRun
[3][14]=0x4e;

525 
PageRun
[3][15]=0x6f;

526 
PageRun
[3][16]=0x20;

527 
PageRun
[3][17]=0x53;

528 
PageRun
[3][18]=0x4c;

529 
PageRun
[3][19]=0x53;

532 
PageRun
[3][14]=0x20;

533 
PageRun
[3][15]=0x20;

534 
PageRun
[3][16]=0x20;

535 
PageRun
[3][17]=0x53;

536 
PageRun
[3][18]=0x4c;

537 
PageRun
[3][19]=0x53;

540 if(
æag
==1){

541 if(*
šputRCFromMa¡”StusExtMES
&
KeyRCDi¥ÏyStusExtCrossIsSw™ch
){

542 
PageRun
[4][6]=0x77;

543 
PageRun
[4][7]=0x61;

544 
PageRun
[4][8]=0x69;

545 
PageRun
[4][9]=0x74;

546 
PageRun
[4][10]=0x2e;

547 
PageRun
[4][11]=0x2e;

550 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusCrossDrive
è
PageRun
[4][6]=0x80;

551 
PageRun
[4][6]=0x81;

552 
PageRun
[4][7]=0x20;

553 
PageRun
[4][8]=0x20;

554 
PageRun
[4][9]=0x20;

555 
PageRun
[4][10]=0x20;

556 
PageRun
[4][11]=0x20;

559 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeP¬k
){

560 
PageRun
[4][0]=0x50;

561 
PageRun
[4][1]=0x20;

563 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeAÎ¿d
){

564 
PageRun
[4][0]=0x41;

565 
PageRun
[4][1]=0x52;

567 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeVÜd”¿d
){

568 
PageRun
[4][0]=0x56;

569 
PageRun
[4][1]=0x52;

571 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeHš‹¼ad
){

572 
PageRun
[4][0]=0x48;

573 
PageRun
[4][1]=0x52;

575 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeK»bsgªg
){

576 
PageRun
[4][0]=0x4b;

577 
PageRun
[4][1]=0x47;

579 if(*
šputRCFromMa¡”S‹”šgMode
==
KeyRCDi¥ÏyS‹”šgModeRundgªg
){

580 
PageRun
[4][0]=0x52;

581 
PageRun
[4][1]=0x47;

584 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusIsS‹”šgMÙiÚ
){

585 
PageRun
[7][14]=0x4d;

586 
PageRun
[7][15]=0x6f;

587 
PageRun
[7][16]=0x74;

588 
PageRun
[7][17]=0x69;

589 
PageRun
[7][18]=0x6f;

590 
PageRun
[7][19]=0x6e;

593 
PageRun
[7][14]=0x4e;

594 
PageRun
[7][15]=0x6f;

595 
PageRun
[7][16]=0x72;

596 
PageRun
[7][17]=0x6d;

597 
PageRun
[7][18]=0x61;

598 
PageRun
[7][19]=0x6c;

601 if(
æag
==0){

602 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusZ”oS‘
){

603 
PageRun
[4][2]=0x80;

604 
PageRun
[4][3]=0x7c;

605 
PageRun
[4][4]=0x7f;

608 
PageRun
[4][2]=0x20;

609 
PageRun
[4][3]=0x20;

610 
PageRun
[4][4]=0x20;

613 if(
æag
>0) flag--;

614 
æag
=5;

615 
	}
}

623 
	$Di¥ÏyHub
(){

624 
ušt16
 
æag
;

625 
sšt8
 
tmp
;

627 if(
æag
==3){

628 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k11Height
);

629 if(
tmp
>99){
PageHub
[1][0]=
ascii_Num
[tmp/100];tmp=tmp%100;}

630 
PageHub
[1][0]=0x30;

631 if(
tmp
>9){
PageHub
[1][1]=
ascii_Num
[tmp/10];tmp=tmp%10;}

632 
PageHub
[1][1]=0x30;

633 if(
tmp
<=9è
PageHub
[1][2]=
ascii_Num
[tmp];

635 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k12Height
);

636 if(
tmp
>99){
PageHub
[1][6]=
ascii_Num
[tmp/100];tmp=tmp%100;}

637 
PageHub
[1][6]=0x30;

638 if(
tmp
>9){
PageHub
[1][7]=
ascii_Num
[tmp/10];tmp=tmp%10;}

639 
PageHub
[1][7]=0x30;

640 if(
tmp
<=9è
PageHub
[1][8]=
ascii_Num
[tmp];

642 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k21Height
);

643 if(
tmp
>99){
PageHub
[7][0]=
ascii_Num
[tmp/100];tmp=tmp%100;}

644 
PageHub
[7][0]=0x30;

645 if(
tmp
>9){
PageHub
[7][1]=
ascii_Num
[tmp/10];mp=tmp%10;}

646 
PageHub
[7][1]=0x30;

647 if(
tmp
<=9è
PageHub
[7][2]=
ascii_Num
[tmp];

649 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k22Height
);

650 if(
tmp
>99){
PageHub
[7][6]=
ascii_Num
[tmp/100];tmp=tmp%100;}

651 
PageHub
[7][6]=0x30;

652 if(
tmp
>9){
PageHub
[7][7]=
ascii_Num
[tmp/10];mp=tmp%10;}

653 
PageHub
[7][7]=0x30;

654 if(
tmp
<=9è
PageHub
[7][8]=
ascii_Num
[tmp];

656 if(
æag
==2){

657 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k11P»ssu»
/1000);

658 if(
tmp
>99){
PageHub
[4][15]=
ascii_Num
[tmp/100];tmp=tmp%100;}

659 
PageHub
[4][15]=0x30;

660 if(
tmp
>9){
PageHub
[4][16]=
ascii_Num
[tmp/10];tmp=tmp%10;}

661 
PageHub
[4][16]=0x30;

662 if(
tmp
<=9è
PageHub
[4][17]=
ascii_Num
[tmp];

664 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k12P»ssu»
/1000);

665 if(
tmp
>99){
PageHub
[5][15]=
ascii_Num
[tmp/100];tmp=tmp%100;}

666 
PageHub
[5][15]=0x30;

667 if(
tmp
>9){
PageHub
[5][16]=
ascii_Num
[tmp/10];tmp=tmp%10;}

668 
PageHub
[5][16]=0x30;

669 if(
tmp
<=9è
PageHub
[5][17]=
ascii_Num
[tmp];

671 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k21P»ssu»
/1000);

672 if(
tmp
>99){
PageHub
[6][15]=
ascii_Num
[tmp/100];tmp=tmp%100;}

673 
PageHub
[6][15]=0x30;

674 if(
tmp
>9){
PageHub
[6][16]=
ascii_Num
[tmp/10];tmp=tmp%10;}

675 
PageHub
[6][16]=0x30;

676 if(
tmp
<=9è
PageHub
[6][17]=
ascii_Num
[tmp];

678 
tmp
=(
ušt16
)(*
šputRCG‘HubW”k22P»ssu»
/1000);

679 if(
tmp
>99){
PageHub
[7][15]=
ascii_Num
[tmp/100];tmp=tmp%100;}

680 
PageHub
[7][15]=0x30;

681 if(
tmp
>9){
PageHub
[7][16]=
ascii_Num
[tmp/10];tmp=tmp%10;}

682 
PageHub
[7][16]=0x30;

683 if(
tmp
<=9è
PageHub
[7][17]=
ascii_Num
[tmp];

685 if(
æag
==1){

686 if((*
šputRCG‘E¼ÜNum
+*
šputRCG‘Ma¡”CPUE¼ÜNum
)>0){

687 
PageHub
[1][15]=0x45;

688 
PageHub
[1][16]=0x72;

689 
PageHub
[1][17]=0x72;

690 
PageHub
[1][18]=0x6f;

691 
PageHub
[1][19]=0x72;

694 
PageHub
[1][15]=0x20;

695 
PageHub
[1][16]=0x20;

696 
PageHub
[1][17]=0x20;

697 
PageHub
[1][18]=0x20;

698 
PageHub
[1][19]=0x20;

701 if(
æag
==0){

702 if((*
šputRCG‘HubSy¡emCÚŒŞWÜd
&
KeyRCS‘HubSysEÇbË
)==0){

703 
PageHub
[4][6]=0x77;

704 
PageHub
[4][7]=0x61;

705 
PageHub
[4][8]=0x69;

706 
PageHub
[4][9]=0x74;

707 
PageHub
[4][10]=0x2e;

708 
PageHub
[4][11]=0x2e;

711 
PageHub
[4][6]=0x20;

712 
PageHub
[4][7]=0x20;

713 
PageHub
[4][8]=0x20;

714 
PageHub
[4][9]=0x20;

715 
PageHub
[4][10]=0x20;

716 
PageHub
[4][11]=0x20;

718 if(*
šputRCG‘HubSy¡emCÚŒŞWÜd
&
KeyRCS‘HubSysHeb’
)
PageHub
[4][4]=0x81;

719 if(*
šputRCG‘HubSy¡emCÚŒŞWÜd
&
KeyRCS‘HubSysSšk’
)
PageHub
[4][4]=0x82;

720 
PageHub
[4][4]=0x2d;

722 if(
æag
>0) flag--;

723 
æag
=3;

724 
	}
}

732 
	$Di¥ÏyAutoDrive
(){

733 
ušt16
 
æag
;

734 
sšt32
 
tmp
;

735 if(
æag
==4){

736 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusAutoIn™
){

737 
PageAuto
[4][6]=0x77;

738 
PageAuto
[4][7]=0x61;

739 
PageAuto
[4][8]=0x69;

740 
PageAuto
[4][9]=0x74;

741 
PageAuto
[4][10]=0x2e;

742 
PageAuto
[4][11]=0x2e;

745 
PageAuto
[4][6]=0x20;

746 
PageAuto
[4][7]=0x20;

747 
PageAuto
[4][8]=0x20;

748 
PageAuto
[4][9]=0x20;

749 
PageAuto
[4][10]=0x20;

750 
PageAuto
[4][11]=0x20;

753 if(
æag
==3){

754 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusAutoStİZÚe
){

755 
tmp
=*
šputRCFromMa¡”XV®ue
;

756 if(
tmp
>999){
PageAuto
[2][16]=
ascii_Num
[tmp/1000];tmp=tmp%1000;}

757 
PageAuto
[2][16]=0x30;

758 if(
tmp
>99){
PageAuto
[2][17]=
ascii_Num
[tmp/100];tmp=tmp%100;}

759 
PageAuto
[2][17]=0x30;

760 if(
tmp
>9){
PageAuto
[2][18]=
ascii_Num
[tmp/10];tmp=tmp%10;}

761 
PageAuto
[2][18]=0x30;

762 if(
tmp
<=9è
PageAuto
[2][19]=
ascii_Num
[tmp];

765 
PageAuto
[2][16]=0x2d;

766 
PageAuto
[2][17]=0x2d;

767 
PageAuto
[2][18]=0x2d;

768 
PageAuto
[2][19]=0x2d;

771 if(
æag
==2){

772 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusK1BªdFšd
){

773 
tmp
=*
šputRCFromMa¡”Y1V®ue
;

774 if(
tmp
>=0è
PageAuto
[4][17]=0x2b;

775 { 
PageAuto
[4][17]=0x2d; 
tmp
=0-tmp;}

776 if(
tmp
>9){
PageAuto
[4][18]=
ascii_Num
[tmp/10];tmp=tmp%10;}

777 
PageAuto
[4][18]=0x30;

778 if(
tmp
<=9è
PageAuto
[4][19]=
ascii_Num
[tmp];

781 
PageAuto
[4][17]=0x2d;

782 
PageAuto
[4][18]=0x2d;

783 
PageAuto
[4][19]=0x2d;

785 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusK2BªdFšd
){

786 
tmp
=*
šputRCFromMa¡”Y2V®ue
;

787 if(
tmp
>=0è
PageAuto
[5][17]=0x2b;

788 { 
PageAuto
[5][17]=0x2d; 
tmp
=0-tmp;}

789 if(
tmp
>9){
PageAuto
[5][18]=
ascii_Num
[tmp/10];tmp=tmp%10;}

790 
PageAuto
[5][18]=0x30;

791 if(
tmp
<=9è
PageAuto
[5][19]=
ascii_Num
[tmp];

794 
PageAuto
[5][17]=0x2d;

795 
PageAuto
[5][18]=0x2d;

796 
PageAuto
[5][19]=0x2d;

799 if(
æag
==1){

800 if((*
šputRCG‘E¼ÜNum
+*
šputRCG‘Ma¡”CPUE¼ÜNum
)>0){

801 
PageAuto
[7][15]=0x45;

802 
PageAuto
[7][16]=0x72;

803 
PageAuto
[7][17]=0x72;

804 
PageAuto
[7][18]=0x6f;

805 
PageAuto
[7][19]=0x72;

813 
PageAuto
[7][15]=0x20;

814 
PageAuto
[7][16]=0x20;

815 
PageAuto
[7][17]=0x20;

816 
PageAuto
[7][18]=0x20;

817 
PageAuto
[7][19]=0x20;

819 if((*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusAutoIn™
)==0){

820 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusDriveFÜw¬d
è
PageAuto
[4][6]=0x81;

821 if(*
šputRCFromMa¡”StusAutoDrive
&
KeyRCDi¥ÏyAutoStusDriveBackw¬d
è
PageAuto
[4][6]=0x82;

822 
PageAuto
[4][6]=0x20;

825 if(
æag
==0){

826 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”1D—ktiv
){

827 
PageAuto
[1][5]=0x20;

830 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”1Stİ
è
PageAuto
[1][5]=0x2d;

832 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”1W¬n
è
PageAuto
[1][5]=0x21;

833 
PageAuto
[1][5]=0x78;

836 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCS‘SaãtySysLa£rsÿÂ”2D—ktiv
){

837 
PageAuto
[7][5]=0x20;

840 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”2Stİ
è
PageAuto
[7][5]=0x2d;

842 if(*
šputRCG‘SaãtyMa¡”CÚŒŞWÜd
&
KeyRCG‘SaãtySysLa£rsÿÂ”2W¬n
è
PageAuto
[7][5]=0x21;

843 
PageAuto
[7][5]=0x78;

847 if(
æag
>0) flag--;

848 
æag
=4;

849 
	}
}

857 
	$Di¥ÏyNÙF®l
(){

859 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusNÙAus
){

860 if((*
šputRCFromMa¡”StusExtMES
&
KeyRCDi¥ÏyStusExtRCR–aisAus
)==0){

864 
PageNÙF®l
[5][6]=0x4e;

865 
PageNÙF®l
[5][7]=0x6f;

866 
PageNÙF®l
[5][8]=0x74;

867 
PageNÙF®l
[5][9]=0x2d;

868 
PageNÙF®l
[5][10]=0x41;

869 
PageNÙF®l
[5][11]=0x75;

870 
PageNÙF®l
[5][12]=0x73;

871 
PageNÙF®l
[6][6]=0x20;

872 
PageNÙF®l
[6][7]=0x20;

873 
PageNÙF®l
[6][8]=0x20;

874 
PageNÙF®l
[6][9]=0x20;

875 
PageNÙF®l
[6][10]=0x20;

876 
PageNÙF®l
[6][11]=0x20;

877 
PageNÙF®l
[6][12]=0x20;

881 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusLadung
){

882 
PageNÙF®l
[5][6]=0x20;

883 
PageNÙF®l
[5][7]=0x4c;

884 
PageNÙF®l
[5][8]=0x61;

885 
PageNÙF®l
[5][9]=0x64;

886 
PageNÙF®l
[5][10]=0x75;

887 
PageNÙF®l
[5][11]=0x6e;

888 
PageNÙF®l
[5][12]=0x67;

889 
PageNÙF®l
[6][6]=0x20;

890 
PageNÙF®l
[6][7]=0x20;

891 
PageNÙF®l
[6][8]=0x20;

892 
PageNÙF®l
[6][9]=0x20;

893 
PageNÙF®l
[6][10]=0x20;

894 
PageNÙF®l
[6][11]=0x20;

895 
PageNÙF®l
[6][12]=0x20;

899 
PageNÙF®l
[5][6]=0x20;

900 
PageNÙF®l
[5][7]=0x53;

901 
PageNÙF®l
[5][8]=0x74;

902 
PageNÙF®l
[5][9]=0x61;

903 
PageNÙF®l
[5][10]=0x72;

904 
PageNÙF®l
[5][11]=0x74;

905 
PageNÙF®l
[5][12]=0x20;

906 
PageNÙF®l
[6][6]=0x44;

907 
PageNÙF®l
[6][7]=0x72;

908 
PageNÙF®l
[6][8]=0x75;

909 
PageNÙF®l
[6][9]=0x63;

910 
PageNÙF®l
[6][10]=0x6b;

911 
PageNÙF®l
[6][11]=0x65;

912 
PageNÙF®l
[6][12]=0x6e;

915 
PageNÙF®l
[5][6]=0x20;

916 
PageNÙF®l
[5][7]=0x20;

917 
PageNÙF®l
[5][8]=0x20;

918 
PageNÙF®l
[5][9]=0x20;

919 
PageNÙF®l
[5][10]=0x20;

920 
PageNÙF®l
[5][11]=0x20;

921 
PageNÙF®l
[5][12]=0x20;

922 
PageNÙF®l
[6][6]=0x20;

923 
PageNÙF®l
[6][7]=0x20;

924 
PageNÙF®l
[6][8]=0x20;

925 
PageNÙF®l
[6][9]=0x20;

926 
PageNÙF®l
[6][10]=0x20;

927 
PageNÙF®l
[6][11]=0x20;

928 
PageNÙF®l
[6][12]=0x20;

932 
	}
}

940 
	$Di¥ÏyE¼Ü
(){

941 
ušt16
 
æag
;

942 
ušt8
 
E¼Ü_·ge
;

943 
ušt8
 
E¼ÜNum
;

944 
ušt32
 
E¼ÜCode
;

945 
sšt16
 
NumE¼ÜLi¡
;

946 
ušt32
 
tmp
;

947 
ušt16
 
i
;

949 
E¼ÜNum
=*
šputRCG‘E¼ÜNum
+*
šputRCG‘Ma¡”CPUE¼ÜNum
;

951 if(
RCReqWÜd
&
KeyRCReqWÜdMeunTa¡”Leá
){

952 
RCReqWÜd
&=~
KeyRCReqWÜdMeunTa¡”Leá
;

953 if(
E¼Ü_·ge
>0) Error_page--;

954 
E¼Ü_·ge
=0;

956 if(
RCReqWÜd
&
KeyRCReqWÜdMeunTa¡”Right
){

957 
RCReqWÜd
&=~
KeyRCReqWÜdMeunTa¡”Right
;

958 if(
E¼Ü_·ge
<(
E¼ÜNum
-1)) Error_page++;

959 
E¼Ü_·ge
=
E¼ÜNum
-1;

961 if(
E¼ÜNum
!=0){

962 if(
E¼Ü_·ge
<*
šputRCG‘E¼ÜNum
è
E¼ÜCode
=*
šputRCG‘E¼ÜCode
[Error_page];

963 
E¼ÜCode
=*
šputRCG‘E¼ÜCodeMa¡”CPU
[
E¼Ü_·ge
-*
šputRCG‘E¼ÜNum
];

965 
E¼ÜCode
=0;

966 if(
æag
==2){

967 if(
E¼ÜNum
!=0){

968 if(
E¼Ü_·ge
>8è
PageE¼Ü
[0][6]=
ascii_Num
[(Error_page+1)/10];

969 
PageE¼Ü
[0][6]=0x20;

970 
PageE¼Ü
[0][7]=
ascii_Num
[(
E¼Ü_·ge
+1)%10];

971 if(
E¼ÜNum
>9){

972 
PageE¼Ü
[0][9]=
ascii_Num
[
E¼ÜNum
/10];

973 
PageE¼Ü
[0][10]=
ascii_Num
[
E¼ÜNum
%10];

976 
PageE¼Ü
[0][9]=
ascii_Num
[
E¼ÜNum
];

977 
PageE¼Ü
[0][10]=0x20;

981 
PageE¼Ü
[0][18]=0x20;

982 
PageE¼Ü
[0][19]=0x20;

983 
PageE¼Ü
[0][6]=0x20;

984 
PageE¼Ü
[0][7]=0x30;

985 
PageE¼Ü
[0][9]=0x30;

986 
PageE¼Ü
[0][10]=0x20;

989 if(
æag
==1){

990 if(
E¼ÜNum
!=0){

991 
tmp
=
E¼ÜCode
%1000000;

992 
PageE¼Ü
[1][10]=
ascii_Num
[(
ušt16
)(
tmp
/100000)];

993 
tmp
=tmp%100000;

994 
PageE¼Ü
[1][11]=
ascii_Num
[(
ušt16
)(
tmp
/10000)];

996 
PageE¼Ü
[2][11]=
ascii_Num
[(
ušt16
)(
E¼ÜCode
/1000000)];

997 
tmp
=
E¼ÜCode
%1000000;

998 
PageE¼Ü
[2][12]=
ascii_Num
[(
ušt16
)(
tmp
/100000)];

999 
tmp
=tmp%100000;

1000 
PageE¼Ü
[2][13]=
ascii_Num
[(
ušt16
)(
tmp
/10000)];

1001 
tmp
=tmp%10000;

1002 
PageE¼Ü
[2][14]=
ascii_Num
[(
ušt16
)(
tmp
/1000)];

1003 
tmp
=tmp%1000;

1004 
PageE¼Ü
[2][15]=
ascii_Num
[(
ušt16
)(
tmp
/100)];

1005 
tmp
=tmp%100;

1006 
PageE¼Ü
[2][16]=
ascii_Num
[(
ušt16
)(
tmp
/10)];

1007 
tmp
=tmp%10;

1008 
PageE¼Ü
[2][17]=
ascii_Num
[(
ušt16
)(
tmp
)];

1011 
PageE¼Ü
[1][10]=0x2d;

1012 
PageE¼Ü
[1][11]=0x2d;

1013 
PageE¼Ü
[2][11]=0x2d;

1014 
PageE¼Ü
[2][12]=0x2d;

1015 
PageE¼Ü
[2][13]=0x2d;

1016 
PageE¼Ü
[2][14]=0x2d;

1017 
PageE¼Ü
[2][15]=0x2d;

1018 
PageE¼Ü
[2][16]=0x2d;

1019 
PageE¼Ü
[2][17]=0x2d;

1022 if(
æag
==0){

1023 if(
E¼ÜNum
!=0){

1024 
NumE¼ÜLi¡
=
	`G‘NumE¼ÜTextLi¡
(
E¼ÜCode
);

1025 
i
=0;i<60;i++){

1027 if(
NumE¼ÜLi¡
==-1) ;

1028 
PageE¼Ü
[3+
i
/20][i%20]=
E¼ÜText
[
NumE¼ÜLi¡
][i];

1032 
i
=0;i<60;i++){

1034 
PageE¼Ü
[3+
i
/20][i%20]=0x20;

1038 if(
æag
>0) flag--;

1039 
æag
=2;

1040 
	}
}

1043 
	$S‘PageIn™
(){

1044 
tmpRowUpd©e
=0;

1045 
row
=0;

1046 
cŞumn
=0;

1047 
	}
}

1058 
	$Di¥Ïy
(){

1059 
ušt16
 
Upd©eFÏg
;

1060 
ušt16
 
tick
;

1062 if(
RCReqWÜd
&
KeyRCReqWÜdMeunTa¡”Push
){

1063 
RCReqWÜd
&=~
KeyRCReqWÜdMeunTa¡”Push
;

1064 if(
akt_·ge
==0)‡kt_page=1;

1065 
akt_·ge
=0;

1066 *
šputRCFromMa¡”StusMES
|=
KeyRCDi¥ÏyStusPageUpd©e
;

1069 ià((
Upd©eFÏg
<300)||(
tick
<20)è
	`Di¥ÏyPageIn™
();

1070 
	`Di¥ÏyPageUpd©e
();

1071 if(
akt_·ge
==0){

1072 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹In™
è
	`Di¥ÏyIn™
();

1073 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹R—dy
è
	`Di¥ÏyR—dy
();

1074 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Run
è
	`Di¥ÏyRun
();

1075 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Hub
è
	`Di¥ÏyHub
();

1076 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹Auto
è
	`Di¥ÏyAutoDrive
();

1079 if((*
šputRCFromMa¡”PageS‹
!=
KeyRCDi¥ÏyPageS‹In™
)&&(*šputRCFromMa¡”PageS‹!=
KeyRCDi¥ÏyPageS‹NÙF®l
)è
	`Di¥ÏyE¼Ü
();

1081 if(*
šputRCFromMa¡”PageS‹
==
KeyRCDi¥ÏyPageS‹NÙF®l
è
	`Di¥ÏyNÙF®l
();

1083 if(
Upd©eFÏg
<305) UpdateFlag++;

1085 if(
tick
>=2000)ick==0;

1087 if(*
šputRCFromMa¡”StusMES
&
KeyRCDi¥ÏyStusPageUpd©e
){*šputRCFromMa¡”StusMES&=~KeyRCDi¥ÏyStusPageUpd©e;
Upd©eFÏg
=0;}

1088 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplayErrorText.c

1 
	~<RemÙeCÚŒŞDi¥ÏyE¼ÜText.h
>

3 
ušt32
 
	gE¼ÜCodeLi¡
[
L’gthOfE¼ÜLi¡
]={

87 
ušt8
 
	gE¼ÜText
[
L’gthOfE¼ÜLi¡
][60]={

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplayErrorText.h

1 #iâdeà
_REMOTECONTROLDISPLAYERRORTEXT_H


2 
	#_REMOTECONTROLDISPLAYERRORTEXT_H


	)

3 
	~<¡wty³s.h
>

5 
	#L’gthOfE¼ÜLi¡
 82

	)

7 
ušt32
 
E¼ÜCodeLi¡
[
L’gthOfE¼ÜLi¡
];

8 
ušt8
 
E¼ÜText
[
L’gthOfE¼ÜLi¡
][60];

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlInterface.h

1 #iâdeà
_REMOTECONTROLINTERFACE_H


2 
	#_REMOTECONTROLINTERFACE_H


	)

14 
In™RemÙeCÚŒŞ
();

22 
TaskRemÙeCÚŒŞAwake
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\Safety.c

1 
	~"Saãty.h
"

2 
	~"SaãtyD©a.h
"

3 
	~"SaãtyIÁ”çû.h
"

11 
	$In™IÁ”çûSaãty
(){

12 
ušt16
 
i
;

13 
šputE¼ÜCouÁ
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexNumOfE¼Ü
,
Ty³U16
,0); *inputErrorCount=0;

15 
šputSaãtyD©eTime1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysD©eTime1
,
Ty³U32
,0);

16 
šputSaãtyD©eTime2
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysD©eTime2
,
Ty³U32
,0);

18 
šputSaãtySysCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCÚŒŞWÜd
,
Ty³U32
,0);

20 
i
=0;i<32;i++){

21 
šputE¼ÜRegi¡”
[
i
]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01
+i,
Ty³U32
,0);

22 
šputE¼ÜTimeSmp
[
i
][0]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01Time¡amp1
+i*2,
Ty³U32
,0);

23 
šputE¼ÜTimeSmp
[
i
][1]=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexE¼ÜRegi¡”01Time¡amp1
+i*2+1,
Ty³U32
,0);

26 
	`In™SaãtyPLC
();

27 
	`In™SaãtyHubSys
();

28 
	}
}

37 
	$£tFauÉ
(){

38 
çuÉ
++;

39 
	}
}

47 
	$S‘E¼ÜCode
(
ušt32
 
code
){

48 
ušt16
 
iE¼Ü
;

50 if(
code
==0) ;

52 
iE¼Ü
=0;iError<31;iError++){

53 *
šputE¼ÜRegi¡”
[31-
iE¼Ü
]=*inputErrorRegister[30-iError];

54 *
šputE¼ÜTimeSmp
[31-
iE¼Ü
][0]=*inputErrorTimeStamp[30-iError][0];

55 *
šputE¼ÜTimeSmp
[31-
iE¼Ü
][1]=*inputErrorTimeStamp[30-iError][1];

58 *
šputE¼ÜRegi¡”
[0]=
code
;

59 *
šputE¼ÜTimeSmp
[0][0]=*
šputSaãtyD©eTime1
;

60 *
šputE¼ÜTimeSmp
[0][1]=*
šputSaãtyD©eTime2
;

62 
iE¼Ü
=0x01;iError<0x61;iError++){

63 
	`StÜeLßdOD
(0x6500,
iE¼Ü
,
StÜeODToEEP
);

67 
	}
}

75 
	$CË¬E¼ÜCode
(){

76 
ušt16
 
iE¼Ü
;

77 
iE¼Ü
=0;iError<32;iError++){

78 *
šputE¼ÜRegi¡”
[
iE¼Ü
]=0;

79 *
šputE¼ÜTimeSmp
[
iE¼Ü
][0]=0;

80 *
šputE¼ÜTimeSmp
[
iE¼Ü
][1]=0;

82 
iE¼Ü
=0x01;iError<0x61;iError++){

83 
	`StÜeLßdOD
(0x6500,
iE¼Ü
,
StÜeODToEEP
);

86 
	}
}

94 
	$SaãtyTim”
(){

95 
	`Tim”SaãtyHubSys
();

96 
	}
}

104 
	$Task_Saãty
(*
¬gv
){

105 
¬gv
=argv;

106 
ušt32
 
u32_Ev’ts
;

107 
ušt16
 
æag
;

109 
TRUE
){

110 
	`SaãtyTim”
();

111 
æag
){

112 0: 
	`HªdËSaãtyHubSys
(); ;

113 1: 
	`HªdËSaãtyNÜm®
(); ;

114 2: 
	`HªdËSaãtyPLC
(); ;

117 if(
æag
>=2) {

118 *
šputE¼ÜCouÁ
=
çuÉ
;

119 if(*
šputE¼ÜCouÁ
>8) *inputErrorCount=8;

120 
çuÉ
=0;

121 
æag
=0;

123 
æag
++;

124 if(*
šputSaãtySysCÚŒŞWÜd
&0x00000008){

125 *
šputSaãtySysCÚŒŞWÜd
&=~0x00000008;

126 
	`CË¬E¼ÜCode
();

130 
	`x_os_wa™_fÜ_ev’ts
();

132 
	}
}

141 
	$In™Saãty
(){

142 
	`In™IÁ”çûSaãty
();

143 
	`x_os_š¡®l_sk
(
PrioSaãty
, 500, 100, 
Task_Saãty
, 128);

144 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\Safety.h

1 #iâdeà
_SAFETY_H


2 
	#_SAFETY_H


	)

4 
	~"¡wty³s.h
"

5 
	~"x_sys.h
"

6 
	~"x_os.h
"

7 
	~"DeviûOD.h
"

8 
	~"MESCÚfig.h
"

9 
	~"AµCÚfig.h
"

17 
S‘E¼ÜCode
(
ušt32
 
code
);

25 
£tFauÉ
();

34 
In™SaãtyHubSys
();

41 
HªdËSaãtyHubSys
();

48 
Tim”SaãtyHubSys
();

57 
In™SaãtyPLC
();

64 
HªdËSaãtyPLC
();

71 
Tim”SaãtyPLC
();

80 
HªdËSaãtyNÜm®
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyData.c

1 
	~"SaãtyD©a.h
"

4 
ušt32
 *
	gšputE¼ÜRegi¡”
[32];

5 
ušt32
 *
	gšputE¼ÜTimeSmp
[32][2];

8 
ušt32
 *
	gšputSaãtySysCÚŒŞWÜd
;

11 
ušt16
 *
	gšputE¼ÜCouÁ
;

14 
ušt32
 *
	gšputSaãtyD©eTime1
;

15 
ušt32
 *
	gšputSaãtyD©eTime2
;

17 
ušt16
 
	gçuÉ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyData.h

1 #iâdeà
_SAFETYDATA_H


2 
	#_SAFETYDATA_H


	)

3 
	~"¡wty³s.h
"

5 
	~"SaãtyHubSysD©a.h
"

6 
	~"SaãtyPLCD©a.h
"

8 
	#KeySaãtyS‘RCE¼Ü
 0x00000001

	)

9 
	#KeySaãtyG‘RCLa£rsÿÂ”D—ktiv
 0x00000002

	)

10 
	#KeySaãtyG‘RCNoMÙiÚ
 0x00000004

	)

11 
	#KeySaãtyS‘RCLa£rsÿÂ”1W¬n
 0x00000008

	)

12 
	#KeySaãtyS‘RCLa£rsÿÂ”1Stİ
 0x00000010

	)

13 
	#KeySaãtyS‘RCLa£rsÿÂ”2W¬n
 0x00000020

	)

14 
	#KeySaãtyS‘RCLa£rsÿÂ”2Stİ
 0x00000040

	)

21 
ušt32
 *
šputE¼ÜRegi¡”
[32];

22 
ušt32
 *
šputE¼ÜTimeSmp
[32][2];

25 
ušt16
 *
šputE¼ÜCouÁ
;

28 
ušt32
 *
šputSaãtySysCÚŒŞWÜd
;

31 
ušt32
 *
šputSaãtyD©eTime1
;

32 
ušt32
 *
šputSaãtyD©eTime2
;

34 
ušt16
 
çuÉ
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSys.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$In™SaãtyHubSys
(){

11 
šputSaãtyHubSy¡emWeight
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexWeight
,
Ty³S32
,0); *inputSafetyHubSystemWeight=0;

12 
šputSaãtyHubSy¡emCGV®ueX
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexXV®ueCG
,
Ty³S32
,0); *inputSafetyHubSystemCGValueX=0;

13 
šputSaãtyHubSy¡emCGV®ueY
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexYV®ueCG
,
Ty³S32
,0); *inputSafetyHubSystemCGValueY=0;

14 
šputSaãtyHubSy¡emHeight11
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–11
,
Ty³U32
,0); *inputSafetyHubSystemHeight11=0x00000000;

15 
šputSaãtyHubSy¡emHeight12
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–12
,
Ty³U32
,0); *inputSafetyHubSystemHeight12=0x00000000;

16 
šputSaãtyHubSy¡emHeight21
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–21
,
Ty³U32
,0); *inputSafetyHubSystemHeight21=0x00000000;

17 
šputSaãtyHubSy¡emHeight22
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHeightHubAx–22
,
Ty³U32
,0); *inputSafetyHubSystemHeight22=0x00000000;

18 
šputSaãtyHubSy¡emP»ssu»11
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–11
,
Ty³S32
,0); *inputSafetyHubSystemPressure11=0;

19 
šputSaãtyHubSy¡emP»ssu»12
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–12
,
Ty³S32
,0); *inputSafetyHubSystemPressure12=0;

20 
šputSaãtyHubSy¡emP»ssu»21
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–21
,
Ty³S32
,0); *inputSafetyHubSystemPressure21=0;

21 
šputSaãtyHubSy¡emP»ssu»22
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜAx–22
,
Ty³S32
,0); *inputSafetyHubSystemPressure22=0;

22 
šputSaãtyHubSy¡emP»ssu»Maš
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexP»ssu»S’sÜPump
,
Ty³S32
,0); *inputSafetyHubSystemPressureMain=0;

23 
šputSaãtyHubSy¡emTem³¿turMaš
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexAùu®Tem³¿tu»
,
Ty³S32
,0); *inputSafetyHubSystemTemperaturMain=0;

24 
šputSaãtyHubSy¡emPum³StusBy‹
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³U8
,0); *inputSafetyHubSystemPumpeStatusByte=0x00;

25 
šputSaãtyHubSy¡emPum³Aùu®S³ed
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rTPDO1LowDWÜd
,
Ty³S16
,1); *inputSafetyHubSystemPumpeActualSpeed=0;

26 
šputSaãtyHubSy¡emS³edHeight11
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–11
,
Ty³S32
,0); *inputSafetyHubSystemSpeedHeight11=0;

27 
šputSaãtyHubSy¡emS³edHeight12
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–12
,
Ty³S32
,0); *inputSafetyHubSystemSpeedHeight12=0;

28 
šputSaãtyHubSy¡emS³edHeight21
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–21
,
Ty³S32
,0); *inputSafetyHubSystemSpeedHeight21=0;

29 
šputSaãtyHubSy¡emS³edHeight22
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubS³edAx–22
,
Ty³S32
,0); *inputSafetyHubSystemSpeedHeight22=0;

30 
šputSaãtyHubSy¡emPum³NodeStus
=
	`BšdODMem
(
Inv”‹rS¹Index
,
SubšdexInv”‹rNodeStus
,
Ty³U8
,1); *inputSafetyHubSystemPumpeNodeStatus=0x00;

32 
ouutSaãtyHubSy¡emCÚŒŞWÜd
=
	`BšdODMem
(
HubSy¡emS¹Index
,
SubšdexHubSy¡emCÚŒŞWÜd
 ,
Ty³U32
,0); *outputSafetyHubSystemControlWord=0x00000000;

33 
ouutSaãtyHubSy¡emAx–11Heb’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut01
,
Ty³U16
,0); *outputSafetyHubSystemAxel11HebenPWM=0x0000;

34 
ouutSaãtyHubSy¡emAx–11Sšk’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut02
,
Ty³U16
,0); *outputSafetyHubSystemAxel11SinkenPWM=0x0000;

35 
ouutSaãtyHubSy¡emAx–12Heb’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut03
,
Ty³U16
,0); *outputSafetyHubSystemAxel12HebenPWM=0x0000;

36 
ouutSaãtyHubSy¡emAx–12Sšk’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut04
,
Ty³U16
,0); *outputSafetyHubSystemAxel12SinkenPWM=0x0000;

37 
ouutSaãtyHubSy¡emAx–21Heb’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut07
,
Ty³U16
,0); *outputSafetyHubSystemAxel21HebenPWM=0x0000;

38 
ouutSaãtyHubSy¡emAx–21Sšk’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut08
,
Ty³U16
,0); *outputSafetyHubSystemAxel21SinkenPWM=0x0000;

39 
ouutSaãtyHubSy¡emAx–22Heb’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut05
,
Ty³U16
,0); *outputSafetyHubSystemAxel22HebenPWM=0x0000;

40 
ouutSaãtyHubSy¡emAx–22Sšk’PWM
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut06
,
Ty³U16
,0); *outputSafetyHubSystemAxel22SinkenPWM=0x0000;

41 
	}
}

49 
	$HubSysSaãtyHªdËTem³¿tur
(){

50 
boŞ—n
 
m1
;

51 
boŞ—n
 
SaáeyE¼ÜHubTem³¿turHighOldV®ue
;

53 if(*
šputSaãtyHubSy¡emTem³¿turMaš
>
Pum³MaxTem³¿tur
è
m1
=
TRUE
;

54 
m1
=
FALSE
;

56 
SaáeyE¼ÜHubTem³¿turHigh
=
m1
;

58 if(
SaáeyE¼ÜHubTem³¿turHigh
){

59 if(
SaáeyE¼ÜHubTem³¿turHigh
!=
SaáeyE¼ÜHubTem³¿turHighOldV®ue
)

60 
	`S‘E¼ÜCode
(1033001);

61 
	`£tFauÉ
();

64 
SaáeyE¼ÜHubTem³¿turHighOldV®ue
=
SaáeyE¼ÜHubTem³¿turHigh
;

65 
	}
}

73 
	$HubSysSaãtyHªdËHubLa¡
(){

74 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
;

75 
boŞ—n
 
SaáeyE¼ÜMašDruckHighOldV®ue
;

76 
boŞ—n
 
SaáeyE¼ÜAch£11Ï¡‘OldV®ue
;

77 
boŞ—n
 
SaáeyE¼ÜAch£12Ï¡‘OldV®ue
;

78 
boŞ—n
 
SaáeyE¼ÜAch£21Ï¡‘OldV®ue
;

79 
boŞ—n
 
SaáeyE¼ÜAch£22Ï¡‘OldV®ue
;

81 if(*
šputSaãtyHubSy¡emP»ssu»Maš
>
MaxMašDruckV®ue
è
m1
=
TRUE
;

82 
m1
=
FALSE
;

83 if(*
šputSaãtyHubSy¡emP»ssu»11
>
MaxV®veDruckV®ue
è
m2
=
TRUE
;

84 
m2
=
FALSE
;

85 if(*
šputSaãtyHubSy¡emP»ssu»12
>
MaxV®veDruckV®ue
è
m3
=
TRUE
;

86 
m3
=
FALSE
;

87 if(*
šputSaãtyHubSy¡emP»ssu»21
>
MaxV®veDruckV®ue
è
m4
=
TRUE
;

88 
m4
=
FALSE
;

89 if(*
šputSaãtyHubSy¡emP»ssu»22
>
MaxV®veDruckV®ue
è
m5
=
TRUE
;

90 
m5
=
FALSE
;

92 
SaáeyE¼ÜMašDruckHigh
=
m1
;

93 
SaáeyE¼ÜAch£11Ï¡‘
=
m2
;

94 
SaáeyE¼ÜAch£12Ï¡‘
=
m3
;

95 
SaáeyE¼ÜAch£21Ï¡‘
=
m4
;

96 
SaáeyE¼ÜAch£22Ï¡‘
=
m5
;

98 if(
SaáeyE¼ÜMašDruckHigh
){

99 if(
SaáeyE¼ÜMašDruckHigh
!=
SaáeyE¼ÜMašDruckHighOldV®ue
)

100 
	`S‘E¼ÜCode
(1033000);

101 
	`£tFauÉ
();

103 if(
SaáeyE¼ÜAch£11Ï¡‘
){

104 if(
SaáeyE¼ÜAch£11Ï¡‘
!=
SaáeyE¼ÜAch£11Ï¡‘OldV®ue
)

105 
	`S‘E¼ÜCode
(1033010);

106 
	`£tFauÉ
();

108 if(
SaáeyE¼ÜAch£12Ï¡‘
){

109 if(
SaáeyE¼ÜAch£12Ï¡‘
!=
SaáeyE¼ÜAch£12Ï¡‘OldV®ue
)

110 
	`S‘E¼ÜCode
(1033011);

111 
	`£tFauÉ
();

113 if(
SaáeyE¼ÜAch£21Ï¡‘
){

114 if(
SaáeyE¼ÜAch£21Ï¡‘
!=
SaáeyE¼ÜAch£21Ï¡‘OldV®ue
)

115 
	`S‘E¼ÜCode
(1033012);

116 
	`£tFauÉ
();

118 if(
SaáeyE¼ÜAch£22Ï¡‘
){

119 if(
SaáeyE¼ÜAch£22Ï¡‘
!=
SaáeyE¼ÜAch£22Ï¡‘OldV®ue
)

120 
	`S‘E¼ÜCode
(1033013);

121 
	`£tFauÉ
();

124 
SaáeyE¼ÜMašDruckHighOldV®ue
=
SaáeyE¼ÜMašDruckHigh
;

125 
SaáeyE¼ÜAch£11Ï¡‘OldV®ue
=
SaáeyE¼ÜAch£11Ï¡‘
;

126 
SaáeyE¼ÜAch£12Ï¡‘OldV®ue
=
SaáeyE¼ÜAch£12Ï¡‘
;

127 
SaáeyE¼ÜAch£21Ï¡‘OldV®ue
=
SaáeyE¼ÜAch£21Ï¡‘
;

128 
SaáeyE¼ÜAch£22Ï¡‘OldV®ue
=
SaáeyE¼ÜAch£22Ï¡‘
;

129 
	}
}

137 
	$HubSysSaãtyHªdËPum³
(){

138 
boŞ—n
 
m1
,
m2
;

139 
boŞ—n
 
SaáeyE¼ÜPum³Umrich‹rOldV®ue
;

140 
boŞ—n
 
SaáeyE¼ÜPum³D»hzahlOutOldV®ue
;

142 if(*
šputSaãtyHubSy¡emPum³StusBy‹
&
KeySaãtyMÙÜStusFehËr
è
m1
=
TRUE
;

143 
m1
=
FALSE
;

144 if(
SaáeyE¼ÜPum³D»hzahlTimeOut
==1è
m2
=
TRUE
;

145 
m2
=
FALSE
;

147 
SaáeyE¼ÜPum³Umrich‹r
=
m1
;

148 
SaáeyE¼ÜPum³D»hzahlOut
=
m2
;

150 if(
SaáeyE¼ÜPum³Umrich‹r
){

151 if(
SaáeyE¼ÜPum³Umrich‹r
!=
SaáeyE¼ÜPum³Umrich‹rOldV®ue
)

152 
	`S‘E¼ÜCode
(1082101);

153 
	`£tFauÉ
();

155 if(
SaáeyE¼ÜPum³D»hzahlOut
){

156 if(
SaáeyE¼ÜPum³D»hzahlOut
!=
SaáeyE¼ÜPum³D»hzahlOutOldV®ue
)

157 
	`S‘E¼ÜCode
(1033003);

158 
	`£tFauÉ
();

161 
SaáeyE¼ÜPum³Umrich‹rOldV®ue
=
SaáeyE¼ÜPum³Umrich‹r
;

162 
SaáeyE¼ÜPum³D»hzahlOutOldV®ue
=
SaáeyE¼ÜPum³D»hzahlOut
;

163 
	}
}

171 
	$HubSysSaãtyHªdËV’t
(){

172 
boŞ—n
 
m1
,
m2
,
m3
,
m4
;

173 
boŞ—n
 
SaáeyE¼ÜV’t11OldV®ue
;

174 
boŞ—n
 
SaáeyE¼ÜV’t12OldV®ue
;

175 
boŞ—n
 
SaáeyE¼ÜV’t21OldV®ue
;

176 
boŞ—n
 
SaáeyE¼ÜV’t22OldV®ue
;

178 if(
SaáeyE¼ÜV’t11TimeOut
==1è
m1
=
TRUE
;

179 
m1
=
FALSE
;

180 if(
SaáeyE¼ÜV’t12TimeOut
==1è
m2
=
TRUE
;

181 
m2
=
FALSE
;

182 if(
SaáeyE¼ÜV’t21TimeOut
==1è
m3
=
TRUE
;

183 
m3
=
FALSE
;

184 if(
SaáeyE¼ÜV’t22TimeOut
==1è
m4
=
TRUE
;

185 
m4
=
FALSE
;

187 
SaáeyE¼ÜV’t11
=
m1
;

188 
SaáeyE¼ÜV’t12
=
m2
;

189 
SaáeyE¼ÜV’t21
=
m3
;

190 
SaáeyE¼ÜV’t22
=
m4
;

191 
SaáeyE¼ÜV’t
=
m1
|
m2
|
m3
|
m4
;

193 if(
SaáeyE¼ÜV’t11
){

194 if(
SaáeyE¼ÜV’t11
!=
SaáeyE¼ÜV’t11OldV®ue
)

195 
	`S‘E¼ÜCode
(1033020);

196 
	`£tFauÉ
();

198 if(
SaáeyE¼ÜV’t12
){

199 if(
SaáeyE¼ÜV’t12
!=
SaáeyE¼ÜV’t12OldV®ue
)

200 
	`S‘E¼ÜCode
(1033021);

201 
	`£tFauÉ
();

203 if(
SaáeyE¼ÜV’t21
){

204 if(
SaáeyE¼ÜV’t21
!=
SaáeyE¼ÜV’t21OldV®ue
)

205 
	`S‘E¼ÜCode
(1033022);

206 
	`£tFauÉ
();

208 if(
SaáeyE¼ÜV’t22
){

209 if(
SaáeyE¼ÜV’t22
!=
SaáeyE¼ÜV’t22OldV®ue
)

210 
	`S‘E¼ÜCode
(1033023);

211 
	`£tFauÉ
();

214 
SaáeyE¼ÜV’t11OldV®ue
=
SaáeyE¼ÜV’t11
;

215 
SaáeyE¼ÜV’t12OldV®ue
=
SaáeyE¼ÜV’t12
;

216 
SaáeyE¼ÜV’t21OldV®ue
=
SaáeyE¼ÜV’t21
;

217 
SaáeyE¼ÜV’t22OldV®ue
=
SaáeyE¼ÜV’t22
;

218 
	}
}

226 
	$HubSysSaãtyNodeStus
(){

227 
boŞ—n
 
m1
;

228 
boŞ—n
 
SaáeyE¼ÜPum³OfæšeOldV®ue
;

230 if(
SaáeyE¼ÜPum³OfæšeTimeOut
==1è
m1
=
TRUE
;

231 
m1
=
FALSE
;

233 
SaáeyE¼ÜPum³Ofæše
=
m1
;

235 if(
SaáeyE¼ÜPum³Ofæše
){

236 if(
SaáeyE¼ÜPum³Ofæše
!=
SaáeyE¼ÜPum³OfæšeOldV®ue
)

237 
	`S‘E¼ÜCode
(1081211);

238 
	`£tFauÉ
();

241 
SaáeyE¼ÜPum³OfæšeOldV®ue
=
SaáeyE¼ÜPum³Ofæše
;

242 
	}
}

250 
	$HªdËSaãtyHubSys
(){

251 
	`HubSysSaãtyHªdËTem³¿tur
();

252 
	`HubSysSaãtyHªdËHubLa¡
();

253 
	`HubSysSaãtyHªdËPum³
();

254 
	`HubSysSaãtyHªdËV’t
();

255 
	`HubSysSaãtyNodeStus
();

256 
	}
}

264 
	$Tim”SaãtyHubSys
(){

265 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
,
m8
,
m9
,
m10
,
m11
,
m12
,
m13
,
m14
,
m15
,
m16
,
m17
,
m18
;

266 
ušt8
 
tick1
,
tick2
,
tick3
,
tick4
,
tick5
,
tick6
;

268 if(
	`abs
(*
šputSaãtyHubSy¡emPum³Aùu®S³ed
-1500)>
MaxPum³D»hzahlE¼Ü
è
m1
=
TRUE
;

269 
m1
=
FALSE
;

270 if(
	`abs
(*
šputSaãtyHubSy¡emPum³Aùu®S³ed
-500)>
MaxPum³D»hzahlE¼Ü
è
m2
=
TRUE
;

271 
m2
=
FALSE
;

272 if(*
šputSaãtyHubSy¡emPum³StusBy‹
&
KeySaãtyMÙÜStusEÇbË
è
m3
=
TRUE
;

273 
m3
=
FALSE
;

274 if(*
ouutSaãtyHubSy¡emCÚŒŞWÜd
&
KeySaãtyS‘Hubsy¡emHeb’
è
m4
=
TRUE
;

275 
m4
=
FALSE
;

276 if(*
ouutSaãtyHubSy¡emCÚŒŞWÜd
&
KeySaãtyS‘Hubsy¡emSšk’
è
m5
=
TRUE
;

277 
m5
=
FALSE
;

278 if(
	`abs
(*
šputSaãtyHubSy¡emS³edHeight11
)>2000è
m6
=
TRUE
;

279 
m6
=
FALSE
;

280 if(
	`abs
(*
šputSaãtyHubSy¡emS³edHeight12
)>2000è
m7
=
TRUE
;

281 
m7
=
FALSE
;

282 if(
	`abs
(*
šputSaãtyHubSy¡emS³edHeight21
)>2000è
m8
=
TRUE
;

283 
m8
=
FALSE
;

284 if(
	`abs
(*
šputSaãtyHubSy¡emS³edHeight22
)>2000è
m9
=
TRUE
;

285 
m9
=
FALSE
;

286 if(*
ouutSaãtyHubSy¡emAx–11Heb’PWM
>2000è
m10
=
TRUE
;

287 
m10
=
FALSE
;

288 if(*
ouutSaãtyHubSy¡emAx–11Sšk’PWM
>2000è
m11
=
TRUE
;

289 
m11
=
FALSE
;

290 if(*
ouutSaãtyHubSy¡emAx–12Heb’PWM
>2000è
m12
=
TRUE
;

291 
m12
=
FALSE
;

292 if(*
ouutSaãtyHubSy¡emAx–12Sšk’PWM
>2000è
m13
=
TRUE
;

293 
m13
=
FALSE
;

294 if(*
ouutSaãtyHubSy¡emAx–21Heb’PWM
>2000è
m14
=
TRUE
;

295 
m14
=
FALSE
;

296 if(*
ouutSaãtyHubSy¡emAx–21Sšk’PWM
>2000è
m15
=
TRUE
;

297 
m15
=
FALSE
;

298 if(*
ouutSaãtyHubSy¡emAx–22Heb’PWM
>2000è
m16
=
TRUE
;

299 
m16
=
FALSE
;

300 if(*
ouutSaãtyHubSy¡emAx–22Sšk’PWM
>2000è
m17
=
TRUE
;

301 
m17
=
FALSE
;

302 if(*
šputSaãtyHubSy¡emPum³NodeStus
<
KeySaãtyNodeDiscÚÃ‹d
è
m18
=
TRUE
;

303 
m18
=
FALSE
;

305 if(((
m1
&
m4
)|(
m2
&
m5
))&
m3
){ if(
tick1
<255)ick1++;}

306 
tick1
=0;

307 if((~
m6
)&(
m10
|
m11
)){ if(
tick2
<255)ick2++;}

308 
tick2
=0;

309 if((~
m7
)&(
m12
|
m13
)){ if(
tick3
<255)ick3++;}

310 
tick3
=0;

311 if((~
m8
)&(
m14
|
m15
)){ if(
tick4
<255)ick4++;}

312 
tick4
=0;

313 if((~
m9
)&(
m16
|
m17
)){ if(
tick5
<255)ick5++;}

314 
tick5
=0;

315 if(
m18
){ if(
tick6
<255)ick6++;}

316 
tick6
=0;

318 if(
tick1
>=30è
SaáeyE¼ÜPum³D»hzahlTimeOut
=1;

319 
SaáeyE¼ÜPum³D»hzahlTimeOut
=0;

320 if(
tick2
>=30è
SaáeyE¼ÜV’t11TimeOut
=1;

321 
SaáeyE¼ÜV’t11TimeOut
=0;

322 if(
tick3
>=30è
SaáeyE¼ÜV’t12TimeOut
=1;

323 
SaáeyE¼ÜV’t12TimeOut
=0;

324 if(
tick4
>=30è
SaáeyE¼ÜV’t21TimeOut
=1;

325 
SaáeyE¼ÜV’t21TimeOut
=0;

326 if(
tick5
>=30è
SaáeyE¼ÜV’t22TimeOut
=1;

327 
SaáeyE¼ÜV’t22TimeOut
=0;

328 if(
tick6
>=50è
SaáeyE¼ÜPum³OfæšeTimeOut
=1;

329 
SaáeyE¼ÜPum³OfæšeTimeOut
=0;

330 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSysData.c

1 
	~<SaãtyHubSysD©a.h
>

6 
boŞ—n
 
	gSaáeyE¼ÜHubTem³¿turHigh
;

7 
boŞ—n
 
	gSaáeyE¼ÜAch£11Ï¡‘
;

8 
boŞ—n
 
	gSaáeyE¼ÜAch£12Ï¡‘
;

9 
boŞ—n
 
	gSaáeyE¼ÜAch£21Ï¡‘
;

10 
boŞ—n
 
	gSaáeyE¼ÜAch£22Ï¡‘
;

11 
boŞ—n
 
	gSaáeyE¼ÜMašDruckHigh
;

12 
boŞ—n
 
	gSaáeyE¼ÜPum³D»hzahlTimeOut
;

13 
boŞ—n
 
	gSaáeyE¼ÜPum³D»hzahlOut
;

14 
boŞ—n
 
	gSaáeyW¬nPum³D»hzahlOut
;

15 
boŞ—n
 
	gSaáeyE¼ÜPum³Umrich‹r
;

16 
boŞ—n
 
	gSaáeyE¼ÜV’t11TimeOut
;

17 
boŞ—n
 
	gSaáeyE¼ÜV’t12TimeOut
;

18 
boŞ—n
 
	gSaáeyE¼ÜV’t21TimeOut
;

19 
boŞ—n
 
	gSaáeyE¼ÜV’t22TimeOut
;

20 
boŞ—n
 
	gSaáeyE¼ÜV’t11
;

21 
boŞ—n
 
	gSaáeyE¼ÜV’t12
;

22 
boŞ—n
 
	gSaáeyE¼ÜV’t21
;

23 
boŞ—n
 
	gSaáeyE¼ÜV’t22
;

24 
boŞ—n
 
	gSaáeyE¼ÜV’t
;

25 
boŞ—n
 
	gSaáeyE¼ÜPum³OfæšeTimeOut
;

26 
boŞ—n
 
	gSaáeyE¼ÜPum³Ofæše
;

31 
sšt32
 *
	gšputSaãtyHubSy¡emWeight
;

32 
sšt32
 *
	gšputSaãtyHubSy¡emCGV®ueX
;

33 
sšt32
 *
	gšputSaãtyHubSy¡emCGV®ueY
;

34 
ušt32
 *
	gšputSaãtyHubSy¡emHeight11
;

35 
ušt32
 *
	gšputSaãtyHubSy¡emHeight12
;

36 
ušt32
 *
	gšputSaãtyHubSy¡emHeight21
;

37 
ušt32
 *
	gšputSaãtyHubSy¡emHeight22
;

38 
sšt32
 *
	gšputSaãtyHubSy¡emP»ssu»11
;

39 
sšt32
 *
	gšputSaãtyHubSy¡emP»ssu»12
;

40 
sšt32
 *
	gšputSaãtyHubSy¡emP»ssu»21
;

41 
sšt32
 *
	gšputSaãtyHubSy¡emP»ssu»22
;

42 
sšt32
 *
	gšputSaãtyHubSy¡emP»ssu»Maš
;

43 
sšt32
 *
	gšputSaãtyHubSy¡emTem³¿turMaš
;

44 
ušt8
 *
	gšputSaãtyHubSy¡emPum³StusBy‹
;

45 
sšt16
 *
	gšputSaãtyHubSy¡emPum³Aùu®S³ed
;

46 
sšt32
 *
	gšputSaãtyHubSy¡emS³edHeight11
;

47 
sšt32
 *
	gšputSaãtyHubSy¡emS³edHeight12
;

48 
sšt32
 *
	gšputSaãtyHubSy¡emS³edHeight21
;

49 
sšt32
 *
	gšputSaãtyHubSy¡emS³edHeight22
;

50 
ušt8
 *
	gšputSaãtyHubSy¡emPum³NodeStus
;

55 
ušt32
 *
	gouutSaãtyHubSy¡emCÚŒŞWÜd
;

56 
ušt16
 *
	gouutSaãtyHubSy¡emAx–11Heb’PWM
;

57 
ušt16
 *
	gouutSaãtyHubSy¡emAx–11Sšk’PWM
;

58 
ušt16
 *
	gouutSaãtyHubSy¡emAx–12Heb’PWM
;

59 
ušt16
 *
	gouutSaãtyHubSy¡emAx–12Sšk’PWM
;

60 
ušt16
 *
	gouutSaãtyHubSy¡emAx–21Heb’PWM
;

61 
ušt16
 *
	gouutSaãtyHubSy¡emAx–21Sšk’PWM
;

62 
ušt16
 *
	gouutSaãtyHubSy¡emAx–22Heb’PWM
;

63 
ušt16
 *
	gouutSaãtyHubSy¡emAx–22Sšk’PWM
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSysData.h

1 #iâdeà
_SAFETYHUBSYSDATA_H


2 
	#_SAFETYHUBSYSDATA_H


	)

3 
	~<¡wty³s.h
>

8 
	#Pum³MaxTem³¿tur
 (85000)

	)

9 
	#MaxXV®ueCG
 (2610)

	)

10 
	#MšXV®ueCG
 (200)

	)

11 
	#MaxYV®ueCG
 (1020)

	)

12 
	#MšYV®ueCG
 (100)

	)

13 
	#MaxMašDruckV®ue
 (150000)

	)

14 
	#MaxV®veDruckV®ue
 (110000)

	)

15 
	#MaxPum³Laufze™
 (3000)

	)

16 
	#MaxPum³D»hzahlW¬n
 (100)

	)

17 
	#MaxPum³D»hzahlE¼Ü
 (150)

	)

18 
	#KeySaãtyS‘Hubsy¡emHeb’
 (0x00000100)

	)

19 
	#KeySaãtyS‘Hubsy¡emSšk’
 (0x00000200)

	)

20 
	#KeySaãtyS‘Hubsy¡emOÆySšk’
 (0x00000400)

	)

21 
	#KeySaãtyS‘Hubsy¡emStİ
 (0x00000800)

	)

22 
	#KeySaãtyMÙÜStusFehËr
 (0x02)

	)

23 
	#KeySaãtyMÙÜStusEÇbË
 (0x01)

	)

24 
	#KeySaãtyNodeDiscÚÃ‹d
 (0x01)

	)

29 
boŞ—n
 
SaáeyE¼ÜHubTem³¿turHigh
;

30 
boŞ—n
 
SaáeyE¼ÜAch£11Ï¡‘
;

31 
boŞ—n
 
SaáeyE¼ÜAch£12Ï¡‘
;

32 
boŞ—n
 
SaáeyE¼ÜAch£21Ï¡‘
;

33 
boŞ—n
 
SaáeyE¼ÜAch£22Ï¡‘
;

34 
boŞ—n
 
SaáeyE¼ÜMašDruckHigh
;

35 
boŞ—n
 
SaáeyE¼ÜPum³D»hzahlTimeOut
;

36 
boŞ—n
 
SaáeyE¼ÜPum³D»hzahlOut
;

37 
boŞ—n
 
SaáeyW¬nPum³D»hzahlOut
;

38 
boŞ—n
 
SaáeyE¼ÜPum³Umrich‹r
;

39 
boŞ—n
 
SaáeyE¼ÜV’t11TimeOut
;

40 
boŞ—n
 
SaáeyE¼ÜV’t12TimeOut
;

41 
boŞ—n
 
SaáeyE¼ÜV’t21TimeOut
;

42 
boŞ—n
 
SaáeyE¼ÜV’t22TimeOut
;

43 
boŞ—n
 
SaáeyE¼ÜV’t11
;

44 
boŞ—n
 
SaáeyE¼ÜV’t12
;

45 
boŞ—n
 
SaáeyE¼ÜV’t21
;

46 
boŞ—n
 
SaáeyE¼ÜV’t22
;

47 
boŞ—n
 
SaáeyE¼ÜV’t
;

48 
boŞ—n
 
SaáeyE¼ÜPum³OfæšeTimeOut
;

49 
boŞ—n
 
SaáeyE¼ÜPum³Ofæše
;

54 
sšt32
 *
šputSaãtyHubSy¡emWeight
;

55 
sšt32
 *
šputSaãtyHubSy¡emCGV®ueX
;

56 
sšt32
 *
šputSaãtyHubSy¡emCGV®ueY
;

57 
ušt32
 *
šputSaãtyHubSy¡emHeight11
;

58 
ušt32
 *
šputSaãtyHubSy¡emHeight12
;

59 
ušt32
 *
šputSaãtyHubSy¡emHeight21
;

60 
ušt32
 *
šputSaãtyHubSy¡emHeight22
;

61 
sšt32
 *
šputSaãtyHubSy¡emP»ssu»11
;

62 
sšt32
 *
šputSaãtyHubSy¡emP»ssu»12
;

63 
sšt32
 *
šputSaãtyHubSy¡emP»ssu»21
;

64 
sšt32
 *
šputSaãtyHubSy¡emP»ssu»22
;

65 
sšt32
 *
šputSaãtyHubSy¡emP»ssu»Maš
;

66 
sšt32
 *
šputSaãtyHubSy¡emTem³¿turMaš
;

67 
ušt8
 *
šputSaãtyHubSy¡emPum³StusBy‹
;

68 
sšt16
 *
šputSaãtyHubSy¡emPum³Aùu®S³ed
;

69 
sšt32
 *
šputSaãtyHubSy¡emS³edHeight11
;

70 
sšt32
 *
šputSaãtyHubSy¡emS³edHeight12
;

71 
sšt32
 *
šputSaãtyHubSy¡emS³edHeight21
;

72 
sšt32
 *
šputSaãtyHubSy¡emS³edHeight22
;

73 
ušt8
 *
šputSaãtyHubSy¡emPum³NodeStus
;

78 
ušt32
 *
ouutSaãtyHubSy¡emCÚŒŞWÜd
;

79 
ušt16
 *
ouutSaãtyHubSy¡emAx–11Heb’PWM
;

80 
ušt16
 *
ouutSaãtyHubSy¡emAx–11Sšk’PWM
;

81 
ušt16
 *
ouutSaãtyHubSy¡emAx–12Heb’PWM
;

82 
ušt16
 *
ouutSaãtyHubSy¡emAx–12Sšk’PWM
;

83 
ušt16
 *
ouutSaãtyHubSy¡emAx–21Heb’PWM
;

84 
ušt16
 *
ouutSaãtyHubSy¡emAx–21Sšk’PWM
;

85 
ušt16
 *
ouutSaãtyHubSy¡emAx–22Heb’PWM
;

86 
ušt16
 *
ouutSaãtyHubSy¡emAx–22Sšk’PWM
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyInterface.h

1 #iâdeà
_SAFETYINTERFACE_H


2 
	#_SAFETYINTERFACE_H


	)

12 
In™Saãty
();

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyNormal.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$HªdËSaãtyNÜm®
(){

11 
boŞ—n
 
m1
,
m2
;

13 
m1
=
SaáeyE¼ÜAch£11Ï¡‘
|
SaáeyE¼ÜAch£12Ï¡‘
|
SaáeyE¼ÜAch£21Ï¡‘
|
SaáeyE¼ÜAch£22Ï¡‘
;

14 
m2
=
SaáeyE¼ÜPum³Ofæše
|
SaáeyE¼ÜV’t
|
SaáeyE¼ÜPum³D»hzahlOut
|
SaáeyE¼ÜMašDruckHigh
|
SaáeyE¼ÜHubTem³¿turHigh
|
SaáeyE¼ÜPum³Umrich‹r
;

16 if(
m1
){

17 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘Hubsy¡emOÆySšk’
;

20 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘Hubsy¡emOÆySšk’
;

22 if(
m2
){

23 *
šputSaãtySaãtySysCÚŒŞWÜd
|=
KeySaãtyS‘Hubsy¡emStİ
;

26 *
šputSaãtySaãtySysCÚŒŞWÜd
&=~
KeySaãtyS‘Hubsy¡emStİ
;

28 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLC.c

1 
	~<SaãtyD©a.h
>

2 
	~<Saãty.h
>

10 
	$In™SaãtyPLC
(){

11 
šputSaãtySaãtySysCÚŒŞWÜd
=
	`BšdODMem
(
SaãtyS¹Index
,
SubšdexSaãtyCÚŒŞWÜd
,
Ty³U32
,0); *inputSafetySafetySysControlWord=0x00000000;

12 
šputSaãtyG‘CPUTem³¿tur
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUTem³¿tur
,
Ty³U32
,0); *inputSafetyGetCPUTemperatur=0x00000000;

13 
šputSaãtyG‘CPUVŞgeUb
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUb1
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUb=0x00000000;

14 
šputSaãtyG‘CPUVŞgeUc
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUC1
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUc=0x00000000;

15 
šputSaãtyG‘CPUVŞgeUext
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeExt
,
Ty³U32
,0); *inputSafetyGetCPUVoltageUext=0x00000000;

16 
šputSaãtyG‘CPUCu¼’tUb
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUCu¼’tUb1
,
Ty³U32
,0); *inputSafetyGetCPUCurrentUb=0x00000000;

17 
šputSaãtyG‘CANBusStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,1); *inputSafetyGetCANBusStatus=0x00;

19 
ouutSaãtyIOLam³3
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut30
,
Ty³U32
,0); *outputSafetyIOLampe3=0x00000000;

20 
ouutSaãtyIOLam³4
=
	`BšdODMem
(
IOPÜtS¹Index
,
SubšdexOuut31
,
Ty³U32
,0); *outputSafetyIOLampe4=0x00000000;

21 
	}
}

29 
	$SaãtyE¼ÜCPU
(){

30 
boŞ—n
 
m1
,
m2
,
m3
,
m4
,
m5
,
m6
,
m7
;

31 
boŞ—n
 
SaãtyE¼ÜCPUTem³¿turOldV®ue
;

32 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUbOldV®ue
;

33 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUcOldV®ue
;

34 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUextOldV®ue
;

35 
boŞ—n
 
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
;

36 
boŞ—n
 
SaãtyE¼ÜCANBus1OldV®ue
;

37 
boŞ—n
 
SaãtyE¼ÜCANBus2OldV®ue
;

39 if(*
šputSaãtyG‘CPUTem³¿tur
>
CPUMaxTem³¿tur
è
m1
=
TRUE
;

40 
m1
=
FALSE
;

41 if((*
šputSaãtyG‘CPUVŞgeUb
>
CPUMaxVŞge
)||(*šputSaãtyG‘CPUVŞgeUb<
CPUMšVŞge
)è
m2
=
TRUE
;

42 
m2
=
FALSE
;

43 if((*
šputSaãtyG‘CPUVŞgeUc
>
CPUMaxVŞge
)||(*šputSaãtyG‘CPUVŞgeUc<
CPUMšVŞge
)è
m3
=
TRUE
;

44 
m3
=
FALSE
;

45 if((*
šputSaãtyG‘CPUVŞgeUext
>
CPUMaxVŞgeExt
)||(*šputSaãtyG‘CPUVŞgeUext<
CPUMšVŞgeExt
)è
m4
=
TRUE
;

46 
m4
=
FALSE
;

47 if((*
šputSaãtyG‘CPUCu¼’tUb
>
CPUMaxCu¼’t
)||(*šputSaãtyG‘CPUCu¼’tUb<
CPUMšCu¼’t
)è
m5
=
TRUE
;

48 
m5
=
FALSE
;

49 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus1E¼Ü
è
m6
=
TRUE
;

50 
m6
=
FALSE
;

51 if(*
šputSaãtyG‘CANBusStus
&
KeySaãtyG‘CANBus2E¼Ü
è
m7
=
TRUE
;

52 
m7
=
FALSE
;

54 
SaãtyE¼ÜCPUTem³¿tur
=
m1
;

55 
SaãtyE¼ÜCPUVŞgeUb
=
m2
;

56 
SaãtyE¼ÜCPUVŞgeUc
=
m3
;

57 
SaãtyE¼ÜCPUVŞgeUext
=
m4
;

58 
SaãtyE¼ÜCPUCu¼’tUb
=
m5
;

59 
SaãtyE¼ÜCANBus1
=
m6
;

60 
SaãtyE¼ÜCANBus2
=
m7
;

61 
SaãtyE¼ÜCANBus
=
m6
|
m7
;

63 if(
SaãtyE¼ÜCPUTem³¿tur
){

64 if(
SaãtyE¼ÜCPUTem³¿tur
!=
SaãtyE¼ÜCPUTem³¿turOldV®ue
)

65 
	`S‘E¼ÜCode
(1031000);

66 
	`£tFauÉ
();

68 if(
SaãtyE¼ÜCPUVŞgeUb
){

69 if(
SaãtyE¼ÜCPUVŞgeUb
!=
SaãtyE¼ÜCPUVŞgeUbOldV®ue
)

70 
	`S‘E¼ÜCode
(1031001);

71 
	`£tFauÉ
();

73 if(
SaãtyE¼ÜCPUVŞgeUc
){

74 if(
SaãtyE¼ÜCPUVŞgeUc
!=
SaãtyE¼ÜCPUVŞgeUcOldV®ue
)

75 
	`S‘E¼ÜCode
(1031004);

76 
	`£tFauÉ
();

78 if(
SaãtyE¼ÜCPUVŞgeUext
){

79 if(
SaãtyE¼ÜCPUVŞgeUext
!=
SaãtyE¼ÜCPUVŞgeUextOldV®ue
)

80 
	`S‘E¼ÜCode
(1031003);

81 
	`£tFauÉ
();

83 if(
SaãtyE¼ÜCPUCu¼’tUb
){

84 if(
SaãtyE¼ÜCPUCu¼’tUb
!=
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
)

85 
	`S‘E¼ÜCode
(1031002);

86 
	`£tFauÉ
();

88 if(
SaãtyE¼ÜCANBus1
){

89 if(
SaãtyE¼ÜCANBus1
!=
SaãtyE¼ÜCANBus1OldV®ue
)

90 
	`S‘E¼ÜCode
(1031200);

91 
	`£tFauÉ
();

93 if(
SaãtyE¼ÜCANBus2
){

94 if(
SaãtyE¼ÜCANBus2
!=
SaãtyE¼ÜCANBus2OldV®ue
)

95 
	`S‘E¼ÜCode
(1031201);

96 
	`£tFauÉ
();

99 
SaãtyE¼ÜCPUTem³¿turOldV®ue
=
SaãtyE¼ÜCPUTem³¿tur
;

100 
SaãtyE¼ÜCPUVŞgeUbOldV®ue
=
SaãtyE¼ÜCPUVŞgeUb
;

101 
SaãtyE¼ÜCPUVŞgeUcOldV®ue
=
SaãtyE¼ÜCPUVŞgeUc
;

102 
SaãtyE¼ÜCPUVŞgeUextOldV®ue
=
SaãtyE¼ÜCPUVŞgeUext
;

103 
SaãtyE¼ÜCPUCu¼’tUbOldV®ue
=
SaãtyE¼ÜCPUCu¼’tUb
;

104 
SaãtyE¼ÜCANBus1OldV®ue
=
SaãtyE¼ÜCANBus1
;

105 
SaãtyE¼ÜCANBus2OldV®ue
=
SaãtyE¼ÜCANBus2
;

106 
	}
}

114 
	$HªdËSaãtyPLC
(){

115 
	`SaãtyE¼ÜCPU
();

116 
	}
}

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLCData.c

1 
	~<SaãtyPLCD©a.h
>

6 
boŞ—n
 
	gSaáeyS‘Lam³
;

7 
boŞ—n
 
	gSaãtyE¼ÜCPUTem³¿tur
;

8 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUb
;

9 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUc
;

10 
boŞ—n
 
	gSaãtyE¼ÜCPUVŞgeUext
;

11 
boŞ—n
 
	gSaãtyE¼ÜCPUCu¼’tUb
;

12 
boŞ—n
 
	gSaãtyE¼ÜCANBus1
;

13 
boŞ—n
 
	gSaãtyE¼ÜCANBus2
;

14 
boŞ—n
 
	gSaãtyE¼ÜCANBus
;

19 
ušt32
 *
	gšputSaãtySaãtySysCÚŒŞWÜd
;

20 
ušt32
 *
	gšputSaãtyG‘CPUTem³¿tur
;

21 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUb
;

22 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUc
;

23 
ušt32
 *
	gšputSaãtyG‘CPUVŞgeUext
;

24 
ušt32
 *
	gšputSaãtyG‘CPUCu¼’tUb
;

25 
ušt8
 *
	gšputSaãtyG‘CANBusStus
;

30 
ušt32
 *
	gouutSaãtyIOLam³3
;

31 
ušt32
 *
	gouutSaãtyIOLam³4
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLCData.h

1 #iâdeà
_SAFETYPLCDATA_H


2 
	#_SAFETYPLCDATA_H


	)

3 
	~<¡wty³s.h
>

8 
	#KeyCŒlWÜdS‘Lam³
 (0x00000010)

	)

9 
	#CPUMaxTem³¿tur
 (100000)

	)

10 
	#CPUMaxVŞge
 (30000)

	)

11 
	#CPUMšVŞge
 (12000)

	)

12 
	#CPUMaxVŞgeExt
 (11000)

	)

13 
	#CPUMšVŞgeExt
 (3000)

	)

14 
	#CPUMaxCu¼’t
 (1000000)

	)

15 
	#CPUMšCu¼’t
 (10)

	)

16 
	#KeySaãtyG‘CANBus1E¼Ü
 (0x01)

	)

17 
	#KeySaãtyG‘CANBus2E¼Ü
 (0x02)

	)

22 
boŞ—n
 
SaáeyS‘Lam³
;

23 
boŞ—n
 
SaãtyE¼ÜCPUTem³¿tur
;

24 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUb
;

25 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUc
;

26 
boŞ—n
 
SaãtyE¼ÜCPUVŞgeUext
;

27 
boŞ—n
 
SaãtyE¼ÜCPUCu¼’tUb
;

28 
boŞ—n
 
SaãtyE¼ÜCANBus1
;

29 
boŞ—n
 
SaãtyE¼ÜCANBus2
;

30 
boŞ—n
 
SaãtyE¼ÜCANBus
;

35 
ušt32
 *
šputSaãtySaãtySysCÚŒŞWÜd
;

36 
ušt32
 *
šputSaãtyG‘CPUTem³¿tur
;

37 
ušt32
 *
šputSaãtyG‘CPUVŞgeUb
;

38 
ušt32
 *
šputSaãtyG‘CPUVŞgeUc
;

39 
ušt32
 *
šputSaãtyG‘CPUVŞgeUext
;

40 
ušt32
 *
šputSaãtyG‘CPUCu¼’tUb
;

41 
ušt8
 *
šputSaãtyG‘CANBusStus
;

46 
ušt32
 *
ouutSaãtyIOLam³3
;

47 
ušt32
 *
ouutSaãtyIOLam³4
;

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_in.h

18 #iâdeà
_X02_IN_H


19 
	#_X02_IN_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_š.h
"

25 #ifdeà
__ılu¥lus


32 
	#X02_IN_CH_MAX
 (12u)

33 
	#X02_IN_01
 (0u)

34 
	#X02_IN_02
 (1u)

	)

35 
	#X02_IN_03
 (2u)

	)

36 
	#X02_IN_04
 (3u)

	)

37 
	#X02_IN_05
 (4u)

	)

38 
	#X02_IN_06
 (5u)

	)

39 
	#X02_IN_07
 (6u)

	)

40 
	#X02_IN_08
 (7u)

	)

41 
	#X02_IN_09
 (8u)

	)

42 
	#X02_IN_10
 (9u)

	)

43 
	#X02_IN_11
 (10u)

	)

44 
	#X02_IN_12
 (11u)

	)

46 
	#X02_IN_TYPE_DIGITAL
 (0x0000u)

47 
	#X02_IN_TYPE_EVENT_RISING
 (0x0001u)

48 
	#X02_IN_TYPE_EVENT_FALLING
 (0x0002u)

49 
	#X02_IN_TYPE_EVENT_BOTH
 (0x0003u)

50 
	#X02_IN_TYPE_VOLTAGE_40V
 (0x0070u)

51 

	)

52 
	#X02_IN_TYPE_INCREMENTAL
 (0x0100u)

53 
	#X02_IN_TYPE_FREQUENCY
 (0x0400u)

	)

55 
	#X02_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

56 
	#X02_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

57 
	#X02_IN_CIRCUIT_PULL_UP
 (0x0002u)

58 
	#X02_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

59 

	)

66 #ifdeà
__ılu¥lus


67 
Çme¥aû
 
¡w_£pi


69 
	~"hµ/x02_š.hµ
"

76 (*
PR_x02_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
);

78 
T_x_š_¡©us
 
	tT_x02_š_¡©us
;

81 
sšt16
 
x02_š_š™
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

82 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

83 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

84 cÚ¡ 
PR_x02_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

85 
sšt16
 
x02_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

86 
sšt32
 * cÚ¡ 
İs32_V®ue
);

87 
sšt16
 
x02_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

88 
sšt32
 * cÚ¡ 
İs32_V®ue
);

89 
sšt16
 
x02_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x02_š_¡©us
 * cÚ¡ 
İt_Stus
);

90 
sšt16
 
x02_š_£t_th»shŞd
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

91 cÚ¡ 
sšt32
 
os32_OnV®ue
, cÚ¡ sšt32 
os32_OffV®ue
);

92 
sšt16
 
x02_š_£t_couÁ”
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

93 
sšt16
 
x02_š_g‘_couÁ”
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

96 
sšt32
 
x02_š_»£t_šc
(cÚ¡ 
ušt32
 
ou32_SlÙ
, cÚ¡ ušt32 
ou32_ChªÃl
è
__©Œibu‹__
 ((
d•»ÿ‹d
));

97 
sšt32
 
x02_š_£t_šc_th»shŞd
(cÚ¡ 
ušt32
 
ou32_SlÙ
, cÚ¡ ušt32 
ou32_ChªÃl
,

98 cÚ¡ 
ušt32
 
ou32_Th»shŞdHigh
, cÚ¡ ušt32 
ou32_Th»shŞdLow
è
__©Œibu‹__
 ((
d•»ÿ‹d
));

103 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_lib.h

18 #iâdeà
X02_LIB_VERSION_H


19 
	#X02_LIB_VERSION_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_lib.h
"

24 
	~"x02_lib_¡ršg.h
"

26 #ifdeà
__ılu¥lus


45 
	#X02_LIB_MAJOR_VERSION
 2

46 
	#X02_LIB_MINOR_VERSION
 0

47 
	#X02_LIB_RELEASE
 5

48 

	)

49 
	#X02_TARGET_ID
 0

50 
	#X02_TARGET_VERSION
 0

51 

	)

52 
	#X02_LIB_INFO_DEVICE_ID
 "Y_EB02"

53 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x02_lib.hµ
"

70 
T_x_lib_v”siÚ
 
	tT_x02_lib_v”siÚ
;

75 
sšt16
 
x02_lib_g‘_v”siÚ
(
T_x02_lib_v”siÚ
 * cÚ¡ 
İt_V”siÚ
);

78 
INLINE
 
sšt16
 
x02_g‘_lib_v”siÚ
(
T_x02_lib_v”siÚ
 * cÚ¡ 
İt_V”siÚ
)

80  
x02_lib_g‘_v”siÚ
(
İt_V”siÚ
);

86 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_lib_string.h

18 #iâdeà
X02_LIB_STRING_H


19 
	#X02_LIB_STRING_H


	)

23 
	#X02_LIB_STRING
 "EB02 LIB"

24 

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_out.h

18 #iâdeà
_X02_OUT_H


19 
	#_X02_OUT_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_out.h
"

26 #ifdeà
__ılu¥lus


33 
	#X02_ON
 (1)

	)

34 
	#X02_OFF
 (0)

	)

36 
	#X02_OUT_CH_MAX
 (1u)

37 
	#X02_OUT_01
 (0)

38 
	#X02_OUT_CHANNEL
 (0)

39 

	)

40 
	#X02_OUT_TYPE_DIGITAL
 (0u)

41 

	)

42 
	#X02_OUT_STATE_NO_ERROR
 (0u)

43 
	#X02_OUT_STATE_OVERCURRENT
 (1u)

44 

	)

45 
	#X02_OUT_EVENT_OVERCURRENT
 (0u)

46 
	#X02_OUT_EVENT_RECOVERY
 (1u)

47 

	)

55 #ifdeà
__ılu¥lus


56 
Çme¥aû
 
¡w_£pi


58 
	~"hµ/x02_out.hµ
"

65 (*
PR_x02_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
, cÚ¡ ušt16 
	tou16_Ev’t
);

66 
T_x_out_¡©us
 
	tT_x02_out_¡©us
;

70 
sšt16
 
x02_out_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

71 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ 
sšt32
 
os32_MaxV®ue
,

72 cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

73 cÚ¡ 
PR_x02_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

75 
sšt16
 
x02_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

76 
sšt16
 
x02_out_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
);

77 
sšt16
 
x02_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x02_out_¡©us
 * cÚ¡ 
İt_Stus
 );

82 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_sys.h

18 #iâdeà
_X02_SYS_H


19 
	#_X02_SYS_H


	)

22 
	~"x_¡dty³s.h
"

23 
	~"x_sys.h
"

24 
	~"x_eb.h
"

26 #ifdeà
__ılu¥lus


34 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

35 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

44 
	#X02_SYS_COMPONENT_LIBRARY
 (0)

45 
	#X02_SYS_COMPONENT_FPGA
 (1)

46 
	#X02_SYS_COMPONENT_CHANNEL_MAX
 (2)

	)

54 #ifdeà
__ılu¥lus


55 
Çme¥aû
 
¡w_£pi


57 
	~"hµ/x02_sys.hµ
"

63 
sšt16
 
x02_sys_š™
();

64 
sšt16
 
x02_sys_g‘_compÚ’t_šfo
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_CompÚ’t
, 
T_x_sys_šfo
* cÚ¡ 
İt_Info
);

69 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_in.h

25 #iâdeà
_X05_IN_H


26 
	#_X05_IN_H


	)

30 
	~"x_¡dty³s.h
"

31 
	~"x_š.h
"

34 #ifdeà
__ılu¥lus


39 
	#X05_IN_CH_MAX
 (4u)

	)

40 
	#X05_IN_01
 (0u)

	)

41 
	#X05_IN_02
 (1u)

	)

42 
	#X05_IN_03
 (2u)

	)

43 
	#X05_IN_04
 (3u)

	)

45 
	#X05_IN_TYPE_DIGITAL
 (0x0000u)

46 
	#X05_IN_TYPE_EVENT_RISING
 (0x0001u)

47 
	#X05_IN_TYPE_EVENT_FALLING
 (0x0002u)

48 
	#X05_IN_TYPE_EVENT_BOTH
 (0x0003u)

49 
	#X05_IN_TYPE_VOLTAGE_40V
 (0x0070u)

50 

	)

51 
	#X05_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

52 
	#X05_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

53 
	#X05_IN_CIRCUIT_PULL_UP
 (0x0002u)

54 
	#X05_IN_CIRCUIT_NO_PULL_UP
 (0x0000u)

55 
	#X05_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

56 
	#X05_IN_CIRCUIT_NO_PULL_DOWN
 (0x0000u)

57 

	)

66 #ifdeà
__ılu¥lus


67 
Çme¥aû
 
¡w_£pi


69 
	~"hµ/x05_š.hµ
"

76 (*
PR_x05_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
);

77 
T_x_š_¡©us
 
	tT_x05_š_¡©us
;

81 
sšt16
 
x05_š_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

82 cÚ¡ 
ušt16
 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

83 cÚ¡ 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

84 cÚ¡ 
PR_x05_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

85 
sšt16
 
x05_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

86 
sšt16
 
x05_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
 * cÚ¡ 
İs32_V®ue
);

87 
sšt16
 
x05_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x05_š_¡©us
* cÚ¡ 
İt_Stus
);

92 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_lib.h

24 #iâdeà
_X05_LIB_H


25 
	#_X05_LIB_H


	)

29 
	~"x_¡dty³s.h
"

30 
	~"x_lib.h
"

32 #ifdeà
__ılu¥lus


39 
	#X05_LIB_MAJOR_VERSION
 2

	)

40 
	#X05_LIB_MINOR_VERSION
 1

	)

41 
	#X05_LIB_RELEASE
 1

	)

43 
	#X05_TARGET_ID
 0

44 
	#X05_TARGET_VERSION
 0

45 

	)

46 
	#X05_LIB_INFO_DEVICE_ID
 "Y_EB05"

47 

	)

54 #ifdeà
__ılu¥lus


55 
Çme¥aû
 
¡w_£pi


57 
	~"hµ/x05_lib.hµ
"

63 
T_x_lib_v”siÚ
 
	tT_x05_lib_v”siÚ
;

67 
sšt16
 
x05_lib_g‘_v”siÚ
(
T_x05_lib_v”siÚ
* cÚ¡ 
İt_V”siÚ
);

72 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_lib_string.h

18 #iâdeà
X05_LIB_STRING_H


19 
	#X05_LIB_STRING_H


	)

23 
	#X05_LIB_STRING
 "EB05 LIB"

24 

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_out.h

25 #iâdeà
_X05_OUT_H


26 
	#_X05_OUT_H


	)

30 
	~"x_¡dty³s.h
"

31 
	~"x_out.h
"

34 #ifdeà
__ılu¥lus


41 
	#X05_ON
 (1)

	)

42 
	#X05_OFF
 (0)

	)

44 
	#X05_OUT_CH_MAX
 (8u)

45 
	#X05_OUT_01
 (0u)

46 
	#X05_OUT_02
 (1u)

	)

47 
	#X05_OUT_03
 (2u)

	)

48 
	#X05_OUT_04
 (3u)

	)

49 
	#X05_OUT_05
 (4u)

50 
	#X05_OUT_06
 (5u)

	)

51 
	#X05_OUT_07
 (6u)

	)

52 
	#X05_OUT_08
 (7u)

	)

53 
	#X05_OUT_ALL
 (0xFFFFu)

54 

	)

55 
	#X05_OUT_TYPE_DIGITAL
 (0u)

56 
	#X05_OUT_TYPE_PWM
 (1u)

57 
	#X05_OUT_TYPE_CONTROL_CURRENT
 (2u)

58 

	)

59 
	#X05_OUT_STATE_OVERCURRENT
 (0x0001u)

60 
	#X05_OUT_STATE_GROUND_ERROR
 (0x0002u)

61 
	#X05_OUT_STATE_DIGITAL_FB
 (0x0100u)

62 

	)

63 
	#X05_OUT_EVENT_OVERCURRENT
 (0u)

64 
	#X05_OUT_EVENT_RECOVERY
 (1u)

65 
	#X05_OUT_EVENT_GND_ERROR
 (2u)

66 

	)

67 
	#X05_OUT_MAX_PWM_FREQ
 (1000000u)

68 
	#X05_OUT_MIN_PWM_FREQ
 (5000u)

69 

	)

70 
	#X05_OUT_RELAY_01
 (0u)

	)

80 #ifdeà
__ılu¥lus


81 
Çme¥aû
 
¡w_£pi


83 
	~"hµ/x05_out.hµ
"

90 (*
PR_x05_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_SlÙ
, cÚ¡ ušt16 
	tou16_ChªÃl
, cÚ¡ ušt16 
	tou16_Ev’t
);

91 
T_x_out_¡©us
 
	tT_x05_out_¡©us
;

92 
T_x_out_pid_·¿m‘”s
 
	tT_x05_out_pid_·¿m‘”s
;

95 
sšt16
 
x05_out_£t_»Ïy
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 
sšt16
 
x05_out_š™
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
,

97 cÚ¡ 
sšt32
 
os32_MaxV®ue
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

98 cÚ¡ 
PR_x05_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

99 
sšt16
 
x05_out_£t_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

100 cÚ¡ 
T_x05_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

101 
sšt16
 
x05_out_g‘_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
,

102 
T_x05_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

103 
sšt16
 
x05_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

104 
sšt16
 
x05_out_£t_äequ’cy
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

105 
sšt16
 
x05_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
T_x05_out_¡©us
* cÚ¡ 
İt_Stus
 );

106 
sšt16
 
x05_out_g‘_cu¼’t
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_Cu¼’t
 );

107 
sšt16
 
x05_out_g‘_vŞge
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_VŞge
 );

108 
sšt16
 
x05_out_š™_gnd_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

109 cÚ¡ 
PR_x05_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

110 
sšt16
 
x05_out_»£t_gnd_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
);

111 
sšt16
 
x05_out_»£t_oc_”rÜ
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_ChªÃl
);

116 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_sys.h

24 #iâdeà
_X05_SYS_H


25 
	#_X05_SYS_H


	)

29 
	~"x_¡dty³s.h
"

30 
	~"x_sys.h
"

32 #ifdeà
__ılu¥lus


42 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

43 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

49 #iâdeà
X05_TIMESTAMP


50 
	#X05_TIMESTAMP
 1402916822

	)

53 #ifdeà
X04_TIMESTAMP


54 #ià(
X04_TIMESTAMP
 !ğ
X05_TIMESTAMP
)

55 
	#X05_LIBRARY_VERSION_ERROR


	)

58 #ifdeà
X08_TIMESTAMP


59 #ià(
X08_TIMESTAMP
 !ğ
X05_TIMESTAMP
)

60 
	#X05_LIBRARY_VERSION_ERROR


	)

65 #ifdeà
X05_LIBRARY_VERSION_ERROR


66 #”rÜ 
eb05
, 
eb04
 
ªd
 
eb08
 
Lib¿r›s
 
¬e
 
difã»Á
; 
¶—£
 
upg¿de
 
to
 
§me
 
v”siÚ
!

72 
	#X05_ADCMUX_BOARD_POWER_UB
 (0u)

	)

73 
	#X05_ADCMUX_VSUP_1V25
 (1u)

	)

74 
	#X05_ADCMUX_VREF_3V3
 (2u)

	)

75 
	#X05_ADCMUX_BOARD_POWER_SWITCHED
 (3u)

	)

76 
	#X05_ADCMUX_VREF1_5V
 (4u)

	)

77 
	#X05_ADCMUX_GND_OFFSET
 (5u)

	)

78 
	#X05_ADCMUX_VSUP_5V_BOARD_GND
 (6u)

	)

79 
	#X05_ADCMUX_VSUP_12V_BOARD_GND
 (7u)

	)

80 
	#X05_ADCMUX_VREF_0V64
 (8u)

	)

81 
	#X05_ADCMUX_VSUP_12V_DIGITAL_GND
 (9u)

	)

82 
	#X05_ADCMUX_TOTAL_CURRENT
 (10u)

	)

83 
	#X05_ADCMUX_VSUP_5V_ANALOG_GND
 (11u)

	)

84 
	#X05_ADCMUX_VSUP_MINUS_5V_ANALOG_GND
 (12u)

	)

85 
	#X05_ADCMUX_TEMP_SENSE
 (13u)

	)

86 
	#X05_ADCMUX_VREF2_5V
 (14u)

	)

87 
	#X05_NUM_MUX_CHANNELS
 (15u)

	)

91 
	#X05_ADC_CH_MAX
 (12u)

	)

92 
	#X05_ADC_I_OUT_01
 (0u)

	)

93 
	#X05_ADC_I_OUT_02
 (1u)

	)

94 
	#X05_ADC_I_OUT_03
 (2u)

	)

95 
	#X05_ADC_I_OUT_04
 (3u)

	)

96 
	#X05_ADC_I_OUT_05
 (4u)

	)

97 
	#X05_ADC_I_OUT_06
 (5u)

	)

98 
	#X05_ADC_I_OUT_07
 (6u)

	)

99 
	#X05_ADC_I_OUT_08
 (7u)

	)

100 
	#X05_ADC_U_IN_01
 (8u)

	)

101 
	#X05_ADC_U_IN_02
 (9u)

	)

102 
	#X05_ADC_U_IN_03
 (10u)

	)

103 
	#X05_ADC_U_IN_04
 (11u)

	)

106 
	#X05_SYS_COMPONENT_LIBRARY
 (0)

107 
	#X05_SYS_COMPONENT_FPGA
 (1)

108 
	#X05_SYS_COMPONENT_CHANNEL_MAX
 (2)

	)

116 #ifdeà
__ılu¥lus


117 
Çme¥aû
 
¡w_£pi


119 
	~"hµ/x05_sys.hµ
"

128 
sšt16
 
x05_sys_š™
();

129 
sšt16
 
x05_sys_g‘_compÚ’t_šfo
 (cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_CompÚ’t
, 
T_x_sys_šfo
* cÚ¡ 
İt_Info
);

130 
sšt16
 
x05_sys_g‘_adc_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_MuxChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

131 
sšt16
 
x05_sys_£t_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_AdcChªÃl
, cÚ¡ ušt16 
ou16_F‹rCÚfig
);

132 
sšt16
 
x05_sys_g‘_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_SlÙ
, cÚ¡ ušt16 
ou16_AdcChªÃl
, ušt16* cÚ¡ 
İu16_F‹rCÚfig
);

137 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\intrinsics.h

18 #iâdeà
_INTRINSICS_H


19 
	#_INTRINSICS_H


	)

24 
	~"¡wty³s.h
"

27 #ifdeà
__ılu¥lus


67 #ifdeà
__ılu¥lus


68 
Çme¥aû
 
¡w_£pi


70 
	~"hµ/šŒšsics.hµ
"

86 
INLINE
 
nİ
()

88 
asm
 volatile ("nop" : : : "memory");

103 
INLINE
 
debug
()

105 
asm
 volatile ("debug" : : : "memory");

124 
INLINE
 
isync
()

126 
asm
 volatile ("isync" : : : "memory");

145 
INLINE
 
dsync
()

147 
asm
 volatile ("dsync" : : : "memory");

166 
INLINE
 
ušt32
 
g‘_b™
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
)

168 
ušt32
 
u32_B™
 = 0u;

170 
asm
 vŞ©("exŒ.u %0, %1, %2, 1" : "=d" (
u32_B™
è: "d" (
ou32_D©aReg
), "d" (
ou32_Pos
));

172  
u32_B™
;

193 
INLINE
 
ušt32
 
g‘_b™f›ld
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
)

195 
ušt32
 
u32_B™f›ld
 = 0u;

197 
asm
 volatile ("extr.u %0, %1, %2, %3"

198 : "=d" (
u32_B™f›ld
è: "d" (
ou32_D©aReg
), "d" (
ou32_Pos
), "i" (
ou8_Width
));

200  
u32_B™f›ld
;

221 
INLINE
 
ušt32
 
š£¹_b™
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, ušt32 
ou32_B™
)

223 
ušt32
 
u32_D©a
 = 0;

225 
asm
 volatile ("insert %0,%1,%2,%3,1"

226 : "=d" (
u32_D©a
è: "d" (
ou32_D©aReg
), "d" (
ou32_B™
), "d" (
ou32_Pos
));

228  
u32_D©a
;

250 
INLINE
 
ušt32
 
š£¹_b™f›ld
(vŞ©ušt32 
ou32_D©aReg
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
,

251 
ušt32
 
ou32_B™f›ld
)

253 
ušt32
 
u32_D©a
 = 0;

255 
asm
 volatile ("insert %0,%1,%2,%3,%4"

256 : "=d" (
u32_D©a
è: "d" (
ou32_D©aReg
), "d" (
ou32_B™f›ld
), "d" (
ou32_Pos
), "i" (
ou8_Width
));

258  
u32_D©a
;

278 
INLINE
 
modify_mask
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Mask
, ušt32 
ou32_D©a
)

280 
asm
 volatile (" mov %%d12, %2 #†oad data into D12 \n\t" \

283 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Mask
), "d" (
ou32_D©a
) : "d12", "d13", "memory");

302 
INLINE
 
modify_b™
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Pos
, ušt32 
ou32_B™
)

304 
asm
 volatile (" imask %%e12, %2, %1, 1 #†oad bit mask‡nd data into E12 \n\t" \

306 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Pos
), "d" (
ou32_B™
) : "d12", "d13", "memory");

326 
INLINE
 
modify_b™f›ld
(vŞ©
ušt32
 *
İu32_RegPŒ
, ušt32 
ou32_Pos
, cÚ¡ 
ušt8
 
ou8_Width
, ušt32 
ou32_D©a
)

328 
asm
 volatile (" imask %%e12, %2, %1, %3 #†oad bit mask‡nd data into E12 \n\t" \

330 : : "a" (
İu32_RegPŒ
), "d" (
ou32_Pos
), "d" (
ou32_D©a
), "i" (
ou8_Width
) : "d12", "d13", "memory");

351 
INLINE
 
ušt32
 
sw­_ušt32
(vŞ©ušt32 *
İu32_RegPŒ
, ušt32 
ou32_D©a
)

353 
asm
 vŞ©("sw­.w [%1]0,%0" : "=d" (
ou32_D©a
è: "a" (
İu32_RegPŒ
), "0" (ou32_Data) : "memory");

355  
ou32_D©a
;

374 
INLINE
 
ušt32
 
msb_pos
(ušt32 
ou32_V®ue
)

376 
ušt32
 
u32_B™PosMSB
 = 0u;

378 
asm
 vŞ©("şz %0,%1" : "=d" (
u32_B™PosMSB
è: "d" (
ou32_V®ue
));

380 
u32_B™PosMSB
 = (31u - u32_BitPosMSB);

382  
u32_B™PosMSB
;

402 
INLINE
 
ušt32
 
mš_u32
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

404 
ušt32
 
u32_Mš
 = 0u;

406 
asm
 vŞ©("mš.u %0, %1, %2" : "=d" (
u32_Mš
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
));

408  
u32_Mš
;

428 
INLINE
 
sšt32
 
mš_s32
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

430 
sšt32
 
s32_Mš
 = 0u;

432 
asm
 vŞ©("mš %0, %1, %2" : "=d" (
s32_Mš
è: "d" (
os32_D©a1
), "d" (
os32_D©a2
));

434  
s32_Mš
;

454 
INLINE
 
ušt32
 
max_u32
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

456 
ušt32
 
u32_Max
 = 0u;

458 
asm
 vŞ©("max.u %0, %1, %2" : "=d" (
u32_Max
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
));

460  
u32_Max
;

480 
INLINE
 
sšt32
 
max_s32
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

482 
sšt32
 
s32_Max
 = 0;

484 
asm
 vŞ©("max %0, %1, %2" : "=d" (
s32_Max
è: "d" (
os32_D©a1
), "d" (
os32_D©a2
));

486  
s32_Max
;

507 
INLINE
 
ušt32
 
æßt_to_ušt32
(cÚ¡ 
æßt32
 
of32_D©a
)

509 
ušt32
 
u32_ResuÉ
 = 0u;

511 
asm
 vŞ©("áou %0,%1" : "=d" (
u32_ResuÉ
è: "d" (
of32_D©a
));

513  
u32_ResuÉ
;

534 
INLINE
 
sšt32
 
æßt_to_sšt32
(cÚ¡ 
æßt32
 
of32_D©a
)

536 
sšt32
 
s32_ResuÉ
 = 0;

538 
asm
 vŞ©("áo˜%0,%1" : "=d" (
s32_ResuÉ
è: "d" (
of32_D©a
));

540  
s32_ResuÉ
;

561 
INLINE
 
æßt32
 
madd_f32
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
)

563 
æßt32
 
f32_ResuÉ
 = 0.0f;

565 
asm
 vŞ©("madd.à%0, %3, %1, %2" : "=d" (
f32_ResuÉ
)

566 : "d" (
of32_MuÉ1
), "d" (
of32_MuÉ2
), "d" (
of32_Add
));

567  
f32_ResuÉ
;

589 
INLINE
 
æßt32
 
msub_f32
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
)

591 
æßt32
 
f32_ResuÉ
 = 0.0f;

593 
asm
 vŞ©("msub.à%0, %3, %1, %2" : "=d" (
f32_ResuÉ
)

594 : "d" (
of32_MuÉ1
), "d" (
of32_MuÉ2
), "d" (
of32_Mšu’d
));

595  
f32_ResuÉ
;

619 
INLINE
 
ušt32
 
subs_u32
(cÚ¡ ušt32 
ou32_Mšu’d
, cÚ¡ ušt32 
ou32_SubŒah’d
)

621 
ušt32
 
u32_ResuÉ
 = 0;

623 
asm
 vŞ©("subs.u %0, %1, %2" : "=d" (
u32_ResuÉ
è: "d" (
ou32_Mšu’d
), "d" (
ou32_SubŒah’d
));

625  
u32_ResuÉ
;

651 
INLINE
 
sšt32
 
subs_s32
(cÚ¡ sšt32 
os32_Mšu’d
, cÚ¡ sšt32 
os32_SubŒah’d
)

653 
sšt32
 
s32_ResuÉ
 = 0;

655 
asm
 vŞ©("sub %0, %1, %2" : "=d" (
s32_ResuÉ
è: "d" (
os32_Mšu’d
), "d" (
os32_SubŒah’d
));

657  
s32_ResuÉ
;

681 
INLINE
 
ušt32
 
adds_u32
(cÚ¡ ušt32 
ou32_Summªd1
, cÚ¡ ušt32 
ou32_Summªd2
)

683 
ušt32
 
u32_ResuÉ
 = 0;

685 
asm
 vŞ©("adds.u %0, %1, %2" : "=d" (
u32_ResuÉ
è: "d" (
ou32_Summªd1
), "d" (
ou32_Summªd2
));

687  
u32_ResuÉ
;

713 
INLINE
 
sšt32
 
adds_s32
(cÚ¡ sšt32 
os32_Summªd1
, cÚ¡ sšt32 
os32_Summªd2
)

715 
sšt32
 
s32_ResuÉ
 = 0;

717 
asm
 vŞ©("add %0, %1, %2" : "=d" (
s32_ResuÉ
è: "d" (
os32_Summªd1
), "d" (
os32_Summªd2
));

719  
s32_ResuÉ
;

738 
INLINE
 * 
ušt32_to_±r
(cÚ¡ 
ušt32
 
ou32_UIÁ32
)

740 *
pvVoid
 = 0;

743 
asm
 vŞ©("mov.¨%0, %1" : "÷" (
pvVoid
è: "d" (
ou32_UIÁ32
));

745  
pvVoid
;

764 
INLINE
 
ušt32
 
±r_to_ušt32
(cÚ¡ vŞ©*
İv_Void
)

766 
ušt32
 
u32_UIÁ32
 = 0u;

769 
asm
 vŞ©("mov.d %0, %1" : "=d" (
u32_UIÁ32
è: "a" (
İv_Void
));

771  
u32_UIÁ32
;

790 
INLINE
 
ušt32
 
±r_addr_diff
(cÚ¡ vŞ©* 
İv_Void1
, cÚ¡ vŞ©* 
İv_Void2
)

792 
ušt32
 
u32_Diff
 = 0u;

794 
asm
 volatile ( "sub.a %%a15, %1, %2 # %1 = (%1 - %2) \n\t" \

797 : "=d" (
u32_Diff
è: "a" (
İv_Void1
), "a" (
İv_Void2
) : "a15");

799  
u32_Diff
;

819 
INLINE
 * 
±r_addr_off£t
(cÚ¡ vŞ©* 
İv_Void
, 
sšt32
 
os32_Off£t
)

821 *
pvVoidOff£t
 = 0;

823 
asm
 volatile ( "addsc.a %0, %1, %2, 0 # %0 = (%1 + %2) \n\t" \

824 : "÷" (
pvVoidOff£t
è: "a" (
İv_Void
), "d" (
os32_Off£t
));

826  
pvVoidOff£t
;

845 
INLINE
 
ušt32
 
d©a_diff_u32
 (cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

847 
ušt32
 
u32_Diff
 = 0;

849 
asm
 volatile ( "sub %0, %1, %2 # %1 = (%1 - %2) \n\t" \

851 : "=d" (
u32_Diff
è: "d" (
ou32_D©a1
), "d" (
ou32_D©a2
) : "memory");

853  
u32_Diff
;

885 
INLINE
 
ÿche_wr™eback_šv®id©e
(cÚ¡ vŞ©
ušt8
 * cÚ¡ 
İu8_D©a
, 
ušt32
 
ou32_CouÁ
)

888 
asm
 volatile (" mov.a %%a15, %0 #†oad†oop counter \n\t"

892 : : "d" (
ou32_CouÁ
 >> 5), "a" (
İu8_D©a
) : "a15", "memory");

923 
INLINE
 
ÿche_šv®id©e
(cÚ¡ vŞ©
ušt8
 * cÚ¡ 
İu8_D©a
, 
ušt32
 
ou32_CouÁ
)

926 
asm
 volatile (" mov.a %%a15, %0 #†oad†oop counter \n\t"

930 : : "d" (
ou32_CouÁ
 >> 5), "a" (
İu8_D©a
) : "a15", "memory");

938 
INLINE
 
ušt32
 
umš
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
è
DEPRECATED
;

939 
INLINE
 
ušt32
 
umš
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

941  
mš_u32
(
ou32_D©a1
, 
ou32_D©a2
);

944 
INLINE
 
sšt32
 
smš
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
è
DEPRECATED
;

945 
INLINE
 
sšt32
 
smš
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

947  
mš_s32
(
os32_D©a1
, 
os32_D©a2
);

950 
INLINE
 
ušt32
 
umax
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
è
DEPRECATED
;

951 
INLINE
 
ušt32
 
umax
(cÚ¡ ušt32 
ou32_D©a1
, cÚ¡ ušt32 
ou32_D©a2
)

953  
max_u32
(
ou32_D©a1
, 
ou32_D©a2
);

956 
INLINE
 
sšt32
 
smax
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
è
DEPRECATED
;

957 
INLINE
 
sšt32
 
smax
(cÚ¡ sšt32 
os32_D©a1
, cÚ¡ sšt32 
os32_D©a2
)

959  
max_s32
(
os32_D©a1
, 
os32_D©a2
);

962 
INLINE
 
æßt32
 
madd_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
è
DEPRECATED
;

963 
INLINE
 
æßt32
 
madd_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Add
)

965  
madd_f32
(
of32_MuÉ1
, 
of32_MuÉ2
, 
of32_Add
);

968 
INLINE
 
æßt32
 
msub_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
è
DEPRECATED
;

969 
INLINE
 
æßt32
 
msub_f
(æßt32 
of32_MuÉ1
, flßt32 
of32_MuÉ2
, flßt32 
of32_Mšu’d
)

971  
msub_f32
(
of32_MuÉ1
, 
of32_MuÉ2
, 
of32_Mšu’d
);

979 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\memtypes.h

18 #iâdeà
_MEMTYPES_H


19 
	#_MEMTYPES_H


	)

22 #ifdeà
__ılu¥lus


32 
	#ALIGNED
(
®ign
è
	`__©Œibu‹__
 ((
	`®igÃd
 (align)))

33 

	)

54 
	#X_MEM_ROM_DATA
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".romd©a")))

	)

56 
	#X_MEM_LIB_VERSION
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".libv”siÚ")))

	)

58 
	#X_MEM_LIB_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

59 
	#X_MEM_APPLICATION_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".­¶iÿtiÚ_šfo")))

	)

63 
	#MEM_PROT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.data")))

65 
	#MEM_PROT_BSS
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.bss,\"aw\",@nobits #")))

66 
	#MEM_PROT_NOINIT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".protected.noinit,\"aw\",@nobits #")))

67 
	#MEM_NOINIT
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".noinit,\"aw\",@nobits #")))

68 
	#MEM_EXTROM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".rodata_e")))

69 
	#MEM_INTROM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".rodata_i")))

70 

	)

75 
	#MEM_SMALL
 
	`__©Œibu‹__
((
	`£ùiÚ
(".sdata")))

76 
	#MEM_SMALL_BSS
 
	`__©Œibu‹__
((
	`£ùiÚ
(".sbss")))

77 
	#MEM_SMALL_CONST
 cÚ¡ 
	`__©Œibu‹__
((
	`a£ùiÚ
(".sdata.rodata","f=as")))

78 

	)

84 
	#LONGCALL
 
	`__©Œibu‹__
((
lÚgÿÎ
))

	)

88 
	#CODERAM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".cod”am","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

91 
	#INTROM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".‹xt_i","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

93 
	#EXTROM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".‹xt_e","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

97 
	#ALIAS
(
func
è
	`__©Œibu‹__
 ((
	`®Ÿs
 (#func)))

	)

108 
	#MEM_DRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dram")))

109 
	#MEM_DRAM_CONST
 cÚ¡ 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dram_c")))

110 
	#MEM_DPRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".dpram")))

111 
	#MEM_SBRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sbram")))

112 
	#MEM_SRAM
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sram")))

113 
	#MEM_SRAM_CONST
 cÚ¡ 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".sram_c")))

114 

	)

117 
	#MEM_ABS
 
	`__©Œibu‹__
 ((
	`a£ùiÚ
(".zdata","f=awz")))

118 
	#MEM_ABS_BSS
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".zbss","f=awz")))

119 

	)

122 
	#FASTRAM
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".ç¡¿m","a=4","f=x"), 
lÚgÿÎ
, 
nošlše
))

	)

123 
	#INTROM_ABS
 
	`__©Œibu‹__
((
	`a£ùiÚ
(".abs.text_i","a=4","f=x")))

124 

	)

125 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stdtypes.h

18 #iâdeà
_STDTYPES_H


19 
	#_STDTYPES_H


	)

24 
	~<¡ddef.h
>

27 #ifdeà
__ılu¥lus


36 
	#STR
(
s
) #s

37 
	#XSTR
(
s
è
	`STR
(s)

38 

	)

39 
	#TRUE
 1

40 
	#FALSE
 0

41 

	)

42 
	#ON
 1

43 
	#OFF
 0

44 

	)

45 
	#HIGH
 1

46 
	#LOW
 0

47 

	)

52 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stwerrors.h

18 #iâdeà
_STWERRORS_H


19 
	#_STWERRORS_H


	)

25 #ifdeà
__ılu¥lus


27 
Çme¥aû
 
	g¡w_”rÜs


29 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_NO_ERR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(0);

30 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_UNKNOWN_ERR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-1);

31 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_WARN
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-2);

32 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_DEFAULT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-3);

33 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_BUSY
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-4);

34 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_RANGE
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-5);

35 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_OVERFLOW
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-6);

36 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_RD_WR
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-7);

37 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_NOACT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-8);

38 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_COM
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-9);

39 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_CONFIG
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-10);

40 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_CHECKSUM
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-11);

41 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_TIMEOUT
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-12);

42 cÚ¡ 
	g¡w_ty³s
::
sšt16
 
C_IN_PROGRESS
 = 
¡©ic_ÿ¡
<
¡w_ty³s
::sint16>(-13);

48 
	#C_NO_ERR
 ( 0 )

	)

49 
	#C_UNKNOWN_ERR
 (-1 )

	)

50 
	#C_WARN
 (-2 )

	)

51 
	#C_DEFAULT
 (-3 )

	)

52 
	#C_BUSY
 (-4 )

	)

53 
	#C_RANGE
 (-5 )

	)

54 
	#C_OVERFLOW
 (-6 )

	)

55 
	#C_RD_WR
 (-7 )

	)

56 
	#C_NOACT
 (-8 )

	)

57 
	#C_COM
 (-9 )

	)

58 
	#C_CONFIG
 (-10)

	)

59 
	#C_CHECKSUM
 (-11)

	)

60 
	#C_TIMEOUT
 (-12)

	)

61 
	#C_IN_PROGRESS
 (-13)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stwtypes.h

18 #iâdeà
_STWTYPES_H


19 
	#_STWTYPES_H


	)

22 #ifdeà
__ılu¥lus


31 
	#NO_INLINE
 
	`__©Œibu‹__
((
nošlše
))

32 
	#ALWAYS_INLINE
 
	`__©Œibu‹__
((
®ways_šlše
))

33 
	#INLINE
 
šlše
 
ALWAYS_INLINE


34 

	)

36 
	#DEPRECATED
 
	`__©Œibu‹__
((
d•»ÿ‹d
))

	)

39 
	#WEAK
 
	`__©Œibu‹__
((
w—k
))

	)

41 #ifdeà
__ılu¥lus


42 
Çme¥aû
 
¡w_ty³s


48 
	tušt8
;

49 sigÃd 
	tsšt8
;

50 
	tušt16
;

51 sigÃd 
	tsšt16
;

52 
	tušt32
;

53 sigÃd 
	tsšt32
;

54 
	tušt64
;

55 sigÃd 
	tsšt64
;

57 
	tæßt32
;

58 
	tæßt64
;

63 
	tušŠ
;

64 sigÃd 
	tsšŠ
;

65 
	tch¬n
;

73 #ifdeà
__ılu¥lus


75 
boŞ
 
	tboŞ—n
;

76 
	#_b™
 
boŞ


77 

	)

80 
ušt8
 
	tboŞ—n
;

84 #ifdeà
__ılu¥lus


90 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_can.h

19 #iâdeà
_X_CAN_H


20 
	#_X_CAN_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_ÿn_ty³s.h
"

27 #ifdeà
__ılu¥lus


33 
	#X_CAN_CH_MAX
 (4)

	)

35 
	#X_CAN_BUS_01
 (0)

36 
	#X_CAN_BUS_02
 (1)

37 
	#X_CAN_BUS_03
 (2)

38 
	#X_CAN_BUS_04
 (3)

39 

	)

46 #ifdeà
__ılu¥lus


47 
Çme¥aû
 
¡w_£pi


49 
	~"hµ/x_ÿn.hµ
"

59 
sšt16
 
x_ÿn_£lf_‹¡
();

60 
sšt16
 
x_ÿn_bus_şo£
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

61 
sšt16
 
x_ÿn_bus_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_ÿn_bus_¡©us
 * cÚ¡ 
İt_Stus
);

62 
sšt16
 
x_ÿn_bus_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
);

63 
sšt16
 
x_ÿn_bus_š™_ext
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
,

64 cÚ¡ 
ušt16
 
ou16_Sam¶ePošt
, ušt16* cÚ¡ 
İu16_AùSam¶ePošt
);

65 
sšt16
 
x_ÿn_bus_g‘_§m¶e_pošt
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_AùSam¶ePošt
);

66 
sšt16
 
x_ÿn_bus_š™_çu»_ÿÎback
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

67 cÚ¡ 
PR_x_ÿn_bus_Fau»C®lback
 
İr_Fau»C®lback
);

68 
sšt16
 
x_ÿn_bus_³rfÜm_busoff_»cov”y
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

69 
sšt16
 
x_ÿn_obj_ş—r_buf
(* cÚ¡ 
İv_HªdË
);

70 
sšt16
 
x_ÿn_obj_şo£
(* cÚ¡ 
İv_HªdË
);

71 
sšt16
 
x_ÿn_obj_g‘_buf_couÁ
(cÚ¡ * cÚ¡ 
İv_HªdË
, 
ušt16
 * cÚ¡ 
İu16_CouÁ
);

72 
sšt16
 
x_ÿn_obj_g‘_msg
(cÚ¡ * cÚ¡ 
İv_HªdË
, 
T_x_ÿn_msg
 * cÚ¡ 
İt_Msg
);

73 
sšt16
 
x_ÿn_obj_g‘_¡©us
(* cÚ¡ 
İv_HªdË
, 
T_x_ÿn_obj_¡©us
 * cÚ¡ 
İt_Stus
);

74 
sšt16
 
x_ÿn_obj_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_ÿn_obj_cÚfig
 * cÚ¡ 
İt_CÚfig
,

75 ** cÚ¡ 
İpv_HªdË
);

76 
sšt16
 
x_ÿn_obj_£nd_msg
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_msg
 * cÚ¡ 
İt_Msg
);

77 
sšt16
 
x_ÿn_obj_£nd_¹r_»q
(cÚ¡ * cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Id
);

78 
sšt16
 
x_ÿn_obj_£t_·u£
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt16
 
ou16_Pau£
);

79 
sšt16
 
x_ÿn_obj_£t_f‹r
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Com·»Id
,

80 cÚ¡ 
T_x_ÿn_id
 * cÚ¡ 
İt_Mask
);

81 
sšt16
 
x_ÿn_bus_chªge_busoff_time
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Time1
, cÚ¡ ušt16 
ou16_Time2
,

82 cÚ¡ 
ušt16
 
ou16_Time3
, cÚ¡ ušt16 
ou16_Time4
, cÚ¡ ušt16 
ou16_Time5
,

83 cÚ¡ 
ušt16
 
ou16_Wa™Time
);

84 
sšt16
 
x_ÿn_bus_lock
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

85 
sšt16
 
x_ÿn_bus_£t_masks
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_11B™Mask
, cÚ¡ ušt32 
ou32_29B™Mask
);

86 
sšt16
 
x_ÿn_obj_š™_g©eway
(cÚ¡ 
ušt16
 
ou16_ChªÃlSrc
, cÚ¡ ušt16 
ou16_ChªÃlD¡
,

87 cÚ¡ 
T_x_ÿn_g©eway_cÚfig
 * cÚ¡ 
İt_CÚfig
, ** cÚ¡ 
İpv_HªdË
);

88 
sšt16
 
x_ÿn_obj_lock
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt8
 
ou8_OnOff
);

89 
sšt16
 
x_ÿn_obj_£t_auto_»¥Ú£
(cÚ¡ * cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_can_types.h

23 #iâdeà
_X_CAN_TYPES_H


24 
	#_X_CAN_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


39 
	#X_CAN_BUS_FAILURE_NONE
 0x0000u

40 
	#X_CAN_BUS_FAILURE_ACTIVE
 0x0000u

41 
	#X_CAN_BUS_FAILURE_BUSWARN
 0x0001u

42 
	#X_CAN_BUS_FAILURE_BUSOFF
 0x0002u

43 
	#X_CAN_BUS_LOCKED
 0x0100u

44 

	)

45 
	#X_CAN_OBJ_TYPE_RX
 0

46 
	#X_CAN_OBJ_TYPE_TX
 1

47 
	#X_CAN_OBJ_TYPE_TX_RTR
 2

48 
	#X_CAN_OBJ_TYPE_GATEWAY
 3

49 

	)

50 
	#X_CAN_OBJ_NO_INIT
 0

51 
	#X_CAN_OBJ_IN_USE
 1

52 
	#X_CAN_OBJ_LOCKED
 2

53 

	)

54 
	#X_CAN_DIRECTION_RX
 0

55 
	#X_CAN_DIRECTION_TX
 1

56 

	)

57 
	#X_CAN_GATEWAY_RTR_NO
 0

58 
	#X_CAN_GATEWAY_RTR_DEST
 1

59 
	#X_CAN_GATEWAY_RTR_PASS
 2

60 

	)

68 #ifdeà
__ılu¥lus


69 
Çme¥aû
 
¡w_£pi


71 
	~"hµ/x_ÿn_ty³s.hµ
"

83 
ušt32
 
u32_Id
;

84 
ušt8
 
u8_Xtd
;

85 } 
	tT_x_ÿn_id
;

91 
T_x_ÿn_id
 
t_Id
;

92 
ušt8
 
u8_Dlc
;

93 
ušt32
 
u32_Time
;

94 
ušt8
 
au8_D©a
[8];

96 } 
	tT_x_ÿn_msg
;

129 (*
PR_x_ÿn_bus_Fau»C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

130 cÚ¡ 
	tušt16
 
	tou16_BusS‹
);

197 
sšt16
 (*
	tPR_x_ÿn_obj_IÁ”ru±C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

198 cÚ¡ * cÚ¡ 
	tİv_HªdË
, 
	tT_x_ÿn_msg
 * cÚ¡ 
	tİt_CªMsg
,

199 cÚ¡ 
	tušt16
 
	tou16_DœeùiÚ
);

212 
ušt32
 
u32_B™¿‹
;

213 vŞ©
ušt32
 
u32_La¡E¼ÜTime
;

214 vŞ©
ušt16
 
u16_BusS‹
;

215 }
	tT_x_ÿn_bus_¡©us
;

268 
T_x_ÿn_id
 
t_Id
;

269 
ušt8
 
u8_MsgTy³
;

270 
ušt16
 
u16_Pau£
;

271 
ušt16
 
u16_SoáBufãr
;

272 
ušt16
 
u16_H¬dBufãr
;

273 
ušt32
 
u32_C®lbackP¬am‘”
;

274 
PR_x_ÿn_obj_IÁ”ru±C®lback
 
´_C®lback
;

275 }
	tT_x_ÿn_obj_cÚfig
;

283 
T_x_ÿn_obj_cÚfig
 
t_CÚfig
;

284 vŞ©
ušt32
 
u32_La¡IÁ”ru±Time
;

285 
ušt16
 
u16_Numb”Msgs
;

286 
ušt8
 
u8_U§ge
;

287 vŞ©
ušt8
 
u8_MsgLo¡FÏg
;

288 vŞ©
ušt8
 
u8_Ov”æowCouÁ
;

289 }
	tT_x_ÿn_obj_¡©us
;

354 
ušŠ
 
q_CİyDlc
 : 1;

355 
ušŠ
 
q_CİyId
 : 1;

356 
ušŠ
 
q_CİyD©a
 : 1;

357 
ušŠ
 
q_AutoTX
 : 1;

358 
ušŠ
 
q_AÎIdTy³
 : 1;

359 
ušŠ
 
un_RTRMode
 : 2;

363 } 
	tT_x_ÿn_g©eway_cÚŒŞ
;

404 
T_x_ÿn_g©eway_cÚŒŞ
 
t_G©ewayCÚŒŞ
;

405 
ušt16
 
u16_H¬dBufãr
;

406 
T_x_ÿn_id
 
t_G©ewayId
;

407 
T_x_ÿn_id
 
t_G©ewayMask
;

408 
T_x_ÿn_msg
 
t_G©ewayMsg
;

409 
ušt32
 
u32_C®lbackP¬am‘”
;

410 
PR_x_ÿn_obj_IÁ”ru±C®lback
 
´_C®lback
;

411 } 
	tT_x_ÿn_g©eway_cÚfig
;

417 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eb.h

19 #iâdeà
_X_EB_H


20 
	#_X_EB_H


	)

26 #ifdeà
__ılu¥lus


34 
	#X_EXPBOARD_SLOT_A
 (0)

35 
	#X_EXPBOARD_SLOT_B
 (1)

36 
	#X_EXPBOARD_SLOT_C
 (2)

37 
	#X_EXPBOARD_NUM_SLOTS
 (3)

38 

	)

40 
	#X_EXPBOARD_SLOT0
 (0)

41 
	#X_EXPBOARD_SLOT1
 (1)

42 
	#X_EXPBOARD_SLOT2
 (2)

43 

	)

45 
	#X_EXPBOARD_CHANNEL_01
 (0)

46 
	#X_EXPBOARD_CHANNEL_02
 (1)

47 
	#X_EXPBOARD_CHANNEL_03
 (2)

48 
	#X_EXPBOARD_CHANNEL_04
 (3)

49 
	#X_EXPBOARD_CHANNEL_05
 (4)

50 
	#X_EXPBOARD_CHANNEL_06
 (5)

51 
	#X_EXPBOARD_CHANNEL_07
 (6)

52 
	#X_EXPBOARD_CHANNEL_08
 (7)

53 
	#X_EXPBOARD_CHANNEL_09
 (8)

54 
	#X_EXPBOARD_CHANNEL_10
 (9)

55 
	#X_EXPBOARD_CHANNEL_11
 (10)

56 
	#X_EXPBOARD_CHANNEL_12
 (11)

57 
	#X_EXPBOARD_CHANNEL_13
 (12)

58 
	#X_EXPBOARD_CHANNEL_14
 (13)

59 

	)

61 
	#X_EXPBOARD_PWR_OPT
 (12)

62 
	#X_EXPBOARD_POWER
 (13)

63 

	)

65 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eep.h

19 #iâdeà
_X_EEP_H


20 
	#_X_EEP_H


	)

24 
	~"x_“p_ty³s.h
"

25 
	~"x_¡dty³s.h
"

28 #ifdeà
__ılu¥lus


42 #ifdeà
__ılu¥lus


43 
Çme¥aû
 
¡w_£pi


45 
	~"hµ/x_“p.hµ
"

51 
sšt16
 
x_“p_»ad
ĞcÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_CouÁ
, 
ušt8
* cÚ¡ 
İu8_D©a
 );

52 
sšt16
 
x_“p_wr™e
ĞcÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
 );

53 
sšt16
 
x_“p_æush
( );

54 
sšt16
 
x_“p_g‘_¡©us
(cÚ¡ 
ušt32
 
ou32_Add»ss
, cÚ¡ ušt32 
ou32_Size
, 
T_x_“p_¡©us
* cÚ¡ 
İt_Stus
);

59 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eep_types.h

23 #iâdeà
_X_EEP_TYPES_H


24 
	#_X_EEP_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


47 #ifdeà
__ılu¥lus


48 
Çme¥aû
 
¡w_£pi


50 
	~"hµ/x_“p_ty³s.hµ
"

57 
ušt32
 
u32_E•romSizeBy‹
;

58 
ušt32
 
u32_PageSizeBy‹
;

59 
ušt32
 
u32_O³nD©aPages
;

60 
ušt32
 
u32_FauÉyD©aPages
;

61 } 
	tT_x_“p_¡©us
;

66 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err.h

18 #iâdeà
_X_ERR_H


19 
	#_X_ERR_H


	)

22 
	~"¡wty³s.h
"

23 
	~"x_”r_ty³s.h
"

24 
	~"x_”r_defšes.h
"

27 #ifdeà
__ılu¥lus


32 
	#X_ERR_WARNING
 (1)

33 
	#X_ERR_ERROR
 (2)

34 
	#X_ERR_INTERNAL
 (3)

35 

	)

44 #ifdeà
__ılu¥lus


45 
Çme¥aû
 
¡w_£pi


47 
	~"hµ/x_”r.hµ
"

57 
x_”r_š™
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_”r_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

58 
T_x_”r_hªdË
* 
x_”r_g‘_hªdË
();

65 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err_defines.h

18 #iâdeà
_ESX3XM_LIB_2_03R1_DEF_H


19 
	#_ESX3XM_LIB_2_03R1_DEF_H


	)

23 
	#X_CAN_IDX
 (0)

	)

24 
	#X_CAN_BUS_CHANGE_BUSOFF_TIME_IDX
 (0)

	)

25 
	#X_CAN_BUS_CLOSE_IDX
 (1)

	)

26 
	#X_CAN_BUS_GET_STATUS_IDX
 (2)

	)

27 
	#X_CAN_BUS_INIT_IDX
 (3)

	)

28 
	#X_CAN_BUS_INIT_FAILURE_CALLBACK_IDX
 (4)

	)

29 
	#X_CAN_BUS_LOCK_IDX
 (5)

	)

30 
	#X_CAN_BUS_PERFORM_BUSOFF_RECOVERY_IDX
 (6)

	)

31 
	#X_CAN_BUS_SET_MASKS_IDX
 (8)

	)

32 
	#X_CAN_OBJ_CLEAR_BUF_IDX
 (9)

	)

33 
	#X_CAN_OBJ_CLOSE_IDX
 (10)

	)

34 
	#X_CAN_OBJ_GET_BUF_COUNT_IDX
 (11)

	)

35 
	#X_CAN_OBJ_GET_MSG_IDX
 (12)

	)

36 
	#X_CAN_OBJ_GET_STATUS_IDX
 (13)

	)

37 
	#X_CAN_OBJ_INIT_IDX
 (14)

	)

38 
	#X_CAN_OBJ_INIT_GATEWAY_IDX
 (15)

	)

39 
	#X_CAN_OBJ_LOCK_IDX
 (16)

	)

40 
	#X_CAN_OBJ_SEND_MSG_IDX
 (17)

	)

41 
	#X_CAN_OBJ_SEND_RTR_REQ_IDX
 (18)

	)

42 
	#X_CAN_OBJ_SET_AUTO_RESPONSE_IDX
 (19)

	)

43 
	#X_CAN_OBJ_SET_FILTER_IDX
 (20)

	)

44 
	#X_CAN_OBJ_SET_PAUSE_IDX
 (21)

	)

45 
	#X_CAN_SELF_TEST_IDX
 (22)

	)

46 
	#X_CAN_BUS_INIT_EXT_IDX
 (23)

	)

47 
	#X_CAN_BUS_GET_SAMPLE_POINT_IDX
 (24)

	)

49 
	#X_EEP_IDX
 (1)

	)

50 
	#X_EEP_FLUSH_IDX
 (0)

	)

51 
	#X_EEP_READ_IDX
 (1)

	)

52 
	#X_EEP_WRITE_IDX
 (2)

	)

53 
	#X_EEP_GET_STATUS_IDX
 (3)

	)

55 
	#X_IN_IDX
 (2)

	)

56 
	#X_IN_GET_DUTY_CYCLE_IDX
 (0)

	)

57 
	#X_IN_GET_FREQUENCY_IDX
 (1)

	)

58 
	#X_IN_GET_RAW_VALUE_IDX
 (2)

	)

59 
	#X_IN_GET_STATUS_IDX
 (3)

	)

60 
	#X_IN_GET_VALUE_IDX
 (4)

	)

61 
	#X_IN_INIT_IDX
 (5)

	)

62 
	#X_IN_GET_COUNTER_IDX
 (6)

	)

63 
	#X_IN_SET_COUNTER_IDX
 (7)

	)

64 
	#X_IN_GET_COUNTER_DIRECTION_IDX
 (8)

	)

65 
	#X_T_IN_INIT_FREQUENCY_AVG_IDX
 (9)

	)

66 
	#X_T_IN_GET_FREQUENCY_AVG_IDX
 (10)

	)

68 
	#X_OS_IDX
 (3)

	)

69 
	#X_OS_INIT_IDX
 (4)

	)

70 
	#X_OS_INSTALL_TASK_IDX
 (5)

	)

71 
	#X_OS_INSTALL_TASK_EXT_IDX
 (6)

	)

72 
	#X_OS_SET_TASK_TIMER_EXT_IDX
 (7)

	)

73 
	#X_OS_SET_TASK_TIMER_IDX
 (8)

	)

74 
	#X_OS_START_IDX
 (9)

	)

75 
	#X_OS_CHECK_TASK_STACK_IDX
 (10)

	)

76 
	#X_OS_MBOX_INIT_IDX
 (11)

	)

77 
	#X_OS_MBOX_CLOSE_IDX
 (12)

	)

78 
	#X_OS_MBOX_GET_MESSAGE_IDX
 (13)

	)

79 
	#X_OS_MBOX_SEND_MESSAGE_IDX
 (14)

	)

80 
	#X_OS_MUTEX_INIT_IDX
 (15)

	)

81 
	#X_OS_MUTEX_CLOSE_IDX
 (16)

	)

82 
	#X_OS_MUTEX_GET_IDX
 (17)

	)

83 
	#X_OS_MUTEX_RELEASE_IDX
 (18)

	)

84 
	#X_OS_SEMA_INIT_IDX
 (19)

	)

85 
	#X_OS_SEMA_CLOSE_IDX
 (20)

	)

86 
	#X_OS_SEMA_GET_IDX
 (21)

	)

87 
	#X_OS_SEMA_RELEASE_IDX
 (22)

	)

88 
	#X_OS_SIGNAL_INIT_IDX
 (23)

	)

89 
	#X_OS_SIGNAL_CLOSE_IDX
 (24)

	)

90 
	#X_OS_SIGNAL_WAIT_FOR_IDX
 (25)

	)

91 
	#X_OS_SIGNAL_SEND_IDX
 (26)

	)

92 
	#X_OS_SUSPEND_TASK_IDX
 (30)

	)

93 
	#X_OS_RESUME_TASK_IDX
 (31)

	)

94 
	#X_OS_DELETE_TASK_IDX
 (32)

	)

95 
	#X_OS_CHECK_TASK_STACK_EXT_IDX
 (33)

	)

97 
	#X_OUT_IDX
 (4)

	)

98 
	#X_OUT_GET_CURRENT_IDX
 (0)

	)

99 
	#X_OUT_GET_STATUS_IDX
 (1)

	)

100 
	#X_OUT_INIT_IDX
 (2)

	)

101 
	#X_OUT_RESET_ERROR_IDX
 (3)

	)

102 
	#X_OUT_SET_FREQUENCY_IDX
 (4)

	)

103 
	#X_OUT_SET_VALUE_IDX
 (5)

	)

104 
	#X_OUT_SET_CONTROL_PARAMETERS_IDX
 (6)

	)

105 
	#X_OUT_GET_CONTROL_PARAMETERS_IDX
 (7)

	)

106 
	#X_OUT_SET_VALUE_RAMPING_IDX
 (8)

	)

107 
	#X_OUT_RELAY_INIT_IDX
 (20)

	)

108 
	#X_OUT_RELAY_SET_IDX
 (21)

	)

109 
	#X_OUT_RELAY_SET_ALL_IDX
 (22)

	)

110 
	#X_OUT_RELAY_GET_STATUS_IDX
 (23)

	)

111 
	#X_OUT_RELAY_RESET_ERROR_IDX
 (24)

	)

113 
	#X_SER_IDX
 (5)

	)

114 
	#X_SER_CLEAR_RX_BUF_IDX
 (0)

	)

115 
	#X_SER_CLEAR_TX_BUF_IDX
 (1)

	)

116 
	#X_SER_CLOSE_IDX
 (2)

	)

117 
	#X_SER_GET_RX_BUF_COUNT_IDX
 (3)

	)

118 
	#X_SER_GET_STATUS_IDX
 (4)

	)

119 
	#X_SER_GET_TX_BUF_COUNT_IDX
 (5)

	)

120 
	#X_SER_INIT_IDX
 (6)

	)

121 
	#X_SER_INIT_RX_BUF_IDX
 (7)

	)

122 
	#X_SER_INIT_TX_BUF_IDX
 (8)

	)

123 
	#X_SER_READ_IDX
 (9)

	)

124 
	#X_SER_SET_BITRATE_IDX
 (10)

	)

125 
	#X_SER_WRITE_IDX
 (11)

	)

126 
	#X_SER_WRITE_STRING_IDX
 (12)

	)

128 
	#X_SYS_IDX
 (6)

	)

129 
	#X_SYS_CLOSE_IDX
 (0)

	)

130 
	#X_SYS_GET_ADC_FILTER_IDX
 (2)

	)

131 
	#X_SYS_GET_ADC_VALUE_IDX
 (3)

	)

132 
	#X_SYS_GET_ADC_VALUE_SCALED_IDX
 (4)

	)

133 
	#X_SYS_GET_TEMPERATURE_IDX
 (6)

	)

134 
	#X_SYS_SET_ADC_FILTER_IDX
 (7)

	)

135 
	#X_SYS_SET_ALL_RELAYS_IDX
 (8)

	)

136 
	#X_SYS_SET_BEEPER_IDX
 (9)

	)

137 
	#X_SYS_SET_LED_IDX
 (10)

	)

138 
	#X_SYS_SET_RELAY_IDX
 (11)

	)

139 
	#X_SYS_SET_SENSOR_SUPPLY_IDX
 (12)

	)

140 
	#X_SYS_STAY_ALIVE_IDX
 (13)

	)

141 
	#X_SYS_TRIGGER_CPU_WATCHDOG_IDX
 (14)

	)

142 
	#X_SYS_GET_ADC_RAW_VALUE_IDX
 (16)

	)

143 
	#X_SYS_GET_ADC_RAW_VALUE_SCALED_IDX
 (17)

	)

144 
	#X_SYS_INIT_IDX
 (18)

	)

145 
	#X_SYS_GET_SYSTEM_INFORMATION_IDX
 (19)

	)

146 
	#X_SYS_GET_IGNITION_IDX
 (20)

	)

147 
	#X_SYS_INIT_OFF_REACTION_IDX
 (21)

	)

148 
	#X_SYS_GET_COMPONENT_INFO_IDX
 (22)

	)

150 
	#X_UTI_IDX
 (7)

	)

151 
	#X_UTI_CALC_CRC_TRICORE_IDX
 (0)

	)

152 
	#X_UTI_CALC_CRC_16_IDX
 (1)

	)

153 
	#X_UTI_CALC_CRC_STW_IDX
 (2)

	)

155 
	#X_SSV_IDX
 (8)

	)

156 
	#X_SSV_INIT_IDX
 (0)

	)

157 
	#X_SSV_GET_STATUS_IDX
 (1)

	)

158 
	#X_SSV_TRIGGER_IDX
 (2)

	)

159 
	#X_SSV_RESET_IDX
 (3)

	)

160 
	#X_SSV_SET_TRIGGER_IDX
 (4)

	)

162 
	#X_TIM_IDX
 (9)

	)

163 
	#X_TIM_INIT_IDX
 (0)

	)

164 
	#X_TIM_CLOSE_IDX
 (1)

	)

165 
	#X_TIM_SET_IDX
 (2)

	)

167 
	#X_FL_IDX
 (11)

	)

168 
	#X_FL_GET_VERSION_IDX
 (1)

	)

169 
	#X_FL_GET_NUM_INTERFACES_IDX
 (2)

	)

170 
	#X_FL_GET_INTERFACE_PARAMETERS_IDX
 (3)

	)

171 
	#X_FL_SET_INTERFACE_PARAMETERS_IDX
 (4)

	)

172 
	#X_FL_GET_NUM_CHECKSUM_BLOCKS_IDX
 (5)

	)

173 
	#X_FL_GET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (6)

	)

174 
	#X_FL_SET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (7)

	)

175 
	#X_FL_GET_CHECKSUM_BLOCK_CHECK_IDX
 (8)

	)

176 
	#X_FL_SET_CHECKSUM_BLOCK_CHECK_IDX
 (9)

	)

177 
	#X_FL_GET_FINGER_PRINT_IDX
 (10)

	)

178 
	#X_FL_GET_CONTENT_CHANGED_FLAG_IDX
 (11)

	)

179 
	#X_FL_PERFORM_SIGNATURE_BLOCK_CHECK_IDX
 (12)

	)

180 
	#X_FL_RESET_CONTENT_CHANGED_FLAG_IDX
 (13)

	)

182 
	#X_MPU_IDX
 (12)

	)

183 
	#X_MPU_INIT_IDX
 (0)

	)

184 
	#X_MPU_GET_STATUS_IDX
 (1)

	)

186 
	#XS_CAN_IDX
 (100)

	)

187 
	#XS_CAN_BUS_CHANGE_BUSOFF_TIME_IDX
 (0)

	)

188 
	#XS_CAN_BUS_CLOSE_IDX
 (1)

	)

189 
	#XS_CAN_BUS_INIT_IDX
 (3)

	)

190 
	#XS_CAN_BUS_INIT_FAILURE_CALLBACK_IDX
 (4)

	)

191 
	#XS_CAN_BUS_LOCK_IDX
 (5)

	)

192 
	#XS_CAN_BUS_PERFORM_BUSOFF_RECOVERY_IDX
 (6)

	)

193 
	#XS_CAN_BUS_SET_MASKS_IDX
 (8)

	)

194 
	#XS_CAN_OBJ_CLEAR_BUF_IDX
 (9)

	)

195 
	#XS_CAN_OBJ_CLOSE_IDX
 (10)

	)

196 
	#XS_CAN_OBJ_GET_MSG_IDX
 (12)

	)

197 
	#XS_CAN_OBJ_GET_STATUS_IDX
 (13)

	)

198 
	#XS_CAN_OBJ_INIT_IDX
 (14)

	)

199 
	#XS_CAN_OBJ_INIT_GATEWAY_IDX
 (15)

	)

200 
	#XS_CAN_OBJ_LOCK_IDX
 (16)

	)

201 
	#XS_CAN_OBJ_SEND_MSG_IDX
 (17)

	)

202 
	#XS_CAN_OBJ_SEND_RTR_REQ_IDX
 (18)

	)

203 
	#XS_CAN_OBJ_SET_AUTO_RESPONSE_IDX
 (19)

	)

204 
	#XS_CAN_OBJ_SET_FILTER_IDX
 (20)

	)

205 
	#XS_CAN_OBJ_SET_PAUSE_IDX
 (21)

	)

206 
	#XS_CAN_SELF_TEST_IDX
 (22)

	)

207 
	#XS_CAN_OBJ_GET_EVENT_HANDLE_IDX
 (23)

	)

208 
	#XS_CAN_BUS_GET_BUSWARN_CHANNEL_IDX
 (24)

	)

209 
	#XS_CAN_BUS_GET_BUSOFF_CHANNEL_IDX
 (25)

	)

210 
	#XS_CAN_OBJ_EVENT_MASK_SET_IDX
 (26)

	)

211 
	#XS_CAN_BUS_INIT_EXT_IDX
 (27)

	)

212 
	#XS_CAN_BUS_GET_SAMPLE_POINT_IDX
 (28)

	)

214 
	#XS_EEP_IDX
 (101)

	)

215 
	#XS_EEP_FLUSH_IDX
 (0)

	)

216 
	#XS_EEP_WRITE_IDX
 (2)

	)

218 
	#XS_IN_IDX
 (102)

	)

219 
	#XS_IN_INIT_IDX
 (5)

	)

220 
	#XS_IN_SET_COUNTER_IDX
 (7)

	)

221 
	#XS_IN_GET_EVENT_CHANNEL_IDX
 (9)

	)

222 
	#XS_T_IN_INIT_FREQUENCY_AVG_IDX
 (10)

	)

224 
	#XS_OS_IDX
 (103)

	)

225 
	#XS_OS_SET_TASK_SAFETY_LEVEL_IDX
 (2)

	)

226 
	#XS_OS_GET_TASK_SAFETY_LEVEL_IDX
 (3)

	)

227 
	#XS_OS_INIT_IDX
 (4)

	)

228 
	#XS_OS_INSTALL_TASK_EXT_IDX
 (6)

	)

229 
	#XS_OS_SET_TASK_TIMER_EXT_IDX
 (7)

	)

230 
	#XS_OS_MBOX_INIT_IDX
 (11)

	)

231 
	#XS_OS_MBOX_CLOSE_IDX
 (12)

	)

232 
	#XS_OS_MBOX_GET_MESSAGE_IDX
 (13)

	)

233 
	#XS_OS_MBOX_SEND_MESSAGE_IDX
 (14)

	)

234 
	#XS_OS_MUTEX_INIT_IDX
 (15)

	)

235 
	#XS_OS_MUTEX_CLOSE_IDX
 (16)

	)

236 
	#XS_OS_MUTEX_GET_IDX
 (17)

	)

237 
	#XS_OS_MUTEX_RELEASE_IDX
 (18)

	)

238 
	#XS_OS_SEMA_INIT_IDX
 (19)

	)

239 
	#XS_OS_SEMA_CLOSE_IDX
 (20)

	)

240 
	#XS_OS_SEMA_GET_IDX
 (21)

	)

241 
	#XS_OS_SEMA_RELEASE_IDX
 (22)

	)

242 
	#XS_OS_SIGNAL_INIT_IDX
 (23)

	)

243 
	#XS_OS_SIGNAL_CLOSE_IDX
 (24)

	)

244 
	#XS_OS_SIGNAL_WAIT_FOR_IDX
 (25)

	)

245 
	#XS_OS_SIGNAL_SEND_IDX
 (26)

	)

246 
	#XS_OS_SUSPEND_TASK_IDX
 (30)

	)

247 
	#XS_OS_RESUME_TASK_IDX
 (31)

	)

248 
	#XS_OS_DELETE_TASK_IDX
 (32)

	)

249 
	#XS_OS_MBOX_INIT_UNPROTECTED_IDX
 (35)

	)

250 
	#XS_OS_MUTEX_INIT_UNPROTECTED_IDX
 (36)

	)

251 
	#XS_OS_SEMA_INIT_UNPROTECTED_IDX
 (37)

	)

252 
	#XS_OS_SIGNAL_INIT_UNPROTECTED_IDX
 (38)

	)

254 
	#XS_OUT_IDX
 (104)

	)

255 
	#XS_OUT_INIT_IDX
 (1)

	)

256 
	#XS_OUT_INIT_UNPROTECTED_IDX
 (2)

	)

257 
	#XS_OUT_RESET_ERROR_IDX
 (3)

	)

258 
	#XS_OUT_SET_FREQUENCY_IDX
 (4)

	)

259 
	#XS_OUT_SET_VALUE_IDX
 (5)

	)

260 
	#XS_OUT_SET_CONTROL_PARAMETERS_IDX
 (6)

	)

261 
	#XS_OUT_SET_VALUE_RAMPING_IDX
 (8)

	)

262 
	#XS_OUT_GET_OVERCURRENT_CHANNEL_IDX
 (9)

	)

263 
	#XS_OUT_GET_RECOVERY_CHANNEL_IDX
 (10)

	)

264 
	#XS_OUT_GET_EVENT_CHANNEL_IDX
 (11)

	)

265 
	#XS_OUT_RELAY_INIT_IDX
 (20)

	)

266 
	#XS_OUT_RELAY_SET_IDX
 (21)

	)

267 
	#XS_OUT_RELAY_SET_ALL_IDX
 (22)

	)

268 
	#XS_OUT_RELAY_RESET_ERROR_IDX
 (24)

	)

269 
	#XS_OUT_RELAY_GET_EVENT_CHANNEL_IDX
 (25)

	)

271 
	#XS_SER_IDX
 (105)

	)

272 
	#XS_SER_CLEAR_RX_BUF_IDX
 (0)

	)

273 
	#XS_SER_CLEAR_TX_BUF_IDX
 (1)

	)

274 
	#XS_SER_CLOSE_IDX
 (2)

	)

275 
	#XS_SER_GET_STATUS_IDX
 (4)

	)

276 
	#XS_SER_INIT_IDX
 (6)

	)

277 
	#XS_SER_INIT_RX_BUF_IDX
 (7)

	)

278 
	#XS_SER_INIT_TX_BUF_IDX
 (8)

	)

279 
	#XS_SER_READ_IDX
 (9)

	)

280 
	#XS_SER_SET_BITRATE_IDX
 (10)

	)

281 
	#XS_SER_WRITE_IDX
 (11)

	)

282 
	#XS_SER_WRITE_STRING_IDX
 (12)

	)

284 
	#XS_SYS_IDX
 (106)

	)

285 
	#XS_SYS_CLOSE_IDX
 (0)

	)

286 
	#XS_SYS_SET_ADC_FILTER_IDX
 (7)

	)

287 
	#XS_SYS_SET_ALL_RELAYS_IDX
 (8)

	)

288 
	#XS_SYS_SET_LED_IDX
 (10)

	)

289 
	#XS_SYS_SET_RELAY_IDX
 (11)

	)

290 
	#XS_SYS_SET_SENSOR_SUPPLY_IDX
 (12)

	)

291 
	#XS_SYS_STAY_ALIVE_IDX
 (13)

	)

292 
	#XS_SYS_TRIGGER_CPU_WATCHDOG_IDX
 (14)

	)

293 
	#XS_SYS_INIT_OFF_REACTION_IDX
 (21)

	)

295 
	#XS_SSV_IDX
 (108)

	)

296 
	#XS_SSV_INIT_IDX
 (0)

	)

297 
	#XS_SSV_GET_STATUS_IDX
 (1)

	)

298 
	#XS_SSV_SET_TRIGGER_IDX
 (4)

	)

300 
	#XS_ERR_IDX
 (110)

	)

301 
	#XS_ERR_INIT_IDX
 (0)

	)

302 
	#XS_ERR_GET_ERR_EVENT_IDX
 (1)

	)

303 
	#XS_ERR_CLOSE_IDX
 (2)

	)

305 
	#XS_FL_IDX
 (111)

	)

306 
	#XS_FL_SET_INTERFACE_PARAMETERS_IDX
 (4)

	)

307 
	#XS_FL_SET_CHECKSUM_BLOCK_ADDRESSES_IDX
 (7)

	)

308 
	#XS_FL_SET_CHECKSUM_BLOCK_CHECK_IDX
 (9)

	)

309 
	#XS_FL_RESET_CONTENT_CHANGED_FLAG_IDX
 (13)

	)

311 
	#XS_MPU_IDX
 (112)

	)

312 
	#XS_MPU_INIT_IDX
 (0)

	)

313 
	#XS_MPU_GET_MEM_PROTECTION_IDX
 (1)

	)

315 
	#XS_DP_IDX
 (113)

	)

316 
	#XS_DP_INIT_IDX
 (0)

	)

317 
	#XS_DP_GET_INSTANCE_IDX
 (1)

	)

318 
	#XS_DP_WRITE_IDX
 (2)

	)

319 
	#XS_DP_READ_IDX
 (3)

	)

321 
	#XS_AM_IDX
 (114)

	)

322 
	#XS_AM_INIT_IDX
 (0)

	)

323 
	#XS_AM_MODULE_SET_PERMISSION_IDX
 (1)

	)

324 
	#XS_AM_FUNCTION_SET_PERMISSION_IDX
 (3)

	)

325 
	#XS_AM_DATAPOOL_SET_PERMISSION_IDX
 (4)

	)

327 
	#XS_EB_IDX
 (115)

	)

328 
	#XS_EB_ENABLE_NONINTERFERING_ACCESS_IDX
 (0)

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err_types.h

23 #iâdeà
_X_ERR_TYPES_H


24 
	#_X_ERR_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


47 #ifdeà
__ılu¥lus


48 
Çme¥aû
 
¡w_£pi


50 
	~"hµ/x_”r_ty³s.hµ
"

57 
ch¬n
 
aú_Name
[16];

58 
ch¬n
 
aú_V”siÚ
[16];

59 } 
	tT_x_”r_lib¿ry
;

63 cÚ¡ 
T_x_”r_lib¿ry
 * 
±_Lib¿ry
;

64 
ušt16
 
u16_Lib¿ryId
;

65 
ušt16
 
u16_A»aNameIndex
;

66 
ušt16
 
u16_FunùiÚNameIndex
;

67 
ušt16
 
u16_E¼ÜIndex
;

68 
sšt16
 
s16_E¼ÜCode
;

69 
ušt32
 
u32_D‘a
;

70 } 
	tT_x_”r_”rÜ
;

84 (*
PR_x_”r_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tT_x_”r_”rÜ
* cÚ¡ 
	tİt_E¼Ü
,

85 cÚ¡ 
	tušt16
 
	tou16_IÁ”ru±Lev–
);

90 cÚ¡ 
T_x_”r_lib¿ry
 * 
±_Lib¿ry
;

91 
ušt16
 
u16_Lib¿ryId
;

92 
ušt32
 
u32_C®lbackP¬am‘”
;

93 
PR_x_”r_E¼ÜC®lback
 
´_E¼ÜHªdËr
;

94 } 
	tT_x_”r_hªdË
;

99 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_esx3xm.h

19 #iâdeà
_X_ESX3XM_H


20 
	#_X_ESX3XM_H


	)

27 
	~"x_ÿn.h
"

28 
	~"x_“p.h
"

29 
	~"x_”r.h
"

30 
	~"x_æ.h
"

31 
	~"x_š.h
"

32 
	~"x_lib.h
"

33 
	~"x_eb.h
"

34 
	~"x_os.h
"

35 
	~"x_out.h
"

36 
	~"x_£r.h
"

37 
	~"x_ssv.h
"

38 
	~"x_sys.h
"

39 
	~"x_tim.h
"

40 
	~"x_mpu.h
"

41 
	~"x_uti.h
"

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_fl.h

19 #iâdeà
_X_FL_H


20 
	#_X_FL_H


	)

24 
	~"x_¡dty³s.h
"

25 
	~"x_æ_ty³s.h
"

28 #ifdeà
__ılu¥lus


34 
	#X_FL_IF_01
 (0U)

	)

35 
	#X_FL_IF_02
 (1U)

	)

36 
	#X_FL_IF_03
 (2U)

	)

37 
	#X_FL_IF_04
 (3U)

	)

38 
	#X_FL_IF_05
 (4U)

	)

48 #ifdeà
__ılu¥lus


49 
Çme¥aû
 
¡w_£pi


51 
	~"hµ/x_æ.hµ
"

59 
ušt32
 
u32_S¹Add»ss
;

60 
ušt32
 
u32_EndAdd»ss
;

61 } 
	tT_x_æ_A»a
;

65 
ušt8
 
au8_SigÇtu»
[8];

66 } 
	tT_x_æ_SigÇtu»
;

70 
ch¬n
 
aú_Magic
[11];

71 
ušt8
 
u8_SŒuùV”siÚ
;

72 
ušt16
 
u16_SŒuùSize
;

73 
ušt8
 
au8_Re£rved1
[2];

74 
ušt16
 
u16_SigÇtu»AlgÜ™hm
;

75 
ušt8
 
u8_Re£rved2
;

76 
ušt8
 
u8_NumOfA»as
;

77 
T_x_æ_A»a
 
©_A»as
[2];

78 
T_x_æ_SigÇtu»
 
©_SigÇtu»s
[2];

79 } 
	tT_x_æ_maš_sigÇtu»_block
;

82 
T_x_æ_maš_sigÇtu»_block
 cÚ¡ 
gt_AµliÿtiÚSigÇtu»Block
;

85 
sšt16
 
x_æ_g‘_v”siÚ
(
ušt16
 * cÚ¡ 
İu16_V”siÚ
);

87 
sšt16
 
x_æ_g‘_num_š‹rçûs
(
ušt16
 * cÚ¡ 
İu16_NumIÁ”çûs
);

88 
sšt16
 
x_æ_g‘_š‹rçû_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_IÁ”çûNumb”
,

89 
T_x_æ_š‹rçû_·¿m‘”s
 * cÚ¡ 
İt_P¬am‘”s
);

90 
sšt16
 
x_æ_£t_š‹rçû_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_IÁ”çûNumb”
,

91 cÚ¡ 
T_x_æ_š‹rçû_·¿m‘”s
 * cÚ¡ 
İt_P¬am‘”s
);

94 
sšt16
 
x_æ_g‘_num_checksum_blocks
(
ušt16
 * cÚ¡ 
İu16_NumBlocks
);

97 
sšt16
 
x_æ_g‘_checksum_block_add»s£s
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
,

98 
T_x_æ_checksum_block_add»s£s
 * cÚ¡ 
İt_ChecksumBlockAdd»s£s
);

99 
sšt16
 
x_æ_£t_checksum_block_add»s£s
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
,

100 cÚ¡ 
T_x_æ_checksum_block_add»s£s
 * cÚ¡ 
İt_ChecksumBlockAdd»s£s
);

103 
sšt16
 
x_æ_g‘_checksum_block_check
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
, 
ušt8
 * cÚ¡ 
İu8_OnOff
);

104 
sšt16
 
x_æ_£t_checksum_block_check
(cÚ¡ 
ušt16
 
ou16_BlockNumb”
, cÚ¡ 
ušt8
 
ou8_OnOff
);

107 
sšt16
 
x_æ_g‘_fšg”_´št
(
T_x_æ_fšg”_´št
 * cÚ¡ 
İt_Fšg”Pršt
);

110 
sšt16
 
x_æ_g‘_cÚ‹Á_chªged_æag
(
ušt8
 * cÚ¡ 
İu8_ChªgeS‹
);

111 
sšt16
 
x_æ_»£t_cÚ‹Á_chªged_æag
();

112 
sšt16
 
x_æ_³rfÜm_sigÇtu»_block_check
(cÚ¡ * cÚ¡ 
İv_SigÇtu»Block
);

117 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_fl_types.h

22 #iâdeà
_X_FL_TYPES_H


23 
	#_X_FL_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


46 #ifdeà
__ılu¥lus


47 
Çme¥aû
 
¡w_£pi


49 
	~"hµ/x_æ_ty³s.hµ
"

57 
ušt32
 
u32_CommB™¿‹
;

58 
ušt32
 
u32_CommID
;

59 
ušt8
 
u8_CommTy³
;

60 
ušt8
 
u8_LoÿlID
;

61 
ušt8
 
u8_EÇbËd
;

62 
ušt32
 
u32_CÚŒŞID
;

63 } 
	tT_x_æ_š‹rçû_·¿m‘”s
;

70 
ušt32
 
u32_S¹Add»ss
;

71 
ušt32
 
u32_EndAdd»ss
;

72 } 
	tT_x_æ_checksum_block_add»s£s
;

80 
ušt8
 
u8_CheckOn
;

81 
ušt32
 
u32_S¹Add»ss
;

82 
ušt32
 
u32_EndAdd»ss
;

83 
ušt32
 
u32_Checksum
;

84 } 
	tT_x_æ_checksum_block_¡©us
;

90 
ušt8
 
u8_SecÚds
;

91 
ušt8
 
u8_Mšu‹s
;

92 
ušt8
 
u8_Hours
;

93 } 
	tT_x_æ_fšg”_´št_time
;

98 
ušt8
 
u8_Day
;

99 
ušt8
 
u8_MÚth
;

100 
ušt8
 
u8_Y—r
;

101 } 
	tT_x_æ_fšg”_´št_d©e
;

108 
T_x_æ_fšg”_´št_time
 
t_Time
;

109 
T_x_æ_fšg”_´št_d©e
 
t_D©e
;

110 
ušt8
 
au8_U£rName
[17];

111 
ušt32
 
u32_Checksum
;

112 } 
	tT_x_æ_fšg”_´št
;

119 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_in.h

18 #iâdeà
_X_IN_H


19 
	#_X_IN_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


32 
	#X_IN_CH_MAX
 (15u)

33 

	)

34 
	#X_IN_01
 (0u)

35 
	#X_IN_02
 (1u)

36 
	#X_IN_03
 (2u)

37 
	#X_IN_04
 (3u)

38 
	#X_IN_05
 (4u)

39 
	#X_IN_06
 (5u)

40 
	#X_IN_07
 (6u)

41 
	#X_IN_08
 (7u)

42 
	#X_IN_09
 (8u)

43 
	#X_IN_10
 (9u)

44 
	#X_IN_11
 (10u)

45 
	#X_IN_12
 (11u)

46 
	#X_IN_13
 (12u)

47 
	#X_IN_14
 (13u)

48 
	#X_IN_15
 (14u)

49 

	)

51 
	#X_IN_TYPE_DIGITAL
 (0x0000u)

52 
	#X_IN_TYPE_EVENT_RISING
 (0x0001u)

53 
	#X_IN_TYPE_EVENT_FALLING
 (0x0002u)

54 
	#X_IN_TYPE_EVENT_BOTH
 (0x0003u)

55 
	#X_IN_TYPE_FREQUENCY
 (0x0004u)

56 
	#X_IN_TYPE_INCREMENTAL
 (0x0008u)

57 
	#X_IN_TYPE_CURRENT
 (0x0030u)

58 
	#X_IN_TYPE_VOLTAGE_5V
 (0x0040u)

59 
	#X_IN_TYPE_VOLTAGE_10V
 (0x0050u)

60 
	#X_IN_TYPE_VOLTAGE_40V
 (0x0070u)

61 

	)

62 
	#X_IN_CIRCUIT_ACTIVE_HIGH
 (0x0000u)

63 
	#X_IN_CIRCUIT_ACTIVE_LOW
 (0x0001u)

64 

	)

69 
	#X_IN_CIRCUIT_PULL_UP
 (0x0002u)

70 
	#X_IN_CIRCUIT_NO_PULL_UP
 (0x0000u)

71 
	#X_IN_CIRCUIT_PULL_DOWN
 (0x0004u)

72 
	#X_IN_CIRCUIT_NO_PULL_DOWN
 (0x0000u)

73 

	)

74 
	#X_IN_COUNTER_DIR_UP
 1

75 
	#X_IN_COUNTER_DIR_DOWN
 0

76 

	)

77 
	#X_IN_FREQ_AVG_SAMPLES_MIN
 1

78 
	#X_IN_FREQ_AVG_SAMPLES_MAX
 56

79 
	#X_IN_FREQ_AVG_MODE_EXCLUDE_MIN
 (0x0001u)

80 
	#X_IN_FREQ_AVG_MODE_EXCLUDE_MAX
 (0x0002u)

81 
	#X_IN_FREQ_AVG_MIN
 2500

82 
	#X_IN_FREQ_AVG_MAX
 20000000

83 

	)

92 #ifdeà
__ılu¥lus


93 
Çme¥aû
 
¡w_£pi


95 
	~"hµ/x_š.hµ
"

104 
ušt16
 
u16_IÅutTy³
;

105 
ušt16
 
u16_IÅutCœcu™
;

106 
ušt16
 
u16_F‹rCÚfig
;

107 
ušt16
 
u16_Dig™®S‹
;

108 
ušt16
 
u16_AdcV®ue
;

109 
sšt32
 
s32_SÿËdV®ue
;

110 } 
	tT_x_š_¡©us
;

114 
ušt16
 
u16_AvgSam¶es
;

115 
ušt16
 
u16_AvgMode
;

116 
ušt16
 
u16_F‹rCÚfigUs
;

117 
ušt16
 
u16_Vœtu®P”iodTh»shŞd
;

119 
ušt32
 
u32_MšF»qu’cy
;

120 
ušt32
 
u32_MaxF»qu’cy
;

121 } 
	tT_x_t_š_äeq_avg_cÚfig
;

127 (*
PR_x_š_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
);

132 
sšt16
 
x_š_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
, cÚ¡ ušt16 
ou16_F‹rCÚfig
,

133 cÚ¡ 
ušt16
 
ou16_IÅutCœcu™
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

134 cÚ¡ 
PR_x_š_Ev’tC®lback
 
İr_Ev’tC®lback
);

135 
sšt16
 
x_š_g‘_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

136 
sšt16
 
x_š_g‘_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

137 
sšt16
 
x_š_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_š_¡©us
* cÚ¡ 
İt_Stus
);

138 
sšt16
 
x_š_g‘_äequ’cy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_F»qu’cy
);

139 
sšt16
 
x_š_g‘_duty_cyşe
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_DutyCyşe
);

140 
sšt16
 
x_š_g‘_couÁ”
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_CouÁ”
);

141 
sšt16
 
x_š_£t_couÁ”
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_CouÁ”
);

142 
sšt16
 
x_š_g‘_couÁ”_dœeùiÚ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt8
* cÚ¡ 
İu8_CÁDœ
);

143 
sšt16
 
x_t_š_š™_äequ’cy_avg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_t_š_äeq_avg_cÚfig
* cÚ¡ 
İt_CÚfig
);

144 
sšt16
 
x_t_š_g‘_äequ’cy_avg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
ušt32
* cÚ¡ 
İu32_F»qu’cy
);

149 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_lib.h

19 #iâdeà
_X_LIB_H


20 
	#_X_LIB_H


	)

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_LIB_VERSION_STRING
 "ESX3XM LIB"

36 
	#X_LIB_VERSION_MAJOR
 2

37 
	#X_LIB_VERSION_MINOR
 3

38 
	#X_LIB_VERSION_RELEASE
 1

39 

	)

44 
	#X_LIB_MEM_BIOS_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

46 
	#X_LIB_MEM_DRIVER_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".exibšfo")))

	)

48 
	#X_LIB_MEM_APPL_INFO
 
	`__©Œibu‹__
 ((
	`£ùiÚ
 (".­¶iÿtiÚ_šfo")))

	)

52 
	#X_LIB_INFO_BIOS_MAGIC
 "Lx_?z21"

	)

54 
	#X_LIB_INFO_DRIVER_MAGIC
 "Lx_?z22"

	)

56 
	#X_LIB_INFO_APPL_MAGIC
 "Lx_?z2."

	)

58 
	#X_LIB_INFO_STRUCT_VERSION
 (0x01u)

	)

59 
	#X_LIB_INFO_CONTAINS_DEVICE_ID
 (0x01u)

	)

60 
	#X_LIB_INFO_CONTAINS_DATE_TIME
 (0x02u)

	)

61 
	#X_LIB_INFO_CONTAINS_PROJECT_NAME
 (0x04u)

	)

62 
	#X_LIB_INFO_CONTAINS_PROJECT_VERSION
 (0x08u)

	)

63 
	#X_LIB_INFO_CONTAINS_ADDITIONAL_INFO
 (0x10u)

	)

64 
	#X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
 (0xFFu)

	)

65 
	#X_LIB_INFO_DEVICE_ID
 "Y_ESX3XM"

66 

	)

69 #iâdeà
__GNUC_PATCHLEVEL__


71 
	#__GNUC_PATCHLEVEL__
 0

	)

118 #ifdeà
__ılu¥lus


119 
Çme¥aû
 
¡w_£pi


121 
	~"hµ/x_lib.hµ
"

129 
ch¬n
 
aú_Magic
[7];

130 
ušt8
 
u8_SŒuùV”siÚ
;

131 
ušt8
 
u8_CÚ‹ÁM­
;

135 
ch¬n
 
aú_DeviûID
[16];

136 
ch¬n
 
aú_D©e
[11];

137 
ch¬n
 
aú_Time
[8];

138 
ch¬n
 
aú_ProjeùName
[15];

139 
ch¬n
 
aú_ProjeùV”siÚ
[10];

140 
ušt8
 
u8_L’Add™iÚ®Info
;

141 
ch¬n
 
aú_Add™iÚ®Info
[
X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
];

142 } 
	tT_x_lib_šfo
;

147 
ch¬n
 
aú_Name
[16];

148 
ch¬n
 
aú_V”siÚSŒšg
[16];

149 
ušt8
 
u8_MajÜV”siÚ
;

150 
ušt8
 
u8_MšÜV”siÚ
;

151 
ušt16
 
u16_R–—£
;

152 
ušt16
 
u16_T¬g‘Id
;

153 
ušt16
 
u16_T¬g‘V”siÚ
;

154 
ušt16
 
u16_Comp”MajÜV”siÚ
;

155 
ušt16
 
u16_Comp”MšÜV”siÚ
;

156 
ušt32
 
u32_Comp”R–—£
;

157 
ch¬n
 
aú_D©e
[11];

158 
ch¬n
 
aú_Time
[8];

159 } 
	tT_x_lib_v”siÚ
;

167 
sšt16
 
x_lib_g‘_v”siÚ
(
T_x_lib_v”siÚ
* cÚ¡ 
İt_V”siÚ
);

172 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_mpu.h

19 #iâdeà
_X_MPU_H


20 
	#_X_MPU_H


	)

24 
	~"x_¡dty³s.h
"

25 
	~"x_mpu_ty³s.h
"

27 #ifdeà
__ılu¥lus


41 #ifdeà
__ılu¥lus


42 
Çme¥aû
 
¡w_£pi


44 
	~"hµ/x_mpu.hµ
"

56 
sšt16
 
x_mpu_š™
(cÚ¡ 
ušt32
 
ou32_P¬’tMemCÏss
, cÚ¡ ušt32 
ou32_Size1By
, ušt32 * cÚ¡ 
İu32_PrÙeùedMemCÏss
);

57 
sšt16
 
x_mpu_g‘_¡©us
(
T_x_mpu_¡©us
 * cÚ¡ 
İt_Stus
);

62 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_mpu_types.h

23 #iâdeà
_X_MPU_TYPES_H


24 
	#_X_MPU_TYPES_H


	)

29 
	~"¡wty³s.h
"

32 #ifdeà
__ılu¥lus


38 
	#X_MPU_MODE_ACTIVE
 (0x0001u)

	)

39 
	#X_MPU_MODE_SAFETY_LAYER_USED
 (0x0002u)

	)

49 #ifdeà
__ılu¥lus


50 
Çme¥aû
 
¡w_£pi


52 
	~"hµ/x_mpu_ty³s.hµ
"

59 
ušt16
 
u16_MpuMode
;

60 
ušt32
 
u32_Size
;

61 
ušt32
 
u32_P¬’tMemCÏss
;

62 
ušt32
 
u32_PrÙeùedMemCÏss
;

63 } 
	tT_x_mpu_¡©us
;

69 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os.h

18 #iâdeà
_X_OS_H


19 
	#_X_OS_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_os_ty³s.h
"

27 
	~"x_os_mbox.h
"

28 
	~"x_os_mu‹x.h
"

29 
	~"x_os_£ma.h
"

30 
	~"x_os_sigÇl.h
"

33 #ifdeà
__ılu¥lus


41 
	#X_OS_HEAP_DEFAULT
 ((
ušt16
)
gu32_MemCÏssDeçuÉ
)

42 
	#X_OS_HEAP_FAST
 ((
ušt16
)
gu32_MemCÏssSysIÁ”n
)

43 

	)

52 #ifdeà
__ılu¥lus


53 
Çme¥aû
 
¡w_£pi


55 
	~"hµ/x_os.hµ
"

64 
ušt16
 
u16_PriÜ™y
;

65 
PR_x_os_sk
 
´_Task
;

66 * 
pv_P¬am‘”
;

67 
ušt32
 
u32_TimeD–ay
;

68 
ušt32
 
u32_TimeIÁ”v®
;

69 
ušt32
 
u32_SckSize
;

70 
ušt32
 
u32_P”missiÚs
;

71 } 
	tT_x_os_sk_cÚfig
;

75 cÚ¡ 
ušt32
 
gu32_MemCÏssDeçuÉ
;

76 cÚ¡ 
ušt32
 
gu32_MemCÏssSysIÁ”n
;

80 
sšt16
 
x_os_š™
(cÚ¡ 
ušt32
 
ou32_MemCÏss
);

81 
sšt16
 
x_os_¡¬t
(cÚ¡ 
ušt32
 
ou32_Tim”Tick_us
);

82 
sšt16
 
x_os_š¡®l_sk
(cÚ¡ 
ušt16
 
ou16_PriÜ™y
, cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
,

83 cÚ¡ 
ušt32
 
ou32_TimeD–ay
, cÚ¡ 
PR_x_os_sk
 
İr_Task
, cÚ¡ ušt32 
ou32_SckSize
);

84 
sšt16
 
x_os_£t_sk_tim”
(cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
, cÚ¡ ušt32 
ou32_TimeD–ay
);

85 
x_os_wa™_fÜ_ev’ts
();

86 
x_os_wa™_³riod
();

87 
x_os_¦“p
(cÚ¡ 
ušt32
 
ou32_TimeD–ay
);

88 
ušt32
 
x_os_’‹r_ü™iÿl
();

89 
x_os_Ëave_ü™iÿl
(cÚ¡ 
ušt32
 
ou32_P»viousS‹
);

90 
x_os_£t_ev’t_mask
(cÚ¡ 
ušt32
 
ou32_NewEv’tMask
);

91 
x_os_g‘_ev’t_mask
(
ušt32
* cÚ¡ 
İu32_Ev’tMask
);

92 
x_os_£t_ev’ts
(cÚ¡ 
ušt32
 
ou32_NewEv’ts
);

93 
ušt32
 
x_os_g‘_ev’ts
();

94 
sšt16
 
x_os_check_sk_¡ack
(
ušt32
* cÚ¡ 
İu32_Unu£dSckSize
);

95 
sšt16
 
x_os_g‘_¡©us
(
T_x_os_¡©us
 * cÚ¡ 
İt_Stus
);

99 
sšt16
 
x_os_š¡®l_sk_ext
(cÚ¡ 
T_x_os_sk_cÚfig
 * cÚ¡ 
İt_TaskCÚfig
, ** 
İpv_HªdË
);

100 
sšt16
 
x_os_£t_sk_tim”_ext
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt32
 
ou32_TimeIÁ”v®
, cÚ¡ ušt32 
ou32_TimeD–ay
);

101 
sšt16
 
x_os_check_sk_¡ack_ext
(* cÚ¡ 
İv_HªdË
, 
ušt32
* cÚ¡ 
İu32_Unu£dSckSize
);

103 
sšt16
 
x_os_su¥’d_sk
(* cÚ¡ 
İv_HªdË
);

104 
sšt16
 
x_os_»sume_sk
(* cÚ¡ 
İv_HªdË
);

105 
sšt16
 
x_os_d–‘e_sk
(* cÚ¡ 
İv_HªdË
);

111 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_mbox.h

18 #iâdeà
_X_OS_MBOX_H


19 
	#_X_OS_MBOX_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_MBOX_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_MBOX_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_mbox.hµ
"

79 
sšt16
 
x_os_mbox_š™
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, * cÚ¡ 
İv_Mes§ge
);

98 
sšt16
 
x_os_mbox_şo£
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
);

120 
sšt16
 
x_os_mbox_g‘_mes§ge
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, ** cÚ¡ 
İpv_Mes§ge
, cÚ¡ 
ušt32
 
ou32_TimeOut
);

142 
sšt16
 
x_os_mbox_£nd_mes§ge
(
T_x_os_mbox
* cÚ¡ 
İt_Mabox
, * cÚ¡ 
İv_Mes§ge
, cÚ¡ 
ušt16
 
ou16_O±iÚs
);

148 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_mutex.h

18 #iâdeà
_X_OS_MUTEX_H


19 
	#_X_OS_MUTEX_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_MUTEX_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_MUTEX_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_mu‹x.hµ
"

78 
sšt16
 
x_os_mu‹x_š™
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

97 
sšt16
 
x_os_mu‹x_şo£
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

119 
sšt16
 
x_os_mu‹x_g‘
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
, cÚ¡ 
ušt32
 
ou32_TimeOut
);

137 
sšt16
 
x_os_mu‹x_»Ëa£
(
T_x_os_mu‹x
* cÚ¡ 
İt_Mu‹x
);

143 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_sema.h

18 #iâdeà
_X_OS_SEMA_H


19 
	#_X_OS_SEMA_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_SEMA_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_SEMAPHORE_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_£ma.hµ
"

80 
sšt16
 
x_os_£ma_š™
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
, cÚ¡ 
ušt16
 
ou16_CouÁ
);

99 
sšt16
 
x_os_£ma_şo£
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
);

120 
sšt16
 
x_os_£ma_g‘
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
, cÚ¡ 
ušt32
 
ou32_Timeout
);

138 
sšt16
 
x_os_£ma_»Ëa£
(
T_x_os_£ma
* cÚ¡ 
İt_Sem­hÜe
);

143 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_signal.h

18 #iâdeà
_X_OS_SIGNAL_H


19 
	#_X_OS_SIGNAL_H


	)

23 #iâdeà
_X_OS_H


24 #iâdeà
_X_OS_SIGNAL_C


25 #”rÜ dØ
nÙ
 
šşude
 
this
 
h—d”
 - 
u£
 
x_os
.
h
 
š¡—d


29 
	~"x_os_ty³s.h
"

32 #ifdeà
__ılu¥lus


41 
	#X_OS_SIGNAL_NOWAIT
 
X_OS_NOWAIT


	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_os_sigÇl.hµ
"

79 
sšt16
 
x_os_sigÇl_š™
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇls
);

98 
sšt16
 
x_os_sigÇl_şo£
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
);

124 
sšt16
 
x_os_sigÇl_wa™_fÜ
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇlMask
, cÚ¡ 
ušt16
 
ou16_Mode
,

125 
ušt32
* cÚ¡ 
İu32_SigÇls
, cÚ¡ ušt32 
ou32_TimeOut
);

144 
sšt16
 
x_os_sigÇl_£nd
(
T_x_os_sigÇl
* cÚ¡ 
İt_SigÇl
, cÚ¡ 
ušt32
 
ou32_SigÇls
, cÚ¡ ušt32 
ou32_SigÇlMask
);

150 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_types.h

23 #iâdeà
_X_OS_TYPES_H


24 
	#_X_OS_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


39 
	#X_OS_NOT_INIT
 (0)

40 
	#X_OS_INIT
 (1)

41 
	#X_OS_RUNNING
 (2)

42 

	)

44 
	#X_OS_TASK_FLAGREG_NUM
 (4)

45 
	#X_OS_TASK_FLAGREG_SIZE
 (32)

46 
	#X_OS_MAX_TASK
 (
X_OS_TASK_FLAGREG_NUM
*
X_OS_TASK_FLAGREG_SIZE
)

47 
	#X_OS_MAX_TASK_PRIO
 (
X_OS_MAX_TASK
-1)

48 

	)

49 
	#X_OS_NOWAIT
 (0xFFFFFFFFu)

	)

52 
	#X_OS_MBOX_SEND_DEFAULT
 (0)

53 
	#X_OS_MBOX_SEND_BROADCAST
 (1)

54 

	)

57 
	#X_OS_SIGNAL_MODE_ANY
 (0)

58 
	#X_OS_SIGNAL_MODE_ALL
 (1)

59 
	#X_OS_SIGNAL_MODE_RESET
 (2)

60 

	)

62 
	#X_OS_EVENT_01
 (0x00000001u)

	)

63 
	#X_OS_EVENT_02
 (0x00000002u)

	)

64 
	#X_OS_EVENT_03
 (0x00000004u)

	)

65 
	#X_OS_EVENT_04
 (0x00000008u)

	)

66 
	#X_OS_EVENT_05
 (0x00000010u)

	)

67 
	#X_OS_EVENT_06
 (0x00000020u)

	)

68 
	#X_OS_EVENT_07
 (0x00000040u)

	)

69 
	#X_OS_EVENT_08
 (0x00000080u)

	)

70 
	#X_OS_EVENT_09
 (0x00000100u)

	)

71 
	#X_OS_EVENT_10
 (0x00000200u)

	)

72 
	#X_OS_EVENT_11
 (0x00000400u)

	)

73 
	#X_OS_EVENT_12
 (0x00000800u)

	)

74 
	#X_OS_EVENT_13
 (0x00001000u)

	)

75 
	#X_OS_EVENT_14
 (0x00002000u)

	)

76 
	#X_OS_EVENT_15
 (0x00004000u)

	)

77 
	#X_OS_EVENT_16
 (0x00008000u)

	)

78 
	#X_OS_EVENT_17
 (0x00010000u)

	)

79 
	#X_OS_EVENT_18
 (0x00020000u)

	)

80 
	#X_OS_EVENT_19
 (0x00040000u)

	)

81 
	#X_OS_EVENT_20
 (0x00080000u)

	)

82 
	#X_OS_EVENT_21
 (0x00100000u)

	)

83 
	#X_OS_EVENT_22
 (0x00200000u)

	)

84 
	#X_OS_EVENT_23
 (0x00400000u)

	)

85 
	#X_OS_EVENT_24
 (0x00800000u)

	)

86 
	#X_OS_EVENT_25
 (0x01000000u)

	)

87 
	#X_OS_EVENT_26
 (0x02000000u)

	)

88 
	#X_OS_EVENT_27
 (0x04000000u)

	)

89 
	#X_OS_EVENT_28
 (0x08000000u)

	)

90 
	#X_OS_EVENT_29
 (0x10000000u)

	)

91 
	#X_OS_EVENT_30
 (0x20000000u)

	)

92 
	#X_OS_EVENT_31
 (0x40000000u)

	)

93 
	#X_OS_EVENT_32
 (0x80000000u)

	)

104 #ifdeà
__ılu¥lus


105 
Çme¥aû
 
¡w_£pi


107 
	~"hµ/x_os_ty³s.hµ
"

185 (*
PR_x_os_sk
)(* cÚ¡ 
	tİv_TaskP¬am‘”
);

190 
ušt16
 
u16_Ev’tTy³
;

191 
ušt16
 
u16_CouÁ
;

192 * 
pv_Mes§ge
;

193 
ušt32
 
au32_Wa™šgTask
[
X_OS_TASK_FLAGREG_NUM
];

194 } 
	tT_x_os_ev’t_ty³
;

199 
ušt16
 
u16_S‹
;

200 
ušt16
 
u16_TaskCouÁ
;

201 
ušt32
 
u32_MemCÏss
;

202 
ušt32
 
u32_Tim”TickUs
;

203 } 
	tT_x_os_¡©us
;

206 
T_x_os_ev’t_ty³
 
	tT_x_os_mbox
;

207 
T_x_os_ev’t_ty³
 
	tT_x_os_mu‹x
;

208 
T_x_os_ev’t_ty³
 
	tT_x_os_£ma
;

209 
T_x_os_ev’t_ty³
 
	tT_x_os_sigÇl
;

214 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_out.h

18 #iâdeà
_X_OUT_H


19 
	#_X_OUT_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_out_»Ïy.h
"

26 #ifdeà
__ılu¥lus


33 
	#X_OUT_CH_MAX
 (8u)

34 

	)

35 
	#X_OUT_01
 (0u)

36 
	#X_OUT_02
 (1u)

	)

37 
	#X_OUT_03
 (2u)

	)

38 
	#X_OUT_04
 (3u)

	)

39 
	#X_OUT_05
 (4u)

	)

40 
	#X_OUT_06
 (5u)

	)

41 
	#X_OUT_07
 (6u)

	)

42 
	#X_OUT_08
 (7u)

	)

44 
	#X_OUT_TYPE_DIGITAL
 (0u)

45 
	#X_OUT_TYPE_PWM
 (1u)

46 
	#X_OUT_TYPE_CONTROL_CURRENT
 (2u)

47 

	)

48 
	#X_OUT_STATE_OVERCURRENT
 (0x0001u)

49 
	#X_OUT_STATE_PWR_OVERVOLTAGE
 (0x0002u)

50 
	#X_OUT_STATE_PWR_GND_ERROR
 (0x0004u)

51 
	#X_OUT_STATE_PWR_OVERCURRENT
 (0x0008u)

52 
	#X_OUT_STATE_PWR_SSV_ERROR
 (0x0010u)

53 
	#X_OUT_STATE_PWR_EB_WD_ERROR
 (0x0020u)

54 
	#X_OUT_STATE_PWR_EB_HW_ERROR
 (0x0040u)

55 
	#X_OUT_STATE_DIGITAL_FB
 (0x0100u)

56 

	)

58 
	#X_OUT_STATE_OVERVOLTAGE
 
X_OUT_STATE_PWR_OVERVOLTAGE


	)

59 
	#X_OUT_STATE_GND_ERROR
 
X_OUT_STATE_PWR_GND_ERROR


	)

60 
	#X_OUT_STATE_UB_OVERCURRENT
 
X_OUT_STATE_PWR_OVERCURRENT


	)

61 
	#X_OUT_STATE_SSV_ERROR
 
X_OUT_STATE_PWR_SSV_ERROR


	)

62 
	#X_OUT_STATE_WD_ERROR
 
X_OUT_STATE_PWR_EB_WD_ERROR


	)

66 
	#X_OUT_RESET_ERROR_UB_01
 (0x1000u)

67 

	)

68 
	#X_OUT_EVENT_OVERCURRENT
 (0u)

69 
	#X_OUT_EVENT_RECOVERY
 (1u)

70 

	)

72 
	#X_OUT_VALUE_CONTROL_100_PERCENT
 (0x7FFFFFFF)

73 

	)

81 #ifdeà
__ılu¥lus


82 
Çme¥aû
 
¡w_£pi


84 
	~"hµ/x_out.hµ
"

93 
ušt16
 
u16_OuutTy³
;

94 
sšt32
 
s32_MaxV®ue
;

95 
sšt32
 
s32_OutV®ue
;

96 
ušt32
 
u32_OutF»qu’cy
;

97 
ušt32
 
u32_S‘Time
;

98 
ušt32
 
u32_OutS‹
;

99 } 
	tT_x_out_¡©us
;

103 
sšt32
 
s32_S‘pošt
;

104 
sšt32
 
s32_P_V®ue
;

105 
sšt16
 
s16_I_V®ue
;

106 
sšt16
 
s16_D_V®ue
;

107 
sšt16
 
s16_Sam¶eTime
;

108 
sšt16
 
s16_OuutLim™Mš
;

109 
sšt16
 
s16_OuutLim™Max
;

110 } 
	tT_x_out_pid_·¿m‘”s
;

116 (*
PR_x_out_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

117 cÚ¡ 
	tušt16
 
	tou16_Ev’t
);

122 
sšt16
 
x_out_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_Ty³
, cÚ¡ 
sšt32
 
os32_MaxV®ue
,

123 cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_out_E¼ÜC®lback
 
İr_E¼ÜC®lback
);

124 
sšt16
 
x_out_£t_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

125 
sšt16
 
x_out_g‘_cÚŒŞ_·¿m‘”s
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_pid_·¿m‘”s
* cÚ¡ 
İt_P¬am‘”s
);

126 
sšt16
 
x_out_£t_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
);

127 
sšt16
 
x_out_£t_äequ’cy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

128 
sšt16
 
x_out_g‘_cu¼’t
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_Cu¼’t
);

129 
sšt16
 
x_out_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_¡©us
 * cÚ¡ 
İt_Stus
);

130 
sšt16
 
x_out_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

131 
sšt16
 
x_out_£t_v®ue_¿mpšg
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_V®ue
,

132 cÚ¡ 
ušt32
 
ou32_D–Ouut
, cÚ¡ ušt32 
ou32_D–Time
);

136 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_out_relay.h

18 #iâdeà
_X_OUT_RELAY_H


19 
	#_X_OUT_RELAY_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_out.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_OUT_RELAY_CH_MAX
 (1u)

35 
	#X_OUT_RELAY_01
 (0u)

36 

	)

38 
	#X_OUT_RELAY_STATE_OVERCURRENT
 (0x0001u)

39 
	#X_OUT_RELAY_STATE_OVERVOLTAGE
 (0x0002u)

40 
	#X_OUT_RELAY_STATE_GND_ERROR
 (0x0004u)

41 
	#X_OUT_RELAY_STATE_SSV_ERROR
 (0x0008u)

42 
	#X_OUT_RELAY_STATE_EB_WD_ERROR
 (0x0010u)

43 
	#X_OUT_RELAY_STATE_EB_HW_ERROR
 (0x0020u)

44 

	)

45 
	#X_OUT_RELAY_EVENT_RECOVERY
 (0x0000u)

46 
	#X_OUT_RELAY_EVENT_OVERCURRENT
 (0x0001u)

47 
	#X_OUT_RELAY_EVENT_OVERVOLTAGE
 (0x0002u)

48 
	#X_OUT_RELAY_EVENT_GND_ERROR
 (0x0004u)

49 
	#X_OUT_RELAY_EVENT_SSV_ERROR
 (0x0008u)

50 
	#X_OUT_RELAY_EVENT_EB_WD_ERROR
 (0x0010u)

51 
	#X_OUT_RELAY_EVENT_EB_HW_ERROR
 (0x0020u)

52 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x_out_»Ïy.hµ
"

73 
ušt8
 
u8_OnOff
;

74 
sšt32
 
s32_VŞgeUb
;

75 
sšt32
 
s32_VŞgeUc
;

76 
sšt32
 
s32_Cu¼’tI
;

77 
ušt16
 
u16_R–ayS‹
;

78 
ušt16
 
u16_E¼ÜFÏgs
;

79 } 
	tT_x_out_»Ïy_¡©us
;

82 (*
PR_x_out_E¼ÜR–ayC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

83 cÚ¡ 
	tušt16
 
	tou16_Ev’t
);

87 
ušt32
 
u32_C®lbackP¬am‘”
;

88 
PR_x_out_E¼ÜR–ayC®lback
 
´_E¼ÜC®lback
;

89 } 
	tT_x_out_»Ïy_cÚfig
;

94 
sšt16
 
x_out_»Ïy_š™
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
T_x_out_»Ïy_cÚfig
 * cÚ¡ 
İt_CÚfig
);

95 
sšt16
 
x_out_»Ïy_£t
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

96 
sšt16
 
x_out_»Ïy_£t_®l
(cÚ¡ 
ušt8
 
ou8_OnOff
);

97 
sšt16
 
x_out_»Ïy_g‘_¡©us
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_out_»Ïy_¡©us
 * cÚ¡ 
İt_Stus
);

98 
sšt16
 
x_out_»Ïy_»£t_”rÜ
(cÚ¡ 
ušt16
 
ou16_ChªÃl
);

103 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ser.h

18 #iâdeà
_X_SER_H


19 
	#_X_SER_H


	)

23 
	~"x_£r_ty³s.h
"

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_SER_CH_MAX
 (1u)

35 
	#X_SER_01
 (0u)

36 

	)

44 #ifdeà
__ılu¥lus


45 
Çme¥aû
 
¡w_£pi


47 
	~"hµ/x_£r.hµ
"

56 
sšt16
 
x_£r_š™
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
, cÚ¡ ušt16 
ou16_Mode
,

57 cÚ¡ 
ušt16
 
ou16_StİB™s
, cÚ¡ 
ušt32
 
ou32_E¼ÜC®lbackP¬am‘”
,

58 cÚ¡ 
PR_x_£r_E¼ÜC®lback
 
İr_E¼ÜC®lback
 );

59 
sšt16
 
x_£r_şo£
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

60 
sšt16
 
x_£r_š™_rx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_BufSize
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

61 cÚ¡ 
PR_x_£r_Ev’tC®lback
 
İr_Ev’tC®lback
 );

62 
sšt16
 
x_£r_š™_tx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_BufSize
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

63 cÚ¡ 
PR_x_£r_Ev’tC®lback
 
İr_Ev’tC®lback
 );

64 
sšt16
 
x_£r_ş—r_rx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

65 
sšt16
 
x_£r_ş—r_tx_buf
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
 );

66 
sšt16
 
x_£r_g‘_rx_buf_couÁ
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_CouÁ
 );

67 
sšt16
 
x_£r_g‘_tx_buf_couÁ
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_CouÁ
 );

68 
sšt16
 
x_£r_»ad
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_CouÁ
, 
ušt8
* cÚ¡ 
İu8_D©a
 );

69 
sšt16
 
x_£r_wr™e
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
 );

70 
sšt16
 
x_£r_wr™e_¡ršg
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ch¬n
* cÚ¡ 
İú_SŒšg
 );

71 
sšt16
 
x_£r_£t_b™¿‹
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt32
 
ou32_B™¿‹
 );

72 
sšt16
 
x_£r_g‘_¡©us
ĞcÚ¡ 
ušt16
 
ou16_ChªÃl
, 
T_x_£r_¡©us
* cÚ¡ 
İt_Stus
 );

77 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ser_types.h

23 #iâdeà
_X_SER_TYPES_H


24 
	#_X_SER_TYPES_H


	)

28 
	~"¡wty³s.h
"

31 #ifdeà
__ılu¥lus


39 
	#X_SER_MODE_7DB_EVEN_PARITY
 (0x0023u)

40 
	#X_SER_MODE_7DB_ODD_PARITY
 (0x1023u)

41 
	#X_SER_MODE_8DB_EVEN_PARITY
 (0x0027u)

42 
	#X_SER_MODE_8DB_ODD_PARITY
 (0x1027u)

43 
	#X_SER_MODE_8DB_NO_PARITY
 (0x0001u)

44 

	)

46 
	#X_SER_STATUS_PARITY_ERR
 (0x01u)

47 
	#X_SER_STATUS_FRAME_ERR
 (0x02u)

48 
	#X_SER_STATUS_OVERRUN
 (0x04u)

49 
	#X_SER_STATUS_RXFIFO_OVERRUN
 (0x08u)

50 
	#X_SER_STATUS_TXFIFO_OVERRUN
 (0x10u)

51 

	)

61 #ifdeà
__ılu¥lus


62 
Çme¥aû
 
¡w_£pi


64 
	~"hµ/x_£r_ty³s.hµ
"

99 (*
PR_x_£r_E¼ÜC®lback
)(cÚ¡ 
	tušt32
 
	tou32_P¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
,

100 cÚ¡ 
	tušt32
 
	tou32_Stus
);

139 (*
PR_x_£r_Ev’tC®lback
)(cÚ¡ 
	tušt32
 
	tou32_P¬am‘”
, cÚ¡ 
	tušt16
 
	tou16_ChªÃl
, cÚ¡ 
	tušt8
 
	tou8_D©a
);

159 
ušt32
 
u32_B™¿‹
;

160 
ušt16
 
u16_Mode
;

161 
ušt16
 
u16_Stİb™
;

162 
ušt32
 
u32_Stus
;

163 
ušt16
 
u16_RxBufSize
;

164 
ušt16
 
u16_TxBufSize
;

165 } 
	tT_x_£r_¡©us
;

170 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ssv.h

18 #iâdeà
_X_SSV_H


19 
	#_X_SSV_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


37 
	#X_SSV_ERR_UEMAX
 (0x00000001u)

38 
	#X_SSV_ERR_UEMIN
 (0x00000002u)

39 
	#X_SSV_ERR_USYSMAX
 (0x00000004u)

40 
	#X_SSV_ERR_USYSMIN
 (0x00000008u)

41 
	#X_SSV_ERR_WD_USER
 (0x00000010u)

42 
	#X_SSV_ERR_WD_SYS
 (0x00000020u)

43 
	#X_SSV_ERR_HDRST
 (0x00000040u)

44 
	#X_SSV_ERR_CONFIG
 (0x00000080u)

45 

	)

47 
	#X_SSV_CPU_RESET_PWON
 (0x00000001u)

48 
	#X_SSV_CPU_RESET_SSV
 (0x00000002u)

49 
	#X_SSV_CPU_RESET_SOFT
 (0x00000004u)

50 
	#X_SSV_CPU_RESET_WD
 (0x00000008u)

51 

	)

53 
	#X_SSV_CPURST_UEMAX
 (
X_SSV_ERR_UEMAX
 << 8)

54 
	#X_SSV_CPURST_UEMIN
 (
X_SSV_ERR_UEMIN
 << 8)

55 
	#X_SSV_CPURST_USYSMAX
 (
X_SSV_ERR_USYSMAX
 << 8)

56 
	#X_SSV_CPURST_USYSMIN
 (
X_SSV_ERR_USYSMIN
 << 8)

57 
	#X_SSV_CPURST_WD_USER
 (
X_SSV_ERR_WD_USER
 << 8)

58 
	#X_SSV_CPURST_WD_SYS
 (
X_SSV_ERR_WD_SYS
 << 8)

59 
	#X_SSV_CPURST_HDRST
 (
X_SSV_ERR_HDRST
 << 8)

60 
	#X_SSV_CPURST_CONFIG
 (
X_SSV_ERR_CONFIG
 << 8)

61 

	)

63 
	#X_SSV_RESET_POR
 (0x00010000u)

64 
	#X_SSV_RESET_EXTR
 (0x00020000u)

65 
	#X_SSV_RESET_BOR
 (0x00040000u)

66 
	#X_SSV_RESET_WDR
 (0x00080000u)

67 
	#X_SSV_RESET_JTR
 (0x00100000u)

68 
	#X_SSV_RESET_SOFT
 (0x00800000u)

69 

	)

71 
	#X_SSV_TRIGGER
 (0u)

72 
	#X_SSV_TRIGGER_AUTO
 (1u)

73 
	#X_SSV_SET_TRIGGER_LO
 (0u)

74 
	#X_SSV_SET_TRIGGER_HI
 (1u)

75 

	)

83 #ifdeà
__ılu¥lus


84 
Çme¥aû
 
¡w_£pi


86 
	~"hµ/x_ssv.hµ
"

95 
ušt16
 
u16_WDmš
;

96 
ušt16
 
u16_WDmax
;

97 
ušt8
 
u8_UEmš
;

98 
ušt8
 
u8_UEmax
;

99 
ušt8
 
u8_R–Off
;

100 
ušt8
 
u8_Re£t
;

101 } 
	tT_x_ssv_cÚfig
;

105 
ušt16
 
u16_V”siÚ
;

106 
ušt16
 
u16_SysE¼Ü
;

107 
ušt32
 
u32_La¡Re£t
;

108 } 
	tT_x_ssv_¡©us
;

114 
sšt16
 
x_ssv_š™
(cÚ¡ 
T_x_ssv_cÚfig
* cÚ¡ 
İt_Su³rvisÜCÚfig
);

115 
sšt16
 
x_ssv_g‘_¡©us
(
T_x_ssv_¡©us
* cÚ¡ 
İt_Su³rvisÜStus
);

116 
sšt16
 
x_ssv_Œigg”
(cÚ¡ 
ušt16
 
ou16_Trigg”Ty³
);

117 
sšt16
 
x_ssv_£t_Œigg”
(cÚ¡ 
ušt16
 
ou16_Trigg”S‹
);

118 
x_ssv_»£t
();

123 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_stdtypes.h

20 #iâdeà
_X_STDTYPES_H


21 
	#_X_STDTYPES_H


	)

25 
	~"¡wty³s.h
"

26 
	~"¡w”rÜs.h
"

27 
	~"¡dty³s.h
"

28 
	~"memty³s.h
"

31 #ifdeà
__ılu¥lus


38 
	#X_OFF
 (0)

39 
	#X_ON
 (1)

40 

	)

46 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_sys.h

18 #iâdeà
_X_SYS_H


19 
	#_X_SYS_H


	)

23 
	~"x_¡dty³s.h
"

24 
	~"x_sys_adc.h
"

27 #ifdeà
__ılu¥lus


35 #ià((
__GNUC__
 !ğ3è|| (
__GNUC_MINOR__
 !ğ4è|| (
__GNUC_PATCHLEVEL__
 != 5))

36 #”rÜ 
This
 
Lib¿ry
 
should
 
Úly
 
be
 
u£d
 
w™h
 
TRICORE
 
GCC
 
Comp”
 
v”siÚ
 3.4.5

53 
	#X_SYS_RELAY_CH_MAX
 (1u)

54 
	#X_SYS_RELAY_01
 (0u)

55 

	)

56 
	#X_SYS_SENSOR_SUPPLY_CH_MAX
 (1u)

57 
	#X_SYS_SENSOR_SUPPLY_01
 (0u)

58 

	)

59 
	#X_SYS_LED_CH_MAX
 (1u)

60 
	#X_SYS_LED_01
 (0u)

61 
	#X_SYS_LED_COLOR_RED
 (0u)

62 
	#X_SYS_LED_COLOR_ORANGE
 (35u)

63 
	#X_SYS_LED_COLOR_YELLOW
 (70u)

64 
	#X_SYS_LED_COLOR_GREEN
 (100u)

65 

	)

66 
	#X_SYS_TEMP_CH_MAX
 (2u)

67 
	#X_SYS_TEMP_BOARD
 (0u)

68 
	#X_SYS_TEMP_CPU
 (1u)

69 

	)

70 
	#X_SYS_CPUWD_OFF
 (0xF0A5u)

71 

	)

73 
	#X_SYS_HW_VERSION_A
 0x0000

74 
	#X_SYS_HW_VERSION_C
 0x0001

75 
	#X_SYS_HW_VERSION_C2
 0x0002

76 

	)

77 
	#X_SYS_COMPONENT_LIBRARY
 (0)

78 
	#X_SYS_COMPONENT_FLASH_LOADER
 (1)

79 
	#X_SYS_COMPONENT_EEPROM_MAPPING
 (2)

80 
	#X_SYS_COMPONENT_SSV
 (3)

81 
	#X_SYS_COMPONENT_SSV_PROGRAM
 (4)

82 
	#X_SYS_COMPONENT_EXT_FLASH_BOOT
 (5)

83 
	#X_SYS_COMPONENT_MAINBOARD
 (6)

84 
	#X_SYS_COMPONENT_CPU
 (7)

85 
	#X_SYS_COMPONENT_MAINBOARD_FPGA
 (8)

86 
	#X_SYS_COMPONENT_MODULE_FPGA
 (9)

87 
	#X_SYS_COMPONENT_CHANNEL_MAX
 (10)

	)

97 #ifdeà
__ılu¥lus


98 
Çme¥aû
 
¡w_£pi


100 
	~"hµ/x_sys.hµ
"

109 
ušt16
 
u16_Ty³
;

110 
ušt16
 
u16_V”siÚ
;

111 } 
	tT_x_sys_šfo
;

115 
ušt16
 
u16_ExpBßrdId
;

116 
ušt16
 
u16_A¹işeV”siÚ
;

117 
ušt32
 
u32_A¹işeNumb”
;

118 
ušt16
 
u16_SwIÁ”çû
;

119 
ch¬n
 
aú_S”ŸlNumb”
[14];

120 } 
	tT_x_sys_expbßrd_šfo
;

124 
ušt16
 
u16_CÏss
;

125 
ušt16
 
u16_Id
;

126 
ušt32
 
u32_Add»ss
;

127 } 
	tT_x_sys_Œ­
;

131 
ušt8
 
au8_S”ŸlNumb”
[6];

132 
ušt32
 
u32_A¹işeNumb”
;

133 
ch¬n
 
aú_DeviûID
[17];

134 
ušt8
 
au8_CommissiÚšgD©e
[3];

135 
ušt8
 
au8_La¡Te¡D©e
[3];

136 
ch¬n
 
aú_Com·nyID
[6];

137 
ch¬n
 
aú_A¹işeV”siÚ
[17];

138 
ch¬n
 
aú_IÁ”ÇlS”ŸlNumb”
[11];

139 } 
	tT_x_sys_logi¡ic_d©a
;

144 
ušt16
 
u16_Lše
;

145 
sšt16
 
s16_E¼Ü
;

146 } 
	tT_x_sys_š™_”r
;

151 
T_x_sys_šfo
 
t_MašbßrdInfo
;

152 
T_x_sys_šfo
 
t_CpuInfo
;

153 
T_x_sys_šfo
 
t_Su³rvisÜInfo
;

154 
T_x_sys_expbßrd_šfo
 
©_ExpBßrdInfo
[6];

155 
T_x_sys_logi¡ic_d©a
 
t_Logi¡icD©a
;

156 
ušt16
 
u16_CpuF»q
;

157 
ušt16
 
u16_SysF»q
;

158 
ušt32
 
u32_RamSize
;

159 
ušt32
 
u32_RomSize
;

160 
ušt32
 
u32_E•romSize
;

161 
ušt32
 
u32_H—pSize
;

162 
ušt32
 
u32_H—pSizeIÁ”Çl
;

163 
ušt32
 
u32_La¡Re£t
;

164 
T_x_sys_Œ­
 
t_La¡T¿p
;

165 
T_x_sys_š™_”r
 
t_In™E¼
;

166 } 
	tT_x_sys_sy¡em_šfÜm©iÚ
;

171 (*
PR_x_sys_OffR—ùiÚC®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
);

176 
sšt16
 
x_sys_š™
(
T_x_sys_sy¡em_šfÜm©iÚ
* cÚ¡ 
İt_SysInfo
);

177 
sšt16
 
x_sys_g‘_sy¡em_šfÜm©iÚ
(
T_x_sys_sy¡em_šfÜm©iÚ
 * cÚ¡ 
İt_SysInfo
);

178 
sšt16
 
x_sys_g‘_compÚ’t_šfo
(cÚ¡ 
ušt16
 
ou16_CompÚ’t
, 
T_x_sys_šfo
 * cÚ¡ 
İt_Info
);

180 
sšt16
 
x_sys_š™_off_»aùiÚ
(cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
, cÚ¡ 
PR_x_sys_OffR—ùiÚC®lback
 
İr_OffC®lback
);

182 
sšt16
 
x_sys_şo£
();

183 
x_sys_»£t
();

184 
sšt16
 
x_sys_Œigg”_ıu_w©chdog
(cÚ¡ 
ušt16
 
ou16_WDTimeout
);

185 
ušt32
 
x_sys_’‹r_ü™iÿl
(è
ALIAS
(
x_os_’‹r_ü™iÿl
);

186 
x_sys_Ëave_ü™iÿl
(cÚ¡ 
ušt32
 
ou32_P»viousS‹
è
ALIAS
(
x_os_Ëave_ü™iÿl
);

188 
sšt16
 
x_sys_g‘_ign™iÚ
(
ušt8
* cÚ¡ 
İu8_OnOff
);

189 
sšt16
 
x_sys_¡ay_®ive
(cÚ¡ 
ušt8
 
ou8_OnOff
);

190 
sšt16
 
x_sys_£t_»Ïy
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
);

191 
sšt16
 
x_sys_£t_®l_»Ïys
(cÚ¡ 
ušt8
 
ou8_OnOff
);

192 
sšt16
 
x_sys_£t_b“³r
(cÚ¡ 
ušt32
 
ou32_F»qu’cy
);

193 
sšt16
 
x_sys_£t_Ëd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
ušt8
 
ou8_OnOff
, cÚ¡ ušt16 
ou16_CŞÜ
);

194 
sšt16
 
x_sys_£t_£nsÜ_suµly
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ 
sšt32
 
os32_VŞge
);

195 
sšt16
 
x_sys_g‘_‹m³¿tu»
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, sšt16* cÚ¡ 
İs16_V®ue
);

197 
sšt16
 
x_sys_g‘_adc_¿w_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_V®ue
);

198 
sšt16
 
x_sys_g‘_adc_¿w_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

199 
sšt16
 
x_sys_g‘_adc_v®ue
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_V®ue
);

200 
sšt16
 
x_sys_g‘_adc_v®ue_sÿËd
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, 
sšt32
* cÚ¡ 
İs32_V®ue
);

201 
sšt16
 
x_sys_£t_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, cÚ¡ ušt16 
ou16_F‹r
 );

202 
sšt16
 
x_sys_g‘_adc_f‹r
(cÚ¡ 
ušt16
 
ou16_ChªÃl
, ušt16* cÚ¡ 
İu16_F‹r
);

204 
ušt32
 
x_sys_g‘_time_ms
();

205 
ušt64
 
x_sys_g‘_time_us
();

206 
x_sys_d–ay_us
(cÚ¡ 
ušt32
 
ou32_D–ay_us
);

207 
ušt64
 
x_sys_g‘_tim”
();

212 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_sys_adc.h

18 #iâdeà
_X_SYS_ADC_H


19 
	#_X_SYS_ADC_H


	)

22 #ifdeà
__ılu¥lus


32 
	#X_ADC_CH_MAX
 (113U)

33 

	)

38 
	#X_ADC_I_PWM1
 (0U)

39 
	#X_ADC_I_PWM2
 (1U)

40 
	#X_ADC_I_PWM3
 (2U)

41 
	#X_ADC_I_PWM4
 (3U)

42 
	#X_ADC_I_PWM5
 (4U)

43 
	#X_ADC_I_PWM6
 (5U)

44 
	#X_ADC_I_PWM7
 (6U)

45 
	#X_ADC_I_PWM8
 (7U)

46 
	#X_ADC_EXPBOARD_A_AN4
 (8U)

47 
	#X_ADC_EXPBOARD_A_AN5
 (9U)

48 
	#X_ADC_EXPBOARD_A_AN6
 (10U)

49 
	#X_ADC_EXPBOARD_A_AN7
 (11U)

50 
	#X_ADC_EXPBOARD_A_AN8
 (12U)

51 
	#X_ADC_EXPBOARD_A_AN9
 (13U)

52 
	#X_ADC_2V56
 (14U)

53 
	#X_ADC_3V02_A
 (15U)

54 

	)

56 
	#X_ADC_I_DOUT9
 (16U)

57 
	#X_ADC_I_DOUT10
 (17U)

58 
	#X_ADC_I_DOUT11
 (18U)

59 
	#X_ADC_I_DOUT12
 (19U)

60 
	#X_ADC_U_DOUT9
 (20U)

61 
	#X_ADC_U_DOUT10
 (21U)

62 
	#X_ADC_U_DOUT11
 (22U)

63 
	#X_ADC_U_DOUT12
 (23U)

64 
	#X_ADC_EXPBOARD_B_AN4
 (24U)

65 
	#X_ADC_EXPBOARD_B_AN5
 (25U)

66 
	#X_ADC_EXPBOARD_B_AN6
 (26U)

67 
	#X_ADC_EXPBOARD_B_AN7
 (27U)

68 
	#X_ADC_1V50_A
 (28U)

69 
	#X_ADC_0V97_A
 (29U)

70 
	#X_ADC_EXPBOARD_A_AN10
 (30U)

71 
	#X_ADC_EXPBOARD_A_AN11
 (31U)

72 

	)

74 
	#X_ADC_I_PWM1_B
 (32U)

75 
	#X_ADC_I_PWM2_B
 (33U)

76 
	#X_ADC_I_PWM3_B
 (34U)

77 
	#X_ADC_I_PWM4_B
 (35U)

78 
	#X_ADC_I_PWM5_B
 (36U)

79 
	#X_ADC_I_PWM6_B
 (37U)

80 
	#X_ADC_I_PWM7_B
 (38U)

81 
	#X_ADC_I_PWM8_B
 (39U)

82 
	#X_ADC_EXPBOARD_C_AN4
 (40U)

83 
	#X_ADC_EXPBOARD_C_AN5
 (41U)

84 
	#X_ADC_1V65_A
 (42U)

85 
	#X_ADC_2V14_A
 (43U)

86 
	#X_ADC_EXPBOARD_B_AN8
 (44U)

87 
	#X_ADC_EXPBOARD_B_AN9
 (45U)

88 
	#X_ADC_EXPBOARD_B_AN10
 (46U)

89 
	#X_ADC_EXPBOARD_B_AN11
 (47U)

90 

	)

92 
	#X_ADC_I_DOUT9_B
 (48U)

93 
	#X_ADC_I_DOUT10_B
 (49U)

94 
	#X_ADC_I_DOUT11_B
 (50U)

95 
	#X_ADC_I_DOUT12_B
 (51U)

96 
	#X_ADC_U_DOUT9_B
 (52U)

97 
	#X_ADC_U_DOUT10_B
 (53U)

98 
	#X_ADC_U_DOUT11_B
 (54U)

99 
	#X_ADC_U_DOUT12_B
 (55U)

100 
	#X_ADC_2V05
 (56U)

101 
	#X_ADC_MIN
 (57U)

102 
	#X_ADC_EXPBOARD_C_AN6
 (58U)

103 
	#X_ADC_EXPBOARD_C_AN7
 (59U)

104 
	#X_ADC_EXPBOARD_C_AN8
 (60U)

105 
	#X_ADC_EXPBOARD_C_AN9
 (61U)

106 
	#X_ADC_EXPBOARD_C_AN10
 (62U)

107 
	#X_ADC_EXPBOARD_C_AN11
 (63U)

108 

	)

110 
	#X_ADC_0V97_B
 (64U)

111 
	#X_ADC_AIN5
 (65U)

112 
	#X_ADC_AIN4
 (66U)

113 
	#X_ADC_AIN9
 (67U)

114 
	#X_ADC_EXPBOARD_A_AN0
 (68U)

115 
	#X_ADC_AIN8
 (69U)

116 
	#X_ADC_EXPBOARD_A_AN2
 (70U)

117 
	#X_ADC_EXPBOARD_A_AN1
 (71U)

118 
	#X_ADC_1V90
 (72U)

119 
	#X_ADC_AIN13
 (73U)

120 
	#X_ADC_AIN12
 (74U)

121 
	#X_ADC_1V25
 (75U)

122 

	)

124 
	#X_ADC_AIN1
 (76U)

125 
	#X_ADC_0V55
 (77U)

126 
	#X_ADC_UE
 (78U)

127 
	#X_ADC_AIN10
 (79U)

128 
	#X_ADC_EXPBOARD_B_AN0
 (80U)

129 
	#X_ADC_I_UB1
 (81U)

130 
	#X_ADC_2V14_B
 (82U)

131 
	#X_ADC_EXPBOARD_B_AN1
 (83U)

132 
	#X_ADC_EXPBOARD_A_AN3
 (84U)

133 
	#X_ADC_AIN14
 (85U)

134 
	#X_ADC_1V65_B
 (86U)

135 
	#X_ADC_TEMP_BOARD
 (87U)

136 

	)

138 
	#X_ADC_AIN2
 (88U)

139 
	#X_ADC_AIN6
 (89U)

140 
	#X_ADC_U_EXT1
 (90U)

141 
	#X_ADC_1V50_B
 (91U)

142 
	#X_ADC_EXPBOARD_C_AN0
 (92U)

143 
	#X_ADC_0V25
 (93U)

144 
	#X_ADC_EXPBOARD_B_AN2
 (94U)

145 
	#X_ADC_2V50
 (95U)

146 
	#X_ADC_EXPBOARD_B_AN3
 (96U)

147 
	#X_ADC_AIN15
 (97U)

148 
	#X_ADC_U_UB1
 (98U)

149 
	#X_ADC_U_UC1
 (99U)

150 

	)

152 
	#X_ADC_AIN3
 (100U)

153 
	#X_ADC_AIN7
 (101U)

154 
	#X_ADC_0V82
 (102U)

155 
	#X_ADC_AIN11
 (103U)

156 
	#X_ADC_3V02_B
 (104U)

157 
	#X_ADC_EXPBOARD_A_AN12
 (105U)

158 
	#X_ADC_EXPBOARD_C_AN2
 (106U)

159 
	#X_ADC_EXPBOARD_C_AN1
 (107U)

160 
	#X_ADC_EXPBOARD_C_AN3
 (108U)

161 
	#X_ADC_0V06
 (109U)

162 
	#X_ADC_EXPBOARD_B_AN12
 (110U)

163 
	#X_ADC_EXPBOARD_C_AN12
 (111U)

164 

	)

165 
	#X_ADC_TEMP_CPU
 (112U)

166 

	)

169 
	#X_ADC_12V
 
X_ADC_1V90


170 
	#X_ADC_6V0_A
 
X_ADC_3V02_A


171 
	#X_ADC_6V0_B
 
X_ADC_3V02_B


172 
	#X_ADC_5V0
 
X_ADC_2V50


173 
	#X_ADC_5VANA_A
 
X_ADC_2V14_A


174 
	#X_ADC_5VANA_B
 
X_ADC_2V14_B


175 
	#X_ADC_3V5
 
X_ADC_0V55


176 
	#X_ADC_UEBU
 
X_ADC_1V65_A


177 
	#X_ADC_3V3
 
X_ADC_1V65_B


178 
	#X_ADC_USSV_A
 
X_ADC_0V97_A


179 
	#X_ADC_USSV_B
 
X_ADC_0V97_B


180 
	#X_ADC_UAREF
 
X_ADC_0V25


181 
	#X_ADC_UDREF
 
X_ADC_0V82


182 

	)

184 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_tim.h

19 #iâdeà
_X_TIM_H


20 
	#_X_TIM_H


	)

24 
	~"x_¡dty³s.h
"

27 #ifdeà
__ılu¥lus


34 
	#X_TIM_CH_MAX
 (1u)

35 

	)

36 
	#X_TIM_PRIO_MAX
 (1u)

37 
	#X_TIM_PRIO_01
 (0u)

38 

	)

39 
	#X_TIM_DELAY_MAX
 (0xFFFFu)

40 
	#X_TIM_CYCLE_MAX
 (0xFFFFu)

41 

	)

50 #ifdeà
__ılu¥lus


51 
Çme¥aû
 
¡w_£pi


53 
	~"hµ/x_tim.hµ
"

61 (*
PR_x_tim_Tim”C®lback
)(cÚ¡ 
	tušt32
 
	tou32_C®lbackP¬am‘”
, * cÚ¡ 
	tİv_HªdË
);

66 
sšt16
 
x_tim_š™
(cÚ¡ 
ušt16
 
ou16_PriÜ™y
, cÚ¡ 
ušt32
 
ou32_C®lbackP¬am‘”
,

67 cÚ¡ 
PR_x_tim_Tim”C®lback
 
İr_Tim”C®lback
, ** cÚ¡ 
İpv_HªdË
);

68 
sšt16
 
x_tim_şo£
(* cÚ¡ 
İv_HªdË
);

69 
sšt16
 
x_tim_£t
(* cÚ¡ 
İv_HªdË
, cÚ¡ 
ušt32
 
ou32_D–ayTime
, cÚ¡ ušt32 
ou32_CyşeTime
);

74 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_uti.h

18 #iâdeà
_X_UTI_H


19 
	#_X_UTI_H


	)

23 
	~"x_¡dty³s.h
"

26 #ifdeà
__ılu¥lus


40 #ifdeà
__ılu¥lus


41 
Çme¥aû
 
¡w_£pi


43 
	~"hµ/x_uti.hµ
"

70 
sšt16
 
x_uti_ÿlc_üc_16
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
, 
ušt16
* cÚ¡ 
İu16_Crc
);

95 
sšt16
 
x_uti_ÿlc_üc_¡w
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ 
ušt8
* cÚ¡ 
İu8_D©a
, 
ušt16
* cÚ¡ 
İu16_Crc
);

120 
sšt16
 
x_uti_ÿlc_üc_ŒicÜe
(cÚ¡ 
ušt32
 
ou32_CouÁ
, cÚ¡ ušt32* cÚ¡ 
İu32_D©a
, ušt32* cÚ¡ 
İu32_Crc
);

125 #ifdeà
__ılu¥lus


	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\AppConfig.h

1 #iâdeà
_APPCONFIG_H


2 
	#_APPCONFIG_H


	)

4 
	~"x_sys.h
"

5 
	~"x_lib.h
"

6 
	~"x_mpu.h
"

7 
	~"x_æ.h
"

8 
	~"x_os.h
"

9 
	~"m©h.h
"

10 
	~"DeviûOD.h
"

11 
	~"CommIÁ”çû.h
"

12 
	~"SaãtyIÁ”çû.h
"

13 
	~"HubSy¡emIÁ”çû.h
"

14 
	~"MuÉiIOIÁ”çû.h
"

15 
	~"MESCÚfig.h
"

18 
	#PrioHubSySCÚŒŞ
 1

	)

19 
	#PrioHubSysMªage
 3

	)

21 
	#PrioSaãty
 5

	)

22 
	#PrioIOPÜt
 4

	)

23 
	#PrioRemÙeCÚŒŞ
 2

	)

24 
	#PrioRemÙeCÚŒŞDi¥Ïy
 6

	)

26 
	#Ev’t_HubSysCÚŒŞ
 
X_OS_EVENT_01


	)

27 
	#Ev’t_RC
 
X_OS_EVENT_02


	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\MESConfig.h

1 #iâdeà
_MESCÚfig_H


2 
	#_MESCÚfig_H


	)

7 
	#SÏveCPU
 1

	)

12 
	#pi
 3.1416

	)

13 
	#Rad2G¿d
 (180.0/
pi
)

	)

14 
	#G¿d2Rad
 (
pi
/180.0)

	)

16 
	#L
 2.63

17 
	#B
 1.03

18 

	)

23 #ifdeà
Ma¡”CPU


24 
	#IDRemÙeCÚŒŞ
 0x04

	)

25 
	#BusChRemÙeCÚŒŞ
 0

	)

26 
	#IDInv”‹r111
 0x09

	)

27 
	#BusChInv”‹r111
 1

	)

28 
	#IDInv”‹r112
 0x0a

	)

29 
	#BusChInv”‹r112
 1

	)

30 
	#IDInv”‹r121
 0x0b

	)

31 
	#BusChInv”‹r121
 1

	)

32 
	#IDInv”‹r122
 0x0c

	)

33 
	#BusChInv”‹r122
 1

	)

34 
	#IDInv”‹r211
 0x10

	)

35 
	#BusChInv”‹r211
 1

	)

36 
	#IDInv”‹r212
 0x0f

	)

37 
	#BusChInv”‹r212
 1

	)

38 
	#IDInv”‹r221
 0x0e

	)

39 
	#BusChInv”‹r221
 1

	)

40 
	#IDInv”‹r222
 0x0d

	)

41 
	#BusChInv”‹r222
 1

	)

42 
	#IDCam”a1
 0x05

	)

43 
	#BusChCam”a1
 3

	)

44 
	#IDCam”a2
 0x06

	)

45 
	#BusChCam”a2
 3

	)

48 #ifdeà
SÏveCPU


49 
	#IDInv”‹rHyd¿ulic
 0x08

	)

50 
	#BusChInv”‹rHyd¿ulic
 1

	)

56 
	#NODE_START
 0x01

	)

57 
	#NODE_STOP
 0x02

	)

58 
	#NODE_PREOP
 0x80

	)

59 
	#NODE_RESET_APPL
 0x81

	)

60 
	#NODE_RESET_COM
 0x82

	)

65 
	#NMTStusNOT_ACTIVE
 0x00

	)

66 
	#NMTStusNOT_STARTED
 0x01

	)

67 
	#NMTStusALIVE
 0x02

	)

68 
	#NMTStusDEAD
 0x03

	)

73 
	#NodeStusUNKNOWN
 0x00

	)

74 
	#NodeStusDISCONNECTING
 0x01

	)

75 
	#NodeStusCONNECTING
 0x02

	)

76 
	#NodeStusPREPARING
 0x03

	)

77 
	#NodeStusPREPARED
 0x04

	)

78 
	#NodeStusOPERATIONAL
 0x05

	)

79 
	#NodeStusPRE_OPERATIONAL
 0x7f

	)

	@C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\main.c

21 
	~"AµCÚfig.h
"

28 
ušt8
 *
	gsysStus
;

29 
ušt32
 *
	gsysCyşeTime
;

30 
ušt32
 *
	gsysCÚŒŞWÜd
;

31 
ušt32
 *
	gsysCPUTem³¿tur
;

32 
ušt32
 *
	gsysCPUVŞgeUb1
;

33 
ušt32
 *
	gsysCPUCu¼’tUb1
;

34 
ušt32
 *
	gsysCPUVŞgeExt
;

35 
ušt32
 *
	gsysCPUVŞgeUC1
;

37 
T_x_sys_sy¡em_šfÜm©iÚ
 
	gtSys
;

50 cÚ¡ 
T_x_lib_šfo
 
gt_AµInfo
 
	gX_MEM_APPLICATION_INFO
 =

52 
X_LIB_INFO_APPL_MAGIC
,

53 
X_LIB_INFO_STRUCT_VERSION
,

54 
X_LIB_INFO_CONTAINS_DEVICE_ID
 |

55 
X_LIB_INFO_CONTAINS_DATE_TIME
 |

56 
X_LIB_INFO_CONTAINS_PROJECT_NAME
 |

57 
X_LIB_INFO_CONTAINS_PROJECT_VERSION
 |

58 
X_LIB_INFO_CONTAINS_ADDITIONAL_INFO
,

59 
X_LIB_INFO_DEVICE_ID
,

60 
__DATE__
,

61 
__TIME__
,

64 
X_LIB_INFO_CONTAINS_ADDITIONAL_MAX
,

72 
	$In™Sys
(){

73 
sšt16
 
s16_E¼Ü
;

75 
s16_E¼Ü
 = 
	`x_sys_š™
(&
tSys
);

76 
s16_E¼Ü
 |ğ
	`x02_sys_š™
();

77 
s16_E¼Ü
 |ğ
	`x05_sys_š™
();

79 ià(
s16_E¼Ü
 =ğ
C_NO_ERR
)

82 
	`x_sys_¡ay_®ive
(
X_ON
);

83 
	`x_sys_£t_®l_»Ïys
(
X_ON
);

87 
	`x_sys_d–ay_us
(1000000);

88 
	}
}

96 
	$maš
()

98 
ušt8
 
u8_Ign™iÚ
;

99 
ušt32
 
timeSmp
;

100 
ušt16
 
u16_Temp
;

101 
sšt32
 
s32_Temp
;

102 
æßt32
 
f32_Temp
;

103 
ušt16
 
Addr
;

104 
ušt32
 
V”siÚNum
;

106 
	`In™Sys
();

109 
	`x_os_š™
(
X_OS_HEAP_DEFAULT
);

111 
	`In™TaskCommIÁ”çû
();

112 
	`In™HubSy¡em
();

113 
	`In™Saãty
();

114 
	`In™MuÉiIO
();

115 
	`In™RemÙeCÚŒŞ
();

117 
sysCyşeTime
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysCyşeTime
,
Ty³U32
,0); *sysCycleTime=0;

118 
sysStus
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexSysStus
,
Ty³U8
,0); *sysStatus=0x00;

119 
sysCPUTem³¿tur
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUTem³¿tur
,
Ty³U32
,0); *sysCPUTemperatur=0;

120 
sysCPUVŞgeUb1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUb1
,
Ty³U32
,0); *sysCPUVoltageUb1=0;

121 
sysCPUCu¼’tUb1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUCu¼’tUb1
,
Ty³U32
,0); *sysCPUCurrentUb1=0;

122 
sysCPUVŞgeExt
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeExt
,
Ty³U32
,0); *sysCPUVoltageExt=0;

123 
sysCPUVŞgeUC1
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCPUVŞgeUC1
,
Ty³U32
,0); *sysCPUVoltageUC1=0;

124 
sysCÚŒŞWÜd
=
	`BšdODMem
(
DevP¬aS¹Index
,
SubšdexCÚŒŞWÜd
,
Ty³U32
,0); *sysControlWord=0;

126 
V”siÚNum
=
NodeHWV”siÚ
;

127 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexHwty³
,&
Addr
,&
V”siÚNum
,
S‘OD
);

128 
V”siÚNum
=
NodeS”ŸlNumm”
;

129 
	`G‘S‘OD
(
DevP¬aS¹Index
,
SubšdexS”Nr
,&
Addr
,&
V”siÚNum
,
S‘OD
);

131 
	`x_os_¡¬t
(200);

133 
TRUE
)

135 
timeSmp
=(
ušt32
)(
	`x_sys_g‘_time_us
());

137 
	`x_sys_g‘_ign™iÚ
(&
u8_Ign™iÚ
);

139 ià(
u8_Ign™iÚ
!=0x01)

142 *
sysStus
&=~0x01;

143 
	`x_sys_d–ay_us
(3000000);

144 
	`x_sys_şo£
();

147 *
sysStus
|=0x01;

149 if(*
sysCÚŒŞWÜd
&0x00000004){

150 *
sysCÚŒŞWÜd
&=~0x00000004;

151 
	`x_sys_d–ay_us
(500000);

152 
	`x_sys_şo£
();

155 
	`TaskCommIÁ”çû
();

156 
	`HubSysAwake
();

157 
	`TaskRemÙeCÚŒŞAwake
();

160 
	`x_sys_g‘_‹m³¿tu»
(
X_SYS_TEMP_CPU
,&
u16_Temp
); *
sysCPUTem³¿tur
=(
ušt32
)u16_Temp*100;

161 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_UB1
,&
s32_Temp
); *
sysCPUVŞgeUb1
=(
ušt32
)s32_Temp;

162 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_I_UB1
,&
s32_Temp
); *
sysCPUCu¼’tUb1
=(
ušt32
)s32_Temp/1000;

163 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_EXT1
,&
s32_Temp
); *
sysCPUVŞgeExt
=(
ušt32
)s32_Temp;

164 
	`x_sys_g‘_adc_v®ue_sÿËd
(
X_ADC_U_UC1
,&
s32_Temp
); *
sysCPUVŞgeUC1
=(
ušt32
)s32_Temp;

166 *
sysCyşeTime
=(
ušt32
)(
	`x_sys_g‘_time_us
())-
timeSmp
;

168 
	}
}

	@
1
.
0
99
9432
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenComm.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenComm.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CANopenDeviceConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CommInterface.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\CommInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\PDOConfig.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_base.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_eb10.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_eb10_sl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_sl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\col2_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\CommPort\col2\templates\col2_config.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_Manage.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_Manage.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\EEProm_manager\eep_memmap.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystem.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystem.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemControl.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\HubSystem\HubSystemInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIO.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIO.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIOConfig.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\MultiIO\MultiIOInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\DeviceOD.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\DeviceOD.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\ODContent.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\OD\ODInfo.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControl.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplay.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplayErrorText.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlDisplayErrorText.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\RemoteControl\RemoteControlInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\Safety.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\Safety.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSys.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSysData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyHubSysData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyInterface.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyNormal.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLC.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLCData.c
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\BSP\Safety\SafetyPLCData.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_lib_string.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb02\x02_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_lib_string.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\eb05\x05_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\intrinsics.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\memtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stdtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stwerrors.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\stwtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_can.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_can_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eb.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eep.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_eep_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err_defines.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_err_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_esx3xm.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_fl.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_fl_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_in.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_lib.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_mpu.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_mpu_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_mbox.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_mutex.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_sema.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_signal.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_os_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_out.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_out_relay.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ser.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ser_types.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_ssv.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_stdtypes.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_sys.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_sys_adc.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_tim.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\libs\esx3xm\x_uti.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\AppConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\MESConfig.h
C:\Users\wsun\Dropbox\HIT_Workspace\auftrage_deutschebahn_STWSlave\src\main.c
